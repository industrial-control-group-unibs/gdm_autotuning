***********************************************************************
*
*	CODE GENERATION LISTING FOR: base_proj
*	COMPILER VERSION: 5.98.9.8
*
***********************************************************************

**************************************************
	List function: sign
**************************************************

FUNCTION sign : REAL

	VAR_INPUT
	x : REAL; 
	END_VAR

	*** Function data allocation

	Par x: REGISTER d4

#0		{SRC:sign}
#1		
#2		
#3			(* IF x > 0.0 *)
#4			LD		x	{L:1}
(*) UNDEF
A0010080  F1F0400B		mov d15, d4

#5			GT		0.0	{L:1}
(*) REAL
A0010084  500000BB		mov.u d5, #0x0000 ; COSTREAL 0.000000
A0010088  5000059B		addih d5, d5, #0x0000
A001008C  F0015F4B		cmp.f d15, d15, d5
A0010090  F2004F8B		eq d15, d15, #4

#6			JMPCN	$label0	{L:1}
(-) BOOL
A0010094  000A0FDF		jeq d15, #0, #0x000A ; JUMP 0xA00100A8

#7		
#8			(* THEN *)
#9		
#10				(* sign := 1.0; *)
#11				LD		1.0	{L:2}
(*) UNDEF
A0010098  F00000BB		mov.u d15, #0x0000 ; COSTREAL 1.000000
A001009C  F3F80F9B		addih d15, d15, #0x3F80

#12				ST		sign	{L:2}
(*) REAL
A00100A0  21F0F00B		mov d2, d15

#13				JMP		$label2
(-) REAL
A00100A4  001C001D		j #0x00001C ; JUMP 0xA00100DC

#14		$label0:
#15		
#16			(* ELSIF x < 0.0 *)
#17			LD		x	{L:3}
(*) UNDEF
A00100A8  F1F0400B		mov d15, d4

#18			LT		0.0	{L:3}
(*) REAL
A00100AC  500000BB		mov.u d5, #0x0000 ; COSTREAL 0.000000
A00100B0  5000059B		addih d5, d5, #0x0000
A00100B4  F0015F4B		cmp.f d15, d15, d5
A00100B8  F2001F8B		eq d15, d15, #1

#19			JMPCN	$label1	{L:3}
(-) BOOL
A00100BC  000A0FDF		jeq d15, #0, #0x000A ; JUMP 0xA00100D0

#20		
#21			(* THEN *)
#22		
#23				(* sign := -1.0; *)
#24				LD		-1.0	{L:4}
(*) UNDEF
A00100C0  F00000BB		mov.u d15, #0x0000 ; COSTREAL -1.000000
A00100C4  FBF80F9B		addih d15, d15, #0xBF80

#25				ST		sign	{L:4}
(*) REAL
A00100C8  21F0F00B		mov d2, d15

#26				JMP		$label2
(-) REAL
A00100CC  0008001D		j #0x000008 ; JUMP 0xA00100DC

#27		$label1:
#28		
#29			(* ELSE *)
#30		
#31				(* sign := 0.0; *)
#32				LD		0.0	{L:6}
(*) UNDEF
A00100D0  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A00100D4  F0000F9B		addih d15, d15, #0x0000

#33				ST		sign	{L:6}
(*) REAL
A00100D8  21F0F00B		mov d2, d15

A00100DC  0180000D		ret

END_FUNCTION
**************************************************
	List function: _BasicVersion
**************************************************

FUNCTION _BasicVersion : UDINT

{ DE:"LIBRERIA: Basic

Rev.01.00.00	18/02/2002 	by Axel/SSS
Rev.01.01.00	27/05/2008 	Rnc

standard IEC 1131 functions and function blocks :
Timer;
Bistable;
Rising and falling edges detection;
Flip-flop.

Note:
no system or global variables are used, so that the library an be used regardless the FW version" }

	VAR_INPUT
	in : BOOL; 
	END_VAR

	*** Function data allocation

	Par in: REGISTER d4

#0		{SRC:_BasicVersion}
#1		
#2		
#3			LD		in
(*) UNDEF
A00100E0  F1F0400B		mov d15, d4

#4			JMPC	l0_Version
(-) BOOL
A00100E4  800E0FDF		jne d15, #0, #0x000E ; JUMP 0xA0010100

#5		
#6			LD		0
(*) UNDEF
A00100E8  F000003B		mov d15, #0

#7			ST		_BasicVersion
(*) USINT
A00100EC  21F0F00B		mov d2, d15

#8		
#9			RET
(-) USINT
A00100F0  FA001091		movh.a a15, #0xA001 ; 0xA0010108
A00100F4  4008FFD9		lea a15,[a15]0x0108
A00100F8  0000000D		nop
A00100FC  00300F2D		ji a15

#10		
#11		l0_Version:
#12		
#13			(*	Indice di revisione.						*)
#14			(*	L'indice si legge nella seguente maniera:	*)
#15			(*	XXYYZZ => XX.YY.ZZ 							*)
#16			(*	XX = Revisione								*)
#17			(*	YY = Sotto revisione						*)
#18			(*	ZZ = Correzione								*)
#19		
#20			LD		010100
(*) UNDEF
A0010100  F277403B		mov d15, #10100

#21			ST		_BasicVersion
(*) UINT
A0010104  21F0F00B		mov d2, d15

A0010108  0180000D		ret

END_FUNCTION
**************************************************
	List function: _ControlVersion
**************************************************

FUNCTION _ControlVersion : UDINT

{ DE:"LIBRERIA: Control

Rev.01.10.00	14/7/2003 	by SSS
Rev.01.20.00	27/05/2008 	Rnc

Regulation and control funcions and function blocks
Derivative;
Integral;
Low pass filter;
PID;
Delay;
Torque feed.fwd calculation
Diameter calculation;
Limits;
Ramp;
Up down.

Notes:
The library doesn't contain references to global variables, thus it is compatible with all the FW versions." }

	VAR_INPUT
	in : BOOL; 
	END_VAR

	*** Function data allocation

	Par in: REGISTER d4

#0		{SRC:_ControlVersion}
#1		
#2		
#3			LD		in
(*) UNDEF
A001010C  F1F0400B		mov d15, d4

#4			JMPC	l0_Version
(-) BOOL
A0010110  800E0FDF		jne d15, #0, #0x000E ; JUMP 0xA001012C

#5		
#6			LD		0
(*) UNDEF
A0010114  F000003B		mov d15, #0

#7			ST		_ControlVersion
(*) USINT
A0010118  21F0F00B		mov d2, d15

#8		
#9			RET
(-) USINT
A001011C  FA001091		movh.a a15, #0xA001 ; 0xA0010134
A0010120  4034FFD9		lea a15,[a15]0x0134
A0010124  0000000D		nop
A0010128  00300F2D		ji a15

#10		
#11		l0_Version:
#12		
#13			(*	Indice di revisione.						*)
#14			(*	L'indice si legge nella seguente maniera:	*)
#15			(*	XXYYZZ => XX.YY.ZZ 							*)
#16			(*	XX = Revisione								*)
#17			(*	YY = Sotto revisione						*)
#18			(*	ZZ = Correzione								*)
#19		
#20			LD		012000
(*) UNDEF
A001012C  F2EE003B		mov d15, #12000

#21			ST		_ControlVersion
(*) UINT
A0010130  21F0F00B		mov d2, d15

A0010134  0180000D		ret

END_FUNCTION
**************************************************
	List function: LIMIT_R
**************************************************

FUNCTION LIMIT_R : REAL

{ DE:"LIMITI REAL

Version 1.0	3/8/2001		by SSS

Limits function with float vars

Notes:
	- If highLimit<lowLimit then highLimit=lowLimit


" }

	VAR_INPUT
	in : REAL; { DE:"Input var" } 
	lowLimit : REAL; { DE:"Ouput low limit" } 
	highLimit : REAL; { DE:"Output high limit" } 
	END_VAR

	*** Function data allocation

	Par in: REGISTER d4
	Par lowLimit: REGISTER d5
	Par highLimit: REGISTER d6

#0		{SRC:LIMIT_R}
#1			(*	check limits	*)
#2		
#3			LD		highLimit
(*) UNDEF
A0010138  F1F0600B		mov d15, d6

#4			LT		lowLimit
(*) REAL
A001013C  F0015F4B		cmp.f d15, d15, d5
A0010140  F2001F8B		eq d15, d15, #1

#5			JMPCN	l0
(-) BOOL
A0010144  00060FDF		jeq d15, #0, #0x0006 ; JUMP 0xA0010150

#6		
#7			(*	if highLimit<lowLimit then highLimit=lowLimit	*)
#8		
#9			LD		lowLimit
(*) UNDEF
A0010148  F1F0500B		mov d15, d5

#10			ST		highLimit
(*) REAL
A001014C  61F0F00B		mov d6, d15

#11		
#12		l0:
#13		
#14			(*	input >= low limit ?	*)
#15		
#16			LD		in
(*) UNDEF
A0010150  F1F0400B		mov d15, d4

#17			GE		lowLimit
(*) REAL
A0010154  F0015F4B		cmp.f d15, d15, d5
A0010158  F2201F8B		ne d15, d15, #1

#18			JMPC	l1
(-) BOOL
A001015C  800E0FDF		jne d15, #0, #0x000E ; JUMP 0xA0010178

#19		
#20			(*	set output to low limit	*)
#21		
#22			LD		lowLimit
(*) UNDEF
A0010160  F1F0500B		mov d15, d5

#23			ST		LIMIT_R
(*) REAL
A0010164  21F0F00B		mov d2, d15

#24		
#25			RET
(-) REAL
A0010168  FA001091		movh.a a15, #0xA001 ; 0xA00101AC
A001016C  602CFFD9		lea a15,[a15]0x01AC
A0010170  0000000D		nop
A0010174  00300F2D		ji a15

#26		
#27		l1:
#28		
#29			(*	input  <= high limit	*)
#30		
#31			LD		in
(*) UNDEF
A0010178  F1F0400B		mov d15, d4

#32			LE		highLimit
(*) REAL
A001017C  51F0600B		mov d5, d6
A0010180  F0015F4B		cmp.f d15, d15, d5
A0010184  F2204F8B		ne d15, d15, #4

#33			JMPC	l2
(-) BOOL
A0010188  800E0FDF		jne d15, #0, #0x000E ; JUMP 0xA00101A4

#34		
#35			(*	set output to high limit	*)
#36		
#37			LD		highLimit
(*) UNDEF
A001018C  F1F0600B		mov d15, d6

#38			ST		LIMIT_R
(*) REAL
A0010190  21F0F00B		mov d2, d15

#39		
#40			RET
(-) REAL
A0010194  FA001091		movh.a a15, #0xA001 ; 0xA00101AC
A0010198  602CFFD9		lea a15,[a15]0x01AC
A001019C  0000000D		nop
A00101A0  00300F2D		ji a15

#41		
#42		l2:
#43		
#44			(*     out = input		*)
#45		
#46			LD		in
(*) UNDEF
A00101A4  F1F0400B		mov d15, d4

#47			ST		LIMIT_R
(*) REAL
A00101A8  21F0F00B		mov d2, d15

A00101AC  0180000D		ret

END_FUNCTION
**************************************************
	List function: _GeneralVersion
**************************************************

FUNCTION _GeneralVersion : UDINT

{ DE:"LIBRARY: General

Rev.02.00.00    10/06/2008


library with general functions and FB:
bits reading from a word;
bits writing in a word;
bit to word;
word to bit;
byte to bit;
word to byte;
two bytes to word;
two words to dword;
four bytes to dword;

Note:
no global vars are used, so that this library can be used regardless the drive FW version" }

	VAR_INPUT
	in : BOOL; 
	END_VAR

	*** Function data allocation

	Par in: REGISTER d4

#0		{SRC:_GeneralVersion}
#1		
#2		
#3			LD		in
(*) UNDEF
A00101B0  F1F0400B		mov d15, d4

#4			JMPC	l0_Version
(-) BOOL
A00101B4  800E0FDF		jne d15, #0, #0x000E ; JUMP 0xA00101D0

#5		
#6			LD		0
(*) UNDEF
A00101B8  F000003B		mov d15, #0

#7			ST		_GeneralVersion
(*) USINT
A00101BC  21F0F00B		mov d2, d15

#8		
#9			RET
(-) USINT
A00101C0  FA001091		movh.a a15, #0xA001 ; 0xA00101D8
A00101C4  7018FFD9		lea a15,[a15]0x01D8
A00101C8  0000000D		nop
A00101CC  00300F2D		ji a15

#10		
#11		l0_Version:
#12		
#13			(*	Indice di revisione.						*)
#14			(*	L'indice si legge nella seguente maniera:	*)
#15			(*	XXYYZZ => XX.YY.ZZ 							*)
#16			(*	XX = Revisione								*)
#17			(*	YY = Sotto revisione						*)
#18			(*	ZZ = Correzione								*)
#19		
#20			LD		020000
(*) UNDEF
A00101D0  F4E2003B		mov d15, #20000

#21			ST		_GeneralVersion
(*) UINT
A00101D4  21F0F00B		mov d2, d15

A00101D8  0180000D		ret

END_FUNCTION
**************************************************
	List function: BitToWord
**************************************************

FUNCTION BitToWord : UINT

{ DE:"Compose a word from 16 bits
The inputs are aligned according bit number. 
i.e.
        b0  in position 0
        b1  in position 1
        ...
        b15 in position 15" }

	VAR_INPUT
	b0 : BOOL; 
	b1 : BOOL; 
	b2 : BOOL; 
	b3 : BOOL; 
	b4 : BOOL; 
	b5 : BOOL; 
	b6 : BOOL; 
	b7 : BOOL; 
	b8 : BOOL; 
	b9 : BOOL; 
	b10 : BOOL; 
	b11 : BOOL; 
	b12 : BOOL; 
	b13 : BOOL; 
	b14 : BOOL; 
	b15 : BOOL; 
	END_VAR

	*** Function data allocation

	Par b0: REGISTER d4
	Par b1: REGISTER d5
	Par b2: REGISTER d6
	Par b3: REGISTER d7
	Par b4: LOCAL STACK FRAME AT 0(sp)
	Par b5: CALLER STACK FRAME AT 4(sp)
	Par b6: CALLER STACK FRAME AT 8(sp)
	Par b7: CALLER STACK FRAME AT 12(sp)
	Par b8: CALLER STACK FRAME AT 16(sp)
	Par b9: CALLER STACK FRAME AT 20(sp)
	Par b10: CALLER STACK FRAME AT 24(sp)
	Par b11: CALLER STACK FRAME AT 28(sp)
	Par b12: CALLER STACK FRAME AT 32(sp)
	Par b13: CALLER STACK FRAME AT 36(sp)
	Par b14: CALLER STACK FRAME AT 40(sp)
	Par b15: CALLER STACK FRAME AT 44(sp)

A00101DC  C000A001		mov.aa a12, sp

#0		{SRC:BitToWord}
#1		
#2			LD		b15
(*) UNDEF
A00101E0  8002C0BB		mov.u d8, #0x2C
A00101E4  F600C801		addsc.a a15, a12, d8, #0
A00101E8  0000FF19		ld.w d15, [a15]

#3			TO_UINT
(*) BOOL
#4			SHL		15
(*) UINT
A00101EC  F000FF8F		sh d15, d15, #15

#5			ST		BitToWord
(*) UINT
A00101F0  21F0F00B		mov d2, d15

#6		
#7			LD		b14
(*) UNDEF
A00101F4  800280BB		mov.u d8, #0x28
A00101F8  F600C801		addsc.a a15, a12, d8, #0
A00101FC  0000FF19		ld.w d15, [a15]

#8			TO_UINT
(*) BOOL
#9			SHL		14
(*) UINT
A0010200  F000EF8F		sh d15, d15, #14

#10			ADD		BitToWord
(*) UINT
A0010204  F0002F0B		add d15, d15, d2

#11			ST		BitToWord
(*) UINT
A0010208  21F0F00B		mov d2, d15

#12		
#13			LD		b13
(*) UNDEF
A001020C  800240BB		mov.u d8, #0x24
A0010210  F600C801		addsc.a a15, a12, d8, #0
A0010214  0000FF19		ld.w d15, [a15]

#14			TO_UINT
(*) BOOL
#15			SHL		13
(*) UINT
A0010218  F000DF8F		sh d15, d15, #13

#16			ADD		BitToWord
(*) UINT
A001021C  F0002F0B		add d15, d15, d2

#17			ST		BitToWord
(*) UINT
A0010220  21F0F00B		mov d2, d15

#18		
#19			LD		b12
(*) UNDEF
A0010224  800200BB		mov.u d8, #0x20
A0010228  F600C801		addsc.a a15, a12, d8, #0
A001022C  0000FF19		ld.w d15, [a15]

#20			TO_UINT
(*) BOOL
#21			SHL		12
(*) UINT
A0010230  F000CF8F		sh d15, d15, #12

#22			ADD		BitToWord
(*) UINT
A0010234  F0002F0B		add d15, d15, d2

#23			ST		BitToWord
(*) UINT
A0010238  21F0F00B		mov d2, d15

#24		
#25			LD		b11
(*) UNDEF
A001023C  8001C0BB		mov.u d8, #0x1C
A0010240  F600C801		addsc.a a15, a12, d8, #0
A0010244  0000FF19		ld.w d15, [a15]

#26			TO_UINT
(*) BOOL
#27			SHL		11
(*) UINT
A0010248  F000BF8F		sh d15, d15, #11

#28			ADD		BitToWord
(*) UINT
A001024C  F0002F0B		add d15, d15, d2

#29			ST		BitToWord
(*) UINT
A0010250  21F0F00B		mov d2, d15

#30		
#31			LD		b10
(*) UNDEF
A0010254  800180BB		mov.u d8, #0x18
A0010258  F600C801		addsc.a a15, a12, d8, #0
A001025C  0000FF19		ld.w d15, [a15]

#32			TO_UINT
(*) BOOL
#33			SHL		10
(*) UINT
A0010260  F000AF8F		sh d15, d15, #10

#34			ADD		BitToWord
(*) UINT
A0010264  F0002F0B		add d15, d15, d2

#35			ST		BitToWord
(*) UINT
A0010268  21F0F00B		mov d2, d15

#36		
#37			LD		b9
(*) UNDEF
A001026C  800140BB		mov.u d8, #0x14
A0010270  F600C801		addsc.a a15, a12, d8, #0
A0010274  0000FF19		ld.w d15, [a15]

#38			TO_UINT
(*) BOOL
#39			SHL		9
(*) UINT
A0010278  F0009F8F		sh d15, d15, #9

#40			ADD		BitToWord
(*) UINT
A001027C  F0002F0B		add d15, d15, d2

#41			ST		BitToWord
(*) UINT
A0010280  21F0F00B		mov d2, d15

#42		
#43			LD		b8
(*) UNDEF
A0010284  800100BB		mov.u d8, #0x10
A0010288  F600C801		addsc.a a15, a12, d8, #0
A001028C  0000FF19		ld.w d15, [a15]

#44			TO_UINT
(*) BOOL
#45			SHL		8
(*) UINT
A0010290  F0008F8F		sh d15, d15, #8

#46			ADD		BitToWord
(*) UINT
A0010294  F0002F0B		add d15, d15, d2

#47			ST		BitToWord
(*) UINT
A0010298  21F0F00B		mov d2, d15

#48		
#49			LD		b7
(*) UNDEF
A001029C  8000C0BB		mov.u d8, #0xC
A00102A0  F600C801		addsc.a a15, a12, d8, #0
A00102A4  0000FF19		ld.w d15, [a15]

#50			TO_UINT
(*) BOOL
#51			SHL		7
(*) UINT
A00102A8  F0007F8F		sh d15, d15, #7

#52			ADD		BitToWord
(*) UINT
A00102AC  F0002F0B		add d15, d15, d2

#53			ST		BitToWord
(*) UINT
A00102B0  21F0F00B		mov d2, d15

#54		
#55			LD		b6
(*) UNDEF
A00102B4  800080BB		mov.u d8, #0x8
A00102B8  F600C801		addsc.a a15, a12, d8, #0
A00102BC  0000FF19		ld.w d15, [a15]

#56			TO_UINT
(*) BOOL
#57			SHL		6
(*) UINT
A00102C0  F0006F8F		sh d15, d15, #6

#58			ADD		BitToWord
(*) UINT
A00102C4  F0002F0B		add d15, d15, d2

#59			ST		BitToWord
(*) UINT
A00102C8  21F0F00B		mov d2, d15

#60		
#61			LD		b5
(*) UNDEF
A00102CC  800040BB		mov.u d8, #0x4
A00102D0  F600C801		addsc.a a15, a12, d8, #0
A00102D4  0000FF19		ld.w d15, [a15]

#62			TO_UINT
(*) BOOL
#63			SHL		5
(*) UINT
A00102D8  F0005F8F		sh d15, d15, #5

#64			ADD		BitToWord
(*) UINT
A00102DC  F0002F0B		add d15, d15, d2

#65			ST		BitToWord
(*) UINT
A00102E0  21F0F00B		mov d2, d15

#66		
#67			LD		b4
(*) UNDEF
A00102E4  F000C001		mov.aa a15, a12
A00102E8  0000FF19		ld.w d15, [a15]

#68			TO_UINT
(*) BOOL
#69			SHL		4
(*) UINT
A00102EC  F0004F8F		sh d15, d15, #4

#70			ADD		BitToWord
(*) UINT
A00102F0  F0002F0B		add d15, d15, d2

#71			ST		BitToWord
(*) UINT
A00102F4  21F0F00B		mov d2, d15

#72		
#73			LD		b3
(*) UNDEF
A00102F8  F1F0700B		mov d15, d7

#74			TO_UINT
(*) BOOL
#75			SHL		3
(*) UINT
A00102FC  F0003F8F		sh d15, d15, #3

#76			ADD		BitToWord
(*) UINT
A0010300  F0002F0B		add d15, d15, d2

#77			ST		BitToWord
(*) UINT
A0010304  21F0F00B		mov d2, d15

#78		
#79			LD		b2
(*) UNDEF
A0010308  F1F0600B		mov d15, d6

#80			TO_UINT
(*) BOOL
#81			SHL		2
(*) UINT
A001030C  F0002F8F		sh d15, d15, #2

#82			ADD		BitToWord
(*) UINT
A0010310  F0002F0B		add d15, d15, d2

#83			ST		BitToWord
(*) UINT
A0010314  21F0F00B		mov d2, d15

#84		
#85			LD		b1
(*) UNDEF
A0010318  F1F0500B		mov d15, d5

#86			TO_UINT
(*) BOOL
#87			SHL		1
(*) UINT
A001031C  F0001F8F		sh d15, d15, #1

#88			ADD		BitToWord
(*) UINT
A0010320  F0002F0B		add d15, d15, d2

#89			ST		BitToWord
(*) UINT
A0010324  21F0F00B		mov d2, d15

#90		
#91			LD		b0
(*) UNDEF
A0010328  F1F0400B		mov d15, d4

#92			TO_UINT
(*) BOOL
#93			ADD		BitToWord
(*) UINT
A001032C  F0002F0B		add d15, d15, d2

#94			ST		BitToWord
(*) UINT
A0010330  21F0F00B		mov d2, d15

A0010334  0180000D		ret

END_FUNCTION
**************************************************
	List function: Line
**************************************************

FUNCTION Line : DINT

{ DE:"02/01/2001			by SSS
The function return the y(x) value. The function is the linear inter(extra)polation
of the line passing through two points.
The points are defined with the following coordinates:
(xIni, yIni), (xEnd, yEnd).

The returned value is:
Result=yIni+(yEnd-yIni)/(xEnd-xIni)*(x-xIni)" }

	VAR_INPUT
	inX : DINT; { DE:"input X [cnts]" } 
	xIni : DINT; { DE:"initial X [cnts]" } 
	yIni : DINT; { DE:"initial Y [cnts]" } 
	xEnd : DINT; { DE:"final X [cnts]" } 
	yEnd : DINT; { DE:"final Y [cnts]" } 
	END_VAR

	*** Function data allocation

	Par inX: REGISTER d4
	Par xIni: REGISTER d5
	Par yIni: REGISTER d6
	Par xEnd: REGISTER d7
	Par yEnd: LOCAL STACK FRAME AT 0(sp)

A0010338  C000A001		mov.aa a12, sp

#0		{SRC:Line}
#1		
#2			LD		inX
(*) UNDEF
A001033C  F1F0400B		mov d15, d4

#3			SUB		xIni
(*) DINT
A0010340  F0805F0B		sub d15, d15, d5

#4			MUL(	yEnd
(*) DINT
A0010344  F53CAF89		st.w [-sp]4, d15 
A0010348  F000C001		mov.aa a15, a12
A001034C  0000FF19		ld.w d15, [a15]

#5			SUB		yIni
(*) DINT
A0010350  F0806F0B		sub d15, d15, d6

#6			)
(*) DINT
A0010354  01F0F00B		mov d0, d15
A0010358  0104AF09		ld.w d15, [sp+]4
A001035C  F00A0F73		mul d15, d15, d0

#7			DIV(	xEnd
(*) DINT
A0010360  F53CAF89		st.w [-sp]4, d15 
A0010364  F1F0700B		mov d15, d7

#8			SUB		xIni
(*) DINT
A0010368  F0805F0B		sub d15, d15, d5

#9			)
(*) DINT
A001036C  01F0F00B		mov d0, d15
A0010370  0104AF09		ld.w d15, [sp+]4
A0010374  81F0000B		mov d8, d0
A0010378  21A08F4B		dvinit d2/d3, d15, d8
A001037C  9000303B		mov d9, #3
A0010380  F6309001		mov.a a15, d9
A0010384  22F0806B		dvstep d2/d3, d2/d3, d8
A0010388  7FFEF0FD		loop a15, #-2
A001038C  22D0806B		dvadj d2/d3, d2/d3, d8
A0010390  F1F0200B		mov d15, d2

#10			ADD		yIni
(*) DINT
A0010394  F0006F0B		add d15, d15, d6

#11			ST		Line
(*) DINT
A0010398  21F0F00B		mov d2, d15

A001039C  0180000D		ret

END_FUNCTION
**************************************************
	List function: ScaleDW
**************************************************

FUNCTION ScaleDW : DINT

{ DE:"SCALE DW

Rev.0	1/2/2001 	by SSS

Scaling with rest recovery

ScaleDw=in/inDiv*inMol
The input is divided by inDiv and the result is multiplied by inMol.
In order to avoid the overflow, the function must be inMol*inDiv<2^31" }

	VAR_INPUT
	in : DINT; { DE:"input" } 
	inMol : DINT; { DE:"scale multiplier" } 
	inDiv : DINT; { DE:"scale divider" } 
	END_VAR

	*** Function data allocation

	Par in: REGISTER d4
	Par inMol: REGISTER d5
	Par inDiv: REGISTER d6

#0		{SRC:ScaleDW}
#1		
#2		
#3			LD		in
(*) UNDEF
A00103A0  F1F0400B		mov d15, d4

#4			DIV		inDiv
(*) DINT
A00103A4  81F0600B		mov d8, d6
A00103A8  21A08F4B		dvinit d2/d3, d15, d8
A00103AC  9000303B		mov d9, #3
A00103B0  F6309001		mov.a a15, d9
A00103B4  22F0806B		dvstep d2/d3, d2/d3, d8
A00103B8  7FFEF0FD		loop a15, #-2
A00103BC  22D0806B		dvadj d2/d3, d2/d3, d8
A00103C0  F1F0200B		mov d15, d2

#5			MUL		inMol
(*) DINT
A00103C4  F00A5F73		mul d15, d15, d5

#6			ADD(	in
(*) DINT
A00103C8  F53CAF89		st.w [-sp]4, d15 
A00103CC  F1F0400B		mov d15, d4

#7			MOD		inDiv
(*) DINT
A00103D0  81F0600B		mov d8, d6
A00103D4  21A08F4B		dvinit d2/d3, d15, d8
A00103D8  9000303B		mov d9, #3
A00103DC  F6309001		mov.a a15, d9
A00103E0  22F0806B		dvstep d2/d3, d2/d3, d8
A00103E4  7FFEF0FD		loop a15, #-2
A00103E8  22D0806B		dvadj d2/d3, d2/d3, d8
A00103EC  F1F0300B		mov d15, d3

#8			MUL		inMol
(*) DINT
A00103F0  F00A5F73		mul d15, d15, d5

#9			DIV		inDiv
(*) DINT
A00103F4  81F0600B		mov d8, d6
A00103F8  21A08F4B		dvinit d2/d3, d15, d8
A00103FC  9000303B		mov d9, #3
A0010400  F6309001		mov.a a15, d9
A0010404  22F0806B		dvstep d2/d3, d2/d3, d8
A0010408  7FFEF0FD		loop a15, #-2
A001040C  22D0806B		dvadj d2/d3, d2/d3, d8
A0010410  F1F0200B		mov d15, d2

#10			)
(*) DINT
A0010414  01F0F00B		mov d0, d15
A0010418  0104AF09		ld.w d15, [sp+]4
A001041C  F0000F0B		add d15, d15, d0

#11			ST		ScaleDW
(*) DINT
A0010420  21F0F00B		mov d2, d15

A0010424  0180000D		ret

END_FUNCTION
**************************************************
	List function: RBitIn
**************************************************

FUNCTION RBitIn : BOOL

{ DE:"8/10/2001		by SSS
Selector beetween a status 'inPar' and a bit in a word 'inWord'
If 'bitNumber' is from 0 to 15 the bit inWord[bitNumber] will be returned
else the inPar will be the output.

Inputs:
- inWord
- inPar
- bitNumber

Result:
- If 0<=bitNumber<=15	RESULT = RBit (inWord, bitNumber)
- If bitNumber >=16	RESULT = inPar" }

	VAR_INPUT
	inWord : UINT; { DE:"input word" } 
	inPar : BOOL; { DE:"input parameter" } 
	bitNumber : UINT; { DE:"number of bit to be read" } 
	END_VAR

	*** Function data allocation

	Par inWord: REGISTER d4
	Par inPar: REGISTER d5
	Par bitNumber: REGISTER d6

A0010428  A1F0400B		mov d10, d4
A001042C  B1F0500B		mov d11, d5
A0010430  C1F0600B		mov d12, d6

#0		{SRC:RBitIn}
#1		
#2			LD		bitNumber
(*) UNDEF
A0010434  F1F0C00B		mov d15, d12

#3			GE		16
(*) UINT
A0010438  8001003B		mov d8, #16
A001043C  F1508F0B		ge.u d15, d15, d8

#4			JMPC	l0_RBitIn
(-) BOOL
A0010440  80160FDF		jne d15, #0, #0x0016 ; JUMP 0xA001046C

#5		
#6			LD		inWord
(*) UNDEF
A0010444  F1F0A00B		mov d15, d10

#7			RBit	bitNumber
(-) UINT
A0010448  51F0C00B		mov d5, d12
A001044C  41F0F00B		mov d4, d15
A0010450  0094006D		call #0x000094 ; CALL 0xA0010578
A0010454  F1F0200B		mov d15, d2

#8			ST		RBitIn
(*) BOOL
A0010458  21F0F00B		mov d2, d15

#9		
#10			RET
(-) BOOL
A001045C  FA001091		movh.a a15, #0xA001 ; 0xA0010474
A0010460  1074FFD9		lea a15,[a15]0x0474
A0010464  0000000D		nop
A0010468  00300F2D		ji a15

#11		
#12		l0_RBitIn:
#13		
#14			LD		inPar
(*) UNDEF
A001046C  F1F0B00B		mov d15, d11

#15			ST		RBitIn
(*) BOOL
A0010470  21F0F00B		mov d2, d15

A0010474  0180000D		ret

END_FUNCTION
**************************************************
	List function: Segment
**************************************************

FUNCTION Segment : DINT

{ DE:"2/1/2001			by SSS

Segment passing through two points.
The function return the y(x) value. The function is the linear inter(extra)polation 
of the line passing through two points.
If the input value is outside the xIni, xEnd range the output will be 
yIni or yEnd according to the exceeding side.


The points are [xIni,yIni], [xEnd,yEnd

Result:
yIni			if	inX < xIni
Line(xIni, yIni, xEnd, yEnd)	if	xIni <= inX <= xEnd
yEnd			if	inX > xEnd" }

	VAR_INPUT
	inX : DINT; { DE:"input X [cnts]" } 
	xIni : DINT; { DE:"initial X [cnts]" } 
	yIni : DINT; { DE:"initial Y [cnts]" } 
	xEnd : DINT; { DE:"final X [cnts]" } 
	yEnd : DINT; { DE:"final Y [cnts]" } 
	END_VAR

	*** Function data allocation

	Par inX: REGISTER d4
	Par xIni: REGISTER d5
	Par yIni: REGISTER d6
	Par xEnd: REGISTER d7
	Par yEnd: LOCAL STACK FRAME AT 0(sp)

A0010478  A1F0400B		mov d10, d4
A001047C  B1F0500B		mov d11, d5
A0010480  C1F0600B		mov d12, d6
A0010484  D1F0700B		mov d13, d7
A0010488  C000A001		mov.aa a12, sp

#0		{SRC:Segment}
#1		
#2			LD		inX
(*) UNDEF
A001048C  F1F0A00B		mov d15, d10

#3			LT		xIni
(*) DINT
A0010490  F120BF0B		lt d15, d15, d11

#4			JMPCN	l0_Segment
(-) BOOL
A0010494  00080FDF		jeq d15, #0, #0x0008 ; JUMP 0xA00104A4

#5		
#6			(*	inX < xIni	*)
#7		
#8			LD		yIni
(*) UNDEF
A0010498  F1F0C00B		mov d15, d12

#9			ST		Segment
(*) DINT
A001049C  21F0F00B		mov d2, d15

#10		
#11			JMP		lEnd_Segment
(-) DINT
A00104A0  002C001D		j #0x00002C ; JUMP 0xA00104F8

#12		
#13		l0_Segment:
#14		
#15			LD		inX
(*) UNDEF
A00104A4  F1F0A00B		mov d15, d10

#16			GT		xEnd
(*) DINT
A00104A8  F120FD0B		lt d15, d13, d15

#17			JMPC	l1_Segment
(-) BOOL
A00104AC  80200FDF		jne d15, #0, #0x0020 ; JUMP 0xA00104EC

#18		
#19			(*	xIni <= inX <= xEnd	*)
#20		
#21			LD		inX
(*) UNDEF
A00104B0  F1F0A00B		mov d15, d10

#22			Line	xIni, yIni, xEnd, yEnd
(-) DINT
A00104B4  F000C001		mov.aa a15, a12
A00104B8  0000F819		ld.w d8, [a15]
A00104BC  F53CA889		st.w [-sp]4, d8 
A00104C0  71F0D00B		mov d7, d13
A00104C4  61F0C00B		mov d6, d12
A00104C8  51F0B00B		mov d5, d11
A00104CC  41F0F00B		mov d4, d15
A00104D0  FF34FF6D		call #0xFFFF34 ; CALL 0xA0010338
A00104D4  F1F0200B		mov d15, d2
A00104D8  800040BB		mov.u d8, #4
A00104DC  E6308001		mov.a a14, d8
A00104E0  A010EA01		add.a sp, sp, a14

#23			ST		Segment
(*) DINT
A00104E4  21F0F00B		mov d2, d15

#24		
#25			JMP		lEnd_Segment
(-) DINT
A00104E8  0008001D		j #0x000008 ; JUMP 0xA00104F8

#26		
#27		l1_Segment:
#28		
#29			(*	inX > xEnd	*)
#30		
#31			LD		yEnd
(*) UNDEF
A00104EC  F000C001		mov.aa a15, a12
A00104F0  0000FF19		ld.w d15, [a15]

#32			ST		Segment
(*) DINT
A00104F4  21F0F00B		mov d2, d15

A00104F8  0180000D		ret

END_FUNCTION
**************************************************
	List function: WBit
**************************************************

FUNCTION WBit : UINT

{ DE:"WRITE BIT

Rev.0	29/1/2001 	by SSS

Writing of a bit into a word.
The 'bitValue' will be written in position 'bitNumber' of 'inWord'

" }

	VAR_INPUT
	inWord : UINT; { DE:"word to be written" } 
	bitNumber : UINT; { DE:"bit number to be written" } 
	bitValue : BOOL; { DE:"value of the bit to be written" } 
	END_VAR

	VAR
	wApp : UINT; { DE:"temp" } 
	END_VAR

	*** Function data allocation

	Par inWord: REGISTER d4
	Par bitNumber: REGISTER d5
	Par bitValue: REGISTER d6
	Var wApp: LOCAL STACK FRAME AT 0(sp)

A00104FC  800040BB		mov.u d8, #4
A0010500  E6308001		mov.a a14, d8
A0010504  A020EA01		sub.a sp, sp, a14

#0		{SRC:WBit}
#1		
#2		
#3		
#4			(*	Azzeramento bit numero bitNumber di inWord	*)
#5		
#6			LD		1
(*) UNDEF
A0010508  F000103B		mov d15, #1

#7			ST		wApp
(*) USINT
A001050C  F000A001		mov.aa a15, sp
A0010510  0880FF89		st.h [a15], d15

#8			SHL		bitNumber
(*) UINT
A0010514  81F0500B		mov d8, d5
A0010518  0002003B		mov d0, #32
A001051C  0006087F		jge d8, d0, #0x0006
A0010520  F0008F0F		sh d15, d15, d8
A0010524  0004001D		j #0x000004
A0010528  F000003B		mov d15, #0

#9			NOT
(*) UINT
A001052C  F1600F8F		nor d15, d15, #0

#10			AND		inWord
(*) UINT
A0010530  F0804F0F		and d15, d15, d4

#11			ST		wApp
(*) UINT
A0010534  F000A001		mov.aa a15, sp
A0010538  0880FF89		st.h [a15], d15

#12		
#13			(*	Scrittura bit	*)
#14		
#15			LD		bitValue
(*) UNDEF
A001053C  F1F0600B		mov d15, d6

#16			TO_UINT
(*) BOOL
#17			SHL		bitNumber
(*) UINT
A0010540  81F0500B		mov d8, d5
A0010544  0002003B		mov d0, #32
A0010548  0006087F		jge d8, d0, #0x0006
A001054C  F0008F0F		sh d15, d15, d8
A0010550  0004001D		j #0x000004
A0010554  F000003B		mov d15, #0

#18			OR		wApp
(*) UINT
A0010558  F000A001		mov.aa a15, sp
A001055C  08C0F809		ld.hu d8, [a15]
A0010560  F0A08F0F		or d15, d15, d8

#19			ST		WBit
(*) UINT
A0010564  21F0F00B		mov d2, d15

A0010568  800040BB		mov.u d8, #4
A001056C  E6308001		mov.a a14, d8
A0010570  A010EA01		add.a sp, sp, a14

A0010574  0180000D		ret

END_FUNCTION
**************************************************
	List function: RBit
**************************************************

FUNCTION RBit : BOOL

{ DE:"READ BIT

Rev.0	29/1/2001 	by SSS

Reading of a bit in 'bitWord' position inside 'inWord'." }

	VAR_INPUT
	inWord : UINT; { DE:"Word to be read" } 
	bitNumber : UINT; { DE:"bit number to be read" } 
	END_VAR

	*** Function data allocation

	Par inWord: REGISTER d4
	Par bitNumber: REGISTER d5

#0		{SRC:RBit}
#1		
#2		
#3			(*	Azzeramento bit numero bitNumber di inWord	*)
#4		
#5			LD		inWord
(*) UNDEF
A0010578  F1F0400B		mov d15, d4

#6			SHR		bitNumber
(*) UINT
A001057C  81F0500B		mov d8, d5
A0010580  0002003B		mov d0, #32
A0010584  0008087F		jge d8, d0, #0x0008
A0010588  8100088B		rsub d8, d8, #0
A001058C  F0008F0F		sh d15, d15, d8
A0010590  0004001D		j #0x000004
A0010594  F000003B		mov d15, #0

#7			AND		1
(*) UINT
A0010598  8000103B		mov d8, #1
A001059C  F0808F0F		and d15, d15, d8

#8			TO_BOOL
(*) UINT
A00105A0  F2200F8B		ne d15, d15, #0

#9			ST		RBit
(*) BOOL
A00105A4  21F0F00B		mov d2, d15

A00105A8  0180000D		ret

END_FUNCTION
**************************************************
	List function: GAIN_LIM
**************************************************

FUNCTION GAIN_LIM : INT

{ DE:"Limited Gain Block

OUT= IN * M(on 32 bits) / D

the output is limited to +/-32767" }

	VAR_INPUT
	IN : INT; 
	M : INT; 
	D : INT; 
	END_VAR

	VAR
	temp : DINT; 
	END_VAR

	*** Function data allocation

	Par IN: REGISTER d4
	Par M: REGISTER d5
	Par D: REGISTER d6
	Var temp: LOCAL STACK FRAME AT 0(sp)

A00105AC  A1F0400B		mov d10, d4
A00105B0  B1F0500B		mov d11, d5
A00105B4  C1F0600B		mov d12, d6
A00105B8  800040BB		mov.u d8, #4
A00105BC  E6308001		mov.a a14, d8
A00105C0  A020EA01		sub.a sp, sp, a14

#0		{SRC:GAIN_LIM}
#1		
#2			(* temp := MUL32( IN , M ); *)
#3			LD		IN	{L:1}
(*) UNDEF
A00105C4  F1F0A00B		mov d15, d10

#4			MUL32		M	{L:1}
(-) INT
A00105C8  51F0B00B		mov d5, d11
A00105CC  41F0F00B		mov d4, d15
A00105D0  F8009091		movh.a a15, #0x8009 ; MUL32 AT 0x800922F0
A00105D4  B230FFD9		lea a15,[a15]0x22F0
A00105D8  0000000D		nop
A00105DC  00000F2D		calli a15
A00105E0  F1F0200B		mov d15, d2

#5			ST		temp	{L:1}
(*) DINT
A00105E4  F000A001		mov.aa a15, sp
A00105E8  0000FF59		st.w [a15], d15

#6		
#7			(* GAIN_LIM := DIV32_LIM(temp ,  D) ; *)
#8			LD		temp	{L:3}
(*) UNDEF
A00105EC  F000A001		mov.aa a15, sp
A00105F0  0000FF19		ld.w d15, [a15]

#9			DIV32_LIM		D	{L:3}
(-) DINT
A00105F4  51F0C00B		mov d5, d12
A00105F8  41F0F00B		mov d4, d15
A00105FC  F8009091		movh.a a15, #0x8009 ; DIV32_LIM AT 0x80092310
A0010600  C210FFD9		lea a15,[a15]0x2310
A0010604  0000000D		nop
A0010608  00000F2D		calli a15
A001060C  F1F0200B		mov d15, d2

#10			ST		GAIN_LIM	{L:3}
(*) INT
A0010610  21F0F00B		mov d2, d15

A0010614  800040BB		mov.u d8, #4
A0010618  E6308001		mov.a a14, d8
A001061C  A010EA01		add.a sp, sp, a14

A0010620  0180000D		ret

END_FUNCTION
**************************************************
	List function: CLAMP
**************************************************

FUNCTION CLAMP : INT

{ DE:"CLAMP

Output equal input value limited to +/- Clamp Value" }

	VAR_INPUT
	input : INT; 
	clampval : INT; 
	END_VAR

	*** Function data allocation

	Par input: REGISTER d4
	Par clampval: REGISTER d5

#0		{SRC:CLAMP}
#1		
#2		
#3			(* IF input > clampval *)
#4			LD		input	{L:1}
(*) UNDEF
A0010624  F1F0400B		mov d15, d4

#5			GT		clampval	{L:1}
(*) INT
A0010628  F120F50B		lt d15, d5, d15

#6			JMPCN	$label0	{L:1}
(-) BOOL
A001062C  00080FDF		jeq d15, #0, #0x0008 ; JUMP 0xA001063C

#7		
#8			(* THEN *)
#9		
#10				(* CLAMP := clampval; *)
#11				LD		clampval	{L:2}
(*) UNDEF
A0010630  F1F0500B		mov d15, d5

#12				ST		CLAMP	{L:2}
(*) INT
A0010634  21F0F00B		mov d2, d15

#13				JMP		$label2
(-) INT
A0010638  0022001D		j #0x000022 ; JUMP 0xA001067C

#14		$label0:
#15		
#16			(* ELSIF input < (-clampval *)
#17			LD		input	{L:3}
(*) UNDEF
A001063C  F1F0400B		mov d15, d4

#18			LT(		clampval	{L:3}
(*) INT
A0010640  F53CAF89		st.w [-sp]4, d15 
A0010644  F1F0500B		mov d15, d5

#19			MUL		-1	{L:3}
(*) INT
A0010648  8FFFF03B		mov d8, #-1
A001064C  F00A8F73		mul d15, d15, d8

#20			)	{L:3}
(*) INT
A0010650  01F0F00B		mov d0, d15
A0010654  0104AF09		ld.w d15, [sp+]4
A0010658  F1200F0B		lt d15, d15, d0

#21			JMPCN	$label1	{L:3}
(-) BOOL
A001065C  000C0FDF		jeq d15, #0, #0x000C ; JUMP 0xA0010674

#22		
#23			(* THEN *)
#24		
#25				(* CLAMP := -clampval; *)
#26				LD		clampval	{L:4}
(*) UNDEF
A0010660  F1F0500B		mov d15, d5

#27				MUL		-1	{L:4}
(*) INT
A0010664  8FFFF03B		mov d8, #-1
A0010668  F00A8F73		mul d15, d15, d8

#28				ST		CLAMP	{L:4}
(*) INT
A001066C  21F0F00B		mov d2, d15

#29				JMP		$label2
(-) INT
A0010670  0006001D		j #0x000006 ; JUMP 0xA001067C

#30		$label1:
#31		
#32			(* ELSE *)
#33		
#34				(* CLAMP := input; *)
#35				LD		input	{L:6}
(*) UNDEF
A0010674  F1F0400B		mov d15, d4

#36				ST		CLAMP	{L:6}
(*) INT
A0010678  21F0F00B		mov d2, d15

A001067C  0180000D		ret

END_FUNCTION
**************************************************
	List function: Line_int
**************************************************

FUNCTION Line_int : INT

{ DE:"The function return the y(x) value. The function is the linear inter(extra)polation
of the line passing through two points.
The points are defined with the following coordinates:
(x0, y0), (x1, y1).

The returned value is:
Result = y0+(y1-y0)/(x1-x0)*(x-x0)

result is of type integer" }

	VAR_INPUT
	x : INT; 
	x0 : INT; 
	y0 : INT; 
	x1 : INT; 
	y1 : INT; 
	END_VAR

	VAR
	help_long : DINT; 
	help_int : INT; 
	END_VAR

	*** Function data allocation

	Par x: REGISTER d4
	Par x0: REGISTER d5
	Par y0: REGISTER d6
	Par x1: REGISTER d7
	Par y1: LOCAL STACK FRAME AT 0(sp)
	Var help_long: LOCAL STACK FRAME AT 0(sp)
	Var help_int: CALLER STACK FRAME AT 4(sp)

A0010680  A1F0400B		mov d10, d4
A0010684  B1F0500B		mov d11, d5
A0010688  C1F0600B		mov d12, d6
A001068C  D1F0700B		mov d13, d7
A0010690  C000A001		mov.aa a12, sp
A0010694  800080BB		mov.u d8, #8
A0010698  E6308001		mov.a a14, d8
A001069C  A020EA01		sub.a sp, sp, a14

#0		{SRC:Line_int}
#1		
#2			(* Line_int := (y1-y0); *)
#3			LD		y1	{L:2}
(*) UNDEF
A00106A0  F000C001		mov.aa a15, a12
A00106A4  0880FF09		ld.h d15, [a15]

#4			SUB		y0	{L:2}
(*) INT
A00106A8  F080CF0B		sub d15, d15, d12

#5			ST		Line_int	{L:2}
(*) INT
A00106AC  21F0F00B		mov d2, d15

#6		
#7			(* help_int := (x - x0); *)
#8			LD		x	{L:4}
(*) UNDEF
A00106B0  F1F0A00B		mov d15, d10

#9			SUB		x0	{L:4}
(*) INT
A00106B4  F080BF0B		sub d15, d15, d11

#10			ST		help_int	{L:4}
(*) INT
A00106B8  800040BB		mov.u d8, #0x4
A00106BC  F600A801		addsc.a a15, sp, d8, #0
A00106C0  0880FF89		st.h [a15], d15

#11		
#12			(* help_long:=	MUL32( Line_int , help_int ); *)
#13			LD		Line_int	{L:6}
(*) UNDEF
A00106C4  F1F0200B		mov d15, d2

#14			MUL32		help_int	{L:6}
(-) INT
A00106C8  800040BB		mov.u d8, #0x4
A00106CC  F600A801		addsc.a a15, sp, d8, #0
A00106D0  0880F509		ld.h d5, [a15]
A00106D4  41F0F00B		mov d4, d15
A00106D8  F8009091		movh.a a15, #0x8009 ; MUL32 AT 0x800922F0
A00106DC  B230FFD9		lea a15,[a15]0x22F0
A00106E0  0000000D		nop
A00106E4  00000F2D		calli a15
A00106E8  F1F0200B		mov d15, d2

#15			ST		help_long	{L:6}
(*) DINT
A00106EC  F000A001		mov.aa a15, sp
A00106F0  0000FF59		st.w [a15], d15

#16		
#17			(* help_int := (x1-x0); *)
#18			LD		x1	{L:8}
(*) UNDEF
A00106F4  F1F0D00B		mov d15, d13

#19			SUB		x0	{L:8}
(*) INT
A00106F8  F080BF0B		sub d15, d15, d11

#20			ST		help_int	{L:8}
(*) INT
A00106FC  800040BB		mov.u d8, #0x4
A0010700  F600A801		addsc.a a15, sp, d8, #0
A0010704  0880FF89		st.h [a15], d15

#21		
#22			(* help_int := DIV32( help_long, help_int	); *)
#23			LD		help_long	{L:10}
(*) UNDEF
A0010708  F000A001		mov.aa a15, sp
A001070C  0000FF19		ld.w d15, [a15]

#24			DIV32		help_int	{L:10}
(-) DINT
A0010710  800040BB		mov.u d8, #0x4
A0010714  F600A801		addsc.a a15, sp, d8, #0
A0010718  0880F509		ld.h d5, [a15]
A001071C  41F0F00B		mov d4, d15
A0010720  F8009091		movh.a a15, #0x8009 ; DIV32 AT 0x80092326
A0010724  C226FFD9		lea a15,[a15]0x2326
A0010728  0000000D		nop
A001072C  00000F2D		calli a15
A0010730  F1F0200B		mov d15, d2

#25			ST		help_int	{L:10}
(*) INT
A0010734  800040BB		mov.u d8, #0x4
A0010738  F600A801		addsc.a a15, sp, d8, #0
A001073C  0880FF89		st.h [a15], d15

#26		
#27			(* Line_int := help_int + y0; *)
#28			LD		help_int	{L:12}
(*) UNDEF
A0010740  800040BB		mov.u d8, #0x4
A0010744  F600A801		addsc.a a15, sp, d8, #0
A0010748  0880FF09		ld.h d15, [a15]

#29			ADD		y0	{L:12}
(*) INT
A001074C  F000CF0B		add d15, d15, d12

#30			ST		Line_int	{L:12}
(*) INT
A0010750  21F0F00B		mov d2, d15

A0010754  800080BB		mov.u d8, #8
A0010758  E6308001		mov.a a14, d8
A001075C  A010EA01		add.a sp, sp, a14

A0010760  0180000D		ret

END_FUNCTION
**************************************************
	List function: _InOutVersion
**************************************************

FUNCTION _InOutVersion : UDINT

{ DE:"LIBRERIA: ADV200 InOut

Rev.01.20.00	14/12/2006 By FRD
Rev.01.30.00	28/05/2008 By RNC


This library contains functions and function blocks for the input/output management:
Motor current conversion to/from FW;
Motor speed conversion   to/from FW.

Note:
No global variables are used, so that the library can be used regardless the FW version" }

	VAR_INPUT
	in : BOOL; 
	END_VAR

	*** Function data allocation

	Par in: REGISTER d4

#0		{SRC:_InOutVersion}
#1		
#2		
#3			LD		in
(*) UNDEF
A0010764  F1F0400B		mov d15, d4

#4			JMPC	l0_Version
(-) BOOL
A0010768  800E0FDF		jne d15, #0, #0x000E ; JUMP 0xA0010784

#5		
#6			LD		0
(*) UNDEF
A001076C  F000003B		mov d15, #0

#7			ST		_InOutVersion
(*) USINT
A0010770  21F0F00B		mov d2, d15

#8		
#9			RET
(-) USINT
A0010774  FA001091		movh.a a15, #0xA001 ; 0xA001078C
A0010778  E04CFFD9		lea a15,[a15]0x078C
A001077C  0000000D		nop
A0010780  00300F2D		ji a15

#10		
#11		l0_Version:
#12		
#13			(*	Indice di revisione.						*)
#14			(*	L'indice si legge nella seguente maniera:	*)
#15			(*	XXYYZZ => XX.YY.ZZ 							*)
#16			(*	XX = Revisione								*)
#17			(*	YY = Sotto revisione						*)
#18			(*	ZZ = Correzione								*)
#19		
#20			LD		013000
(*) UNDEF
A0010784  F32C803B		mov d15, #13000

#21			ST		_InOutVersion
(*) UINT
A0010788  21F0F00B		mov d2, d15

A001078C  0180000D		ret

END_FUNCTION
**************************************************
	List function: TrqToCount
**************************************************

FUNCTION TrqToCount : DINT

{ DE:"F Name: TrqToCount ADV200
Copyright © 2008, SIEI SpA. All Rights Reserved.

 Version     : 01.00
 Data        :  2008
 Author      : Gefran

Description:
Convert torque in percentage to torque in internal unit (Counts)
16#20000000 counts correspond to 100% motor torque
100% of motor torque is the torque obtained with the
maximum Torque current (nominal current cleaned of 
magnetizing current)" }

	VAR_INPUT
	InTrqPerc : REAL; 
	END_VAR

	*** Function data allocation

	Par InTrqPerc: REGISTER d4

#0		{SRC:TrqToCount}
#1		
#2			(* TrqToCount := TO_DINT(InTrqPerc * 5368709.12); *)
#3			LD		InTrqPerc	{L:6}
(*) UNDEF
A0010790  F1F0400B		mov d15, d4

#4			MUL		5368709.12	{L:6}
(*) REAL
A0010794  8D70A0BB		mov.u d8, #0xD70A ; COSTREAL 5368709.120000
A0010798  84AA389B		addih d8, d8, #0x4AA3
A001079C  F0418F4B		mul.f d15, d15, d8

#5			TO_DINT	{L:6}
(*) REAL
A00107A0  F1010F4B		ftoi d15, d15

#6			ST		TrqToCount	{L:6}
(*) DINT
A00107A4  21F0F00B		mov d2, d15

A00107A8  0180000D		ret

END_FUNCTION
**************************************************
	List function: CountToTrq
**************************************************

FUNCTION CountToTrq : REAL

{ DE:"F Name: CountToRpm ADV200
Copyright © 2008, SIEI SpA. All Rights Reserved.

 Version     : 01.00
 Data        :  2008
 Author      : Gefran

Description:
Convert torque in internal unit (Count) to torque in percentage  
16#20000000 counts correspond to 100% motor torque
100% of motor torque is the torque obtained with the
maximum Torque current (nominal current cleaned of 
magnetizing current)" }

	VAR_INPUT
	InTrqCnt : DINT; 
	END_VAR

	*** Function data allocation

	Par InTrqCnt: REGISTER d4

#0		{SRC:CountToTrq}
#1		
#2			(* CountToTrq := TO_REAL(InTrqCnt) / 5368709.12; *)
#3			LD		InTrqCnt	{L:6}
(*) UNDEF
A00107AC  F1F0400B		mov d15, d4

#4			TO_REAL	{L:6}
(*) DINT
A00107B0  F1410F4B		itof d15, d15

#5			DIV		5368709.12	{L:6}
(*) REAL
A00107B4  8D70A0BB		mov.u d8, #0xD70A ; COSTREAL 5368709.120000
A00107B8  84AA389B		addih d8, d8, #0x4AA3
A00107BC  F0518F4B		div.f d15, d15, d8

#6			ST		CountToTrq	{L:6}
(*) REAL
A00107C0  21F0F00B		mov d2, d15

A00107C4  0180000D		ret

END_FUNCTION
**************************************************
	List function: AmpToCount
**************************************************

FUNCTION AmpToCount : DINT

{ DE:"F Name: RpmToCount ADV200
Copyright © 2008, SIEI SpA. All Rights Reserved.

 Version     : 01.00
 Data        :  2008
 Author      : Gefran

Description:
Convert current in Amp to current internal units (Counts)
16#20000000 counts correspond to Drive cont current" }

	VAR_INPUT
	InCurrAmp : REAL; 
	inFSDriveCntCurrent : REAL; { DE:"Drive cont current set in the drive " } 
	END_VAR

	*** Function data allocation

	Par InCurrAmp: REGISTER d4
	Par inFSDriveCntCurrent: REGISTER d5

#0		{SRC:AmpToCount}
#1		
#2			(* AmpToCount := TO_DINT(InCurrAmp * 536870912.0 / inFSDriveCntCurrent); *)
#3			LD		InCurrAmp	{L:6}
(*) UNDEF
A00107C8  F1F0400B		mov d15, d4

#4			MUL		536870912.0	{L:6}
(*) REAL
A00107CC  800000BB		mov.u d8, #0x0000 ; COSTREAL 536870912.000000
A00107D0  84E0089B		addih d8, d8, #0x4E00
A00107D4  F0418F4B		mul.f d15, d15, d8

#5			DIV		inFSDriveCntCurrent	{L:6}
(*) REAL
A00107D8  81F0500B		mov d8, d5
A00107DC  F0518F4B		div.f d15, d15, d8

#6			TO_DINT	{L:6}
(*) REAL
A00107E0  F1010F4B		ftoi d15, d15

#7			ST		AmpToCount	{L:6}
(*) DINT
A00107E4  21F0F00B		mov d2, d15

A00107E8  0180000D		ret

END_FUNCTION
**************************************************
	List function: CountToAmp
**************************************************

FUNCTION CountToAmp : REAL

{ DE:"FBlock Name: CountToRpm ADV200
Copyright © 2008, SIEI SpA. All Rights Reserved.

 Version     : 01.00
 Data        :  2008
 Author      : Gefran

Description:
Convert current in internal unit (Count) to current in Amp  
16#20000000 counts correspond to Drive cont current 
" }

	VAR_INPUT
	InCurrCnt : DINT; 
	inFSDriveCntCurrent : REAL; { DE:"Drive cont current set in the drive" } 
	END_VAR

	*** Function data allocation

	Par InCurrCnt: REGISTER d4
	Par inFSDriveCntCurrent: REGISTER d5

#0		{SRC:CountToAmp}
#1		
#2			(* CountToAmp := (TO_REAL(InCurrCnt) * inFSDriveCntCurrent) / 536870912.0  ; *)
#3			LD		InCurrCnt	{L:6}
(*) UNDEF
A00107EC  F1F0400B		mov d15, d4

#4			TO_REAL	{L:6}
(*) DINT
A00107F0  F1410F4B		itof d15, d15

#5			MUL		inFSDriveCntCurrent	{L:6}
(*) REAL
A00107F4  F0415F4B		mul.f d15, d15, d5

#6			DIV		536870912.0	{L:6}
(*) REAL
A00107F8  800000BB		mov.u d8, #0x0000 ; COSTREAL 536870912.000000
A00107FC  84E0089B		addih d8, d8, #0x4E00
A0010800  F0518F4B		div.f d15, d15, d8

#7			ST		CountToAmp	{L:6}
(*) REAL
A0010804  21F0F00B		mov d2, d15

A0010808  0180000D		ret

END_FUNCTION
**************************************************
	List function: RpmToCount
**************************************************

FUNCTION RpmToCount : DINT

{ DE:"F Name: RpmToCount ADV200
Copyright © 2008, SIEI SpA. All Rights Reserved.

 Version     : 01.00
 Data        :  2008
 Author      : Gefran

Description:
Convert speed in RPM to speed internal units (Count)
16#40000000 counts correspond to FullScaleSpeed" }

	VAR_INPUT
	InSpdRpm : REAL; 
	inFSSpeed : DINT; { DE:"Full Scale Speed set in the drive " } 
	END_VAR

	*** Function data allocation

	Par InSpdRpm: REGISTER d4
	Par inFSSpeed: REGISTER d5

#0		{SRC:RpmToCount}
#1		
#2			(* RpmToCount := TO_DINT(InSpdRpm * 1073741824.0 / TO_REAL(inFSSpeed)); *)
#3			LD		InSpdRpm	{L:6}
(*) UNDEF
A001080C  F1F0400B		mov d15, d4

#4			MUL		1073741824.0	{L:6}
(*) REAL
A0010810  800000BB		mov.u d8, #0x0000 ; COSTREAL 1073741824.000000
A0010814  84E8089B		addih d8, d8, #0x4E80
A0010818  F0418F4B		mul.f d15, d15, d8

#5			DIV(		inFSSpeed	{L:6}
(*) REAL
A001081C  F53CAF89		st.w [-sp]4, d15 
A0010820  F1F0500B		mov d15, d5

#6			TO_REAL	{L:6}
(*) DINT
A0010824  F1410F4B		itof d15, d15

#7			)	{L:6}
(*) REAL
A0010828  01F0F00B		mov d0, d15
A001082C  0104AF09		ld.w d15, [sp+]4
A0010830  81F0000B		mov d8, d0
A0010834  F0518F4B		div.f d15, d15, d8

#8			TO_DINT	{L:6}
(*) REAL
A0010838  F1010F4B		ftoi d15, d15

#9			ST		RpmToCount	{L:6}
(*) DINT
A001083C  21F0F00B		mov d2, d15

A0010840  0180000D		ret

END_FUNCTION
**************************************************
	List function: CountToRpm
**************************************************

FUNCTION CountToRpm : REAL

{ DE:"FBlock Name: CountToRpm ADV200
Copyright © 2008, SIEI SpA. All Rights Reserved.

 Version     : 01.00
 Data        :  2008
 Author      : Gefran

Description:
Convert speed in internal units (Count) to speed RPM  
16#40000000 counts correspond to FullScaleSpeed
" }

	VAR_INPUT
	InSpdCnt : DINT; 
	inFSSpeed : DINT; { DE:"Full Scale Speed set in the drive" } 
	END_VAR

	*** Function data allocation

	Par InSpdCnt: REGISTER d4
	Par inFSSpeed: REGISTER d5

#0		{SRC:CountToRpm}
#1		
#2			(* CountToRpm := (TO_REAL(InSpdCnt) * TO_REAL(inFSSpeed)) / 1073741824.0  ; *)
#3			LD		inFSSpeed	{L:6}
(*) UNDEF
A0010844  F1F0500B		mov d15, d5

#4			TO_REAL	{L:6}
(*) DINT
A0010848  F1410F4B		itof d15, d15

#5			MUL(		InSpdCnt	{L:6}
(*) REAL
A001084C  F53CAF89		st.w [-sp]4, d15 
A0010850  F1F0400B		mov d15, d4

#6			TO_REAL	{L:6}
(*) DINT
A0010854  F1410F4B		itof d15, d15

#7			)	{L:6}
(*) REAL
A0010858  01F0F00B		mov d0, d15
A001085C  0104AF09		ld.w d15, [sp+]4
A0010860  F0410F4B		mul.f d15, d15, d0

#8			DIV		1073741824.0	{L:6}
(*) REAL
A0010864  800000BB		mov.u d8, #0x0000 ; COSTREAL 1073741824.000000
A0010868  84E8089B		addih d8, d8, #0x4E80
A001086C  F0518F4B		div.f d15, d15, d8

#9			ST		CountToRpm	{L:6}
(*) REAL
A0010870  21F0F00B		mov d2, d15

A0010874  0180000D		ret

END_FUNCTION
**************************************************
	List function: UnitToAo
**************************************************

FUNCTION UnitToAo : DINT

{ DE:"9/10/2001		by MCC/SSS
05 giu 08       Rnc

UnitToAo: Convert phisycal unit (rpm. Amp, Trq) to Analog Out. FullScale correspond to 10V.
" }

	VAR_INPUT
	inp : REAL; { DE:"Unit Input value " } 
	inSignalBase : REAL; { DE:"FullScaleSpeed for rpm, DriveCntCurr for amp, 100.0 for trq" } 
	END_VAR

	*** Function data allocation

	Par inp: REGISTER d4
	Par inSignalBase: REGISTER d5

#0		{SRC:UnitToAo}
#1		
#2			(* UnitToAo := TO_DINT(inp*1073741824.0/inSignalBase); *)
#3			LD		inp	{L:2}
(*) UNDEF
A0010878  F1F0400B		mov d15, d4

#4			MUL		1073741824.0	{L:2}
(*) REAL
A001087C  800000BB		mov.u d8, #0x0000 ; COSTREAL 1073741824.000000
A0010880  84E8089B		addih d8, d8, #0x4E80
A0010884  F0418F4B		mul.f d15, d15, d8

#5			DIV		inSignalBase	{L:2}
(*) REAL
A0010888  81F0500B		mov d8, d5
A001088C  F0518F4B		div.f d15, d15, d8

#6			TO_DINT	{L:2}
(*) REAL
A0010890  F1010F4B		ftoi d15, d15

#7			ST		UnitToAo	{L:2}
(*) DINT
A0010894  21F0F00B		mov d2, d15

A0010898  0180000D		ret

END_FUNCTION
**************************************************
	List function: AiToUnit
**************************************************

FUNCTION AiToUnit : REAL

{ DE:"9/10/2001		by MCC/SSS
05 giu 08       Rnc

AiToUnit: Convert input voltage in phisycal unit (rpm. Amp, Trq). 10V correspond FullScale.
" }

	VAR_INPUT
	inp : DINT; { DE:"analog input value value " } 
	inSignalBase : REAL; { DE:"FullScaleSpeed for rpm, DriveCntCurr for amp, 100.0 for trq" } 
	END_VAR

	*** Function data allocation

	Par inp: REGISTER d4
	Par inSignalBase: REGISTER d5

#0		{SRC:AiToUnit}
#1		
#2			(* AiToUnit := TO_REAL(inp)*inSignalBase/1073741824.0; *)
#3			LD		inp	{L:2}
(*) UNDEF
A001089C  F1F0400B		mov d15, d4

#4			TO_REAL	{L:2}
(*) DINT
A00108A0  F1410F4B		itof d15, d15

#5			MUL		inSignalBase	{L:2}
(*) REAL
A00108A4  F0415F4B		mul.f d15, d15, d5

#6			DIV		1073741824.0	{L:2}
(*) REAL
A00108A8  800000BB		mov.u d8, #0x0000 ; COSTREAL 1073741824.000000
A00108AC  84E8089B		addih d8, d8, #0x4E80
A00108B0  F0518F4B		div.f d15, d15, d8

#7			ST		AiToUnit	{L:2}
(*) REAL
A00108B4  21F0F00B		mov d2, d15

A00108B8  0180000D		ret

END_FUNCTION
**************************************************
	List function: ReadCommand
**************************************************

FUNCTION ReadCommand : BOOL

{ DE:"Digital command management

3 sources are available:
digital parameter
digital input
remote command (typically fieldbus)

selection selecs which source to read:
-2= digital parameter, -1= remote command, >=0 = digital input

the function result is reset to FALSE
then the digital command is copied in the output (if selected)
if a digital input is selected, its value will be the function output (if selected
if not, the remote command bit will be the function output (if selected)
" }

	VAR_INPUT
	digpar : BOOL; 
	digitalInputs : UINT; 
	selection : INT; { DE:"-2=digpar, -1=remote, >=0= digital input" } 
	remoteCommand : UINT; 
	nBitRemoteCommand : UINT; 
	END_VAR

	*** Function data allocation

	Par digpar: REGISTER d4
	Par digitalInputs: REGISTER d5
	Par selection: REGISTER d6
	Par remoteCommand: REGISTER d7
	Par nBitRemoteCommand: LOCAL STACK FRAME AT 0(sp)

A00108BC  A1F0400B		mov d10, d4
A00108C0  B1F0500B		mov d11, d5
A00108C4  C1F0600B		mov d12, d6
A00108C8  D1F0700B		mov d13, d7
A00108CC  C000A001		mov.aa a12, sp
A00108D0  800040BB		mov.u d8, #4
A00108D4  E6308001		mov.a a14, d8
A00108D8  A020EA01		sub.a sp, sp, a14

#0		{SRC:ReadCommand}
#1		
#2			(* ReadCommand := FALSE; *)
#3			LD		FALSE	{L:3}
(*) UNDEF
A00108DC  F000003B		mov d15, #0

#4			ST		ReadCommand	{L:3}
(*) BOOL
A00108E0  21F0F00B		mov d2, d15

#5		
#6		
#7			(* IF selection = -1 *)
#8			LD		selection	{L:8}
(*) UNDEF
A00108E4  F1F0C00B		mov d15, d12

#9			EQ		-1	{L:8}
(*) INT
A00108E8  8FFFF03B		mov d8, #-1
A00108EC  F1008F0B		eq d15, d15, d8

#10			JMPCN	$label0	{L:8}
(-) BOOL
A00108F0  000E0FDF		jeq d15, #0, #0x000E ; JUMP 0xA001090C

#11		
#12			(* THEN *)
#13		
#14				(* ReadCommand := digpar; *)
#15				LD		digpar	{L:11}
(*) UNDEF
A00108F4  F1F0A00B		mov d15, d10

#16				ST		ReadCommand	{L:11}
(*) BOOL
A00108F8  21F0F00B		mov d2, d15

#17		
#18				(* RETURN *)
#19				RET
(-) BOOL
A00108FC  FA001091		movh.a a15, #0xA001 ; 0xA00109A0
A0010900  60A0FFD9		lea a15,[a15]0x09A0
A0010904  0000000D		nop
A0010908  00300F2D		ji a15

#20		
#21		$label0:
#22			(* END_IF *)
#23		
#24		
#25			(* IF selection >= 0 *)
#26			LD		selection	{L:20}
(*) UNDEF
A001090C  F1F0C00B		mov d15, d12

#27			GE		0	{L:20}
(*) INT
A0010910  8000003B		mov d8, #0
A0010914  F1408F0B		ge d15, d15, d8

#28			JMPCN	$label1	{L:20}
(-) BOOL
A0010918  001E0FDF		jeq d15, #0, #0x001E ; JUMP 0xA0010954

#29		
#30			(* THEN *)
#31		
#32				(* ReadCommand := RBit(digitalInputs, TO_UINT(selection)); *)
#33				LD		selection	{L:22}
(*) UNDEF
A001091C  F1F0C00B		mov d15, d12

#34				TO_UINT	{L:22}
(*) INT
#35				ST		$$TMP0	{L:22}
(*) UINT
A0010920  F000A001		mov.aa a15, sp
A0010924  0880FF89		st.h [a15], d15

#36				LD		digitalInputs	{L:22}
(*) UNDEF
A0010928  F1F0B00B		mov d15, d11

#37				RBit		$$TMP0	{L:22}
(-) UINT
A001092C  F000A001		mov.aa a15, sp
A0010930  08C0F509		ld.hu d5, [a15]
A0010934  41F0F00B		mov d4, d15
A0010938  FE20FF6D		call #0xFFFE20 ; CALL 0xA0010578
A001093C  F1F0200B		mov d15, d2

#38				ST		ReadCommand	{L:22}
(*) BOOL
A0010940  21F0F00B		mov d2, d15

#39		
#40				(* RETURN *)
#41				RET
(-) BOOL
A0010944  FA001091		movh.a a15, #0xA001 ; 0xA00109A0
A0010948  60A0FFD9		lea a15,[a15]0x09A0
A001094C  0000000D		nop
A0010950  00300F2D		ji a15

#42		
#43		$label1:
#44			(* END_IF *)
#45		
#46		
#47			(* IF selection = -2) AND (nBitRemoteCommand >= 0 *)
#48			LD		nBitRemoteCommand	{L:30}
(*) UNDEF
A0010954  F000C001		mov.aa a15, a12
A0010958  08C0FF09		ld.hu d15, [a15]

#49			GE		0	{L:30}
(*) UINT
A001095C  8000003B		mov d8, #0
A0010960  F1508F0B		ge.u d15, d15, d8

#50			AND(		selection	{L:30}
(*) BOOL
A0010964  F53CAF89		st.w [-sp]4, d15 
A0010968  F1F0C00B		mov d15, d12

#51			EQ		-2	{L:30}
(*) INT
A001096C  8FFFE03B		mov d8, #-2
A0010970  F1008F0B		eq d15, d15, d8

#52			)	{L:30}
(*) BOOL
A0010974  01F0F00B		mov d0, d15
A0010978  0104AF09		ld.w d15, [sp+]4
A001097C  F0800F0F		and d15, d15, d0

#53			JMPCN	$label2	{L:30}
(-) BOOL
A0010980  00100FDF		jeq d15, #0, #0x0010 ; JUMP 0xA00109A0

#54		
#55			(* THEN *)
#56		
#57				(* ReadCommand := RBit(remoteCommand, nBitRemoteCommand); *)
#58				LD		remoteCommand	{L:32}
(*) UNDEF
A0010984  F1F0D00B		mov d15, d13

#59				RBit		nBitRemoteCommand	{L:32}
(-) UINT
A0010988  F000C001		mov.aa a15, a12
A001098C  08C0F509		ld.hu d5, [a15]
A0010990  41F0F00B		mov d4, d15
A0010994  FDF2FF6D		call #0xFFFDF2 ; CALL 0xA0010578
A0010998  F1F0200B		mov d15, d2

#60				ST		ReadCommand	{L:32}
(*) BOOL
A001099C  21F0F00B		mov d2, d15

#61		
#62				(* RETURN *)
#63				RET
(-) BOOL
A00109A0  800040BB		mov.u d8, #4
A00109A4  E6308001		mov.a a14, d8
A00109A8  A010EA01		add.a sp, sp, a14

A00109AC  0180000D		ret

END_FUNCTION
**************************************************
	List function: ReadCommandAnd
**************************************************

FUNCTION ReadCommandAnd : BOOL

{ DE:"Digital command management (AND)

3 sources are available:
digital parameter
digital input
remote command (typically fieldbus)

there is a mask that enables the sources:
bit0= digital parameter, bit1= digital input, bit2=remote command

the function performs AND between the sources (bit0,1,2) which bit is set TRUE.

Note: if bit0=bit1=bit2=0 the function return TRUE
" }

	VAR_INPUT
	digpar : BOOL; { DE:"digital parameter" } 
	digitalInputs : UINT; { DE:"digital inputs bitword" } 
	nBitDigitalInputs : INT; { DE:"digital input bit number" } 
	remoteCommand : UINT; { DE:"remote command bitword" } 
	nBitRemoteCommand : UINT; { DE:"remote command bit" } 
	enableMask : UINT; { DE:"enable mask: bit0=dig par, bit1=dig input, bit2=remote command)" } 
	END_VAR

	*** Function data allocation

	Par digpar: REGISTER d4
	Par digitalInputs: REGISTER d5
	Par nBitDigitalInputs: REGISTER d6
	Par remoteCommand: REGISTER d7
	Par nBitRemoteCommand: LOCAL STACK FRAME AT 0(sp)
	Par enableMask: CALLER STACK FRAME AT 4(sp)

A00109B0  A1F0400B		mov d10, d4
A00109B4  B1F0500B		mov d11, d5
A00109B8  C1F0600B		mov d12, d6
A00109BC  D1F0700B		mov d13, d7
A00109C0  C000A001		mov.aa a12, sp
A00109C4  800040BB		mov.u d8, #4
A00109C8  E6308001		mov.a a14, d8
A00109CC  A020EA01		sub.a sp, sp, a14

#0		{SRC:ReadCommandAnd}
#1		
#2		
#3			(* IF enableMask AND 1) <> 0 *)
#4			LD		enableMask	{L:3}
(*) UNDEF
A00109D0  800040BB		mov.u d8, #0x4
A00109D4  F600C801		addsc.a a15, a12, d8, #0
A00109D8  08C0FF09		ld.hu d15, [a15]

#5			AND		1	{L:3}
(*) UINT
A00109DC  8000103B		mov d8, #1
A00109E0  F0808F0F		and d15, d15, d8

#6			NE		0	{L:3}
(*) UINT
A00109E4  8000003B		mov d8, #0
A00109E8  F1108F0B		ne d15, d15, d8

#7			JMPCN	$label0	{L:3}
(-) BOOL
A00109EC  00180FDF		jeq d15, #0, #0x0018 ; JUMP 0xA0010A1C

#8		
#9			(* THEN *)
#10		
#11		
#12				(* IF digpar *)
#13				LD		digpar	{L:4}
(*) UNDEF
A00109F0  F1F0A00B		mov d15, d10

#14				NOT	{L:4}
(*) BOOL
A00109F4  8000103B		mov d8, #1
A00109F8  9000003B		mov d9, #0
A00109FC  FF40892B		sel d15, d15, d9, d8

#15				JMPCN	$label1	{L:4}
(-) BOOL
A0010A00  000E0FDF		jeq d15, #0, #0x000E ; JUMP 0xA0010A1C

#16		
#17				(* THEN *)
#18		
#19					(* ReadCommandAnd := FALSE; *)
#20					LD		FALSE	{L:5}
(*) UNDEF
A0010A04  F000003B		mov d15, #0

#21					ST		ReadCommandAnd	{L:5}
(*) BOOL
A0010A08  21F0F00B		mov d2, d15

#22		
#23					(* RETURN *)
#24					RET
(-) BOOL
A0010A0C  FA001091		movh.a a15, #0xA001 ; 0xA0010B14
A0010A10  C094FFD9		lea a15,[a15]0x0B14
A0010A14  0000000D		nop
A0010A18  00300F2D		ji a15

#25		
#26		$label1:
#27				(* END_IF *)
#28		
#29		$label0:
#30			(* END_IF *)
#31		
#32		
#33			(* IF enableMask AND 2) <> 0 *)
#34			LD		enableMask	{L:11}
(*) UNDEF
A0010A1C  800040BB		mov.u d8, #0x4
A0010A20  F600C801		addsc.a a15, a12, d8, #0
A0010A24  08C0FF09		ld.hu d15, [a15]

#35			AND		2	{L:11}
(*) UINT
A0010A28  8000203B		mov d8, #2
A0010A2C  F0808F0F		and d15, d15, d8

#36			NE		0	{L:11}
(*) UINT
A0010A30  8000003B		mov d8, #0
A0010A34  F1108F0B		ne d15, d15, d8

#37			JMPCN	$label2	{L:11}
(-) BOOL
A0010A38  00300FDF		jeq d15, #0, #0x0030 ; JUMP 0xA0010A98

#38		
#39			(* THEN *)
#40		
#41		
#42				(* IF nBitDigitalInputs >= 0 *)
#43				LD		nBitDigitalInputs	{L:12}
(*) UNDEF
A0010A3C  F1F0C00B		mov d15, d12

#44				GE		0	{L:12}
(*) INT
A0010A40  8000003B		mov d8, #0
A0010A44  F1408F0B		ge d15, d15, d8

#45				JMPCN	$label3	{L:12}
(-) BOOL
A0010A48  00280FDF		jeq d15, #0, #0x0028 ; JUMP 0xA0010A98

#46		
#47				(* THEN *)
#48		
#49		
#50					(* IF digitalInputs, TO_UINT(nBitDigitalInputs)) *)
#51					LD		nBitDigitalInputs	{L:13}
(*) UNDEF
A0010A4C  F1F0C00B		mov d15, d12

#52					TO_UINT	{L:13}
(*) INT
#53					ST		$$TMP0	{L:13}
(*) UINT
A0010A50  F000A001		mov.aa a15, sp
A0010A54  0880FF89		st.h [a15], d15

#54					LD		digitalInputs	{L:13}
(*) UNDEF
A0010A58  F1F0B00B		mov d15, d11

#55					RBit		$$TMP0	{L:13}
(-) UINT
A0010A5C  F000A001		mov.aa a15, sp
A0010A60  08C0F509		ld.hu d5, [a15]
A0010A64  41F0F00B		mov d4, d15
A0010A68  FD88FF6D		call #0xFFFD88 ; CALL 0xA0010578
A0010A6C  F1F0200B		mov d15, d2

#56					NOT	{L:13}
(*) BOOL
A0010A70  8000103B		mov d8, #1
A0010A74  9000003B		mov d9, #0
A0010A78  FF40892B		sel d15, d15, d9, d8

#57					JMPCN	$label4	{L:13}
(-) BOOL
A0010A7C  000E0FDF		jeq d15, #0, #0x000E ; JUMP 0xA0010A98

#58		
#59					(* THEN *)
#60		
#61						(* ReadCommandAnd := FALSE; *)
#62						LD		FALSE	{L:14}
(*) UNDEF
A0010A80  F000003B		mov d15, #0

#63						ST		ReadCommandAnd	{L:14}
(*) BOOL
A0010A84  21F0F00B		mov d2, d15

#64		
#65						(* RETURN *)
#66						RET
(-) BOOL
A0010A88  FA001091		movh.a a15, #0xA001 ; 0xA0010B14
A0010A8C  C094FFD9		lea a15,[a15]0x0B14
A0010A90  0000000D		nop
A0010A94  00300F2D		ji a15

#67		
#68		$label4:
#69					(* END_IF *)
#70		
#71		$label3:
#72				(* END_IF *)
#73		
#74		$label2:
#75			(* END_IF *)
#76		
#77		
#78			(* IF enableMask AND 4) <> 0 *)
#79			LD		enableMask	{L:21}
(*) UNDEF
A0010A98  800040BB		mov.u d8, #0x4
A0010A9C  F600C801		addsc.a a15, a12, d8, #0
A0010AA0  08C0FF09		ld.hu d15, [a15]

#80			AND		4	{L:21}
(*) UINT
A0010AA4  8000403B		mov d8, #4
A0010AA8  F0808F0F		and d15, d15, d8

#81			NE		0	{L:21}
(*) UINT
A0010AAC  8000003B		mov d8, #0
A0010AB0  F1108F0B		ne d15, d15, d8

#82			JMPCN	$label5	{L:21}
(-) BOOL
A0010AB4  002C0FDF		jeq d15, #0, #0x002C ; JUMP 0xA0010B0C

#83		
#84			(* THEN *)
#85		
#86		
#87				(* IF nBitRemoteCommand >= 0 *)
#88				LD		nBitRemoteCommand	{L:22}
(*) UNDEF
A0010AB8  F000C001		mov.aa a15, a12
A0010ABC  08C0FF09		ld.hu d15, [a15]

#89				GE		0	{L:22}
(*) UINT
A0010AC0  8000003B		mov d8, #0
A0010AC4  F1508F0B		ge.u d15, d15, d8

#90				JMPCN	$label6	{L:22}
(-) BOOL
A0010AC8  00220FDF		jeq d15, #0, #0x0022 ; JUMP 0xA0010B0C

#91		
#92				(* THEN *)
#93		
#94		
#95					(* IF remoteCommand, nBitRemoteCommand) *)
#96					LD		remoteCommand	{L:23}
(*) UNDEF
A0010ACC  F1F0D00B		mov d15, d13

#97					RBit		nBitRemoteCommand	{L:23}
(-) UINT
A0010AD0  F000C001		mov.aa a15, a12
A0010AD4  08C0F509		ld.hu d5, [a15]
A0010AD8  41F0F00B		mov d4, d15
A0010ADC  FD4EFF6D		call #0xFFFD4E ; CALL 0xA0010578
A0010AE0  F1F0200B		mov d15, d2

#98					NOT	{L:23}
(*) BOOL
A0010AE4  8000103B		mov d8, #1
A0010AE8  9000003B		mov d9, #0
A0010AEC  FF40892B		sel d15, d15, d9, d8

#99					JMPCN	$label7	{L:23}
(-) BOOL
A0010AF0  000E0FDF		jeq d15, #0, #0x000E ; JUMP 0xA0010B0C

#100		
#101					(* THEN *)
#102		
#103						(* ReadCommandAnd := FALSE; *)
#104						LD		FALSE	{L:24}
(*) UNDEF
A0010AF4  F000003B		mov d15, #0

#105						ST		ReadCommandAnd	{L:24}
(*) BOOL
A0010AF8  21F0F00B		mov d2, d15

#106		
#107						(* RETURN *)
#108						RET
(-) BOOL
A0010AFC  FA001091		movh.a a15, #0xA001 ; 0xA0010B14
A0010B00  C094FFD9		lea a15,[a15]0x0B14
A0010B04  0000000D		nop
A0010B08  00300F2D		ji a15

#109		
#110		$label7:
#111					(* END_IF *)
#112		
#113		$label6:
#114				(* END_IF *)
#115		
#116		$label5:
#117			(* END_IF *)
#118		
#119			(* ReadCommandAnd := TRUE; *)
#120			LD		TRUE	{L:33}
(*) UNDEF
A0010B0C  F000103B		mov d15, #1

#121			ST		ReadCommandAnd	{L:33}
(*) BOOL
A0010B10  21F0F00B		mov d2, d15

A0010B14  800040BB		mov.u d8, #4
A0010B18  E6308001		mov.a a14, d8
A0010B1C  A010EA01		add.a sp, sp, a14

A0010B20  0180000D		ret

END_FUNCTION
**************************************************
	List function: ReadCommandOr
**************************************************

FUNCTION ReadCommandOr : BOOL

{ DE:"Digital command management (OR)
3 sources are available:
digital parameter
digital input
remote command (typically fieldbus)

there is a mask that enables the sources:
bit0= digital parameter, bit1= digital input, bit2=remote command

the function performs and OR between the sources (bit0,1,2) which bit is set TRUE.

Note: if bit0=bit1=bit2=0 the function return FALSE
" }

	VAR_INPUT
	digpar : BOOL; { DE:"digital parameter" } 
	digitalInputs : UINT; { DE:"digital inputs bitword" } 
	nBitDigitalInputs : INT; { DE:"digital input bit number" } 
	remoteCommand : UINT; { DE:"remote command bitword" } 
	nBitRemoteCommand : UINT; { DE:"remote command bit" } 
	enableMask : UINT; { DE:"enable mask: bit0=dig par, bit1=dig input, bit2=remote command)" } 
	END_VAR

	*** Function data allocation

	Par digpar: REGISTER d4
	Par digitalInputs: REGISTER d5
	Par nBitDigitalInputs: REGISTER d6
	Par remoteCommand: REGISTER d7
	Par nBitRemoteCommand: LOCAL STACK FRAME AT 0(sp)
	Par enableMask: CALLER STACK FRAME AT 4(sp)

A0010B24  A1F0400B		mov d10, d4
A0010B28  B1F0500B		mov d11, d5
A0010B2C  C1F0600B		mov d12, d6
A0010B30  D1F0700B		mov d13, d7
A0010B34  C000A001		mov.aa a12, sp
A0010B38  800040BB		mov.u d8, #4
A0010B3C  E6308001		mov.a a14, d8
A0010B40  A020EA01		sub.a sp, sp, a14

#0		{SRC:ReadCommandOr}
#1		
#2		
#3			(* IF enableMask AND 1) <> 0 *)
#4			LD		enableMask	{L:3}
(*) UNDEF
A0010B44  800040BB		mov.u d8, #0x4
A0010B48  F600C801		addsc.a a15, a12, d8, #0
A0010B4C  08C0FF09		ld.hu d15, [a15]

#5			AND		1	{L:3}
(*) UINT
A0010B50  8000103B		mov d8, #1
A0010B54  F0808F0F		and d15, d15, d8

#6			NE		0	{L:3}
(*) UINT
A0010B58  8000003B		mov d8, #0
A0010B5C  F1108F0B		ne d15, d15, d8

#7			JMPCN	$label0	{L:3}
(-) BOOL
A0010B60  00120FDF		jeq d15, #0, #0x0012 ; JUMP 0xA0010B84

#8		
#9			(* THEN *)
#10		
#11		
#12				(* IF digpar *)
#13				LD		digpar	{L:4}
(*) UNDEF
A0010B64  F1F0A00B		mov d15, d10

#14				JMPCN	$label1	{L:4}
(-) BOOL
A0010B68  000E0FDF		jeq d15, #0, #0x000E ; JUMP 0xA0010B84

#15		
#16				(* THEN *)
#17		
#18					(* ReadCommandOr := TRUE; *)
#19					LD		TRUE	{L:5}
(*) UNDEF
A0010B6C  F000103B		mov d15, #1

#20					ST		ReadCommandOr	{L:5}
(*) BOOL
A0010B70  21F0F00B		mov d2, d15

#21		
#22					(* RETURN *)
#23					RET
(-) BOOL
A0010B74  FA001091		movh.a a15, #0xA001 ; 0xA0010C64
A0010B78  10E4FFD9		lea a15,[a15]0x0C64
A0010B7C  0000000D		nop
A0010B80  00300F2D		ji a15

#24		
#25		$label1:
#26				(* END_IF *)
#27		
#28		$label0:
#29			(* END_IF *)
#30		
#31		
#32			(* IF enableMask AND 2) <> 0 *)
#33			LD		enableMask	{L:11}
(*) UNDEF
A0010B84  800040BB		mov.u d8, #0x4
A0010B88  F600C801		addsc.a a15, a12, d8, #0
A0010B8C  08C0FF09		ld.hu d15, [a15]

#34			AND		2	{L:11}
(*) UINT
A0010B90  8000203B		mov d8, #2
A0010B94  F0808F0F		and d15, d15, d8

#35			NE		0	{L:11}
(*) UINT
A0010B98  8000003B		mov d8, #0
A0010B9C  F1108F0B		ne d15, d15, d8

#36			JMPCN	$label2	{L:11}
(-) BOOL
A0010BA0  002A0FDF		jeq d15, #0, #0x002A ; JUMP 0xA0010BF4

#37		
#38			(* THEN *)
#39		
#40		
#41				(* IF nBitDigitalInputs >= 0 *)
#42				LD		nBitDigitalInputs	{L:12}
(*) UNDEF
A0010BA4  F1F0C00B		mov d15, d12

#43				GE		0	{L:12}
(*) INT
A0010BA8  8000003B		mov d8, #0
A0010BAC  F1408F0B		ge d15, d15, d8

#44				JMPCN	$label3	{L:12}
(-) BOOL
A0010BB0  00220FDF		jeq d15, #0, #0x0022 ; JUMP 0xA0010BF4

#45		
#46				(* THEN *)
#47		
#48		
#49					(* IF digitalInputs, TO_UINT(nBitDigitalInputs *)
#50					LD		nBitDigitalInputs	{L:13}
(*) UNDEF
A0010BB4  F1F0C00B		mov d15, d12

#51					TO_UINT	{L:13}
(*) INT
#52					ST		$$TMP0	{L:13}
(*) UINT
A0010BB8  F000A001		mov.aa a15, sp
A0010BBC  0880FF89		st.h [a15], d15

#53					LD		digitalInputs	{L:13}
(*) UNDEF
A0010BC0  F1F0B00B		mov d15, d11

#54					RBit		$$TMP0	{L:13}
(-) UINT
A0010BC4  F000A001		mov.aa a15, sp
A0010BC8  08C0F509		ld.hu d5, [a15]
A0010BCC  41F0F00B		mov d4, d15
A0010BD0  FCD4FF6D		call #0xFFFCD4 ; CALL 0xA0010578
A0010BD4  F1F0200B		mov d15, d2

#55					JMPCN	$label4	{L:13}
(-) BOOL
A0010BD8  000E0FDF		jeq d15, #0, #0x000E ; JUMP 0xA0010BF4

#56		
#57					(* THEN *)
#58		
#59						(* ReadCommandOr := TRUE; *)
#60						LD		TRUE	{L:14}
(*) UNDEF
A0010BDC  F000103B		mov d15, #1

#61						ST		ReadCommandOr	{L:14}
(*) BOOL
A0010BE0  21F0F00B		mov d2, d15

#62		
#63						(* RETURN *)
#64						RET
(-) BOOL
A0010BE4  FA001091		movh.a a15, #0xA001 ; 0xA0010C64
A0010BE8  10E4FFD9		lea a15,[a15]0x0C64
A0010BEC  0000000D		nop
A0010BF0  00300F2D		ji a15

#65		
#66		$label4:
#67					(* END_IF *)
#68		
#69		$label3:
#70				(* END_IF *)
#71		
#72		$label2:
#73			(* END_IF *)
#74		
#75		
#76			(* IF enableMask AND 4) <> 0 *)
#77			LD		enableMask	{L:21}
(*) UNDEF
A0010BF4  800040BB		mov.u d8, #0x4
A0010BF8  F600C801		addsc.a a15, a12, d8, #0
A0010BFC  08C0FF09		ld.hu d15, [a15]

#78			AND		4	{L:21}
(*) UINT
A0010C00  8000403B		mov d8, #4
A0010C04  F0808F0F		and d15, d15, d8

#79			NE		0	{L:21}
(*) UINT
A0010C08  8000003B		mov d8, #0
A0010C0C  F1108F0B		ne d15, d15, d8

#80			JMPCN	$label5	{L:21}
(-) BOOL
A0010C10  00260FDF		jeq d15, #0, #0x0026 ; JUMP 0xA0010C5C

#81		
#82			(* THEN *)
#83		
#84		
#85				(* IF nBitRemoteCommand >= 0 *)
#86				LD		nBitRemoteCommand	{L:22}
(*) UNDEF
A0010C14  F000C001		mov.aa a15, a12
A0010C18  08C0FF09		ld.hu d15, [a15]

#87				GE		0	{L:22}
(*) UINT
A0010C1C  8000003B		mov d8, #0
A0010C20  F1508F0B		ge.u d15, d15, d8

#88				JMPCN	$label6	{L:22}
(-) BOOL
A0010C24  001C0FDF		jeq d15, #0, #0x001C ; JUMP 0xA0010C5C

#89		
#90				(* THEN *)
#91		
#92		
#93					(* IF remoteCommand, nBitRemoteCommand *)
#94					LD		remoteCommand	{L:23}
(*) UNDEF
A0010C28  F1F0D00B		mov d15, d13

#95					RBit		nBitRemoteCommand	{L:23}
(-) UINT
A0010C2C  F000C001		mov.aa a15, a12
A0010C30  08C0F509		ld.hu d5, [a15]
A0010C34  41F0F00B		mov d4, d15
A0010C38  FCA0FF6D		call #0xFFFCA0 ; CALL 0xA0010578
A0010C3C  F1F0200B		mov d15, d2

#96					JMPCN	$label7	{L:23}
(-) BOOL
A0010C40  000E0FDF		jeq d15, #0, #0x000E ; JUMP 0xA0010C5C

#97		
#98					(* THEN *)
#99		
#100						(* ReadCommandOr := TRUE; *)
#101						LD		TRUE	{L:24}
(*) UNDEF
A0010C44  F000103B		mov d15, #1

#102						ST		ReadCommandOr	{L:24}
(*) BOOL
A0010C48  21F0F00B		mov d2, d15

#103		
#104						(* RETURN *)
#105						RET
(-) BOOL
A0010C4C  FA001091		movh.a a15, #0xA001 ; 0xA0010C64
A0010C50  10E4FFD9		lea a15,[a15]0x0C64
A0010C54  0000000D		nop
A0010C58  00300F2D		ji a15

#106		
#107		$label7:
#108					(* END_IF *)
#109		
#110		$label6:
#111				(* END_IF *)
#112		
#113		$label5:
#114			(* END_IF *)
#115		
#116			(* ReadCommandOr := FALSE; *)
#117			LD		FALSE	{L:31}
(*) UNDEF
A0010C5C  F000003B		mov d15, #0

#118			ST		ReadCommandOr	{L:31}
(*) BOOL
A0010C60  21F0F00B		mov d2, d15

A0010C64  800040BB		mov.u d8, #4
A0010C68  E6308001		mov.a a14, d8
A0010C6C  A010EA01		add.a sp, sp, a14

A0010C70  0180000D		ret

END_FUNCTION
***********************************************************************
UNUSED FUNCTION BLOCKS:

	RLS_conKf
	sysDBReadIntegerFieldMin
	sysDBReadIntegerFieldMax
	sysDBReadIntegerFieldEu
	sysDBReadIntegerFieldScale
	sysDBReadIntegerField
	sysDBReadRealFieldMin
	sysDBReadRealFieldMax
	sysDBReadRealFieldEu
	sysDBReadRealFieldScale
	sysDBReadRealField
	sysDBGetIntegerPar
	sysDBGetIntegerFieldMin
	sysDBGetIntegerFieldMax
	sysDBGetIntegerFieldEu
	sysDBGetIntegerFieldScale
	sysDBGetIntegerField
	sysDBGetRealPar
	sysDBGetRealFieldMin
	sysDBGetRealFieldMax
	sysDBGetRealFieldEu
	sysDBGetRealFieldScale
	sysDBGetRealField
	TON
	TOF
	SR
	RS
	R_TRIG
	FF_D
	F_TRIG
	DiameterCalculation
	LP_FilterR
	PID
	PidR
	LinearRampR
	TorqueFFwd
	UpDown
	DelayDW
	UpDownR
	LinearRamp
	Counter
	Pulse
	SegmentFB
	ByteToBit
	WordToBit
	WordtoByte
	SquareWave
	TwoByteToWord
	TwoWordToDWord
	FourByteToDWord

***********************************************************************
**************************************************
	List function block: InputConversionADV200
**************************************************

FUNCTION_BLOCK InputConversionADV200

	VAR_INPUT
	Krpm : REAL; { DE:"Costante di conversione [rpm/count]" } 
	Krad_s : REAL; { DE:"Costante di conversione [rad/s/count]" } 
	KArms : REAL; { DE:"Costante di conversione Corrente [Arms/count]" } 
	KCnt2Nm : REAL; { DE:"Conversione da count a Nm [cnt/Nm]" } 
	sysPos : DINT; { DE:"Posizione letta dall'azionamento " } 
	sysSpd : DINT; { DE:"VelocitÃ  letta dall'azionamento " } 
	sysIq : DINT; { DE:"Corrente letta dall'azionamento" } 
	sysTrqRef : DINT; { DE:"Coppia letta dall'azionamento" } 
	PosDINT : DINT; { DE:"Posizione letta dall'azionamento in funzione della velocitÃ " } 
	offset : REAL; { DE:"Offset di Posizione [rad]" } 
	sysRev : DINT; { DE:"Numero di rivoluzioni dell'encoder" } 
	_sysTrqNoFilt : DINT; 
	END_VAR

	VAR_OUTPUT
	pos : REAL; { DE:"Posizione angolare del motore [rad]" } 
	vel_rpm : REAL; { DE:"VelocitÃ  del motore [rpm]" } 
	vel : REAL; { DE:"VelocitÃ  angolare del motore [rad/s]" } 
	trq : REAL; { DE:"Coppia erogata dal motore [N*m]" } 
	curr : REAL; { DE:"Corrente di coppia del motore [Arms]" } 
	END_VAR

	VAR_EXTERNAL
	v_Position : REAL; 
	v_Speed : REAL; 
	v_Torque : REAL; 
	END_VAR

A0010C74  C0004001		mov.aa a12, a4

#0		{SRC:InputConversionADV200}
#1		
#2			(* pos:=(TO_REAL(sysPos)/PosDINT+sysRev)*2.0*PI + offset; *)
#3			LD		sysPos	{L:4}
(*) UNDEF
A0010C78  800100BB		mov.u d8, #0x10
A0010C7C  F600C801		addsc.a a15, a12, d8, #0
A0010C80  0000FF19		ld.w d15, [a15]

#4			TO_REAL	{L:4}
(*) DINT
A0010C84  F1410F4B		itof d15, d15

#5			DIV		PosDINT	{L:4}
(*) REAL
A0010C88  800200BB		mov.u d8, #0x20
A0010C8C  F600C801		addsc.a a15, a12, d8, #0
A0010C90  0000F819		ld.w d8, [a15]
A0010C94  8141084B		itof d8, d8
A0010C98  F0518F4B		div.f d15, d15, d8

#6			ADD		sysRev	{L:4}
(*) REAL
A0010C9C  800280BB		mov.u d8, #0x28
A0010CA0  F600C801		addsc.a a15, a12, d8, #0
A0010CA4  0000F819		ld.w d8, [a15]
A0010CA8  8141084B		itof d8, d8
A0010CAC  FF21086B		add.f d15, d15, d8

#7			MUL		2.0	{L:4}
(*) REAL
A0010CB0  800000BB		mov.u d8, #0x0000 ; COSTREAL 2.000000
A0010CB4  8400089B		addih d8, d8, #0x4000
A0010CB8  F0418F4B		mul.f d15, d15, d8

#8			MUL		PI	{L:4}
(*) REAL
A0010CBC  80FDB0BB		mov.u d8, #0x0FDB ; COSTREAL 3.141593
A0010CC0  8404989B		addih d8, d8, #0x4049
A0010CC4  F0418F4B		mul.f d15, d15, d8

#9			ADD		offset	{L:4}
(*) REAL
A0010CC8  800240BB		mov.u d8, #0x24
A0010CCC  F600C801		addsc.a a15, a12, d8, #0
A0010CD0  0000F819		ld.w d8, [a15]
A0010CD4  FF21086B		add.f d15, d15, d8

#10			ST		pos	{L:4}
(*) REAL
A0010CD8  800300BB		mov.u d8, #0x30
A0010CDC  F600C801		addsc.a a15, a12, d8, #0
A0010CE0  0000FF59		st.w [a15], d15

#11		
#12			(* vel_rpm:= TO_REAL(sysSpd)*Krpm; *)
#13			LD		sysSpd	{L:6}
(*) UNDEF
A0010CE4  800140BB		mov.u d8, #0x14
A0010CE8  F600C801		addsc.a a15, a12, d8, #0
A0010CEC  0000FF19		ld.w d15, [a15]

#14			TO_REAL	{L:6}
(*) DINT
A0010CF0  F1410F4B		itof d15, d15

#15			MUL		Krpm	{L:6}
(*) REAL
A0010CF4  F000C001		mov.aa a15, a12
A0010CF8  0000F819		ld.w d8, [a15]
A0010CFC  F0418F4B		mul.f d15, d15, d8

#16			ST		vel_rpm	{L:6}
(*) REAL
A0010D00  800340BB		mov.u d8, #0x34
A0010D04  F600C801		addsc.a a15, a12, d8, #0
A0010D08  0000FF59		st.w [a15], d15

#17		
#18			(* vel:=TO_REAL(sysSpd)*Krad_s; *)
#19			LD		sysSpd	{L:8}
(*) UNDEF
A0010D0C  800140BB		mov.u d8, #0x14
A0010D10  F600C801		addsc.a a15, a12, d8, #0
A0010D14  0000FF19		ld.w d15, [a15]

#20			TO_REAL	{L:8}
(*) DINT
A0010D18  F1410F4B		itof d15, d15

#21			MUL		Krad_s	{L:8}
(*) REAL
A0010D1C  800040BB		mov.u d8, #0x4
A0010D20  F600C801		addsc.a a15, a12, d8, #0
A0010D24  0000F819		ld.w d8, [a15]
A0010D28  F0418F4B		mul.f d15, d15, d8

#22			ST		vel	{L:8}
(*) REAL
A0010D2C  800380BB		mov.u d8, #0x38
A0010D30  F600C801		addsc.a a15, a12, d8, #0
A0010D34  0000FF59		st.w [a15], d15

#23		
#24			(* curr:=TO_REAL(sysIq)*KArms; *)
#25			LD		sysIq	{L:10}
(*) UNDEF
A0010D38  800180BB		mov.u d8, #0x18
A0010D3C  F600C801		addsc.a a15, a12, d8, #0
A0010D40  0000FF19		ld.w d15, [a15]

#26			TO_REAL	{L:10}
(*) DINT
A0010D44  F1410F4B		itof d15, d15

#27			MUL		KArms	{L:10}
(*) REAL
A0010D48  800080BB		mov.u d8, #0x8
A0010D4C  F600C801		addsc.a a15, a12, d8, #0
A0010D50  0000F819		ld.w d8, [a15]
A0010D54  F0418F4B		mul.f d15, d15, d8

#28			ST		curr	{L:10}
(*) REAL
A0010D58  800400BB		mov.u d8, #0x40
A0010D5C  F600C801		addsc.a a15, a12, d8, #0
A0010D60  0000FF59		st.w [a15], d15

#29		
#30			(* trq := TO_REAL(_sysTrqNoFilt) * KCnt2Nm; *)
#31			LD		_sysTrqNoFilt	{L:12}
(*) UNDEF
A0010D64  8002C0BB		mov.u d8, #0x2C
A0010D68  F600C801		addsc.a a15, a12, d8, #0
A0010D6C  0000FF19		ld.w d15, [a15]

#32			TO_REAL	{L:12}
(*) DINT
A0010D70  F1410F4B		itof d15, d15

#33			MUL		KCnt2Nm	{L:12}
(*) REAL
A0010D74  8000C0BB		mov.u d8, #0xC
A0010D78  F600C801		addsc.a a15, a12, d8, #0
A0010D7C  0000F819		ld.w d8, [a15]
A0010D80  F0418F4B		mul.f d15, d15, d8

#34			ST		trq	{L:12}
(*) REAL
A0010D84  8003C0BB		mov.u d8, #0x3C
A0010D88  F600C801		addsc.a a15, a12, d8, #0
A0010D8C  0000FF59		st.w [a15], d15

#35		
#36			(* v_Position := pos; *)
#37			LD		pos	{L:14}
(*) UNDEF
A0010D90  800300BB		mov.u d8, #0x30
A0010D94  F600C801		addsc.a a15, a12, d8, #0
A0010D98  0000FF19		ld.w d15, [a15]

#38			ST		v_Position	{L:14}
(*) REAL
A0010D9C  0230CFA5		st.w #0x32030, d15 ; ADR 0xC0002030
A0010DA0  0000000D		nop

#39		
#40			(* v_Speed := vel; *)
#41			LD		vel	{L:16}
(*) UNDEF
A0010DA4  800380BB		mov.u d8, #0x38
A0010DA8  F600C801		addsc.a a15, a12, d8, #0
A0010DAC  0000FF19		ld.w d15, [a15]

#42			ST		v_Speed	{L:16}
(*) REAL
A0010DB0  0234CFA5		st.w #0x32034, d15 ; ADR 0xC0002034
A0010DB4  0000000D		nop

#43		
#44			(* v_Torque := trq; *)
#45			LD		trq	{L:18}
(*) UNDEF
A0010DB8  8003C0BB		mov.u d8, #0x3C
A0010DBC  F600C801		addsc.a a15, a12, d8, #0
A0010DC0  0000FF19		ld.w d15, [a15]

#46			ST		v_Torque	{L:18}
(*) REAL
A0010DC4  0238CFA5		st.w #0x32038, d15 ; ADR 0xC0002038
A0010DC8  0000000D		nop

A0010DCC  0180000D		ret


Frame allocation:

	0000       : VAR Krpm
	0004       : VAR Krad_s
	0008       : VAR KArms
	000C       : VAR KCnt2Nm
	0010       : VAR sysPos
	0014       : VAR sysSpd
	0018       : VAR sysIq
	001C       : VAR sysTrqRef
	0020       : VAR PosDINT
	0024       : VAR offset
	0028       : VAR sysRev
	002C       : VAR _sysTrqNoFilt
	0030       : VAR pos
	0034       : VAR vel_rpm
	0038       : VAR vel
	003C       : VAR trq
	0040       : VAR curr

END_FUNCTION_BLOCK
**************************************************
	List function block: fb_NoiseLevelID
**************************************************

FUNCTION_BLOCK fb_NoiseLevelID

	VAR_INPUT
	fbInit : BOOL; 
	timeID : REAL; 
	signal : REAL; 
	ENABLE : BOOL; 
	Ts : REAL; 
	END_VAR

	VAR_OUTPUT
	noiseLevel : REAL; 
	END : BOOL; 
	END_VAR

	VAR
	time : REAL; 
	END_VAR

A0010DD0  C0004001		mov.aa a12, a4

#0		{SRC:fb_NoiseLevelID}
#1		
#2		
#3			(* IF fbInit *)
#4			LD		fbInit	{L:1}
(*) UNDEF
A0010DD4  800040BB		mov.u d8, #0x4
A0010DD8  F600C801		addsc.a a15, a12, d8, #0
A0010DDC  0000FF19		ld.w d15, [a15]

#5			JMPCN	$label0	{L:1}
(-) BOOL
A0010DE0  001E0FDF		jeq d15, #0, #0x001E ; JUMP 0xA0010E1C

#6		
#7			(* THEN *)
#8		
#9				(* noiseLevel := 0.0; *)
#10				LD		0.0	{L:2}
(*) UNDEF
A0010DE4  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A0010DE8  F0000F9B		addih d15, d15, #0x0000

#11				ST		noiseLevel	{L:2}
(*) REAL
A0010DEC  800180BB		mov.u d8, #0x18
A0010DF0  F600C801		addsc.a a15, a12, d8, #0
A0010DF4  0000FF59		st.w [a15], d15

#12		
#13				(* time       := 0.0; *)
#14				LD		0.0	{L:3}
(*) UNDEF
A0010DF8  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A0010DFC  F0000F9B		addih d15, d15, #0x0000

#15				ST		time	{L:3}
(*) REAL
A0010E00  F000C001		mov.aa a15, a12
A0010E04  0000FF59		st.w [a15], d15

#16		
#17				(* END		   := FALSE; *)
#18				LD		FALSE	{L:4}
(*) UNDEF
A0010E08  F000003B		mov d15, #0

#19				ST		END	{L:4}
(*) BOOL
A0010E0C  8001C0BB		mov.u d8, #0x1C
A0010E10  F600C801		addsc.a a15, a12, d8, #0
A0010E14  0000FF59		st.w [a15], d15

#20				JMP		$label1
(-) BOOL
A0010E18  0080001D		j #0x000080 ; JUMP 0xA0010F18

#21		$label0:
#22		
#23			(* ELSE *)
#24		
#25		
#26				(* IF ENABLE *)
#27				LD		ENABLE	{L:6}
(*) UNDEF
A0010E1C  800100BB		mov.u d8, #0x10
A0010E20  F600C801		addsc.a a15, a12, d8, #0
A0010E24  0000FF19		ld.w d15, [a15]

#28				JMPCN	$label2	{L:6}
(-) BOOL
A0010E28  00640FDF		jeq d15, #0, #0x0064 ; JUMP 0xA0010EF0

#29		
#30				(* THEN *)
#31		
#32					(* time := time + Ts; *)
#33					LD		time	{L:7}
(*) UNDEF
A0010E2C  F000C001		mov.aa a15, a12
A0010E30  0000FF19		ld.w d15, [a15]

#34					ADD		Ts	{L:7}
(*) REAL
A0010E34  800140BB		mov.u d8, #0x14
A0010E38  F600C801		addsc.a a15, a12, d8, #0
A0010E3C  0000F819		ld.w d8, [a15]
A0010E40  FF21086B		add.f d15, d15, d8

#35					ST		time	{L:7}
(*) REAL
A0010E44  F000C001		mov.aa a15, a12
A0010E48  0000FF59		st.w [a15], d15

#36		
#37		
#38					(* IF time <= timeID *)
#39					LD		time	{L:8}
(*) UNDEF
A0010E4C  F000C001		mov.aa a15, a12
A0010E50  0000FF19		ld.w d15, [a15]

#40					LE		timeID	{L:8}
(*) REAL
A0010E54  800080BB		mov.u d8, #0x8
A0010E58  F600C801		addsc.a a15, a12, d8, #0
A0010E5C  0000F519		ld.w d5, [a15]
A0010E60  F0015F4B		cmp.f d15, d15, d5
A0010E64  F2204F8B		ne d15, d15, #4

#41					JMPCN	$label4	{L:8}
(-) BOOL
A0010E68  003A0FDF		jeq d15, #0, #0x003A ; JUMP 0xA0010EDC

#42		
#43					(* THEN *)
#44		
#45		
#46						(* IF signal) > noiseLevel *)
#47						LD		signal	{L:9}
(*) UNDEF
A0010E6C  8000C0BB		mov.u d8, #0xC
A0010E70  F600C801		addsc.a a15, a12, d8, #0
A0010E74  0000FF19		ld.w d15, [a15]

#48						ABS	{L:9}
(*) REAL
A0010E78  41F0F00B		mov d4, d15
A0010E7C  F8009091		movh.a a15, #0x8009 ; _do_float_abs AT 0x80091CF0
A0010E80  31F0FFD9		lea a15,[a15]0x1CF0
A0010E84  0000000D		nop
A0010E88  00000F2D		calli a15
A0010E8C  F1F0200B		mov d15, d2

#49						GT		noiseLevel	{L:9}
(*) REAL
A0010E90  800180BB		mov.u d8, #0x18
A0010E94  F600C801		addsc.a a15, a12, d8, #0
A0010E98  0000F519		ld.w d5, [a15]
A0010E9C  F0015F4B		cmp.f d15, d15, d5
A0010EA0  F2004F8B		eq d15, d15, #4

#50						JMPCN	$label6	{L:9}
(-) BOOL
A0010EA4  001A0FDF		jeq d15, #0, #0x001A ; JUMP 0xA0010ED8

#51		
#52						(* THEN *)
#53		
#54							(* noiseLevel := ABS(signal); *)
#55							LD		signal	{L:10}
(*) UNDEF
A0010EA8  8000C0BB		mov.u d8, #0xC
A0010EAC  F600C801		addsc.a a15, a12, d8, #0
A0010EB0  0000FF19		ld.w d15, [a15]

#56							ABS	{L:10}
(*) REAL
A0010EB4  41F0F00B		mov d4, d15
A0010EB8  F8009091		movh.a a15, #0x8009 ; _do_float_abs AT 0x80091CF0
A0010EBC  31F0FFD9		lea a15,[a15]0x1CF0
A0010EC0  0000000D		nop
A0010EC4  00000F2D		calli a15
A0010EC8  F1F0200B		mov d15, d2

#57							ST		noiseLevel	{L:10}
(*) REAL
A0010ECC  800180BB		mov.u d8, #0x18
A0010ED0  F600C801		addsc.a a15, a12, d8, #0
A0010ED4  0000FF59		st.w [a15], d15

#58		
#59		$label6:
#60						(* END_IF *)
#61						JMP		$label5
(-) REAL
A0010ED8  000A001D		j #0x00000A ; JUMP 0xA0010EEC

#62		$label4:
#63		
#64					(* ELSE *)
#65		
#66						(* END := TRUE; *)
#67						LD		TRUE	{L:13}
(*) UNDEF
A0010EDC  F000103B		mov d15, #1

#68						ST		END	{L:13}
(*) BOOL
A0010EE0  8001C0BB		mov.u d8, #0x1C
A0010EE4  F600C801		addsc.a a15, a12, d8, #0
A0010EE8  0000FF59		st.w [a15], d15

#69		
#70		$label5:
#71					(* END_IF *)
#72					JMP		$label3
(-) BOOL
A0010EEC  0016001D		j #0x000016 ; JUMP 0xA0010F18

#73		$label2:
#74		
#75				(* ELSE *)
#76		
#77					(* time       := 0.0; *)
#78					LD		0.0	{L:16}
(*) UNDEF
A0010EF0  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A0010EF4  F0000F9B		addih d15, d15, #0x0000

#79					ST		time	{L:16}
(*) REAL
A0010EF8  F000C001		mov.aa a15, a12
A0010EFC  0000FF59		st.w [a15], d15

#80		
#81					(* noiseLevel := noiseLevel; *)
#82					LD		noiseLevel	{L:17}
(*) UNDEF
A0010F00  800180BB		mov.u d8, #0x18
A0010F04  F600C801		addsc.a a15, a12, d8, #0
A0010F08  0000FF19		ld.w d15, [a15]

#83					ST		noiseLevel	{L:17}
(*) REAL
A0010F0C  800180BB		mov.u d8, #0x18
A0010F10  F600C801		addsc.a a15, a12, d8, #0
A0010F14  0000FF59		st.w [a15], d15

A0010F18  0180000D		ret


Frame allocation:

	0004 bit  0: VAR fbInit
	0008       : VAR timeID
	000C       : VAR signal
	0010 bit  0: VAR ENABLE
	0014       : VAR Ts
	0018       : VAR noiseLevel
	001C bit  0: VAR END
	0000       : VAR time

END_FUNCTION_BLOCK
**************************************************
	List function block: fb_NoiseLevelID_Trj
**************************************************

FUNCTION_BLOCK fb_NoiseLevelID_Trj

	VAR_INPUT
	fbInit : BOOL; 
	ENABLE : BOOL; 
	reference : REAL; 
	END_VAR

	VAR_OUTPUT
	TrqRef : REAL; 
	END_VAR

A0010F1C  C0004001		mov.aa a12, a4

#0		{SRC:fb_NoiseLevelID_Trj}
#1		
#2		
#3			(* IF fbInit *)
#4			LD		fbInit	{L:1}
(*) UNDEF
A0010F20  F000C001		mov.aa a15, a12
A0010F24  0000FF19		ld.w d15, [a15]

#5			JMPCN	$label0	{L:1}
(-) BOOL
A0010F28  000E0FDF		jeq d15, #0, #0x000E ; JUMP 0xA0010F44

#6		
#7			(* THEN *)
#8		
#9				(* TrqRef := 0.0; *)
#10				LD		0.0	{L:2}
(*) UNDEF
A0010F2C  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A0010F30  F0000F9B		addih d15, d15, #0x0000

#11				ST		TrqRef	{L:2}
(*) REAL
A0010F34  8000C0BB		mov.u d8, #0xC
A0010F38  F600C801		addsc.a a15, a12, d8, #0
A0010F3C  0000FF59		st.w [a15], d15

#12				JMP		$label1
(-) REAL
A0010F40  0022001D		j #0x000022 ; JUMP 0xA0010F84

#13		$label0:
#14		
#15			(* ELSE *)
#16		
#17		
#18				(* IF ENABLE *)
#19				LD		ENABLE	{L:5}
(*) UNDEF
A0010F44  800040BB		mov.u d8, #0x4
A0010F48  F600C801		addsc.a a15, a12, d8, #0
A0010F4C  0000FF19		ld.w d15, [a15]

#20				JMPCN	$label2	{L:5}
(-) BOOL
A0010F50  00100FDF		jeq d15, #0, #0x0010 ; JUMP 0xA0010F70

#21		
#22				(* THEN *)
#23		
#24					(* TrqRef := reference; *)
#25					LD		reference	{L:6}
(*) UNDEF
A0010F54  800080BB		mov.u d8, #0x8
A0010F58  F600C801		addsc.a a15, a12, d8, #0
A0010F5C  0000FF19		ld.w d15, [a15]

#26					ST		TrqRef	{L:6}
(*) REAL
A0010F60  8000C0BB		mov.u d8, #0xC
A0010F64  F600C801		addsc.a a15, a12, d8, #0
A0010F68  0000FF59		st.w [a15], d15

#27					JMP		$label3
(-) REAL
A0010F6C  000C001D		j #0x00000C ; JUMP 0xA0010F84

#28		$label2:
#29		
#30				(* ELSE *)
#31		
#32					(* TrqRef := 0.0; *)
#33					LD		0.0	{L:8}
(*) UNDEF
A0010F70  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A0010F74  F0000F9B		addih d15, d15, #0x0000

#34					ST		TrqRef	{L:8}
(*) REAL
A0010F78  8000C0BB		mov.u d8, #0xC
A0010F7C  F600C801		addsc.a a15, a12, d8, #0
A0010F80  0000FF59		st.w [a15], d15

A0010F84  0180000D		ret


Frame allocation:

	0000 bit  0: VAR fbInit
	0004 bit  0: VAR ENABLE
	0008       : VAR reference
	000C       : VAR TrqRef

END_FUNCTION_BLOCK
**************************************************
	List function block: fb_StaticFrictionID_OL
**************************************************

FUNCTION_BLOCK fb_StaticFrictionID_OL

	VAR_INPUT
	fbInit : BOOL; 
	input : REAL; 
	output : REAL; 
	ENABLE : BOOL; 
	Threshold : REAL; 
	noiseLevel : REAL; 
	END_VAR

	VAR_OUTPUT
	staticFriction : REAL; 
	END : BOOL; 
	END_VAR

	VAR
	time : REAL; 
	cnt : UINT; 
	END_VAR

A0010F88  C0004001		mov.aa a12, a4

#0		{SRC:fb_StaticFrictionID_OL}
#1		
#2		
#3			(* IF fbInit *)
#4			LD		fbInit	{L:1}
(*) UNDEF
A0010F8C  800100BB		mov.u d8, #0x10
A0010F90  F600C801		addsc.a a15, a12, d8, #0
A0010F94  0000FF19		ld.w d15, [a15]

#5			JMPCN	$label0	{L:1}
(-) BOOL
A0010F98  001E0FDF		jeq d15, #0, #0x001E ; JUMP 0xA0010FD4

#6		
#7			(* THEN *)
#8		
#9				(* END		   := FALSE; *)
#10				LD		FALSE	{L:2}
(*) UNDEF
A0010F9C  F000003B		mov d15, #0

#11				ST		END	{L:2}
(*) BOOL
A0010FA0  8002C0BB		mov.u d8, #0x2C
A0010FA4  F600C801		addsc.a a15, a12, d8, #0
A0010FA8  0000FF59		st.w [a15], d15

#12		
#13				(* staticFriction := 0.0; *)
#14				LD		0.0	{L:3}
(*) UNDEF
A0010FAC  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A0010FB0  F0000F9B		addih d15, d15, #0x0000

#15				ST		staticFriction	{L:3}
(*) REAL
A0010FB4  800280BB		mov.u d8, #0x28
A0010FB8  F600C801		addsc.a a15, a12, d8, #0
A0010FBC  0000FF59		st.w [a15], d15

#16		
#17				(* cnt := 0; *)
#18				LD		0	{L:4}
(*) UNDEF
A0010FC0  F000003B		mov d15, #0

#19				ST		cnt	{L:4}
(*) USINT
A0010FC4  800040BB		mov.u d8, #0x4
A0010FC8  F600C801		addsc.a a15, a12, d8, #0
A0010FCC  0880FF89		st.h [a15], d15

#20				JMP		$label1
(-) UINT
A0010FD0  008E001D		j #0x00008E ; JUMP 0xA00110EC

#21		$label0:
#22		
#23			(* ELSE *)
#24		
#25		
#26				(* IF ENABLE *)
#27				LD		ENABLE	{L:7}
(*) UNDEF
A0010FD4  8001C0BB		mov.u d8, #0x1C
A0010FD8  F600C801		addsc.a a15, a12, d8, #0
A0010FDC  0000FF19		ld.w d15, [a15]

#28				JMPCN	$label2	{L:7}
(-) BOOL
A0010FE0  007A0FDF		jeq d15, #0, #0x007A ; JUMP 0xA00110D4

#29		
#30				(* THEN *)
#31		
#32		
#33					(* IF output) <= noiseLevel*Threshold *)
#34					LD		output	{L:8}
(*) UNDEF
A0010FE4  800180BB		mov.u d8, #0x18
A0010FE8  F600C801		addsc.a a15, a12, d8, #0
A0010FEC  0000FF19		ld.w d15, [a15]

#35					ABS	{L:8}
(*) REAL
A0010FF0  41F0F00B		mov d4, d15
A0010FF4  F8009091		movh.a a15, #0x8009 ; _do_float_abs AT 0x80091CF0
A0010FF8  31F0FFD9		lea a15,[a15]0x1CF0
A0010FFC  0000000D		nop
A0011000  00000F2D		calli a15
A0011004  F1F0200B		mov d15, d2

#36					ST		$$TMP0	{L:8}
(*) REAL
A0011008  800080BB		mov.u d8, #0x8
A001100C  F600C801		addsc.a a15, a12, d8, #0
A0011010  0000FF59		st.w [a15], d15

#37					LD		noiseLevel	{L:8}
(*) UNDEF
A0011014  800240BB		mov.u d8, #0x24
A0011018  F600C801		addsc.a a15, a12, d8, #0
A001101C  0000FF19		ld.w d15, [a15]

#38					MUL		Threshold	{L:8}
(*) REAL
A0011020  800200BB		mov.u d8, #0x20
A0011024  F600C801		addsc.a a15, a12, d8, #0
A0011028  0000F819		ld.w d8, [a15]
A001102C  F0418F4B		mul.f d15, d15, d8

#39					ST		$$TMP1	{L:8}
(*) REAL
A0011030  8000C0BB		mov.u d8, #0xC
A0011034  F600C801		addsc.a a15, a12, d8, #0
A0011038  0000FF59		st.w [a15], d15

#40					LD		$$TMP0	{L:8}
(*) UNDEF
A001103C  800080BB		mov.u d8, #0x8
A0011040  F600C801		addsc.a a15, a12, d8, #0
A0011044  0000FF19		ld.w d15, [a15]

#41					LE		$$TMP1	{L:8}
(*) REAL
A0011048  8000C0BB		mov.u d8, #0xC
A001104C  F600C801		addsc.a a15, a12, d8, #0
A0011050  0000F519		ld.w d5, [a15]
A0011054  F0015F4B		cmp.f d15, d15, d5
A0011058  F2204F8B		ne d15, d15, #4

#42					JMPCN	$label4	{L:8}
(-) BOOL
A001105C  00180FDF		jeq d15, #0, #0x0018 ; JUMP 0xA001108C

#43		
#44					(* THEN *)
#45		
#46						(* cnt := 0; *)
#47						LD		0	{L:9}
(*) UNDEF
A0011060  F000003B		mov d15, #0

#48						ST		cnt	{L:9}
(*) USINT
A0011064  800040BB		mov.u d8, #0x4
A0011068  F600C801		addsc.a a15, a12, d8, #0
A001106C  0880FF89		st.h [a15], d15

#49		
#50						(* staticFriction := input; *)
#51						LD		input	{L:10}
(*) UNDEF
A0011070  800140BB		mov.u d8, #0x14
A0011074  F600C801		addsc.a a15, a12, d8, #0
A0011078  0000FF19		ld.w d15, [a15]

#52						ST		staticFriction	{L:10}
(*) REAL
A001107C  800280BB		mov.u d8, #0x28
A0011080  F600C801		addsc.a a15, a12, d8, #0
A0011084  0000FF59		st.w [a15], d15

#53						JMP		$label5
(-) REAL
A0011088  0024001D		j #0x000024 ; JUMP 0xA00110D0

#54		$label4:
#55		
#56					(* ELSE *)
#57		
#58						(* cnt := cnt + 1; *)
#59						LD		cnt	{L:12}
(*) UNDEF
A001108C  800040BB		mov.u d8, #0x4
A0011090  F600C801		addsc.a a15, a12, d8, #0
A0011094  08C0FF09		ld.hu d15, [a15]

#60						ADD		1	{L:12}
(*) UINT
A0011098  F0001F8B		add d15, d15, #1

#61						ST		cnt	{L:12}
(*) UINT
A001109C  800040BB		mov.u d8, #0x4
A00110A0  F600C801		addsc.a a15, a12, d8, #0
A00110A4  0880FF89		st.h [a15], d15

#62		
#63		
#64						(* IF cnt >= 20 *)
#65						LD		cnt	{L:13}
(*) UNDEF
A00110A8  800040BB		mov.u d8, #0x4
A00110AC  F600C801		addsc.a a15, a12, d8, #0
A00110B0  08C0FF09		ld.hu d15, [a15]

#66						GE		20	{L:13}
(*) UINT
A00110B4  8001403B		mov d8, #20
A00110B8  F1508F0B		ge.u d15, d15, d8

#67						JMPCN	$label6	{L:13}
(-) BOOL
A00110BC  000A0FDF		jeq d15, #0, #0x000A ; JUMP 0xA00110D0

#68		
#69						(* THEN *)
#70		
#71							(* END := TRUE; *)
#72							LD		TRUE	{L:14}
(*) UNDEF
A00110C0  F000103B		mov d15, #1

#73							ST		END	{L:14}
(*) BOOL
A00110C4  8002C0BB		mov.u d8, #0x2C
A00110C8  F600C801		addsc.a a15, a12, d8, #0
A00110CC  0000FF59		st.w [a15], d15

#74		
#75		$label6:
#76						(* END_IF *)
#77		
#78		$label5:
#79					(* END_IF *)
#80					JMP		$label3
(-) BOOL
A00110D0  000E001D		j #0x00000E ; JUMP 0xA00110EC

#81		$label2:
#82		
#83				(* ELSE *)
#84		
#85					(* staticFriction := staticFriction; *)
#86					LD		staticFriction	{L:18}
(*) UNDEF
A00110D4  800280BB		mov.u d8, #0x28
A00110D8  F600C801		addsc.a a15, a12, d8, #0
A00110DC  0000FF19		ld.w d15, [a15]

#87					ST		staticFriction	{L:18}
(*) REAL
A00110E0  800280BB		mov.u d8, #0x28
A00110E4  F600C801		addsc.a a15, a12, d8, #0
A00110E8  0000FF59		st.w [a15], d15

A00110EC  0180000D		ret


Frame allocation:

	0010 bit  0: VAR fbInit
	0014       : VAR input
	0018       : VAR output
	001C bit  0: VAR ENABLE
	0020       : VAR Threshold
	0024       : VAR noiseLevel
	0028       : VAR staticFriction
	002C bit  0: VAR END
	0000       : VAR time
	0004       : VAR cnt
	0008       : VAR $$TMP0
	000C       : VAR $$TMP1

END_FUNCTION_BLOCK
**************************************************
	List function block: fb_StaticFrictionID_OL_Trj
**************************************************

FUNCTION_BLOCK fb_StaticFrictionID_OL_Trj

	VAR_INPUT
	fbInit : BOOL; 
	maxTrq : REAL; 
	TrqResolution : REAL; 
	ENABLE : BOOL; 
	END_VAR

	VAR_OUTPUT
	TrqRef : REAL; 
	END_VAR

A00110F0  C0004001		mov.aa a12, a4

#0		{SRC:fb_StaticFrictionID_OL_Trj}
#1		
#2		
#3			(* IF fbInit *)
#4			LD		fbInit	{L:1}
(*) UNDEF
A00110F4  F000C001		mov.aa a15, a12
A00110F8  0000FF19		ld.w d15, [a15]

#5			JMPCN	$label0	{L:1}
(-) BOOL
A00110FC  000E0FDF		jeq d15, #0, #0x000E ; JUMP 0xA0011118

#6		
#7			(* THEN *)
#8		
#9				(* TrqRef := 0.0; *)
#10				LD		0.0	{L:2}
(*) UNDEF
A0011100  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A0011104  F0000F9B		addih d15, d15, #0x0000

#11				ST		TrqRef	{L:2}
(*) REAL
A0011108  800100BB		mov.u d8, #0x10
A001110C  F600C801		addsc.a a15, a12, d8, #0
A0011110  0000FF59		st.w [a15], d15

#12				JMP		$label1
(-) REAL
A0011114  0048001D		j #0x000048 ; JUMP 0xA00111A4

#13		$label0:
#14		
#15			(* ELSE *)
#16		
#17		
#18				(* IF ENABLE *)
#19				LD		ENABLE	{L:5}
(*) UNDEF
A0011118  8000C0BB		mov.u d8, #0xC
A001111C  F600C801		addsc.a a15, a12, d8, #0
A0011120  0000FF19		ld.w d15, [a15]

#20				JMPCN	$label2	{L:5}
(-) BOOL
A0011124  00360FDF		jeq d15, #0, #0x0036 ; JUMP 0xA0011190

#21		
#22				(* THEN *)
#23		
#24					(* TrqRef := TrqRef + TrqResolution; *)
#25					LD		TrqRef	{L:6}
(*) UNDEF
A0011128  800100BB		mov.u d8, #0x10
A001112C  F600C801		addsc.a a15, a12, d8, #0
A0011130  0000FF19		ld.w d15, [a15]

#26					ADD		TrqResolution	{L:6}
(*) REAL
A0011134  800080BB		mov.u d8, #0x8
A0011138  F600C801		addsc.a a15, a12, d8, #0
A001113C  0000F819		ld.w d8, [a15]
A0011140  FF21086B		add.f d15, d15, d8

#27					ST		TrqRef	{L:6}
(*) REAL
A0011144  800100BB		mov.u d8, #0x10
A0011148  F600C801		addsc.a a15, a12, d8, #0
A001114C  0000FF59		st.w [a15], d15

#28		
#29		
#30					(* IF TrqRef >= maxTrq *)
#31					LD		TrqRef	{L:7}
(*) UNDEF
A0011150  800100BB		mov.u d8, #0x10
A0011154  F600C801		addsc.a a15, a12, d8, #0
A0011158  0000FF19		ld.w d15, [a15]

#32					GE		maxTrq	{L:7}
(*) REAL
A001115C  800040BB		mov.u d8, #0x4
A0011160  F600C801		addsc.a a15, a12, d8, #0
A0011164  0000F519		ld.w d5, [a15]
A0011168  F0015F4B		cmp.f d15, d15, d5
A001116C  F2201F8B		ne d15, d15, #1

#33					JMPCN	$label4	{L:7}
(-) BOOL
A0011170  000E0FDF		jeq d15, #0, #0x000E ; JUMP 0xA001118C

#34		
#35					(* THEN *)
#36		
#37						(* TrqRef := maxTrq; *)
#38						LD		maxTrq	{L:8}
(*) UNDEF
A0011174  800040BB		mov.u d8, #0x4
A0011178  F600C801		addsc.a a15, a12, d8, #0
A001117C  0000FF19		ld.w d15, [a15]

#39						ST		TrqRef	{L:8}
(*) REAL
A0011180  800100BB		mov.u d8, #0x10
A0011184  F600C801		addsc.a a15, a12, d8, #0
A0011188  0000FF59		st.w [a15], d15

#40		
#41		$label4:
#42					(* END_IF *)
#43					JMP		$label3
(-) REAL
A001118C  000C001D		j #0x00000C ; JUMP 0xA00111A4

#44		$label2:
#45		
#46				(* ELSE *)
#47		
#48					(* TrqRef := 0.0; *)
#49					LD		0.0	{L:11}
(*) UNDEF
A0011190  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A0011194  F0000F9B		addih d15, d15, #0x0000

#50					ST		TrqRef	{L:11}
(*) REAL
A0011198  800100BB		mov.u d8, #0x10
A001119C  F600C801		addsc.a a15, a12, d8, #0
A00111A0  0000FF59		st.w [a15], d15

A00111A4  0180000D		ret


Frame allocation:

	0000 bit  0: VAR fbInit
	0004       : VAR maxTrq
	0008       : VAR TrqResolution
	000C bit  0: VAR ENABLE
	0010       : VAR TrqRef

END_FUNCTION_BLOCK
**************************************************
	List function block: fb_Random
**************************************************

FUNCTION_BLOCK fb_Random

	VAR_INPUT
	fb_Init : BOOL; 
	END_VAR

	VAR_OUTPUT
	rnd : REAL; 
	END_VAR

	VAR
	rnd_int : DINT; 
	a : DINT; 
	b : DINT; 
	m : DINT; 
	END_VAR

A00111A8  C0004001		mov.aa a12, a4

#0		{SRC:fb_Random}
#1		
#2		
#3			(* IF fb_Init *)
#4			LD		fb_Init	{L:1}
(*) UNDEF
A00111AC  800100BB		mov.u d8, #0x10
A00111B0  F600C801		addsc.a a15, a12, d8, #0
A00111B4  0000FF19		ld.w d15, [a15]

#5			JMPCN	$label0	{L:1}
(-) BOOL
A00111B8  00240FDF		jeq d15, #0, #0x0024 ; JUMP 0xA0011200

#6		
#7			(* THEN *)
#8		
#9				(* a := 45158; *)
#10				LD		45158	{L:2}
(*) UNDEF
A00111BC  FB0660BB		mov.u d15, #45158

#11				ST		a	{L:2}
(*) UINT
A00111C0  800040BB		mov.u d8, #0x4
A00111C4  F600C801		addsc.a a15, a12, d8, #0
A00111C8  0000FF59		st.w [a15], d15

#12		
#13				(* b := 97543; *)
#14				LD		97543	{L:3}
(*) UNDEF
A00111CC  F7D070BB		mov.u d15, #0x7D07 ; COST32 97543
A00111D0  F0001F9B		addih d15, d15, #0x0001

#15				ST		b	{L:3}
(*) UDINT
A00111D4  800080BB		mov.u d8, #0x8
A00111D8  F600C801		addsc.a a15, a12, d8, #0
A00111DC  0000FF59		st.w [a15], d15

#16		
#17				(* m := 32486; *)
#18				LD		32486	{L:4}
(*) UNDEF
A00111E0  F7EE603B		mov d15, #32486

#19				ST		m	{L:4}
(*) UINT
A00111E4  8000C0BB		mov.u d8, #0xC
A00111E8  F600C801		addsc.a a15, a12, d8, #0
A00111EC  0000FF59		st.w [a15], d15

#20		
#21				(* rnd_int := 0; *)
#22				LD		0	{L:5}
(*) UNDEF
A00111F0  F000003B		mov d15, #0

#23				ST		rnd_int	{L:5}
(*) USINT
A00111F4  F000C001		mov.aa a15, a12
A00111F8  0000FF59		st.w [a15], d15

#24				JMP		$label1
(-) DINT
A00111FC  0050001D		j #0x000050 ; JUMP 0xA001129C

#25		$label0:
#26		
#27			(* ELSE *)
#28		
#29				(* rnd_int := (a*rnd_int+b) MOD m; *)
#30				LD		a	{L:7}
(*) UNDEF
A0011200  800040BB		mov.u d8, #0x4
A0011204  F600C801		addsc.a a15, a12, d8, #0
A0011208  0000FF19		ld.w d15, [a15]

#31				MUL		rnd_int	{L:7}
(*) DINT
A001120C  F000C001		mov.aa a15, a12
A0011210  0000F819		ld.w d8, [a15]
A0011214  F00A8F73		mul d15, d15, d8

#32				ADD		b	{L:7}
(*) DINT
A0011218  800080BB		mov.u d8, #0x8
A001121C  F600C801		addsc.a a15, a12, d8, #0
A0011220  0000F819		ld.w d8, [a15]
A0011224  F0008F0B		add d15, d15, d8

#33				MOD		m	{L:7}
(*) DINT
A0011228  8000C0BB		mov.u d8, #0xC
A001122C  F600C801		addsc.a a15, a12, d8, #0
A0011230  0000F819		ld.w d8, [a15]
A0011234  21A08F4B		dvinit d2/d3, d15, d8
A0011238  9000303B		mov d9, #3
A001123C  F6309001		mov.a a15, d9
A0011240  22F0806B		dvstep d2/d3, d2/d3, d8
A0011244  7FFEF0FD		loop a15, #-2
A0011248  22D0806B		dvadj d2/d3, d2/d3, d8
A001124C  F1F0300B		mov d15, d3

#34				ST		rnd_int	{L:7}
(*) DINT
A0011250  F000C001		mov.aa a15, a12
A0011254  0000FF59		st.w [a15], d15

#35		
#36				(* rnd := TO_REAL(rnd_int)/TO_REAL(m-1); *)
#37				LD		rnd_int	{L:8}
(*) UNDEF
A0011258  F000C001		mov.aa a15, a12
A001125C  0000FF19		ld.w d15, [a15]

#38				TO_REAL	{L:8}
(*) DINT
A0011260  F1410F4B		itof d15, d15

#39				DIV(		m	{L:8}
(*) REAL
A0011264  F53CAF89		st.w [-sp]4, d15 
A0011268  8000C0BB		mov.u d8, #0xC
A001126C  F600C801		addsc.a a15, a12, d8, #0
A0011270  0000FF19		ld.w d15, [a15]

#40				SUB		1	{L:8}
(*) DINT
A0011274  8000103B		mov d8, #1
A0011278  F0808F0B		sub d15, d15, d8

#41				TO_REAL	{L:8}
(*) DINT
A001127C  F1410F4B		itof d15, d15

#42				)	{L:8}
(*) REAL
A0011280  01F0F00B		mov d0, d15
A0011284  0104AF09		ld.w d15, [sp+]4
A0011288  81F0000B		mov d8, d0
A001128C  F0518F4B		div.f d15, d15, d8

#43				ST		rnd	{L:8}
(*) REAL
A0011290  800140BB		mov.u d8, #0x14
A0011294  F600C801		addsc.a a15, a12, d8, #0
A0011298  0000FF59		st.w [a15], d15

A001129C  0180000D		ret


Frame allocation:

	0010 bit  0: VAR fb_Init
	0014       : VAR rnd
	0000       : VAR rnd_int
	0004       : VAR a
	0008       : VAR b
	000C       : VAR m

END_FUNCTION_BLOCK
**************************************************
	List function block: PIDcontrol
**************************************************

FUNCTION_BLOCK PIDcontrol

	VAR_INPUT
	fbInit : BOOL; 
	y_ref : REAL; 
	y : REAL; 
	Kp : REAL := 0.1; 
	N : REAL := 10.0; 
	Td : REAL; 
	Ti : REAL := 2.0; 
	Tt : REAL := 2.0; 
	Vmax : REAL := 10.0; 
	Vmin : REAL; 
	END_VAR

	VAR_OUTPUT
	u : REAL; 
	END_VAR

	VAR
	uns : REAL; 
	uk : REAL; 
	ui_prec : REAL; 
	ui : REAL; 
	ud_prec : REAL; 
	ud : REAL; 
	tr_prec : REAL; 
	tr : REAL; 
	st : REAL := 0.001; 
	e_prec : REAL; 
	e : REAL; 
	END_VAR

A00112A0  C0004001		mov.aa a12, a4

#0		{SRC:PIDcontrol}
#1		
#2		
#3			(* IF fbInit *)
#4			LD		fbInit	{L:2}
(*) UNDEF
A00112A4  8002C0BB		mov.u d8, #0x2C
A00112A8  F600C801		addsc.a a15, a12, d8, #0
A00112AC  0000FF19		ld.w d15, [a15]

#5			JMPCN	$label0	{L:2}
(-) BOOL
A00112B0  00360FDF		jeq d15, #0, #0x0036 ; JUMP 0xA001131C

#6		
#7			(* THEN *)
#8		
#9				(* e_prec := 0.0; *)
#10				LD		0.0	{L:6}
(*) UNDEF
A00112B4  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A00112B8  F0000F9B		addih d15, d15, #0x0000

#11				ST		e_prec	{L:6}
(*) REAL
A00112BC  800240BB		mov.u d8, #0x24
A00112C0  F600C801		addsc.a a15, a12, d8, #0
A00112C4  0000FF59		st.w [a15], d15

#12		
#13				(* ui_prec := 0.0; *)
#14				LD		0.0	{L:8}
(*) UNDEF
A00112C8  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A00112CC  F0000F9B		addih d15, d15, #0x0000

#15				ST		ui_prec	{L:8}
(*) REAL
A00112D0  800080BB		mov.u d8, #0x8
A00112D4  F600C801		addsc.a a15, a12, d8, #0
A00112D8  0000FF59		st.w [a15], d15

#16		
#17				(* ud_prec := 0.0; *)
#18				LD		0.0	{L:9}
(*) UNDEF
A00112DC  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A00112E0  F0000F9B		addih d15, d15, #0x0000

#19				ST		ud_prec	{L:9}
(*) REAL
A00112E4  800100BB		mov.u d8, #0x10
A00112E8  F600C801		addsc.a a15, a12, d8, #0
A00112EC  0000FF59		st.w [a15], d15

#20		
#21				(* tr_prec := 0.0; *)
#22				LD		0.0	{L:10}
(*) UNDEF
A00112F0  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A00112F4  F0000F9B		addih d15, d15, #0x0000

#23				ST		tr_prec	{L:10}
(*) REAL
A00112F8  800180BB		mov.u d8, #0x18
A00112FC  F600C801		addsc.a a15, a12, d8, #0
A0011300  0000FF59		st.w [a15], d15

#24		
#25				(* st := 0.001; *)
#26				LD		0.001	{L:11}
(*) UNDEF
A0011304  F126F0BB		mov.u d15, #0x126F ; COSTREAL 0.001000
A0011308  F3A83F9B		addih d15, d15, #0x3A83

#27				ST		st	{L:11}
(*) REAL
A001130C  800200BB		mov.u d8, #0x20
A0011310  F600C801		addsc.a a15, a12, d8, #0
A0011314  0000FF59		st.w [a15], d15

#28				JMP		$label1
(-) REAL
A0011318  021C001D		j #0x00021C ; JUMP 0xA0011750

#29		$label0:
#30		
#31			(* ELSE *)
#32		
#33				(* e := y_ref - y; *)
#34				LD		y_ref	{L:16}
(*) UNDEF
A001131C  800300BB		mov.u d8, #0x30
A0011320  F600C801		addsc.a a15, a12, d8, #0
A0011324  0000FF19		ld.w d15, [a15]

#35				SUB		y	{L:16}
(*) REAL
A0011328  800340BB		mov.u d8, #0x34
A001132C  F600C801		addsc.a a15, a12, d8, #0
A0011330  0000F819		ld.w d8, [a15]
A0011334  FF31086B		sub.f d15, d15, d8

#36				ST		e	{L:16}
(*) REAL
A0011338  800280BB		mov.u d8, #0x28
A001133C  F600C801		addsc.a a15, a12, d8, #0
A0011340  0000FF59		st.w [a15], d15

#37		
#38				(* uk := Kp * e; *)
#39				LD		Kp	{L:18}
(*) UNDEF
A0011344  800380BB		mov.u d8, #0x38
A0011348  F600C801		addsc.a a15, a12, d8, #0
A001134C  0000FF19		ld.w d15, [a15]

#40				MUL		e	{L:18}
(*) REAL
A0011350  800280BB		mov.u d8, #0x28
A0011354  F600C801		addsc.a a15, a12, d8, #0
A0011358  0000F819		ld.w d8, [a15]
A001135C  F0418F4B		mul.f d15, d15, d8

#41				ST		uk	{L:18}
(*) REAL
A0011360  800040BB		mov.u d8, #0x4
A0011364  F600C801		addsc.a a15, a12, d8, #0
A0011368  0000FF59		st.w [a15], d15

#42		
#43		
#44				(* IF Ti <= 0.0 *)
#45				LD		Ti	{L:19}
(*) UNDEF
A001136C  800440BB		mov.u d8, #0x44
A0011370  F600C801		addsc.a a15, a12, d8, #0
A0011374  0000FF19		ld.w d15, [a15]

#46				LE		0.0	{L:19}
(*) REAL
A0011378  500000BB		mov.u d5, #0x0000 ; COSTREAL 0.000000
A001137C  5000059B		addih d5, d5, #0x0000
A0011380  F0015F4B		cmp.f d15, d15, d5
A0011384  F2204F8B		ne d15, d15, #4

#47				JMPCN	$label2	{L:19}
(-) BOOL
A0011388  000E0FDF		jeq d15, #0, #0x000E ; JUMP 0xA00113A4

#48		
#49				(* THEN *)
#50		
#51					(* ui := 0.0; *)
#52					LD		0.0	{L:20}
(*) UNDEF
A001138C  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A0011390  F0000F9B		addih d15, d15, #0x0000

#53					ST		ui	{L:20}
(*) REAL
A0011394  8000C0BB		mov.u d8, #0xC
A0011398  F600C801		addsc.a a15, a12, d8, #0
A001139C  0000FF59		st.w [a15], d15

#54					JMP		$label3
(-) REAL
A00113A0  004A001D		j #0x00004A ; JUMP 0xA0011434

#55		$label2:
#56		
#57				(* ELSE *)
#58		
#59					(* ui := ui_prec + (Kp/Ti*e_prec - (1.0/Tt)*tr_prec)*st; *)
#60					LD		Kp	{L:22}
(*) UNDEF
A00113A4  800380BB		mov.u d8, #0x38
A00113A8  F600C801		addsc.a a15, a12, d8, #0
A00113AC  0000FF19		ld.w d15, [a15]

#61					DIV		Ti	{L:22}
(*) REAL
A00113B0  800440BB		mov.u d8, #0x44
A00113B4  F600C801		addsc.a a15, a12, d8, #0
A00113B8  0000F819		ld.w d8, [a15]
A00113BC  F0518F4B		div.f d15, d15, d8

#62					MUL		e_prec	{L:22}
(*) REAL
A00113C0  800240BB		mov.u d8, #0x24
A00113C4  F600C801		addsc.a a15, a12, d8, #0
A00113C8  0000F819		ld.w d8, [a15]
A00113CC  F0418F4B		mul.f d15, d15, d8

#63					SUB(		1.0	{L:22}
(*) REAL
A00113D0  F53CAF89		st.w [-sp]4, d15 
A00113D4  F00000BB		mov.u d15, #0x0000 ; COSTREAL 1.000000
A00113D8  F3F80F9B		addih d15, d15, #0x3F80

#64					DIV		Tt	{L:22}
(*) REAL
A00113DC  800480BB		mov.u d8, #0x48
A00113E0  F600C801		addsc.a a15, a12, d8, #0
A00113E4  0000F819		ld.w d8, [a15]
A00113E8  F0518F4B		div.f d15, d15, d8

#65					MUL		tr_prec	{L:22}
(*) REAL
A00113EC  800180BB		mov.u d8, #0x18
A00113F0  F600C801		addsc.a a15, a12, d8, #0
A00113F4  0000F819		ld.w d8, [a15]
A00113F8  F0418F4B		mul.f d15, d15, d8

#66					)	{L:22}
(*) REAL
A00113FC  01F0F00B		mov d0, d15
A0011400  0104AF09		ld.w d15, [sp+]4
A0011404  FF31006B		sub.f d15, d15, d0

#67					MUL		st	{L:22}
(*) REAL
A0011408  800200BB		mov.u d8, #0x20
A001140C  F600C801		addsc.a a15, a12, d8, #0
A0011410  0000F819		ld.w d8, [a15]
A0011414  F0418F4B		mul.f d15, d15, d8

#68					ADD		ui_prec	{L:22}
(*) REAL
A0011418  800080BB		mov.u d8, #0x8
A001141C  F600C801		addsc.a a15, a12, d8, #0
A0011420  0000F819		ld.w d8, [a15]
A0011424  FF21086B		add.f d15, d15, d8

#69					ST		ui	{L:22}
(*) REAL
A0011428  8000C0BB		mov.u d8, #0xC
A001142C  F600C801		addsc.a a15, a12, d8, #0
A0011430  0000FF59		st.w [a15], d15

#70		
#71		$label3:
#72				(* END_IF *)
#73		
#74		
#75				(* IF N <= 0.0 *)
#76				LD		N	{L:24}
(*) UNDEF
A0011434  8003C0BB		mov.u d8, #0x3C
A0011438  F600C801		addsc.a a15, a12, d8, #0
A001143C  0000FF19		ld.w d15, [a15]

#77				LE		0.0	{L:24}
(*) REAL
A0011440  500000BB		mov.u d5, #0x0000 ; COSTREAL 0.000000
A0011444  5000059B		addih d5, d5, #0x0000
A0011448  F0015F4B		cmp.f d15, d15, d5
A001144C  F2204F8B		ne d15, d15, #4

#78				JMPCN	$label4	{L:24}
(-) BOOL
A0011450  000E0FDF		jeq d15, #0, #0x000E ; JUMP 0xA001146C

#79		
#80				(* THEN *)
#81		
#82					(* ud := 0.0; *)
#83					LD		0.0	{L:25}
(*) UNDEF
A0011454  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A0011458  F0000F9B		addih d15, d15, #0x0000

#84					ST		ud	{L:25}
(*) REAL
A001145C  800140BB		mov.u d8, #0x14
A0011460  F600C801		addsc.a a15, a12, d8, #0
A0011464  0000FF59		st.w [a15], d15

#85					JMP		$label5
(-) REAL
A0011468  00B6001D		j #0x0000B6 ; JUMP 0xA00115D4

#86		$label4:
#87		
#88				(* ELSE *)
#89		
#90					(* ud := (Kp*Td*2.0*N*e - Kp*Td*2.0*N*e_prec - (st*N - 2.0*Td)*ud_prec)/(st*N + 2.0*Td); *)
#91					LD		Kp	{L:27}
(*) UNDEF
A001146C  800380BB		mov.u d8, #0x38
A0011470  F600C801		addsc.a a15, a12, d8, #0
A0011474  0000FF19		ld.w d15, [a15]

#92					MUL		Td	{L:27}
(*) REAL
A0011478  800400BB		mov.u d8, #0x40
A001147C  F600C801		addsc.a a15, a12, d8, #0
A0011480  0000F819		ld.w d8, [a15]
A0011484  F0418F4B		mul.f d15, d15, d8

#93					MUL		2.0	{L:27}
(*) REAL
A0011488  800000BB		mov.u d8, #0x0000 ; COSTREAL 2.000000
A001148C  8400089B		addih d8, d8, #0x4000
A0011490  F0418F4B		mul.f d15, d15, d8

#94					MUL		N	{L:27}
(*) REAL
A0011494  8003C0BB		mov.u d8, #0x3C
A0011498  F600C801		addsc.a a15, a12, d8, #0
A001149C  0000F819		ld.w d8, [a15]
A00114A0  F0418F4B		mul.f d15, d15, d8

#95					MUL		e	{L:27}
(*) REAL
A00114A4  800280BB		mov.u d8, #0x28
A00114A8  F600C801		addsc.a a15, a12, d8, #0
A00114AC  0000F819		ld.w d8, [a15]
A00114B0  F0418F4B		mul.f d15, d15, d8

#96					SUB(		Kp	{L:27}
(*) REAL
A00114B4  F53CAF89		st.w [-sp]4, d15 
A00114B8  800380BB		mov.u d8, #0x38
A00114BC  F600C801		addsc.a a15, a12, d8, #0
A00114C0  0000FF19		ld.w d15, [a15]

#97					MUL		Td	{L:27}
(*) REAL
A00114C4  800400BB		mov.u d8, #0x40
A00114C8  F600C801		addsc.a a15, a12, d8, #0
A00114CC  0000F819		ld.w d8, [a15]
A00114D0  F0418F4B		mul.f d15, d15, d8

#98					MUL		2.0	{L:27}
(*) REAL
A00114D4  800000BB		mov.u d8, #0x0000 ; COSTREAL 2.000000
A00114D8  8400089B		addih d8, d8, #0x4000
A00114DC  F0418F4B		mul.f d15, d15, d8

#99					MUL		N	{L:27}
(*) REAL
A00114E0  8003C0BB		mov.u d8, #0x3C
A00114E4  F600C801		addsc.a a15, a12, d8, #0
A00114E8  0000F819		ld.w d8, [a15]
A00114EC  F0418F4B		mul.f d15, d15, d8

#100					MUL		e_prec	{L:27}
(*) REAL
A00114F0  800240BB		mov.u d8, #0x24
A00114F4  F600C801		addsc.a a15, a12, d8, #0
A00114F8  0000F819		ld.w d8, [a15]
A00114FC  F0418F4B		mul.f d15, d15, d8

#101					)	{L:27}
(*) REAL
A0011500  01F0F00B		mov d0, d15
A0011504  0104AF09		ld.w d15, [sp+]4
A0011508  FF31006B		sub.f d15, d15, d0

#102					SUB(		st	{L:27}
(*) REAL
A001150C  F53CAF89		st.w [-sp]4, d15 
A0011510  800200BB		mov.u d8, #0x20
A0011514  F600C801		addsc.a a15, a12, d8, #0
A0011518  0000FF19		ld.w d15, [a15]

#103					MUL		N	{L:27}
(*) REAL
A001151C  8003C0BB		mov.u d8, #0x3C
A0011520  F600C801		addsc.a a15, a12, d8, #0
A0011524  0000F819		ld.w d8, [a15]
A0011528  F0418F4B		mul.f d15, d15, d8

#104					SUB(		2.0	{L:27}
(*) REAL
A001152C  F53CAF89		st.w [-sp]4, d15 
A0011530  F00000BB		mov.u d15, #0x0000 ; COSTREAL 2.000000
A0011534  F4000F9B		addih d15, d15, #0x4000

#105					MUL		Td	{L:27}
(*) REAL
A0011538  800400BB		mov.u d8, #0x40
A001153C  F600C801		addsc.a a15, a12, d8, #0
A0011540  0000F819		ld.w d8, [a15]
A0011544  F0418F4B		mul.f d15, d15, d8

#106					)	{L:27}
(*) REAL
A0011548  01F0F00B		mov d0, d15
A001154C  0104AF09		ld.w d15, [sp+]4
A0011550  FF31006B		sub.f d15, d15, d0

#107					MUL		ud_prec	{L:27}
(*) REAL
A0011554  800100BB		mov.u d8, #0x10
A0011558  F600C801		addsc.a a15, a12, d8, #0
A001155C  0000F819		ld.w d8, [a15]
A0011560  F0418F4B		mul.f d15, d15, d8

#108					)	{L:27}
(*) REAL
A0011564  01F0F00B		mov d0, d15
A0011568  0104AF09		ld.w d15, [sp+]4
A001156C  FF31006B		sub.f d15, d15, d0

#109					DIV(		2.0	{L:27}
(*) REAL
A0011570  F53CAF89		st.w [-sp]4, d15 
A0011574  F00000BB		mov.u d15, #0x0000 ; COSTREAL 2.000000
A0011578  F4000F9B		addih d15, d15, #0x4000

#110					MUL		Td	{L:27}
(*) REAL
A001157C  800400BB		mov.u d8, #0x40
A0011580  F600C801		addsc.a a15, a12, d8, #0
A0011584  0000F819		ld.w d8, [a15]
A0011588  F0418F4B		mul.f d15, d15, d8

#111					ADD(		st	{L:27}
(*) REAL
A001158C  F53CAF89		st.w [-sp]4, d15 
A0011590  800200BB		mov.u d8, #0x20
A0011594  F600C801		addsc.a a15, a12, d8, #0
A0011598  0000FF19		ld.w d15, [a15]

#112					MUL		N	{L:27}
(*) REAL
A001159C  8003C0BB		mov.u d8, #0x3C
A00115A0  F600C801		addsc.a a15, a12, d8, #0
A00115A4  0000F819		ld.w d8, [a15]
A00115A8  F0418F4B		mul.f d15, d15, d8

#113					)	{L:27}
(*) REAL
A00115AC  01F0F00B		mov d0, d15
A00115B0  0104AF09		ld.w d15, [sp+]4
A00115B4  FF21006B		add.f d15, d15, d0

#114					)	{L:27}
(*) REAL
A00115B8  01F0F00B		mov d0, d15
A00115BC  0104AF09		ld.w d15, [sp+]4
A00115C0  81F0000B		mov d8, d0
A00115C4  F0518F4B		div.f d15, d15, d8

#115					ST		ud	{L:27}
(*) REAL
A00115C8  800140BB		mov.u d8, #0x14
A00115CC  F600C801		addsc.a a15, a12, d8, #0
A00115D0  0000FF59		st.w [a15], d15

#116		
#117		$label5:
#118				(* END_IF *)
#119		
#120				(* uns := uk + ui + ud; *)
#121				LD		uk	{L:29}
(*) UNDEF
A00115D4  800040BB		mov.u d8, #0x4
A00115D8  F600C801		addsc.a a15, a12, d8, #0
A00115DC  0000FF19		ld.w d15, [a15]

#122				ADD		ui	{L:29}
(*) REAL
A00115E0  8000C0BB		mov.u d8, #0xC
A00115E4  F600C801		addsc.a a15, a12, d8, #0
A00115E8  0000F819		ld.w d8, [a15]
A00115EC  FF21086B		add.f d15, d15, d8

#123				ADD		ud	{L:29}
(*) REAL
A00115F0  800140BB		mov.u d8, #0x14
A00115F4  F600C801		addsc.a a15, a12, d8, #0
A00115F8  0000F819		ld.w d8, [a15]
A00115FC  FF21086B		add.f d15, d15, d8

#124				ST		uns	{L:29}
(*) REAL
A0011600  F000C001		mov.aa a15, a12
A0011604  0000FF59		st.w [a15], d15

#125		
#126		
#127				(* IF uns > Vmax *)
#128				LD		uns	{L:31}
(*) UNDEF
A0011608  F000C001		mov.aa a15, a12
A001160C  0000FF19		ld.w d15, [a15]

#129				GT		Vmax	{L:31}
(*) REAL
A0011610  8004C0BB		mov.u d8, #0x4C
A0011614  F600C801		addsc.a a15, a12, d8, #0
A0011618  0000F519		ld.w d5, [a15]
A001161C  F0015F4B		cmp.f d15, d15, d5
A0011620  F2004F8B		eq d15, d15, #4

#130				JMPCN	$label6	{L:31}
(-) BOOL
A0011624  00220FDF		jeq d15, #0, #0x0022 ; JUMP 0xA0011668

#131		
#132				(* THEN *)
#133		
#134					(* u := Vmax; *)
#135					LD		Vmax	{L:33}
(*) UNDEF
A0011628  8004C0BB		mov.u d8, #0x4C
A001162C  F600C801		addsc.a a15, a12, d8, #0
A0011630  0000FF19		ld.w d15, [a15]

#136					ST		u	{L:33}
(*) REAL
A0011634  800540BB		mov.u d8, #0x54
A0011638  F600C801		addsc.a a15, a12, d8, #0
A001163C  0000FF59		st.w [a15], d15

#137		
#138					(* tr := (uns - Vmax); *)
#139					LD		uns	{L:34}
(*) UNDEF
A0011640  F000C001		mov.aa a15, a12
A0011644  0000FF19		ld.w d15, [a15]

#140					SUB		Vmax	{L:34}
(*) REAL
A0011648  8004C0BB		mov.u d8, #0x4C
A001164C  F600C801		addsc.a a15, a12, d8, #0
A0011650  0000F819		ld.w d8, [a15]
A0011654  FF31086B		sub.f d15, d15, d8

#141					ST		tr	{L:34}
(*) REAL
A0011658  8001C0BB		mov.u d8, #0x1C
A001165C  F600C801		addsc.a a15, a12, d8, #0
A0011660  0000FF59		st.w [a15], d15

#142					JMP		$label8
(-) REAL
A0011664  0046001D		j #0x000046 ; JUMP 0xA00116F0

#143		$label6:
#144		
#145				(* ELSIF uns < Vmin *)
#146				LD		uns	{L:37}
(*) UNDEF
A0011668  F000C001		mov.aa a15, a12
A001166C  0000FF19		ld.w d15, [a15]

#147				LT		Vmin	{L:37}
(*) REAL
A0011670  800500BB		mov.u d8, #0x50
A0011674  F600C801		addsc.a a15, a12, d8, #0
A0011678  0000F519		ld.w d5, [a15]
A001167C  F0015F4B		cmp.f d15, d15, d5
A0011680  F2001F8B		eq d15, d15, #1

#148				JMPCN	$label7	{L:37}
(-) BOOL
A0011684  00220FDF		jeq d15, #0, #0x0022 ; JUMP 0xA00116C8

#149		
#150				(* THEN *)
#151		
#152					(* u := Vmin; *)
#153					LD		Vmin	{L:39}
(*) UNDEF
A0011688  800500BB		mov.u d8, #0x50
A001168C  F600C801		addsc.a a15, a12, d8, #0
A0011690  0000FF19		ld.w d15, [a15]

#154					ST		u	{L:39}
(*) REAL
A0011694  800540BB		mov.u d8, #0x54
A0011698  F600C801		addsc.a a15, a12, d8, #0
A001169C  0000FF59		st.w [a15], d15

#155		
#156					(* tr := (uns - Vmax); *)
#157					LD		uns	{L:40}
(*) UNDEF
A00116A0  F000C001		mov.aa a15, a12
A00116A4  0000FF19		ld.w d15, [a15]

#158					SUB		Vmax	{L:40}
(*) REAL
A00116A8  8004C0BB		mov.u d8, #0x4C
A00116AC  F600C801		addsc.a a15, a12, d8, #0
A00116B0  0000F819		ld.w d8, [a15]
A00116B4  FF31086B		sub.f d15, d15, d8

#159					ST		tr	{L:40}
(*) REAL
A00116B8  8001C0BB		mov.u d8, #0x1C
A00116BC  F600C801		addsc.a a15, a12, d8, #0
A00116C0  0000FF59		st.w [a15], d15

#160					JMP		$label8
(-) REAL
A00116C4  0016001D		j #0x000016 ; JUMP 0xA00116F0

#161		$label7:
#162		
#163				(* ELSE *)
#164		
#165					(* u := uns; *)
#166					LD		uns	{L:44}
(*) UNDEF
A00116C8  F000C001		mov.aa a15, a12
A00116CC  0000FF19		ld.w d15, [a15]

#167					ST		u	{L:44}
(*) REAL
A00116D0  800540BB		mov.u d8, #0x54
A00116D4  F600C801		addsc.a a15, a12, d8, #0
A00116D8  0000FF59		st.w [a15], d15

#168		
#169					(* tr := 0.0; *)
#170					LD		0.0	{L:45}
(*) UNDEF
A00116DC  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A00116E0  F0000F9B		addih d15, d15, #0x0000

#171					ST		tr	{L:45}
(*) REAL
A00116E4  8001C0BB		mov.u d8, #0x1C
A00116E8  F600C801		addsc.a a15, a12, d8, #0
A00116EC  0000FF59		st.w [a15], d15

#172		
#173		$label8:
#174				(* END_IF *)
#175		
#176				(* e_prec := e; *)
#177				LD		e	{L:49}
(*) UNDEF
A00116F0  800280BB		mov.u d8, #0x28
A00116F4  F600C801		addsc.a a15, a12, d8, #0
A00116F8  0000FF19		ld.w d15, [a15]

#178				ST		e_prec	{L:49}
(*) REAL
A00116FC  800240BB		mov.u d8, #0x24
A0011700  F600C801		addsc.a a15, a12, d8, #0
A0011704  0000FF59		st.w [a15], d15

#179		
#180				(* ui_prec := ui; *)
#181				LD		ui	{L:50}
(*) UNDEF
A0011708  8000C0BB		mov.u d8, #0xC
A001170C  F600C801		addsc.a a15, a12, d8, #0
A0011710  0000FF19		ld.w d15, [a15]

#182				ST		ui_prec	{L:50}
(*) REAL
A0011714  800080BB		mov.u d8, #0x8
A0011718  F600C801		addsc.a a15, a12, d8, #0
A001171C  0000FF59		st.w [a15], d15

#183		
#184				(* tr_prec := tr; *)
#185				LD		tr	{L:51}
(*) UNDEF
A0011720  8001C0BB		mov.u d8, #0x1C
A0011724  F600C801		addsc.a a15, a12, d8, #0
A0011728  0000FF19		ld.w d15, [a15]

#186				ST		tr_prec	{L:51}
(*) REAL
A001172C  800180BB		mov.u d8, #0x18
A0011730  F600C801		addsc.a a15, a12, d8, #0
A0011734  0000FF59		st.w [a15], d15

#187		
#188				(* ud_prec := ud; *)
#189				LD		ud	{L:52}
(*) UNDEF
A0011738  800140BB		mov.u d8, #0x14
A001173C  F600C801		addsc.a a15, a12, d8, #0
A0011740  0000FF19		ld.w d15, [a15]

#190				ST		ud_prec	{L:52}
(*) REAL
A0011744  800100BB		mov.u d8, #0x10
A0011748  F600C801		addsc.a a15, a12, d8, #0
A001174C  0000FF59		st.w [a15], d15

A0011750  0180000D		ret


Frame allocation:

	002C bit  0: VAR fbInit
	0030       : VAR y_ref
	0034       : VAR y
	0038       : VAR Kp
	003C       : VAR N
	0040       : VAR Td
	0044       : VAR Ti
	0048       : VAR Tt
	004C       : VAR Vmax
	0050       : VAR Vmin
	0054       : VAR u
	0000       : VAR uns
	0004       : VAR uk
	0008       : VAR ui_prec
	000C       : VAR ui
	0010       : VAR ud_prec
	0014       : VAR ud
	0018       : VAR tr_prec
	001C       : VAR tr
	0020       : VAR st
	0024       : VAR e_prec
	0028       : VAR e

END_FUNCTION_BLOCK
**************************************************
	List function block: RLS_senzaKf
**************************************************

FUNCTION_BLOCK RLS_senzaKf

	VAR_INPUT
	S : REAL; { DE:"Parametro tuning per la convergenza" } 
	y : REAL; 
	vel : REAL; { DE:"velocità" } 
	Ts : REAL; 
	Time_max : REAL; 
	ssMethodType : SINT; 
	END_VAR

	VAR_OUTPUT
	Jm : REAL; { DE:"Inerzia" } 
	Bm : REAL; { DE:"Attrito viscoso" } 
	END : BOOL; 
	END_VAR

	VAR
	vel_sign : REAL; 
	vel_prec : REAL; 
	innovation : REAL; 
	i : SINT; 
	acc : REAL; { DE:"accelerazione" } 
	Time : REAL; 
	Q_old : ARRAY[ 0..3 ] OF REAL; 
	Q : ARRAY[ 0..3 ] OF REAL; 
	PARAM : ARRAY[ 0..1 ] OF REAL; { DE:"Parametri (Jm, Bm)" } 
	END_VAR

A0011754  C0004001		mov.aa a12, a4

#0		{SRC:RLS_senzaKf}
#1		
#2		
#3			(* CASE ssMethodType OF *)
#4		
#5			(* 0: *)
#6			LD		ssMethodType	{L:2}
(*) UNDEF
A0011758  800800BB		mov.u d8, #0x80
A001175C  F600C801		addsc.a a15, a12, d8, #0
A0011760  0800FF09		ld.b d15, [a15]

#7			EQ		0	{L:2}
(*) SINT
A0011764  8000003B		mov d8, #0
A0011768  F1008F0B		eq d15, d15, d8

#8			JMPC	$label1
(-) BOOL
A001176C  80100FDF		jne d15, #0, #0x0010 ; JUMP 0xA001178C

#9		
#10			(* 1: *)
#11			LD		ssMethodType	{L:34}
(*) UNDEF
A0011770  800800BB		mov.u d8, #0x80
A0011774  F600C801		addsc.a a15, a12, d8, #0
A0011778  0800FF09		ld.b d15, [a15]

#12			EQ		1	{L:34}
(*) SINT
A001177C  8000103B		mov d8, #1
A0011780  F1008F0B		eq d15, d15, d8

#13			JMPC	$label2
(-) BOOL
A0011784  80F40FDF		jne d15, #0, #0x00F4 ; JUMP 0xA001196C

#14			JMP		$label0
(-) BOOL
A0011788  0410001D		j #0x000410 ; JUMP 0xA0011FA8

#15		
#16			(* Istruzioni di ciascun CASE: *)
#17		
#18		$label1:
#19				(* Time:=0.0; *)
#20				LD		0.0	{L:4}
(*) UNDEF
A001178C  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A0011790  F0000F9B		addih d15, d15, #0x0000

#21				ST		Time	{L:4}
(*) REAL
A0011794  800140BB		mov.u d8, #0x14
A0011798  F600C801		addsc.a a15, a12, d8, #0
A001179C  0000FF59		st.w [a15], d15

#22		
#23				(* END:=FALSE; *)
#24				LD		FALSE	{L:5}
(*) UNDEF
A00117A0  F000003B		mov d15, #0

#25				ST		END	{L:5}
(*) BOOL
A00117A4  8008C0BB		mov.u d8, #0x8C
A00117A8  F600C801		addsc.a a15, a12, d8, #0
A00117AC  0000FF59		st.w [a15], d15

#26		
#27				(* FOR i:=0 TO 3 *)
#28				LD		0	{L:7}
(*) UNDEF
A00117B0  F000003B		mov d15, #0

#29				ST		i	{L:7}
(*) USINT
A00117B4  8000C0BB		mov.u d8, #0xC
A00117B8  F600C801		addsc.a a15, a12, d8, #0
A00117BC  0800FF89		st.b [a15], d15

#30		
#31		$label3:
#32				LD		i	{L:7}
(*) UNDEF
A00117C0  8000C0BB		mov.u d8, #0xC
A00117C4  F600C801		addsc.a a15, a12, d8, #0
A00117C8  0800FF09		ld.b d15, [a15]

#33				GT		3	{L:7}
(*) SINT
A00117CC  8000303B		mov d8, #3
A00117D0  F120F80B		lt d15, d8, d15

#34				JMPC	$label4	{L:7}
(-) BOOL
A00117D4  80260FDF		jne d15, #0, #0x0026 ; JUMP 0xA0011820

#35		
#36					(* DO *)
#37		
#38					(* Q[i]	:=0.0; *)
#39					LD		0.0	{L:8}
(*) UNDEF
A00117D8  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A00117DC  F0000F9B		addih d15, d15, #0x0000

#40					ST		Q[i]	{L:8}
(*) REAL
A00117E0  8000C0BB		mov.u d8, #0xC
A00117E4  F600C801		addsc.a a15, a12, d8, #0
A00117E8  0800FE09		ld.b d14, [a15]
A00117EC  800280BB		mov.u d8, #0x28
A00117F0  8000089B		addih d8, d8, #0x0
A00117F4  F600C801		addsc.a a15, a12, d8, #0
A00117F8  F602FE01		addsc.a a15, a15, d14, #2
A00117FC  0000FF59		st.w [a15], d15

#41		
#42				(* FOR counter increment *)
#43				LD		i	{L:1}
(*) UNDEF
A0011800  8000C0BB		mov.u d8, #0xC
A0011804  F600C801		addsc.a a15, a12, d8, #0
A0011808  0800FF09		ld.b d15, [a15]

#44				ADD		1	{L:1}
(*) SINT
A001180C  F0001F8B		add d15, d15, #1

#45				ST		i	{L:1}
(*) SINT
A0011810  8000C0BB		mov.u d8, #0xC
A0011814  F600C801		addsc.a a15, a12, d8, #0
A0011818  0800FF89		st.b [a15], d15

#46				JMP		$label3
(-) SINT
A001181C  FFD2FF1D		j #0xFFFFD2 ; JUMP 0xA00117C0

#47		
#48		$label4:
#49		
#50				(* END_FOR *)
#51		
#52				(* Q[0]:=1.0; *)
#53				LD		1.0	{L:11}
(*) UNDEF
A0011820  F00000BB		mov.u d15, #0x0000 ; COSTREAL 1.000000
A0011824  F3F80F9B		addih d15, d15, #0x3F80

#54				ST		Q[0]	{L:11}
(*) REAL
A0011828  800280BB		mov.u d8, #0x28
A001182C  F600C801		addsc.a a15, a12, d8, #0
A0011830  0000FF59		st.w [a15], d15

#55		
#56				(* Q[3]:=1.0; *)
#57				LD		1.0	{L:12}
(*) UNDEF
A0011834  F00000BB		mov.u d15, #0x0000 ; COSTREAL 1.000000
A0011838  F3F80F9B		addih d15, d15, #0x3F80

#58				ST		Q[3]	{L:12}
(*) REAL
A001183C  800340BB		mov.u d8, #0x34
A0011840  F600C801		addsc.a a15, a12, d8, #0
A0011844  0000FF59		st.w [a15], d15

#59		
#60				(* FOR i:=0 TO 3 *)
#61				LD		0	{L:15}
(*) UNDEF
A0011848  F000003B		mov d15, #0

#62				ST		i	{L:15}
(*) USINT
A001184C  8000C0BB		mov.u d8, #0xC
A0011850  F600C801		addsc.a a15, a12, d8, #0
A0011854  0800FF89		st.b [a15], d15

#63		
#64		$label5:
#65				LD		i	{L:15}
(*) UNDEF
A0011858  8000C0BB		mov.u d8, #0xC
A001185C  F600C801		addsc.a a15, a12, d8, #0
A0011860  0800FF09		ld.b d15, [a15]

#66				GT		3	{L:15}
(*) SINT
A0011864  8000303B		mov d8, #3
A0011868  F120F80B		lt d15, d8, d15

#67				JMPC	$label6	{L:15}
(-) BOOL
A001186C  80320FDF		jne d15, #0, #0x0032 ; JUMP 0xA00118D0

#68		
#69					(* DO *)
#70		
#71					(* Q_old[i]:=Q[i]; *)
#72					LD		Q[i]	{L:16}
(*) UNDEF
A0011870  8000C0BB		mov.u d8, #0xC
A0011874  F600C801		addsc.a a15, a12, d8, #0
A0011878  0800FE09		ld.b d14, [a15]
A001187C  800280BB		mov.u d8, #0x28
A0011880  8000089B		addih d8, d8, #0x0
A0011884  F600C801		addsc.a a15, a12, d8, #0
A0011888  F602FE01		addsc.a a15, a15, d14, #2
A001188C  0000FF19		ld.w d15, [a15]

#73					ST		Q_old[i]	{L:16}
(*) REAL
A0011890  8000C0BB		mov.u d8, #0xC
A0011894  F600C801		addsc.a a15, a12, d8, #0
A0011898  0800FE09		ld.b d14, [a15]
A001189C  800180BB		mov.u d8, #0x18
A00118A0  8000089B		addih d8, d8, #0x0
A00118A4  F600C801		addsc.a a15, a12, d8, #0
A00118A8  F602FE01		addsc.a a15, a15, d14, #2
A00118AC  0000FF59		st.w [a15], d15

#74		
#75				(* FOR counter increment *)
#76				LD		i	{L:1}
(*) UNDEF
A00118B0  8000C0BB		mov.u d8, #0xC
A00118B4  F600C801		addsc.a a15, a12, d8, #0
A00118B8  0800FF09		ld.b d15, [a15]

#77				ADD		1	{L:1}
(*) SINT
A00118BC  F0001F8B		add d15, d15, #1

#78				ST		i	{L:1}
(*) SINT
A00118C0  8000C0BB		mov.u d8, #0xC
A00118C4  F600C801		addsc.a a15, a12, d8, #0
A00118C8  0800FF89		st.b [a15], d15

#79				JMP		$label5
(-) SINT
A00118CC  FFC6FF1D		j #0xFFFFC6 ; JUMP 0xA0011858

#80		
#81		$label6:
#82		
#83				(* END_FOR *)
#84		
#85				(* FOR i:=0 TO 1 *)
#86				LD		0	{L:23}
(*) UNDEF
A00118D0  F000003B		mov d15, #0

#87				ST		i	{L:23}
(*) USINT
A00118D4  8000C0BB		mov.u d8, #0xC
A00118D8  F600C801		addsc.a a15, a12, d8, #0
A00118DC  0800FF89		st.b [a15], d15

#88		
#89		$label7:
#90				LD		i	{L:23}
(*) UNDEF
A00118E0  8000C0BB		mov.u d8, #0xC
A00118E4  F600C801		addsc.a a15, a12, d8, #0
A00118E8  0800FF09		ld.b d15, [a15]

#91				GT		1	{L:23}
(*) SINT
A00118EC  8000103B		mov d8, #1
A00118F0  F120F80B		lt d15, d8, d15

#92				JMPC	$label8	{L:23}
(-) BOOL
A00118F4  80260FDF		jne d15, #0, #0x0026 ; JUMP 0xA0011940

#93		
#94					(* DO *)
#95		
#96					(* PARAM[i]:=0.0; *)
#97					LD		0.0	{L:24}
(*) UNDEF
A00118F8  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A00118FC  F0000F9B		addih d15, d15, #0x0000

#98					ST		PARAM[i]	{L:24}
(*) REAL
A0011900  8000C0BB		mov.u d8, #0xC
A0011904  F600C801		addsc.a a15, a12, d8, #0
A0011908  0800FE09		ld.b d14, [a15]
A001190C  800380BB		mov.u d8, #0x38
A0011910  8000089B		addih d8, d8, #0x0
A0011914  F600C801		addsc.a a15, a12, d8, #0
A0011918  F602FE01		addsc.a a15, a15, d14, #2
A001191C  0000FF59		st.w [a15], d15

#99		
#100				(* FOR counter increment *)
#101				LD		i	{L:1}
(*) UNDEF
A0011920  8000C0BB		mov.u d8, #0xC
A0011924  F600C801		addsc.a a15, a12, d8, #0
A0011928  0800FF09		ld.b d15, [a15]

#102				ADD		1	{L:1}
(*) SINT
A001192C  F0001F8B		add d15, d15, #1

#103				ST		i	{L:1}
(*) SINT
A0011930  8000C0BB		mov.u d8, #0xC
A0011934  F600C801		addsc.a a15, a12, d8, #0
A0011938  0800FF89		st.b [a15], d15

#104				JMP		$label7
(-) SINT
A001193C  FFD2FF1D		j #0xFFFFD2 ; JUMP 0xA00118E0

#105		
#106		$label8:
#107		
#108				(* END_FOR *)
#109		
#110				(* acc:=0.0; *)
#111				LD		0.0	{L:31}
(*) UNDEF
A0011940  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A0011944  F0000F9B		addih d15, d15, #0x0000

#112				ST		acc	{L:31}
(*) REAL
A0011948  800100BB		mov.u d8, #0x10
A001194C  F600C801		addsc.a a15, a12, d8, #0
A0011950  0000FF59		st.w [a15], d15

#113		
#114				(* vel_prec:=0.0; *)
#115				LD		0.0	{L:32}
(*) UNDEF
A0011954  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A0011958  F0000F9B		addih d15, d15, #0x0000

#116				ST		vel_prec	{L:32}
(*) REAL
A001195C  800040BB		mov.u d8, #0x4
A0011960  F600C801		addsc.a a15, a12, d8, #0
A0011964  0000FF59		st.w [a15], d15

#117				JMP		$label0
(-) REAL
A0011968  0320001D		j #0x000320 ; JUMP 0xA0011FA8

#118		
#119		$label2:
#120				(* Time:=Time+Ts; *)
#121				LD		Time	{L:35}
(*) UNDEF
A001196C  800140BB		mov.u d8, #0x14
A0011970  F600C801		addsc.a a15, a12, d8, #0
A0011974  0000FF19		ld.w d15, [a15]

#122				ADD		Ts	{L:35}
(*) REAL
A0011978  800780BB		mov.u d8, #0x78
A001197C  F600C801		addsc.a a15, a12, d8, #0
A0011980  0000F819		ld.w d8, [a15]
A0011984  FF21086B		add.f d15, d15, d8

#123				ST		Time	{L:35}
(*) REAL
A0011988  800140BB		mov.u d8, #0x14
A001198C  F600C801		addsc.a a15, a12, d8, #0
A0011990  0000FF59		st.w [a15], d15

#124		
#125		
#126				(* IF S=0.0 *)
#127				LD		S	{L:37}
(*) UNDEF
A0011994  8006C0BB		mov.u d8, #0x6C
A0011998  F600C801		addsc.a a15, a12, d8, #0
A001199C  0000FF19		ld.w d15, [a15]

#128				EQ		0.0	{L:37}
(*) REAL
A00119A0  500000BB		mov.u d5, #0x0000 ; COSTREAL 0.000000
A00119A4  5000059B		addih d5, d5, #0x0000
A00119A8  F0015F4B		cmp.f d15, d15, d5
A00119AC  F2002F8B		eq d15, d15, #2

#129				JMPCN	$label9	{L:37}
(-) BOOL
A00119B0  000C0FDF		jeq d15, #0, #0x000C ; JUMP 0xA00119C8

#130		
#131				(* THEN *)
#132		
#133					(* S:=30.0; *)
#134					LD		30.0	{L:38}
(*) UNDEF
A00119B4  F00000BB		mov.u d15, #0x0000 ; COSTREAL 30.000000
A00119B8  F41F0F9B		addih d15, d15, #0x41F0

#135					ST		S	{L:38}
(*) REAL
A00119BC  8006C0BB		mov.u d8, #0x6C
A00119C0  F600C801		addsc.a a15, a12, d8, #0
A00119C4  0000FF59		st.w [a15], d15

#136		
#137		$label9:
#138				(* END_IF *)
#139		
#140		
#141				(* IF vel>0.0 *)
#142				LD		vel	{L:42}
(*) UNDEF
A00119C8  800740BB		mov.u d8, #0x74
A00119CC  F600C801		addsc.a a15, a12, d8, #0
A00119D0  0000FF19		ld.w d15, [a15]

#143				GT		0.0	{L:42}
(*) REAL
A00119D4  500000BB		mov.u d5, #0x0000 ; COSTREAL 0.000000
A00119D8  5000059B		addih d5, d5, #0x0000
A00119DC  F0015F4B		cmp.f d15, d15, d5
A00119E0  F2004F8B		eq d15, d15, #4

#144				JMPCN	$label10	{L:42}
(-) BOOL
A00119E4  000C0FDF		jeq d15, #0, #0x000C ; JUMP 0xA00119FC

#145		
#146				(* THEN *)
#147		
#148					(* vel_sign:=1.0; *)
#149					LD		1.0	{L:43}
(*) UNDEF
A00119E8  F00000BB		mov.u d15, #0x0000 ; COSTREAL 1.000000
A00119EC  F3F80F9B		addih d15, d15, #0x3F80

#150					ST		vel_sign	{L:43}
(*) REAL
A00119F0  F000C001		mov.aa a15, a12
A00119F4  0000FF59		st.w [a15], d15

#151					JMP		$label11
(-) REAL
A00119F8  000A001D		j #0x00000A ; JUMP 0xA0011A0C

#152		$label10:
#153		
#154				(* ELSE *)
#155		
#156					(* vel_sign:=-1.0; *)
#157					LD		-1.0	{L:45}
(*) UNDEF
A00119FC  F00000BB		mov.u d15, #0x0000 ; COSTREAL -1.000000
A0011A00  FBF80F9B		addih d15, d15, #0xBF80

#158					ST		vel_sign	{L:45}
(*) REAL
A0011A04  F000C001		mov.aa a15, a12
A0011A08  0000FF59		st.w [a15], d15

#159		
#160		$label11:
#161				(* END_IF *)
#162		
#163				(* acc:= (vel-vel_prec)/Ts; *)
#164				LD		vel	{L:48}
(*) UNDEF
A0011A0C  800740BB		mov.u d8, #0x74
A0011A10  F600C801		addsc.a a15, a12, d8, #0
A0011A14  0000FF19		ld.w d15, [a15]

#165				SUB		vel_prec	{L:48}
(*) REAL
A0011A18  800040BB		mov.u d8, #0x4
A0011A1C  F600C801		addsc.a a15, a12, d8, #0
A0011A20  0000F819		ld.w d8, [a15]
A0011A24  FF31086B		sub.f d15, d15, d8

#166				DIV		Ts	{L:48}
(*) REAL
A0011A28  800780BB		mov.u d8, #0x78
A0011A2C  F600C801		addsc.a a15, a12, d8, #0
A0011A30  0000F819		ld.w d8, [a15]
A0011A34  F0518F4B		div.f d15, d15, d8

#167				ST		acc	{L:48}
(*) REAL
A0011A38  800100BB		mov.u d8, #0x10
A0011A3C  F600C801		addsc.a a15, a12, d8, #0
A0011A40  0000FF59		st.w [a15], d15

#168		
#169				(* Q[0] := S*POW(acc,2.0) + Q_old[0]; *)
#170				LD		acc	{L:51}
(*) UNDEF
A0011A44  800100BB		mov.u d8, #0x10
A0011A48  F600C801		addsc.a a15, a12, d8, #0
A0011A4C  0000FF19		ld.w d15, [a15]

#171				POW		2.0	{L:51}
(*) REAL
A0011A50  41F0F00B		mov d4, d15
A0011A54  500000BB		mov.u d5, #0x0000 ; COSTREAL 2.000000
A0011A58  5400059B		addih d5, d5, #0x4000
A0011A5C  F8009091		movh.a a15, #0x8009 ; _do_pow AT 0x80091C38
A0011A60  01F8FFD9		lea a15,[a15]0x1C38
A0011A64  0000000D		nop
A0011A68  00000F2D		calli a15
A0011A6C  F1F0200B		mov d15, d2

#172				MUL		S	{L:51}
(*) REAL
A0011A70  8006C0BB		mov.u d8, #0x6C
A0011A74  F600C801		addsc.a a15, a12, d8, #0
A0011A78  0000F819		ld.w d8, [a15]
A0011A7C  F0418F4B		mul.f d15, d15, d8

#173				ADD		Q_old[0]	{L:51}
(*) REAL
A0011A80  800180BB		mov.u d8, #0x18
A0011A84  F600C801		addsc.a a15, a12, d8, #0
A0011A88  0000F819		ld.w d8, [a15]
A0011A8C  FF21086B		add.f d15, d15, d8

#174				ST		Q[0]	{L:51}
(*) REAL
A0011A90  800280BB		mov.u d8, #0x28
A0011A94  F600C801		addsc.a a15, a12, d8, #0
A0011A98  0000FF59		st.w [a15], d15

#175		
#176				(* Q[1] := Q_old[1] + S*acc*vel; *)
#177				LD		S	{L:52}
(*) UNDEF
A0011A9C  8006C0BB		mov.u d8, #0x6C
A0011AA0  F600C801		addsc.a a15, a12, d8, #0
A0011AA4  0000FF19		ld.w d15, [a15]

#178				MUL		acc	{L:52}
(*) REAL
A0011AA8  800100BB		mov.u d8, #0x10
A0011AAC  F600C801		addsc.a a15, a12, d8, #0
A0011AB0  0000F819		ld.w d8, [a15]
A0011AB4  F0418F4B		mul.f d15, d15, d8

#179				MUL		vel	{L:52}
(*) REAL
A0011AB8  800740BB		mov.u d8, #0x74
A0011ABC  F600C801		addsc.a a15, a12, d8, #0
A0011AC0  0000F819		ld.w d8, [a15]
A0011AC4  F0418F4B		mul.f d15, d15, d8

#180				ADD		Q_old[1]	{L:52}
(*) REAL
A0011AC8  8001C0BB		mov.u d8, #0x1C
A0011ACC  F600C801		addsc.a a15, a12, d8, #0
A0011AD0  0000F819		ld.w d8, [a15]
A0011AD4  FF21086B		add.f d15, d15, d8

#181				ST		Q[1]	{L:52}
(*) REAL
A0011AD8  8002C0BB		mov.u d8, #0x2C
A0011ADC  F600C801		addsc.a a15, a12, d8, #0
A0011AE0  0000FF59		st.w [a15], d15

#182		
#183				(* Q[2] := Q_old[2] + S*acc*vel; *)
#184				LD		S	{L:53}
(*) UNDEF
A0011AE4  8006C0BB		mov.u d8, #0x6C
A0011AE8  F600C801		addsc.a a15, a12, d8, #0
A0011AEC  0000FF19		ld.w d15, [a15]

#185				MUL		acc	{L:53}
(*) REAL
A0011AF0  800100BB		mov.u d8, #0x10
A0011AF4  F600C801		addsc.a a15, a12, d8, #0
A0011AF8  0000F819		ld.w d8, [a15]
A0011AFC  F0418F4B		mul.f d15, d15, d8

#186				MUL		vel	{L:53}
(*) REAL
A0011B00  800740BB		mov.u d8, #0x74
A0011B04  F600C801		addsc.a a15, a12, d8, #0
A0011B08  0000F819		ld.w d8, [a15]
A0011B0C  F0418F4B		mul.f d15, d15, d8

#187				ADD		Q_old[2]	{L:53}
(*) REAL
A0011B10  800200BB		mov.u d8, #0x20
A0011B14  F600C801		addsc.a a15, a12, d8, #0
A0011B18  0000F819		ld.w d8, [a15]
A0011B1C  FF21086B		add.f d15, d15, d8

#188				ST		Q[2]	{L:53}
(*) REAL
A0011B20  800300BB		mov.u d8, #0x30
A0011B24  F600C801		addsc.a a15, a12, d8, #0
A0011B28  0000FF59		st.w [a15], d15

#189		
#190				(* Q[3] := S*POW(vel,2.0) + 	Q_old[3]; *)
#191				LD		vel	{L:54}
(*) UNDEF
A0011B2C  800740BB		mov.u d8, #0x74
A0011B30  F600C801		addsc.a a15, a12, d8, #0
A0011B34  0000FF19		ld.w d15, [a15]

#192				POW		2.0	{L:54}
(*) REAL
A0011B38  41F0F00B		mov d4, d15
A0011B3C  500000BB		mov.u d5, #0x0000 ; COSTREAL 2.000000
A0011B40  5400059B		addih d5, d5, #0x4000
A0011B44  F8009091		movh.a a15, #0x8009 ; _do_pow AT 0x80091C38
A0011B48  01F8FFD9		lea a15,[a15]0x1C38
A0011B4C  0000000D		nop
A0011B50  00000F2D		calli a15
A0011B54  F1F0200B		mov d15, d2

#193				MUL		S	{L:54}
(*) REAL
A0011B58  8006C0BB		mov.u d8, #0x6C
A0011B5C  F600C801		addsc.a a15, a12, d8, #0
A0011B60  0000F819		ld.w d8, [a15]
A0011B64  F0418F4B		mul.f d15, d15, d8

#194				ADD		Q_old[3]	{L:54}
(*) REAL
A0011B68  800240BB		mov.u d8, #0x24
A0011B6C  F600C801		addsc.a a15, a12, d8, #0
A0011B70  0000F819		ld.w d8, [a15]
A0011B74  FF21086B		add.f d15, d15, d8

#195				ST		Q[3]	{L:54}
(*) REAL
A0011B78  800340BB		mov.u d8, #0x34
A0011B7C  F600C801		addsc.a a15, a12, d8, #0
A0011B80  0000FF59		st.w [a15], d15

#196		
#197				(* innovation := y- (PARAM[0]* acc + PARAM[1]* vel ); *)
#198				LD		y	{L:60}
(*) UNDEF
A0011B84  800700BB		mov.u d8, #0x70
A0011B88  F600C801		addsc.a a15, a12, d8, #0
A0011B8C  0000FF19		ld.w d15, [a15]

#199				SUB(		PARAM[1]	{L:60}
(*) REAL
A0011B90  F53CAF89		st.w [-sp]4, d15 
A0011B94  8003C0BB		mov.u d8, #0x3C
A0011B98  F600C801		addsc.a a15, a12, d8, #0
A0011B9C  0000FF19		ld.w d15, [a15]

#200				MUL		vel	{L:60}
(*) REAL
A0011BA0  800740BB		mov.u d8, #0x74
A0011BA4  F600C801		addsc.a a15, a12, d8, #0
A0011BA8  0000F819		ld.w d8, [a15]
A0011BAC  F0418F4B		mul.f d15, d15, d8

#201				ADD(		PARAM[0]	{L:60}
(*) REAL
A0011BB0  F53CAF89		st.w [-sp]4, d15 
A0011BB4  800380BB		mov.u d8, #0x38
A0011BB8  F600C801		addsc.a a15, a12, d8, #0
A0011BBC  0000FF19		ld.w d15, [a15]

#202				MUL		acc	{L:60}
(*) REAL
A0011BC0  800100BB		mov.u d8, #0x10
A0011BC4  F600C801		addsc.a a15, a12, d8, #0
A0011BC8  0000F819		ld.w d8, [a15]
A0011BCC  F0418F4B		mul.f d15, d15, d8

#203				)	{L:60}
(*) REAL
A0011BD0  01F0F00B		mov d0, d15
A0011BD4  0104AF09		ld.w d15, [sp+]4
A0011BD8  FF21006B		add.f d15, d15, d0

#204				)	{L:60}
(*) REAL
A0011BDC  01F0F00B		mov d0, d15
A0011BE0  0104AF09		ld.w d15, [sp+]4
A0011BE4  FF31006B		sub.f d15, d15, d0

#205				ST		innovation	{L:60}
(*) REAL
A0011BE8  800080BB		mov.u d8, #0x8
A0011BEC  F600C801		addsc.a a15, a12, d8, #0
A0011BF0  0000FF59		st.w [a15], d15

#206		
#207				(* PARAM[0]:= PARAM[0] + (S*(acc*Q[3] - Q[1]*vel))/(- POW(Q[1],2.0) + Q[0]*Q[3])  * innovation; *)
#208				LD		acc	{L:63}
(*) UNDEF
A0011BF4  800100BB		mov.u d8, #0x10
A0011BF8  F600C801		addsc.a a15, a12, d8, #0
A0011BFC  0000FF19		ld.w d15, [a15]

#209				MUL		Q[3]	{L:63}
(*) REAL
A0011C00  800340BB		mov.u d8, #0x34
A0011C04  F600C801		addsc.a a15, a12, d8, #0
A0011C08  0000F819		ld.w d8, [a15]
A0011C0C  F0418F4B		mul.f d15, d15, d8

#210				ST		$$TMP2	{L:63}
(*) REAL
A0011C10  800400BB		mov.u d8, #0x40
A0011C14  F600C801		addsc.a a15, a12, d8, #0
A0011C18  0000FF59		st.w [a15], d15

#211				LD		Q[1]	{L:63}
(*) UNDEF
A0011C1C  8002C0BB		mov.u d8, #0x2C
A0011C20  F600C801		addsc.a a15, a12, d8, #0
A0011C24  0000FF19		ld.w d15, [a15]

#212				MUL		vel	{L:63}
(*) REAL
A0011C28  800740BB		mov.u d8, #0x74
A0011C2C  F600C801		addsc.a a15, a12, d8, #0
A0011C30  0000F819		ld.w d8, [a15]
A0011C34  F0418F4B		mul.f d15, d15, d8

#213				ST		$$TMP3	{L:63}
(*) REAL
A0011C38  800440BB		mov.u d8, #0x44
A0011C3C  F600C801		addsc.a a15, a12, d8, #0
A0011C40  0000FF59		st.w [a15], d15

#214				LD		$$TMP2	{L:63}
(*) UNDEF
A0011C44  800400BB		mov.u d8, #0x40
A0011C48  F600C801		addsc.a a15, a12, d8, #0
A0011C4C  0000FF19		ld.w d15, [a15]

#215				SUB		$$TMP3	{L:63}
(*) REAL
A0011C50  800440BB		mov.u d8, #0x44
A0011C54  F600C801		addsc.a a15, a12, d8, #0
A0011C58  0000F819		ld.w d8, [a15]
A0011C5C  FF31086B		sub.f d15, d15, d8

#216				MUL		S	{L:63}
(*) REAL
A0011C60  8006C0BB		mov.u d8, #0x6C
A0011C64  F600C801		addsc.a a15, a12, d8, #0
A0011C68  0000F819		ld.w d8, [a15]
A0011C6C  F0418F4B		mul.f d15, d15, d8

#217				ST		$$TMP4	{L:63}
(*) REAL
A0011C70  800480BB		mov.u d8, #0x48
A0011C74  F600C801		addsc.a a15, a12, d8, #0
A0011C78  0000FF59		st.w [a15], d15

#218				LD		Q[1]	{L:63}
(*) UNDEF
A0011C7C  8002C0BB		mov.u d8, #0x2C
A0011C80  F600C801		addsc.a a15, a12, d8, #0
A0011C84  0000FF19		ld.w d15, [a15]

#219				POW		2.0	{L:63}
(*) REAL
A0011C88  41F0F00B		mov d4, d15
A0011C8C  500000BB		mov.u d5, #0x0000 ; COSTREAL 2.000000
A0011C90  5400059B		addih d5, d5, #0x4000
A0011C94  F8009091		movh.a a15, #0x8009 ; _do_pow AT 0x80091C38
A0011C98  01F8FFD9		lea a15,[a15]0x1C38
A0011C9C  0000000D		nop
A0011CA0  00000F2D		calli a15
A0011CA4  F1F0200B		mov d15, d2

#220				MUL		-1	{L:63}
(*) REAL
A0011CA8  8FFFF03B		mov d8, #-1
A0011CAC  8141084B		itof d8, d8
A0011CB0  F0418F4B		mul.f d15, d15, d8

#221				ST		$$TMP5	{L:63}
(*) REAL
A0011CB4  8004C0BB		mov.u d8, #0x4C
A0011CB8  F600C801		addsc.a a15, a12, d8, #0
A0011CBC  0000FF59		st.w [a15], d15

#222				LD		Q[0]	{L:63}
(*) UNDEF
A0011CC0  800280BB		mov.u d8, #0x28
A0011CC4  F600C801		addsc.a a15, a12, d8, #0
A0011CC8  0000FF19		ld.w d15, [a15]

#223				MUL		Q[3]	{L:63}
(*) REAL
A0011CCC  800340BB		mov.u d8, #0x34
A0011CD0  F600C801		addsc.a a15, a12, d8, #0
A0011CD4  0000F819		ld.w d8, [a15]
A0011CD8  F0418F4B		mul.f d15, d15, d8

#224				ADD		$$TMP5	{L:63}
(*) REAL
A0011CDC  8004C0BB		mov.u d8, #0x4C
A0011CE0  F600C801		addsc.a a15, a12, d8, #0
A0011CE4  0000F819		ld.w d8, [a15]
A0011CE8  FF21086B		add.f d15, d15, d8

#225				ST		$$TMP6	{L:63}
(*) REAL
A0011CEC  800500BB		mov.u d8, #0x50
A0011CF0  F600C801		addsc.a a15, a12, d8, #0
A0011CF4  0000FF59		st.w [a15], d15

#226				LD		$$TMP4	{L:63}
(*) UNDEF
A0011CF8  800480BB		mov.u d8, #0x48
A0011CFC  F600C801		addsc.a a15, a12, d8, #0
A0011D00  0000FF19		ld.w d15, [a15]

#227				DIV		$$TMP6	{L:63}
(*) REAL
A0011D04  800500BB		mov.u d8, #0x50
A0011D08  F600C801		addsc.a a15, a12, d8, #0
A0011D0C  0000F819		ld.w d8, [a15]
A0011D10  F0518F4B		div.f d15, d15, d8

#228				MUL		innovation	{L:63}
(*) REAL
A0011D14  800080BB		mov.u d8, #0x8
A0011D18  F600C801		addsc.a a15, a12, d8, #0
A0011D1C  0000F819		ld.w d8, [a15]
A0011D20  F0418F4B		mul.f d15, d15, d8

#229				ADD		PARAM[0]	{L:63}
(*) REAL
A0011D24  800380BB		mov.u d8, #0x38
A0011D28  F600C801		addsc.a a15, a12, d8, #0
A0011D2C  0000F819		ld.w d8, [a15]
A0011D30  FF21086B		add.f d15, d15, d8

#230				ST		PARAM[0]	{L:63}
(*) REAL
A0011D34  800380BB		mov.u d8, #0x38
A0011D38  F600C801		addsc.a a15, a12, d8, #0
A0011D3C  0000FF59		st.w [a15], d15

#231		
#232				(* PARAM[1]:= PARAM[1] - (S*(acc*Q[1] - Q[0]*vel))/(- POW(Q[1],2.0) + Q[0]*Q[3])  * innovation; *)
#233				LD		acc	{L:65}
(*) UNDEF
A0011D40  800100BB		mov.u d8, #0x10
A0011D44  F600C801		addsc.a a15, a12, d8, #0
A0011D48  0000FF19		ld.w d15, [a15]

#234				MUL		Q[1]	{L:65}
(*) REAL
A0011D4C  8002C0BB		mov.u d8, #0x2C
A0011D50  F600C801		addsc.a a15, a12, d8, #0
A0011D54  0000F819		ld.w d8, [a15]
A0011D58  F0418F4B		mul.f d15, d15, d8

#235				ST		$$TMP7	{L:65}
(*) REAL
A0011D5C  800540BB		mov.u d8, #0x54
A0011D60  F600C801		addsc.a a15, a12, d8, #0
A0011D64  0000FF59		st.w [a15], d15

#236				LD		Q[0]	{L:65}
(*) UNDEF
A0011D68  800280BB		mov.u d8, #0x28
A0011D6C  F600C801		addsc.a a15, a12, d8, #0
A0011D70  0000FF19		ld.w d15, [a15]

#237				MUL		vel	{L:65}
(*) REAL
A0011D74  800740BB		mov.u d8, #0x74
A0011D78  F600C801		addsc.a a15, a12, d8, #0
A0011D7C  0000F819		ld.w d8, [a15]
A0011D80  F0418F4B		mul.f d15, d15, d8

#238				ST		$$TMP8	{L:65}
(*) REAL
A0011D84  800580BB		mov.u d8, #0x58
A0011D88  F600C801		addsc.a a15, a12, d8, #0
A0011D8C  0000FF59		st.w [a15], d15

#239				LD		$$TMP7	{L:65}
(*) UNDEF
A0011D90  800540BB		mov.u d8, #0x54
A0011D94  F600C801		addsc.a a15, a12, d8, #0
A0011D98  0000FF19		ld.w d15, [a15]

#240				SUB		$$TMP8	{L:65}
(*) REAL
A0011D9C  800580BB		mov.u d8, #0x58
A0011DA0  F600C801		addsc.a a15, a12, d8, #0
A0011DA4  0000F819		ld.w d8, [a15]
A0011DA8  FF31086B		sub.f d15, d15, d8

#241				MUL		S	{L:65}
(*) REAL
A0011DAC  8006C0BB		mov.u d8, #0x6C
A0011DB0  F600C801		addsc.a a15, a12, d8, #0
A0011DB4  0000F819		ld.w d8, [a15]
A0011DB8  F0418F4B		mul.f d15, d15, d8

#242				ST		$$TMP9	{L:65}
(*) REAL
A0011DBC  8005C0BB		mov.u d8, #0x5C
A0011DC0  F600C801		addsc.a a15, a12, d8, #0
A0011DC4  0000FF59		st.w [a15], d15

#243				LD		Q[1]	{L:65}
(*) UNDEF
A0011DC8  8002C0BB		mov.u d8, #0x2C
A0011DCC  F600C801		addsc.a a15, a12, d8, #0
A0011DD0  0000FF19		ld.w d15, [a15]

#244				POW		2.0	{L:65}
(*) REAL
A0011DD4  41F0F00B		mov d4, d15
A0011DD8  500000BB		mov.u d5, #0x0000 ; COSTREAL 2.000000
A0011DDC  5400059B		addih d5, d5, #0x4000
A0011DE0  F8009091		movh.a a15, #0x8009 ; _do_pow AT 0x80091C38
A0011DE4  01F8FFD9		lea a15,[a15]0x1C38
A0011DE8  0000000D		nop
A0011DEC  00000F2D		calli a15
A0011DF0  F1F0200B		mov d15, d2

#245				MUL		-1	{L:65}
(*) REAL
A0011DF4  8FFFF03B		mov d8, #-1
A0011DF8  8141084B		itof d8, d8
A0011DFC  F0418F4B		mul.f d15, d15, d8

#246				ST		$$TMP10	{L:65}
(*) REAL
A0011E00  800600BB		mov.u d8, #0x60
A0011E04  F600C801		addsc.a a15, a12, d8, #0
A0011E08  0000FF59		st.w [a15], d15

#247				LD		Q[0]	{L:65}
(*) UNDEF
A0011E0C  800280BB		mov.u d8, #0x28
A0011E10  F600C801		addsc.a a15, a12, d8, #0
A0011E14  0000FF19		ld.w d15, [a15]

#248				MUL		Q[3]	{L:65}
(*) REAL
A0011E18  800340BB		mov.u d8, #0x34
A0011E1C  F600C801		addsc.a a15, a12, d8, #0
A0011E20  0000F819		ld.w d8, [a15]
A0011E24  F0418F4B		mul.f d15, d15, d8

#249				ADD		$$TMP10	{L:65}
(*) REAL
A0011E28  800600BB		mov.u d8, #0x60
A0011E2C  F600C801		addsc.a a15, a12, d8, #0
A0011E30  0000F819		ld.w d8, [a15]
A0011E34  FF21086B		add.f d15, d15, d8

#250				ST		$$TMP11	{L:65}
(*) REAL
A0011E38  800640BB		mov.u d8, #0x64
A0011E3C  F600C801		addsc.a a15, a12, d8, #0
A0011E40  0000FF59		st.w [a15], d15

#251				LD		$$TMP9	{L:65}
(*) UNDEF
A0011E44  8005C0BB		mov.u d8, #0x5C
A0011E48  F600C801		addsc.a a15, a12, d8, #0
A0011E4C  0000FF19		ld.w d15, [a15]

#252				DIV		$$TMP11	{L:65}
(*) REAL
A0011E50  800640BB		mov.u d8, #0x64
A0011E54  F600C801		addsc.a a15, a12, d8, #0
A0011E58  0000F819		ld.w d8, [a15]
A0011E5C  F0518F4B		div.f d15, d15, d8

#253				MUL		innovation	{L:65}
(*) REAL
A0011E60  800080BB		mov.u d8, #0x8
A0011E64  F600C801		addsc.a a15, a12, d8, #0
A0011E68  0000F819		ld.w d8, [a15]
A0011E6C  F0418F4B		mul.f d15, d15, d8

#254				ST		$$TMP12	{L:65}
(*) REAL
A0011E70  800680BB		mov.u d8, #0x68
A0011E74  F600C801		addsc.a a15, a12, d8, #0
A0011E78  0000FF59		st.w [a15], d15

#255				LD		PARAM[1]	{L:65}
(*) UNDEF
A0011E7C  8003C0BB		mov.u d8, #0x3C
A0011E80  F600C801		addsc.a a15, a12, d8, #0
A0011E84  0000FF19		ld.w d15, [a15]

#256				SUB		$$TMP12	{L:65}
(*) REAL
A0011E88  800680BB		mov.u d8, #0x68
A0011E8C  F600C801		addsc.a a15, a12, d8, #0
A0011E90  0000F819		ld.w d8, [a15]
A0011E94  FF31086B		sub.f d15, d15, d8

#257				ST		PARAM[1]	{L:65}
(*) REAL
A0011E98  8003C0BB		mov.u d8, #0x3C
A0011E9C  F600C801		addsc.a a15, a12, d8, #0
A0011EA0  0000FF59		st.w [a15], d15

#258		
#259				(* FOR i:=0 TO 3 *)
#260				LD		0	{L:69}
(*) UNDEF
A0011EA4  F000003B		mov d15, #0

#261				ST		i	{L:69}
(*) USINT
A0011EA8  8000C0BB		mov.u d8, #0xC
A0011EAC  F600C801		addsc.a a15, a12, d8, #0
A0011EB0  0800FF89		st.b [a15], d15

#262		
#263		$label12:
#264				LD		i	{L:69}
(*) UNDEF
A0011EB4  8000C0BB		mov.u d8, #0xC
A0011EB8  F600C801		addsc.a a15, a12, d8, #0
A0011EBC  0800FF09		ld.b d15, [a15]

#265				GT		3	{L:69}
(*) SINT
A0011EC0  8000303B		mov d8, #3
A0011EC4  F120F80B		lt d15, d8, d15

#266				JMPC	$label13	{L:69}
(-) BOOL
A0011EC8  80320FDF		jne d15, #0, #0x0032 ; JUMP 0xA0011F2C

#267		
#268					(* DO *)
#269		
#270					(* Q_old[i]:=Q[i]; *)
#271					LD		Q[i]	{L:70}
(*) UNDEF
A0011ECC  8000C0BB		mov.u d8, #0xC
A0011ED0  F600C801		addsc.a a15, a12, d8, #0
A0011ED4  0800FE09		ld.b d14, [a15]
A0011ED8  800280BB		mov.u d8, #0x28
A0011EDC  8000089B		addih d8, d8, #0x0
A0011EE0  F600C801		addsc.a a15, a12, d8, #0
A0011EE4  F602FE01		addsc.a a15, a15, d14, #2
A0011EE8  0000FF19		ld.w d15, [a15]

#272					ST		Q_old[i]	{L:70}
(*) REAL
A0011EEC  8000C0BB		mov.u d8, #0xC
A0011EF0  F600C801		addsc.a a15, a12, d8, #0
A0011EF4  0800FE09		ld.b d14, [a15]
A0011EF8  800180BB		mov.u d8, #0x18
A0011EFC  8000089B		addih d8, d8, #0x0
A0011F00  F600C801		addsc.a a15, a12, d8, #0
A0011F04  F602FE01		addsc.a a15, a15, d14, #2
A0011F08  0000FF59		st.w [a15], d15

#273		
#274				(* FOR counter increment *)
#275				LD		i	{L:1}
(*) UNDEF
A0011F0C  8000C0BB		mov.u d8, #0xC
A0011F10  F600C801		addsc.a a15, a12, d8, #0
A0011F14  0800FF09		ld.b d15, [a15]

#276				ADD		1	{L:1}
(*) SINT
A0011F18  F0001F8B		add d15, d15, #1

#277				ST		i	{L:1}
(*) SINT
A0011F1C  8000C0BB		mov.u d8, #0xC
A0011F20  F600C801		addsc.a a15, a12, d8, #0
A0011F24  0800FF89		st.b [a15], d15

#278				JMP		$label12
(-) SINT
A0011F28  FFC6FF1D		j #0xFFFFC6 ; JUMP 0xA0011EB4

#279		
#280		$label13:
#281		
#282				(* END_FOR *)
#283		
#284				(* vel_prec:=vel; *)
#285				LD		vel	{L:73}
(*) UNDEF
A0011F2C  800740BB		mov.u d8, #0x74
A0011F30  F600C801		addsc.a a15, a12, d8, #0
A0011F34  0000FF19		ld.w d15, [a15]

#286				ST		vel_prec	{L:73}
(*) REAL
A0011F38  800040BB		mov.u d8, #0x4
A0011F3C  F600C801		addsc.a a15, a12, d8, #0
A0011F40  0000FF59		st.w [a15], d15

#287		
#288				(* Jm:=PARAM[0]; *)
#289				LD		PARAM[0]	{L:75}
(*) UNDEF
A0011F44  800380BB		mov.u d8, #0x38
A0011F48  F600C801		addsc.a a15, a12, d8, #0
A0011F4C  0000FF19		ld.w d15, [a15]

#290				ST		Jm	{L:75}
(*) REAL
A0011F50  800840BB		mov.u d8, #0x84
A0011F54  F600C801		addsc.a a15, a12, d8, #0
A0011F58  0000FF59		st.w [a15], d15

#291		
#292				(* Bm:=PARAM[1]; *)
#293				LD		PARAM[1]	{L:76}
(*) UNDEF
A0011F5C  8003C0BB		mov.u d8, #0x3C
A0011F60  F600C801		addsc.a a15, a12, d8, #0
A0011F64  0000FF19		ld.w d15, [a15]

#294				ST		Bm	{L:76}
(*) REAL
A0011F68  800880BB		mov.u d8, #0x88
A0011F6C  F600C801		addsc.a a15, a12, d8, #0
A0011F70  0000FF59		st.w [a15], d15

#295		
#296		
#297				(* IF Time>Time_max *)
#298				LD		Time	{L:78}
(*) UNDEF
A0011F74  800140BB		mov.u d8, #0x14
A0011F78  F600C801		addsc.a a15, a12, d8, #0
A0011F7C  0000FF19		ld.w d15, [a15]

#299				GT		Time_max	{L:78}
(*) REAL
A0011F80  8007C0BB		mov.u d8, #0x7C
A0011F84  F600C801		addsc.a a15, a12, d8, #0
A0011F88  0000F519		ld.w d5, [a15]
A0011F8C  F0015F4B		cmp.f d15, d15, d5
A0011F90  F2004F8B		eq d15, d15, #4

#300				JMPCN	$label14	{L:78}
(-) BOOL
A0011F94  000A0FDF		jeq d15, #0, #0x000A ; JUMP 0xA0011FA8

#301		
#302				(* THEN *)
#303		
#304					(* END:=TRUE; *)
#305					LD		TRUE	{L:79}
(*) UNDEF
A0011F98  F000103B		mov d15, #1

#306					ST		END	{L:79}
(*) BOOL
A0011F9C  8008C0BB		mov.u d8, #0x8C
A0011FA0  F600C801		addsc.a a15, a12, d8, #0
A0011FA4  0000FF59		st.w [a15], d15

A0011FA8  0180000D		ret


Frame allocation:

	006C       : VAR S
	0070       : VAR y
	0074       : VAR vel
	0078       : VAR Ts
	007C       : VAR Time_max
	0080       : VAR ssMethodType
	0084       : VAR Jm
	0088       : VAR Bm
	008C bit  0: VAR END
	0000       : VAR vel_sign
	0004       : VAR vel_prec
	0008       : VAR innovation
	000C       : VAR i
	0010       : VAR acc
	0014       : VAR Time
	0018       : VAR Q_old
	0028       : VAR Q
	0038       : VAR PARAM
	0040       : VAR $$TMP2
	0044       : VAR $$TMP3
	0048       : VAR $$TMP4
	004C       : VAR $$TMP5
	0050       : VAR $$TMP6
	0054       : VAR $$TMP7
	0058       : VAR $$TMP8
	005C       : VAR $$TMP9
	0060       : VAR $$TMP10
	0064       : VAR $$TMP11
	0068       : VAR $$TMP12

END_FUNCTION_BLOCK
**************************************************
	List function block: Tune_PID
**************************************************

FUNCTION_BLOCK Tune_PID

	VAR_INPUT
	phi_m_v : REAL; 
	phi_m_p : REAL; 
	Wc_pos : REAL; 
	Wc_vel : REAL; { DE:"Omega c velocità" } 
	Jm : REAL; { DE:"Inerzia" } 
	Bm : REAL; { DE:"Attrito statico" } 
	TUNE : SINT; 
	END_VAR

	VAR_OUTPUT
	ti_v : REAL; 
	kp_v : REAL; 
	ti_p : REAL; 
	kp_p : REAL; 
	td_p : REAL; 
	td_v : REAL; 
	END_VAR

	VAR
	ssMethodType : SINT; 
	kk : REAL; 
	beta : REAL; 
	K : REAL; 
	P : REAL; 
	A : REAL; 
	B : REAL; 
	ONLY_kpv : BOOL; 
	END_VAR

A0011FAC  C0004001		mov.aa a12, a4

#0		{SRC:Tune_PID}
#1		
#2		
#3			(* IF Wc_pos<0.01 *)
#4			LD		Wc_pos	{L:2}
(*) UNDEF
A0011FB0  800780BB		mov.u d8, #0x78
A0011FB4  F600C801		addsc.a a15, a12, d8, #0
A0011FB8  0000FF19		ld.w d15, [a15]

#5			LT		0.01	{L:2}
(*) REAL
A0011FBC  5D70A0BB		mov.u d5, #0xD70A ; COSTREAL 0.010000
A0011FC0  53C2359B		addih d5, d5, #0x3C23
A0011FC4  F0015F4B		cmp.f d15, d15, d5
A0011FC8  F2001F8B		eq d15, d15, #1

#6			JMPCN	$label0	{L:2}
(-) BOOL
A0011FCC  00140FDF		jeq d15, #0, #0x0014 ; JUMP 0xA0011FF4

#7		
#8			(* THEN *)
#9		
#10				(* Wc_pos:=Wc_vel/5.0; *)
#11				LD		Wc_vel	{L:3}
(*) UNDEF
A0011FD0  8007C0BB		mov.u d8, #0x7C
A0011FD4  F600C801		addsc.a a15, a12, d8, #0
A0011FD8  0000FF19		ld.w d15, [a15]

#12				DIV		5.0	{L:3}
(*) REAL
A0011FDC  800000BB		mov.u d8, #0x0000 ; COSTREAL 5.000000
A0011FE0  840A089B		addih d8, d8, #0x40A0
A0011FE4  F0518F4B		div.f d15, d15, d8

#13				ST		Wc_pos	{L:3}
(*) REAL
A0011FE8  800780BB		mov.u d8, #0x78
A0011FEC  F600C801		addsc.a a15, a12, d8, #0
A0011FF0  0000FF59		st.w [a15], d15

#14		
#15		$label0:
#16			(* END_IF *)
#17		
#18		
#19			(* IF TUNE=0 *)
#20			LD		TUNE	{L:6}
(*) UNDEF
A0011FF4  800880BB		mov.u d8, #0x88
A0011FF8  F600C801		addsc.a a15, a12, d8, #0
A0011FFC  0800FF09		ld.b d15, [a15]

#21			EQ		0	{L:6}
(*) SINT
A0012000  8000003B		mov d8, #0
A0012004  F1008F0B		eq d15, d15, d8

#22			JMPCN	$label1	{L:6}
(-) BOOL
A0012008  02780FDF		jeq d15, #0, #0x0278 ; JUMP 0xA00124F8

#23		
#24			(* THEN *)
#25		
#26		
#27				(* IF TRUE *)
#28				LD		TRUE	{L:7}
(*) UNDEF
A001200C  F000103B		mov d15, #1

#29				JMPCN	$label3	{L:7}
(-) BOOL
A0012010  01E60FDF		jeq d15, #0, #0x01E6 ; JUMP 0xA00123DC

#30		
#31				(* THEN *)
#32		
#33					(* ti_v:=-1.0/(Wc_vel*TAN(phi_m_v + ATAN2(Jm*Wc_vel,Bm))); *)
#34					LD		Jm	{L:9}
(*) UNDEF
A0012014  800800BB		mov.u d8, #0x80
A0012018  F600C801		addsc.a a15, a12, d8, #0
A001201C  0000FF19		ld.w d15, [a15]

#35					MUL		Wc_vel	{L:9}
(*) REAL
A0012020  8007C0BB		mov.u d8, #0x7C
A0012024  F600C801		addsc.a a15, a12, d8, #0
A0012028  0000F819		ld.w d8, [a15]
A001202C  F0418F4B		mul.f d15, d15, d8

#36					ST		$$TMP0	{L:9}
(*) REAL
A0012030  800200BB		mov.u d8, #0x20
A0012034  F600C801		addsc.a a15, a12, d8, #0
A0012038  0000FF59		st.w [a15], d15

#37					LD		$$TMP0	{L:9}
(*) UNDEF
A001203C  800200BB		mov.u d8, #0x20
A0012040  F600C801		addsc.a a15, a12, d8, #0
A0012044  0000FF19		ld.w d15, [a15]

#38					ATAN2		Bm	{L:9}
(*) REAL
A0012048  41F0F00B		mov d4, d15
A001204C  800840BB		mov.u d8, #0x84
A0012050  F600C801		addsc.a a15, a12, d8, #0
A0012054  0000F519		ld.w d5, [a15]
A0012058  F8009091		movh.a a15, #0x8009 ; _do_atan2 AT 0x800919E8
A001205C  71A8FFD9		lea a15,[a15]0x19E8
A0012060  0000000D		nop
A0012064  00000F2D		calli a15
A0012068  F1F0200B		mov d15, d2

#39					ADD		phi_m_v	{L:9}
(*) REAL
A001206C  800700BB		mov.u d8, #0x70
A0012070  F600C801		addsc.a a15, a12, d8, #0
A0012074  0000F819		ld.w d8, [a15]
A0012078  FF21086B		add.f d15, d15, d8

#40					TAN	{L:9}
(*) REAL
A001207C  41F0F00B		mov d4, d15
A0012080  F8009091		movh.a a15, #0x8009 ; _do_tan AT 0x800918B8
A0012084  21B8FFD9		lea a15,[a15]0x18B8
A0012088  0000000D		nop
A001208C  00000F2D		calli a15
A0012090  F1F0200B		mov d15, d2

#41					MUL		Wc_vel	{L:9}
(*) REAL
A0012094  8007C0BB		mov.u d8, #0x7C
A0012098  F600C801		addsc.a a15, a12, d8, #0
A001209C  0000F819		ld.w d8, [a15]
A00120A0  F0418F4B		mul.f d15, d15, d8

#42					ST		$$TMP1	{L:9}
(*) REAL
A00120A4  800240BB		mov.u d8, #0x24
A00120A8  F600C801		addsc.a a15, a12, d8, #0
A00120AC  0000FF59		st.w [a15], d15

#43					LD		-1.0	{L:9}
(*) UNDEF
A00120B0  F00000BB		mov.u d15, #0x0000 ; COSTREAL -1.000000
A00120B4  FBF80F9B		addih d15, d15, #0xBF80

#44					DIV		$$TMP1	{L:9}
(*) REAL
A00120B8  800240BB		mov.u d8, #0x24
A00120BC  F600C801		addsc.a a15, a12, d8, #0
A00120C0  0000F819		ld.w d8, [a15]
A00120C4  F0518F4B		div.f d15, d15, d8

#45					ST		ti_v	{L:9}
(*) REAL
A00120C8  8008C0BB		mov.u d8, #0x8C
A00120CC  F600C801		addsc.a a15, a12, d8, #0
A00120D0  0000FF59		st.w [a15], d15

#46		
#47					(* kp_v:=(ti_v*Wc_vel*SQRT(POW(Bm,2.0) + POW(Jm,2.0)*POW(Wc_vel,2.0)))/SQRT(POW(ti_v,2.0)*POW(Wc_vel,2.0) + 1.0); *)
#48					LD		ti_v	{L:10}
(*) UNDEF
A00120D4  8008C0BB		mov.u d8, #0x8C
A00120D8  F600C801		addsc.a a15, a12, d8, #0
A00120DC  0000FF19		ld.w d15, [a15]

#49					MUL		Wc_vel	{L:10}
(*) REAL
A00120E0  8007C0BB		mov.u d8, #0x7C
A00120E4  F600C801		addsc.a a15, a12, d8, #0
A00120E8  0000F819		ld.w d8, [a15]
A00120EC  F0418F4B		mul.f d15, d15, d8

#50					ST		$$TMP2	{L:10}
(*) REAL
A00120F0  800280BB		mov.u d8, #0x28
A00120F4  F600C801		addsc.a a15, a12, d8, #0
A00120F8  0000FF59		st.w [a15], d15

#51					LD		Bm	{L:10}
(*) UNDEF
A00120FC  800840BB		mov.u d8, #0x84
A0012100  F600C801		addsc.a a15, a12, d8, #0
A0012104  0000FF19		ld.w d15, [a15]

#52					POW		2.0	{L:10}
(*) REAL
A0012108  41F0F00B		mov d4, d15
A001210C  500000BB		mov.u d5, #0x0000 ; COSTREAL 2.000000
A0012110  5400059B		addih d5, d5, #0x4000
A0012114  F8009091		movh.a a15, #0x8009 ; _do_pow AT 0x80091C38
A0012118  01F8FFD9		lea a15,[a15]0x1C38
A001211C  0000000D		nop
A0012120  00000F2D		calli a15
A0012124  F1F0200B		mov d15, d2

#53					ST		$$TMP3	{L:10}
(*) REAL
A0012128  8002C0BB		mov.u d8, #0x2C
A001212C  F600C801		addsc.a a15, a12, d8, #0
A0012130  0000FF59		st.w [a15], d15

#54					LD		Jm	{L:10}
(*) UNDEF
A0012134  800800BB		mov.u d8, #0x80
A0012138  F600C801		addsc.a a15, a12, d8, #0
A001213C  0000FF19		ld.w d15, [a15]

#55					POW		2.0	{L:10}
(*) REAL
A0012140  41F0F00B		mov d4, d15
A0012144  500000BB		mov.u d5, #0x0000 ; COSTREAL 2.000000
A0012148  5400059B		addih d5, d5, #0x4000
A001214C  F8009091		movh.a a15, #0x8009 ; _do_pow AT 0x80091C38
A0012150  01F8FFD9		lea a15,[a15]0x1C38
A0012154  0000000D		nop
A0012158  00000F2D		calli a15
A001215C  F1F0200B		mov d15, d2

#56					ST		$$TMP4	{L:10}
(*) REAL
A0012160  800300BB		mov.u d8, #0x30
A0012164  F600C801		addsc.a a15, a12, d8, #0
A0012168  0000FF59		st.w [a15], d15

#57					LD		Wc_vel	{L:10}
(*) UNDEF
A001216C  8007C0BB		mov.u d8, #0x7C
A0012170  F600C801		addsc.a a15, a12, d8, #0
A0012174  0000FF19		ld.w d15, [a15]

#58					POW		2.0	{L:10}
(*) REAL
A0012178  41F0F00B		mov d4, d15
A001217C  500000BB		mov.u d5, #0x0000 ; COSTREAL 2.000000
A0012180  5400059B		addih d5, d5, #0x4000
A0012184  F8009091		movh.a a15, #0x8009 ; _do_pow AT 0x80091C38
A0012188  01F8FFD9		lea a15,[a15]0x1C38
A001218C  0000000D		nop
A0012190  00000F2D		calli a15
A0012194  F1F0200B		mov d15, d2

#59					MUL		$$TMP4	{L:10}
(*) REAL
A0012198  800300BB		mov.u d8, #0x30
A001219C  F600C801		addsc.a a15, a12, d8, #0
A00121A0  0000F819		ld.w d8, [a15]
A00121A4  F0418F4B		mul.f d15, d15, d8

#60					ADD		$$TMP3	{L:10}
(*) REAL
A00121A8  8002C0BB		mov.u d8, #0x2C
A00121AC  F600C801		addsc.a a15, a12, d8, #0
A00121B0  0000F819		ld.w d8, [a15]
A00121B4  FF21086B		add.f d15, d15, d8

#61					SQRT	{L:10}
(*) REAL
A00121B8  41F0F00B		mov d4, d15
A00121BC  F8009091		movh.a a15, #0x8009 ; _do_sqrt AT 0x80090598
A00121C0  6058FFD9		lea a15,[a15]0x0598
A00121C4  0000000D		nop
A00121C8  00000F2D		calli a15
A00121CC  F1F0200B		mov d15, d2

#62					MUL		$$TMP2	{L:10}
(*) REAL
A00121D0  800280BB		mov.u d8, #0x28
A00121D4  F600C801		addsc.a a15, a12, d8, #0
A00121D8  0000F819		ld.w d8, [a15]
A00121DC  F0418F4B		mul.f d15, d15, d8

#63					ST		$$TMP5	{L:10}
(*) REAL
A00121E0  800340BB		mov.u d8, #0x34
A00121E4  F600C801		addsc.a a15, a12, d8, #0
A00121E8  0000FF59		st.w [a15], d15

#64					LD		ti_v	{L:10}
(*) UNDEF
A00121EC  8008C0BB		mov.u d8, #0x8C
A00121F0  F600C801		addsc.a a15, a12, d8, #0
A00121F4  0000FF19		ld.w d15, [a15]

#65					POW		2.0	{L:10}
(*) REAL
A00121F8  41F0F00B		mov d4, d15
A00121FC  500000BB		mov.u d5, #0x0000 ; COSTREAL 2.000000
A0012200  5400059B		addih d5, d5, #0x4000
A0012204  F8009091		movh.a a15, #0x8009 ; _do_pow AT 0x80091C38
A0012208  01F8FFD9		lea a15,[a15]0x1C38
A001220C  0000000D		nop
A0012210  00000F2D		calli a15
A0012214  F1F0200B		mov d15, d2

#66					ST		$$TMP6	{L:10}
(*) REAL
A0012218  800380BB		mov.u d8, #0x38
A001221C  F600C801		addsc.a a15, a12, d8, #0
A0012220  0000FF59		st.w [a15], d15

#67					LD		Wc_vel	{L:10}
(*) UNDEF
A0012224  8007C0BB		mov.u d8, #0x7C
A0012228  F600C801		addsc.a a15, a12, d8, #0
A001222C  0000FF19		ld.w d15, [a15]

#68					POW		2.0	{L:10}
(*) REAL
A0012230  41F0F00B		mov d4, d15
A0012234  500000BB		mov.u d5, #0x0000 ; COSTREAL 2.000000
A0012238  5400059B		addih d5, d5, #0x4000
A001223C  F8009091		movh.a a15, #0x8009 ; _do_pow AT 0x80091C38
A0012240  01F8FFD9		lea a15,[a15]0x1C38
A0012244  0000000D		nop
A0012248  00000F2D		calli a15
A001224C  F1F0200B		mov d15, d2

#69					MUL		$$TMP6	{L:10}
(*) REAL
A0012250  800380BB		mov.u d8, #0x38
A0012254  F600C801		addsc.a a15, a12, d8, #0
A0012258  0000F819		ld.w d8, [a15]
A001225C  F0418F4B		mul.f d15, d15, d8

#70					ADD		1.0	{L:10}
(*) REAL
A0012260  800000BB		mov.u d8, #0x0000 ; COSTREAL 1.000000
A0012264  83F8089B		addih d8, d8, #0x3F80
A0012268  FF21086B		add.f d15, d15, d8

#71					SQRT	{L:10}
(*) REAL
A001226C  41F0F00B		mov d4, d15
A0012270  F8009091		movh.a a15, #0x8009 ; _do_sqrt AT 0x80090598
A0012274  6058FFD9		lea a15,[a15]0x0598
A0012278  0000000D		nop
A001227C  00000F2D		calli a15
A0012280  F1F0200B		mov d15, d2

#72					ST		$$TMP7	{L:10}
(*) REAL
A0012284  8003C0BB		mov.u d8, #0x3C
A0012288  F600C801		addsc.a a15, a12, d8, #0
A001228C  0000FF59		st.w [a15], d15

#73					LD		$$TMP5	{L:10}
(*) UNDEF
A0012290  800340BB		mov.u d8, #0x34
A0012294  F600C801		addsc.a a15, a12, d8, #0
A0012298  0000FF19		ld.w d15, [a15]

#74					DIV		$$TMP7	{L:10}
(*) REAL
A001229C  8003C0BB		mov.u d8, #0x3C
A00122A0  F600C801		addsc.a a15, a12, d8, #0
A00122A4  0000F819		ld.w d8, [a15]
A00122A8  F0518F4B		div.f d15, d15, d8

#75					ST		kp_v	{L:10}
(*) REAL
A00122AC  800900BB		mov.u d8, #0x90
A00122B0  F600C801		addsc.a a15, a12, d8, #0
A00122B4  0000FF59		st.w [a15], d15

#76		
#77					(* ONLY_kpv:=FALSE; *)
#78					LD		FALSE	{L:11}
(*) UNDEF
A00122B8  F000003B		mov d15, #0

#79					ST		ONLY_kpv	{L:11}
(*) BOOL
A00122BC  8001C0BB		mov.u d8, #0x1C
A00122C0  F600C801		addsc.a a15, a12, d8, #0
A00122C4  0000FF59		st.w [a15], d15

#80		
#81		
#82					(* IF ti_v<0.01 *)
#83					LD		ti_v	{L:12}
(*) UNDEF
A00122C8  8008C0BB		mov.u d8, #0x8C
A00122CC  F600C801		addsc.a a15, a12, d8, #0
A00122D0  0000FF19		ld.w d15, [a15]

#84					LT		0.01	{L:12}
(*) REAL
A00122D4  5D70A0BB		mov.u d5, #0xD70A ; COSTREAL 0.010000
A00122D8  53C2359B		addih d5, d5, #0x3C23
A00122DC  F0015F4B		cmp.f d15, d15, d5
A00122E0  F2001F8B		eq d15, d15, #1

#85					JMPCN	$label5	{L:12}
(-) BOOL
A00122E4  007A0FDF		jeq d15, #0, #0x007A ; JUMP 0xA00123D8

#86		
#87					(* THEN *)
#88		
#89						(* kp_v:=SQRT(POW(Jm,2.0)*POW(Wc_vel,2.0)+POW(Bm,2.0)); *)
#90						LD		Jm	{L:13}
(*) UNDEF
A00122E8  800800BB		mov.u d8, #0x80
A00122EC  F600C801		addsc.a a15, a12, d8, #0
A00122F0  0000FF19		ld.w d15, [a15]

#91						POW		2.0	{L:13}
(*) REAL
A00122F4  41F0F00B		mov d4, d15
A00122F8  500000BB		mov.u d5, #0x0000 ; COSTREAL 2.000000
A00122FC  5400059B		addih d5, d5, #0x4000
A0012300  F8009091		movh.a a15, #0x8009 ; _do_pow AT 0x80091C38
A0012304  01F8FFD9		lea a15,[a15]0x1C38
A0012308  0000000D		nop
A001230C  00000F2D		calli a15
A0012310  F1F0200B		mov d15, d2

#92						ST		$$TMP8	{L:13}
(*) REAL
A0012314  800400BB		mov.u d8, #0x40
A0012318  F600C801		addsc.a a15, a12, d8, #0
A001231C  0000FF59		st.w [a15], d15

#93						LD		Wc_vel	{L:13}
(*) UNDEF
A0012320  8007C0BB		mov.u d8, #0x7C
A0012324  F600C801		addsc.a a15, a12, d8, #0
A0012328  0000FF19		ld.w d15, [a15]

#94						POW		2.0	{L:13}
(*) REAL
A001232C  41F0F00B		mov d4, d15
A0012330  500000BB		mov.u d5, #0x0000 ; COSTREAL 2.000000
A0012334  5400059B		addih d5, d5, #0x4000
A0012338  F8009091		movh.a a15, #0x8009 ; _do_pow AT 0x80091C38
A001233C  01F8FFD9		lea a15,[a15]0x1C38
A0012340  0000000D		nop
A0012344  00000F2D		calli a15
A0012348  F1F0200B		mov d15, d2

#95						MUL		$$TMP8	{L:13}
(*) REAL
A001234C  800400BB		mov.u d8, #0x40
A0012350  F600C801		addsc.a a15, a12, d8, #0
A0012354  0000F819		ld.w d8, [a15]
A0012358  F0418F4B		mul.f d15, d15, d8

#96						ST		$$TMP9	{L:13}
(*) REAL
A001235C  800440BB		mov.u d8, #0x44
A0012360  F600C801		addsc.a a15, a12, d8, #0
A0012364  0000FF59		st.w [a15], d15

#97						LD		Bm	{L:13}
(*) UNDEF
A0012368  800840BB		mov.u d8, #0x84
A001236C  F600C801		addsc.a a15, a12, d8, #0
A0012370  0000FF19		ld.w d15, [a15]

#98						POW		2.0	{L:13}
(*) REAL
A0012374  41F0F00B		mov d4, d15
A0012378  500000BB		mov.u d5, #0x0000 ; COSTREAL 2.000000
A001237C  5400059B		addih d5, d5, #0x4000
A0012380  F8009091		movh.a a15, #0x8009 ; _do_pow AT 0x80091C38
A0012384  01F8FFD9		lea a15,[a15]0x1C38
A0012388  0000000D		nop
A001238C  00000F2D		calli a15
A0012390  F1F0200B		mov d15, d2

#99						ADD		$$TMP9	{L:13}
(*) REAL
A0012394  800440BB		mov.u d8, #0x44
A0012398  F600C801		addsc.a a15, a12, d8, #0
A001239C  0000F819		ld.w d8, [a15]
A00123A0  FF21086B		add.f d15, d15, d8

#100						SQRT	{L:13}
(*) REAL
A00123A4  41F0F00B		mov d4, d15
A00123A8  F8009091		movh.a a15, #0x8009 ; _do_sqrt AT 0x80090598
A00123AC  6058FFD9		lea a15,[a15]0x0598
A00123B0  0000000D		nop
A00123B4  00000F2D		calli a15
A00123B8  F1F0200B		mov d15, d2

#101						ST		kp_v	{L:13}
(*) REAL
A00123BC  800900BB		mov.u d8, #0x90
A00123C0  F600C801		addsc.a a15, a12, d8, #0
A00123C4  0000FF59		st.w [a15], d15

#102		
#103						(* ONLY_kpv:=TRUE; *)
#104						LD		TRUE	{L:14}
(*) UNDEF
A00123C8  F000103B		mov d15, #1

#105						ST		ONLY_kpv	{L:14}
(*) BOOL
A00123CC  8001C0BB		mov.u d8, #0x1C
A00123D0  F600C801		addsc.a a15, a12, d8, #0
A00123D4  0000FF59		st.w [a15], d15

#106		
#107		$label5:
#108					(* END_IF *)
#109					JMP		$label4
(-) BOOL
A00123D8  0084001D		j #0x000084 ; JUMP 0xA00124E0

#110		$label3:
#111		
#112				(* ELSE *)
#113		
#114					(* ti_v:=0.0; *)
#115					LD		0.0	{L:19}
(*) UNDEF
A00123DC  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A00123E0  F0000F9B		addih d15, d15, #0x0000

#116					ST		ti_v	{L:19}
(*) REAL
A00123E4  8008C0BB		mov.u d8, #0x8C
A00123E8  F600C801		addsc.a a15, a12, d8, #0
A00123EC  0000FF59		st.w [a15], d15

#117		
#118					(* kp_v:=SQRT(POW(Jm,2.0)*POW(Wc_vel,2.0)+POW(Bm,2.0)); *)
#119					LD		Jm	{L:20}
(*) UNDEF
A00123F0  800800BB		mov.u d8, #0x80
A00123F4  F600C801		addsc.a a15, a12, d8, #0
A00123F8  0000FF19		ld.w d15, [a15]

#120					POW		2.0	{L:20}
(*) REAL
A00123FC  41F0F00B		mov d4, d15
A0012400  500000BB		mov.u d5, #0x0000 ; COSTREAL 2.000000
A0012404  5400059B		addih d5, d5, #0x4000
A0012408  F8009091		movh.a a15, #0x8009 ; _do_pow AT 0x80091C38
A001240C  01F8FFD9		lea a15,[a15]0x1C38
A0012410  0000000D		nop
A0012414  00000F2D		calli a15
A0012418  F1F0200B		mov d15, d2

#121					ST		$$TMP10	{L:20}
(*) REAL
A001241C  800480BB		mov.u d8, #0x48
A0012420  F600C801		addsc.a a15, a12, d8, #0
A0012424  0000FF59		st.w [a15], d15

#122					LD		Wc_vel	{L:20}
(*) UNDEF
A0012428  8007C0BB		mov.u d8, #0x7C
A001242C  F600C801		addsc.a a15, a12, d8, #0
A0012430  0000FF19		ld.w d15, [a15]

#123					POW		2.0	{L:20}
(*) REAL
A0012434  41F0F00B		mov d4, d15
A0012438  500000BB		mov.u d5, #0x0000 ; COSTREAL 2.000000
A001243C  5400059B		addih d5, d5, #0x4000
A0012440  F8009091		movh.a a15, #0x8009 ; _do_pow AT 0x80091C38
A0012444  01F8FFD9		lea a15,[a15]0x1C38
A0012448  0000000D		nop
A001244C  00000F2D		calli a15
A0012450  F1F0200B		mov d15, d2

#124					MUL		$$TMP10	{L:20}
(*) REAL
A0012454  800480BB		mov.u d8, #0x48
A0012458  F600C801		addsc.a a15, a12, d8, #0
A001245C  0000F819		ld.w d8, [a15]
A0012460  F0418F4B		mul.f d15, d15, d8

#125					ST		$$TMP11	{L:20}
(*) REAL
A0012464  8004C0BB		mov.u d8, #0x4C
A0012468  F600C801		addsc.a a15, a12, d8, #0
A001246C  0000FF59		st.w [a15], d15

#126					LD		Bm	{L:20}
(*) UNDEF
A0012470  800840BB		mov.u d8, #0x84
A0012474  F600C801		addsc.a a15, a12, d8, #0
A0012478  0000FF19		ld.w d15, [a15]

#127					POW		2.0	{L:20}
(*) REAL
A001247C  41F0F00B		mov d4, d15
A0012480  500000BB		mov.u d5, #0x0000 ; COSTREAL 2.000000
A0012484  5400059B		addih d5, d5, #0x4000
A0012488  F8009091		movh.a a15, #0x8009 ; _do_pow AT 0x80091C38
A001248C  01F8FFD9		lea a15,[a15]0x1C38
A0012490  0000000D		nop
A0012494  00000F2D		calli a15
A0012498  F1F0200B		mov d15, d2

#128					ADD		$$TMP11	{L:20}
(*) REAL
A001249C  8004C0BB		mov.u d8, #0x4C
A00124A0  F600C801		addsc.a a15, a12, d8, #0
A00124A4  0000F819		ld.w d8, [a15]
A00124A8  FF21086B		add.f d15, d15, d8

#129					SQRT	{L:20}
(*) REAL
A00124AC  41F0F00B		mov d4, d15
A00124B0  F8009091		movh.a a15, #0x8009 ; _do_sqrt AT 0x80090598
A00124B4  6058FFD9		lea a15,[a15]0x0598
A00124B8  0000000D		nop
A00124BC  00000F2D		calli a15
A00124C0  F1F0200B		mov d15, d2

#130					ST		kp_v	{L:20}
(*) REAL
A00124C4  800900BB		mov.u d8, #0x90
A00124C8  F600C801		addsc.a a15, a12, d8, #0
A00124CC  0000FF59		st.w [a15], d15

#131		
#132					(* ONLY_kpv:=TRUE; *)
#133					LD		TRUE	{L:21}
(*) UNDEF
A00124D0  F000103B		mov d15, #1

#134					ST		ONLY_kpv	{L:21}
(*) BOOL
A00124D4  8001C0BB		mov.u d8, #0x1C
A00124D8  F600C801		addsc.a a15, a12, d8, #0
A00124DC  0000FF59		st.w [a15], d15

#135		
#136		$label4:
#137				(* END_IF *)
#138		
#139				(* td_v:=0.0; *)
#140				LD		0.0	{L:23}
(*) UNDEF
A00124E0  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A00124E4  F0000F9B		addih d15, d15, #0x0000

#141				ST		td_v	{L:23}
(*) REAL
A00124E8  800A00BB		mov.u d8, #0xA0
A00124EC  F600C801		addsc.a a15, a12, d8, #0
A00124F0  0000FF59		st.w [a15], d15

#142				JMP		$label2
(-) REAL
A00124F4  01C0001D		j #0x0001C0 ; JUMP 0xA0012874

#143		$label1:
#144		
#145			(* ELSE *)
#146		
#147				(* A:=kp_v/(kp_v+Bm); *)
#148				LD		kp_v	{L:29}
(*) UNDEF
A00124F8  800900BB		mov.u d8, #0x90
A00124FC  F600C801		addsc.a a15, a12, d8, #0
A0012500  0000FF19		ld.w d15, [a15]

#149				DIV(		kp_v	{L:29}
(*) REAL
A0012504  F53CAF89		st.w [-sp]4, d15 
A0012508  800900BB		mov.u d8, #0x90
A001250C  F600C801		addsc.a a15, a12, d8, #0
A0012510  0000FF19		ld.w d15, [a15]

#150				ADD		Bm	{L:29}
(*) REAL
A0012514  800840BB		mov.u d8, #0x84
A0012518  F600C801		addsc.a a15, a12, d8, #0
A001251C  0000F819		ld.w d8, [a15]
A0012520  FF21086B		add.f d15, d15, d8

#151				)	{L:29}
(*) REAL
A0012524  01F0F00B		mov d0, d15
A0012528  0104AF09		ld.w d15, [sp+]4
A001252C  81F0000B		mov d8, d0
A0012530  F0518F4B		div.f d15, d15, d8

#152				ST		A	{L:29}
(*) REAL
A0012534  800140BB		mov.u d8, #0x14
A0012538  F600C801		addsc.a a15, a12, d8, #0
A001253C  0000FF59		st.w [a15], d15

#153		
#154				(* B:=Jm/(kp_v+Bm); *)
#155				LD		Jm	{L:30}
(*) UNDEF
A0012540  800800BB		mov.u d8, #0x80
A0012544  F600C801		addsc.a a15, a12, d8, #0
A0012548  0000FF19		ld.w d15, [a15]

#156				DIV(		kp_v	{L:30}
(*) REAL
A001254C  F53CAF89		st.w [-sp]4, d15 
A0012550  800900BB		mov.u d8, #0x90
A0012554  F600C801		addsc.a a15, a12, d8, #0
A0012558  0000FF19		ld.w d15, [a15]

#157				ADD		Bm	{L:30}
(*) REAL
A001255C  800840BB		mov.u d8, #0x84
A0012560  F600C801		addsc.a a15, a12, d8, #0
A0012564  0000F819		ld.w d8, [a15]
A0012568  FF21086B		add.f d15, d15, d8

#158				)	{L:30}
(*) REAL
A001256C  01F0F00B		mov d0, d15
A0012570  0104AF09		ld.w d15, [sp+]4
A0012574  81F0000B		mov d8, d0
A0012578  F0518F4B		div.f d15, d15, d8

#159				ST		B	{L:30}
(*) REAL
A001257C  800180BB		mov.u d8, #0x18
A0012580  F600C801		addsc.a a15, a12, d8, #0
A0012584  0000FF59		st.w [a15], d15

#160		
#161				(* ti_p:=0.0; *)
#162				LD		0.0	{L:41}
(*) UNDEF
A0012588  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A001258C  F0000F9B		addih d15, d15, #0x0000

#163				ST		ti_p	{L:41}
(*) REAL
A0012590  800940BB		mov.u d8, #0x94
A0012594  F600C801		addsc.a a15, a12, d8, #0
A0012598  0000FF59		st.w [a15], d15

#164		
#165				(* kp_p:=(Wc_pos*SQRT(POW(B,2.0)*POW(Wc_pos,2.0) + 1.0))/(A*SQRT(   POW(1.0/TAN(phi_m_p + ATAN2(B*Wc_pos,1.0)),2.0) + 1.0)); *)
#166				LD		B	{L:42}
(*) UNDEF
A001259C  800180BB		mov.u d8, #0x18
A00125A0  F600C801		addsc.a a15, a12, d8, #0
A00125A4  0000FF19		ld.w d15, [a15]

#167				POW		2.0	{L:42}
(*) REAL
A00125A8  41F0F00B		mov d4, d15
A00125AC  500000BB		mov.u d5, #0x0000 ; COSTREAL 2.000000
A00125B0  5400059B		addih d5, d5, #0x4000
A00125B4  F8009091		movh.a a15, #0x8009 ; _do_pow AT 0x80091C38
A00125B8  01F8FFD9		lea a15,[a15]0x1C38
A00125BC  0000000D		nop
A00125C0  00000F2D		calli a15
A00125C4  F1F0200B		mov d15, d2

#168				ST		$$TMP14	{L:42}
(*) REAL
A00125C8  800500BB		mov.u d8, #0x50
A00125CC  F600C801		addsc.a a15, a12, d8, #0
A00125D0  0000FF59		st.w [a15], d15

#169				LD		Wc_pos	{L:42}
(*) UNDEF
A00125D4  800780BB		mov.u d8, #0x78
A00125D8  F600C801		addsc.a a15, a12, d8, #0
A00125DC  0000FF19		ld.w d15, [a15]

#170				POW		2.0	{L:42}
(*) REAL
A00125E0  41F0F00B		mov d4, d15
A00125E4  500000BB		mov.u d5, #0x0000 ; COSTREAL 2.000000
A00125E8  5400059B		addih d5, d5, #0x4000
A00125EC  F8009091		movh.a a15, #0x8009 ; _do_pow AT 0x80091C38
A00125F0  01F8FFD9		lea a15,[a15]0x1C38
A00125F4  0000000D		nop
A00125F8  00000F2D		calli a15
A00125FC  F1F0200B		mov d15, d2

#171				MUL		$$TMP14	{L:42}
(*) REAL
A0012600  800500BB		mov.u d8, #0x50
A0012604  F600C801		addsc.a a15, a12, d8, #0
A0012608  0000F819		ld.w d8, [a15]
A001260C  F0418F4B		mul.f d15, d15, d8

#172				ADD		1.0	{L:42}
(*) REAL
A0012610  800000BB		mov.u d8, #0x0000 ; COSTREAL 1.000000
A0012614  83F8089B		addih d8, d8, #0x3F80
A0012618  FF21086B		add.f d15, d15, d8

#173				SQRT	{L:42}
(*) REAL
A001261C  41F0F00B		mov d4, d15
A0012620  F8009091		movh.a a15, #0x8009 ; _do_sqrt AT 0x80090598
A0012624  6058FFD9		lea a15,[a15]0x0598
A0012628  0000000D		nop
A001262C  00000F2D		calli a15
A0012630  F1F0200B		mov d15, d2

#174				MUL		Wc_pos	{L:42}
(*) REAL
A0012634  800780BB		mov.u d8, #0x78
A0012638  F600C801		addsc.a a15, a12, d8, #0
A001263C  0000F819		ld.w d8, [a15]
A0012640  F0418F4B		mul.f d15, d15, d8

#175				ST		$$TMP15	{L:42}
(*) REAL
A0012644  800540BB		mov.u d8, #0x54
A0012648  F600C801		addsc.a a15, a12, d8, #0
A001264C  0000FF59		st.w [a15], d15

#176				LD		B	{L:42}
(*) UNDEF
A0012650  800180BB		mov.u d8, #0x18
A0012654  F600C801		addsc.a a15, a12, d8, #0
A0012658  0000FF19		ld.w d15, [a15]

#177				MUL		Wc_pos	{L:42}
(*) REAL
A001265C  800780BB		mov.u d8, #0x78
A0012660  F600C801		addsc.a a15, a12, d8, #0
A0012664  0000F819		ld.w d8, [a15]
A0012668  F0418F4B		mul.f d15, d15, d8

#178				ST		$$TMP16	{L:42}
(*) REAL
A001266C  800580BB		mov.u d8, #0x58
A0012670  F600C801		addsc.a a15, a12, d8, #0
A0012674  0000FF59		st.w [a15], d15

#179				LD		$$TMP16	{L:42}
(*) UNDEF
A0012678  800580BB		mov.u d8, #0x58
A001267C  F600C801		addsc.a a15, a12, d8, #0
A0012680  0000FF19		ld.w d15, [a15]

#180				ATAN2		1.0	{L:42}
(*) REAL
A0012684  41F0F00B		mov d4, d15
A0012688  500000BB		mov.u d5, #0x0000 ; COSTREAL 1.000000
A001268C  53F8059B		addih d5, d5, #0x3F80
A0012690  F8009091		movh.a a15, #0x8009 ; _do_atan2 AT 0x800919E8
A0012694  71A8FFD9		lea a15,[a15]0x19E8
A0012698  0000000D		nop
A001269C  00000F2D		calli a15
A00126A0  F1F0200B		mov d15, d2

#181				ADD		phi_m_p	{L:42}
(*) REAL
A00126A4  800740BB		mov.u d8, #0x74
A00126A8  F600C801		addsc.a a15, a12, d8, #0
A00126AC  0000F819		ld.w d8, [a15]
A00126B0  FF21086B		add.f d15, d15, d8

#182				TAN	{L:42}
(*) REAL
A00126B4  41F0F00B		mov d4, d15
A00126B8  F8009091		movh.a a15, #0x8009 ; _do_tan AT 0x800918B8
A00126BC  21B8FFD9		lea a15,[a15]0x18B8
A00126C0  0000000D		nop
A00126C4  00000F2D		calli a15
A00126C8  F1F0200B		mov d15, d2

#183				ST		$$TMP17	{L:42}
(*) REAL
A00126CC  8005C0BB		mov.u d8, #0x5C
A00126D0  F600C801		addsc.a a15, a12, d8, #0
A00126D4  0000FF59		st.w [a15], d15

#184				LD		1.0	{L:42}
(*) UNDEF
A00126D8  F00000BB		mov.u d15, #0x0000 ; COSTREAL 1.000000
A00126DC  F3F80F9B		addih d15, d15, #0x3F80

#185				DIV		$$TMP17	{L:42}
(*) REAL
A00126E0  8005C0BB		mov.u d8, #0x5C
A00126E4  F600C801		addsc.a a15, a12, d8, #0
A00126E8  0000F819		ld.w d8, [a15]
A00126EC  F0518F4B		div.f d15, d15, d8

#186				ST		$$TMP18	{L:42}
(*) REAL
A00126F0  800600BB		mov.u d8, #0x60
A00126F4  F600C801		addsc.a a15, a12, d8, #0
A00126F8  0000FF59		st.w [a15], d15

#187				LD		$$TMP18	{L:42}
(*) UNDEF
A00126FC  800600BB		mov.u d8, #0x60
A0012700  F600C801		addsc.a a15, a12, d8, #0
A0012704  0000FF19		ld.w d15, [a15]

#188				POW		2.0	{L:42}
(*) REAL
A0012708  41F0F00B		mov d4, d15
A001270C  500000BB		mov.u d5, #0x0000 ; COSTREAL 2.000000
A0012710  5400059B		addih d5, d5, #0x4000
A0012714  F8009091		movh.a a15, #0x8009 ; _do_pow AT 0x80091C38
A0012718  01F8FFD9		lea a15,[a15]0x1C38
A001271C  0000000D		nop
A0012720  00000F2D		calli a15
A0012724  F1F0200B		mov d15, d2

#189				ADD		1.0	{L:42}
(*) REAL
A0012728  800000BB		mov.u d8, #0x0000 ; COSTREAL 1.000000
A001272C  83F8089B		addih d8, d8, #0x3F80
A0012730  FF21086B		add.f d15, d15, d8

#190				SQRT	{L:42}
(*) REAL
A0012734  41F0F00B		mov d4, d15
A0012738  F8009091		movh.a a15, #0x8009 ; _do_sqrt AT 0x80090598
A001273C  6058FFD9		lea a15,[a15]0x0598
A0012740  0000000D		nop
A0012744  00000F2D		calli a15
A0012748  F1F0200B		mov d15, d2

#191				MUL		A	{L:42}
(*) REAL
A001274C  800140BB		mov.u d8, #0x14
A0012750  F600C801		addsc.a a15, a12, d8, #0
A0012754  0000F819		ld.w d8, [a15]
A0012758  F0418F4B		mul.f d15, d15, d8

#192				ST		$$TMP19	{L:42}
(*) REAL
A001275C  800640BB		mov.u d8, #0x64
A0012760  F600C801		addsc.a a15, a12, d8, #0
A0012764  0000FF59		st.w [a15], d15

#193				LD		$$TMP15	{L:42}
(*) UNDEF
A0012768  800540BB		mov.u d8, #0x54
A001276C  F600C801		addsc.a a15, a12, d8, #0
A0012770  0000FF19		ld.w d15, [a15]

#194				DIV		$$TMP19	{L:42}
(*) REAL
A0012774  800640BB		mov.u d8, #0x64
A0012778  F600C801		addsc.a a15, a12, d8, #0
A001277C  0000F819		ld.w d8, [a15]
A0012780  F0518F4B		div.f d15, d15, d8

#195				ST		kp_p	{L:42}
(*) REAL
A0012784  800980BB		mov.u d8, #0x98
A0012788  F600C801		addsc.a a15, a12, d8, #0
A001278C  0000FF59		st.w [a15], d15

#196		
#197				(* td_p:= TAN(phi_m_p - ATAN2(1.0,(B*Wc_pos)))/Wc_pos; *)
#198				LD		B	{L:43}
(*) UNDEF
A0012790  800180BB		mov.u d8, #0x18
A0012794  F600C801		addsc.a a15, a12, d8, #0
A0012798  0000FF19		ld.w d15, [a15]

#199				MUL		Wc_pos	{L:43}
(*) REAL
A001279C  800780BB		mov.u d8, #0x78
A00127A0  F600C801		addsc.a a15, a12, d8, #0
A00127A4  0000F819		ld.w d8, [a15]
A00127A8  F0418F4B		mul.f d15, d15, d8

#200				ST		$$TMP20	{L:43}
(*) REAL
A00127AC  800680BB		mov.u d8, #0x68
A00127B0  F600C801		addsc.a a15, a12, d8, #0
A00127B4  0000FF59		st.w [a15], d15

#201				LD		1.0	{L:43}
(*) UNDEF
A00127B8  F00000BB		mov.u d15, #0x0000 ; COSTREAL 1.000000
A00127BC  F3F80F9B		addih d15, d15, #0x3F80

#202				ATAN2		$$TMP20	{L:43}
(*) REAL
A00127C0  41F0F00B		mov d4, d15
A00127C4  800680BB		mov.u d8, #0x68
A00127C8  F600C801		addsc.a a15, a12, d8, #0
A00127CC  0000F519		ld.w d5, [a15]
A00127D0  F8009091		movh.a a15, #0x8009 ; _do_atan2 AT 0x800919E8
A00127D4  71A8FFD9		lea a15,[a15]0x19E8
A00127D8  0000000D		nop
A00127DC  00000F2D		calli a15
A00127E0  F1F0200B		mov d15, d2

#203				ST		$$TMP21	{L:43}
(*) REAL
A00127E4  8006C0BB		mov.u d8, #0x6C
A00127E8  F600C801		addsc.a a15, a12, d8, #0
A00127EC  0000FF59		st.w [a15], d15

#204				LD		phi_m_p	{L:43}
(*) UNDEF
A00127F0  800740BB		mov.u d8, #0x74
A00127F4  F600C801		addsc.a a15, a12, d8, #0
A00127F8  0000FF19		ld.w d15, [a15]

#205				SUB		$$TMP21	{L:43}
(*) REAL
A00127FC  8006C0BB		mov.u d8, #0x6C
A0012800  F600C801		addsc.a a15, a12, d8, #0
A0012804  0000F819		ld.w d8, [a15]
A0012808  FF31086B		sub.f d15, d15, d8

#206				TAN	{L:43}
(*) REAL
A001280C  41F0F00B		mov d4, d15
A0012810  F8009091		movh.a a15, #0x8009 ; _do_tan AT 0x800918B8
A0012814  21B8FFD9		lea a15,[a15]0x18B8
A0012818  0000000D		nop
A001281C  00000F2D		calli a15
A0012820  F1F0200B		mov d15, d2

#207				DIV		Wc_pos	{L:43}
(*) REAL
A0012824  800780BB		mov.u d8, #0x78
A0012828  F600C801		addsc.a a15, a12, d8, #0
A001282C  0000F819		ld.w d8, [a15]
A0012830  F0518F4B		div.f d15, d15, d8

#208				ST		td_p	{L:43}
(*) REAL
A0012834  8009C0BB		mov.u d8, #0x9C
A0012838  F600C801		addsc.a a15, a12, d8, #0
A001283C  0000FF59		st.w [a15], d15

#209		
#210		
#211				(* IF td_p<=0.0 *)
#212				LD		td_p	{L:44}
(*) UNDEF
A0012840  8009C0BB		mov.u d8, #0x9C
A0012844  F600C801		addsc.a a15, a12, d8, #0
A0012848  0000FF19		ld.w d15, [a15]

#213				LE		0.0	{L:44}
(*) REAL
A001284C  500000BB		mov.u d5, #0x0000 ; COSTREAL 0.000000
A0012850  5000059B		addih d5, d5, #0x0000
A0012854  F0015F4B		cmp.f d15, d15, d5
A0012858  F2204F8B		ne d15, d15, #4

#214				JMPCN	$label6	{L:44}
(-) BOOL
A001285C  000C0FDF		jeq d15, #0, #0x000C ; JUMP 0xA0012874

#215		
#216				(* THEN *)
#217		
#218					(* td_p:=0.0; *)
#219					LD		0.0	{L:45}
(*) UNDEF
A0012860  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A0012864  F0000F9B		addih d15, d15, #0x0000

#220					ST		td_p	{L:45}
(*) REAL
A0012868  8009C0BB		mov.u d8, #0x9C
A001286C  F600C801		addsc.a a15, a12, d8, #0
A0012870  0000FF59		st.w [a15], d15

A0012874  0180000D		ret


Frame allocation:

	0070       : VAR phi_m_v
	0074       : VAR phi_m_p
	0078       : VAR Wc_pos
	007C       : VAR Wc_vel
	0080       : VAR Jm
	0084       : VAR Bm
	0088       : VAR TUNE
	008C       : VAR ti_v
	0090       : VAR kp_v
	0094       : VAR ti_p
	0098       : VAR kp_p
	009C       : VAR td_p
	00A0       : VAR td_v
	0000       : VAR ssMethodType
	0004       : VAR kk
	0008       : VAR beta
	000C       : VAR K
	0010       : VAR P
	0014       : VAR A
	0018       : VAR B
	001C bit  0: VAR ONLY_kpv
	0020       : VAR $$TMP0
	0024       : VAR $$TMP1
	0028       : VAR $$TMP2
	002C       : VAR $$TMP3
	0030       : VAR $$TMP4
	0034       : VAR $$TMP5
	0038       : VAR $$TMP6
	003C       : VAR $$TMP7
	0040       : VAR $$TMP8
	0044       : VAR $$TMP9
	0048       : VAR $$TMP10
	004C       : VAR $$TMP11
	0050       : VAR $$TMP14
	0054       : VAR $$TMP15
	0058       : VAR $$TMP16
	005C       : VAR $$TMP17
	0060       : VAR $$TMP18
	0064       : VAR $$TMP19
	0068       : VAR $$TMP20
	006C       : VAR $$TMP21

END_FUNCTION_BLOCK
**************************************************
	List function block: VARIANCE
**************************************************

FUNCTION_BLOCK VARIANCE

	VAR_INPUT
	INPUT : REAL; 
	ssMethodType : SINT; 
	END_VAR

	VAR_OUTPUT
	SIGMA : REAL; 
	END_VAR

	VAR
	SUM_X : REAL; 
	SUM_X_sqr : REAL; 
	N : REAL; 
	SIGMA_SQRD : REAL; 
	END_VAR

A0012878  C0004001		mov.aa a12, a4

#0		{SRC:VARIANCE}
#1		
#2		
#3			(* CASE ssMethodType OF *)
#4		
#5			(* 0: *)
#6			LD		ssMethodType	{L:2}
(*) UNDEF
A001287C  800200BB		mov.u d8, #0x20
A0012880  F600C801		addsc.a a15, a12, d8, #0
A0012884  0800FF09		ld.b d15, [a15]

#7			EQ		0	{L:2}
(*) SINT
A0012888  8000003B		mov d8, #0
A001288C  F1008F0B		eq d15, d15, d8

#8			JMPC	$label1
(-) BOOL
A0012890  80100FDF		jne d15, #0, #0x0010 ; JUMP 0xA00128B0

#9		
#10			(* 1: *)
#11			LD		ssMethodType	{L:9}
(*) UNDEF
A0012894  800200BB		mov.u d8, #0x20
A0012898  F600C801		addsc.a a15, a12, d8, #0
A001289C  0800FF09		ld.b d15, [a15]

#12			EQ		1	{L:9}
(*) SINT
A00128A0  8000103B		mov d8, #1
A00128A4  F1008F0B		eq d15, d15, d8

#13			JMPC	$label2
(-) BOOL
A00128A8  802C0FDF		jne d15, #0, #0x002C ; JUMP 0xA0012900

#14			JMP		$label0
(-) BOOL
A00128AC  00F4001D		j #0x0000F4 ; JUMP 0xA0012A94

#15		
#16			(* Istruzioni di ciascun CASE: *)
#17		
#18		$label1:
#19				(* N			:=0.0; *)
#20				LD		0.0	{L:3}
(*) UNDEF
A00128B0  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A00128B4  F0000F9B		addih d15, d15, #0x0000

#21				ST		N	{L:3}
(*) REAL
A00128B8  800080BB		mov.u d8, #0x8
A00128BC  F600C801		addsc.a a15, a12, d8, #0
A00128C0  0000FF59		st.w [a15], d15

#22		
#23				(* SUM_X		:=0.0; *)
#24				LD		0.0	{L:4}
(*) UNDEF
A00128C4  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A00128C8  F0000F9B		addih d15, d15, #0x0000

#25				ST		SUM_X	{L:4}
(*) REAL
A00128CC  F000C001		mov.aa a15, a12
A00128D0  0000FF59		st.w [a15], d15

#26		
#27				(* SUM_X_sqr	:=0.0; *)
#28				LD		0.0	{L:5}
(*) UNDEF
A00128D4  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A00128D8  F0000F9B		addih d15, d15, #0x0000

#29				ST		SUM_X_sqr	{L:5}
(*) REAL
A00128DC  800040BB		mov.u d8, #0x4
A00128E0  F600C801		addsc.a a15, a12, d8, #0
A00128E4  0000FF59		st.w [a15], d15

#30		
#31				(* SIGMA_SQRD	:=0.0; *)
#32				LD		0.0	{L:6}
(*) UNDEF
A00128E8  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A00128EC  F0000F9B		addih d15, d15, #0x0000

#33				ST		SIGMA_SQRD	{L:6}
(*) REAL
A00128F0  8000C0BB		mov.u d8, #0xC
A00128F4  F600C801		addsc.a a15, a12, d8, #0
A00128F8  0000FF59		st.w [a15], d15

#34				JMP		$label0
(-) REAL
A00128FC  00CC001D		j #0x0000CC ; JUMP 0xA0012A94

#35		
#36		$label2:
#37				(* N:=N+1.0; *)
#38				LD		N	{L:10}
(*) UNDEF
A0012900  800080BB		mov.u d8, #0x8
A0012904  F600C801		addsc.a a15, a12, d8, #0
A0012908  0000FF19		ld.w d15, [a15]

#39				ADD		1.0	{L:10}
(*) REAL
A001290C  800000BB		mov.u d8, #0x0000 ; COSTREAL 1.000000
A0012910  83F8089B		addih d8, d8, #0x3F80
A0012914  FF21086B		add.f d15, d15, d8

#40				ST		N	{L:10}
(*) REAL
A0012918  800080BB		mov.u d8, #0x8
A001291C  F600C801		addsc.a a15, a12, d8, #0
A0012920  0000FF59		st.w [a15], d15

#41		
#42				(* SUM_X  		:= SUM_X+INPUT; *)
#43				LD		SUM_X	{L:12}
(*) UNDEF
A0012924  F000C001		mov.aa a15, a12
A0012928  0000FF19		ld.w d15, [a15]

#44				ADD		INPUT	{L:12}
(*) REAL
A001292C  8001C0BB		mov.u d8, #0x1C
A0012930  F600C801		addsc.a a15, a12, d8, #0
A0012934  0000F819		ld.w d8, [a15]
A0012938  FF21086B		add.f d15, d15, d8

#45				ST		SUM_X	{L:12}
(*) REAL
A001293C  F000C001		mov.aa a15, a12
A0012940  0000FF59		st.w [a15], d15

#46		
#47				(* SUM_X_sqr 	:= SUM_X_sqr+ POW(INPUT,2.0); *)
#48				LD		INPUT	{L:13}
(*) UNDEF
A0012944  8001C0BB		mov.u d8, #0x1C
A0012948  F600C801		addsc.a a15, a12, d8, #0
A001294C  0000FF19		ld.w d15, [a15]

#49				POW		2.0	{L:13}
(*) REAL
A0012950  41F0F00B		mov d4, d15
A0012954  500000BB		mov.u d5, #0x0000 ; COSTREAL 2.000000
A0012958  5400059B		addih d5, d5, #0x4000
A001295C  F8009091		movh.a a15, #0x8009 ; _do_pow AT 0x80091C38
A0012960  01F8FFD9		lea a15,[a15]0x1C38
A0012964  0000000D		nop
A0012968  00000F2D		calli a15
A001296C  F1F0200B		mov d15, d2

#50				ADD		SUM_X_sqr	{L:13}
(*) REAL
A0012970  800040BB		mov.u d8, #0x4
A0012974  F600C801		addsc.a a15, a12, d8, #0
A0012978  0000F819		ld.w d8, [a15]
A001297C  FF21086B		add.f d15, d15, d8

#51				ST		SUM_X_sqr	{L:13}
(*) REAL
A0012980  800040BB		mov.u d8, #0x4
A0012984  F600C801		addsc.a a15, a12, d8, #0
A0012988  0000FF59		st.w [a15], d15

#52		
#53		
#54				(* IF N>200.0 *)
#55				LD		N	{L:15}
(*) UNDEF
A001298C  800080BB		mov.u d8, #0x8
A0012990  F600C801		addsc.a a15, a12, d8, #0
A0012994  0000FF19		ld.w d15, [a15]

#56				GT		200.0	{L:15}
(*) REAL
A0012998  500000BB		mov.u d5, #0x0000 ; COSTREAL 200.000000
A001299C  5434859B		addih d5, d5, #0x4348
A00129A0  F0015F4B		cmp.f d15, d15, d5
A00129A4  F2004F8B		eq d15, d15, #4

#57				JMPCN	$label3	{L:15}
(-) BOOL
A00129A8  005E0FDF		jeq d15, #0, #0x005E ; JUMP 0xA0012A64

#58		
#59				(* THEN *)
#60		
#61					(* SIGMA_SQRD	:= (SUM_X_sqr-POW(SUM_X,2.0)/N)/(N-1.0); *)
#62					LD		SUM_X	{L:16}
(*) UNDEF
A00129AC  F000C001		mov.aa a15, a12
A00129B0  0000FF19		ld.w d15, [a15]

#63					POW		2.0	{L:16}
(*) REAL
A00129B4  41F0F00B		mov d4, d15
A00129B8  500000BB		mov.u d5, #0x0000 ; COSTREAL 2.000000
A00129BC  5400059B		addih d5, d5, #0x4000
A00129C0  F8009091		movh.a a15, #0x8009 ; _do_pow AT 0x80091C38
A00129C4  01F8FFD9		lea a15,[a15]0x1C38
A00129C8  0000000D		nop
A00129CC  00000F2D		calli a15
A00129D0  F1F0200B		mov d15, d2

#64					DIV		N	{L:16}
(*) REAL
A00129D4  800080BB		mov.u d8, #0x8
A00129D8  F600C801		addsc.a a15, a12, d8, #0
A00129DC  0000F819		ld.w d8, [a15]
A00129E0  F0518F4B		div.f d15, d15, d8

#65					ST		$$TMP0	{L:16}
(*) REAL
A00129E4  800100BB		mov.u d8, #0x10
A00129E8  F600C801		addsc.a a15, a12, d8, #0
A00129EC  0000FF59		st.w [a15], d15

#66					LD		SUM_X_sqr	{L:16}
(*) UNDEF
A00129F0  800040BB		mov.u d8, #0x4
A00129F4  F600C801		addsc.a a15, a12, d8, #0
A00129F8  0000FF19		ld.w d15, [a15]

#67					SUB		$$TMP0	{L:16}
(*) REAL
A00129FC  800100BB		mov.u d8, #0x10
A0012A00  F600C801		addsc.a a15, a12, d8, #0
A0012A04  0000F819		ld.w d8, [a15]
A0012A08  FF31086B		sub.f d15, d15, d8

#68					ST		$$TMP1	{L:16}
(*) REAL
A0012A0C  800140BB		mov.u d8, #0x14
A0012A10  F600C801		addsc.a a15, a12, d8, #0
A0012A14  0000FF59		st.w [a15], d15

#69					LD		N	{L:16}
(*) UNDEF
A0012A18  800080BB		mov.u d8, #0x8
A0012A1C  F600C801		addsc.a a15, a12, d8, #0
A0012A20  0000FF19		ld.w d15, [a15]

#70					SUB		1.0	{L:16}
(*) REAL
A0012A24  800000BB		mov.u d8, #0x0000 ; COSTREAL 1.000000
A0012A28  83F8089B		addih d8, d8, #0x3F80
A0012A2C  FF31086B		sub.f d15, d15, d8

#71					ST		$$TMP2	{L:16}
(*) REAL
A0012A30  800180BB		mov.u d8, #0x18
A0012A34  F600C801		addsc.a a15, a12, d8, #0
A0012A38  0000FF59		st.w [a15], d15

#72					LD		$$TMP1	{L:16}
(*) UNDEF
A0012A3C  800140BB		mov.u d8, #0x14
A0012A40  F600C801		addsc.a a15, a12, d8, #0
A0012A44  0000FF19		ld.w d15, [a15]

#73					DIV		$$TMP2	{L:16}
(*) REAL
A0012A48  800180BB		mov.u d8, #0x18
A0012A4C  F600C801		addsc.a a15, a12, d8, #0
A0012A50  0000F819		ld.w d8, [a15]
A0012A54  F0518F4B		div.f d15, d15, d8

#74					ST		SIGMA_SQRD	{L:16}
(*) REAL
A0012A58  8000C0BB		mov.u d8, #0xC
A0012A5C  F600C801		addsc.a a15, a12, d8, #0
A0012A60  0000FF59		st.w [a15], d15

#75		
#76		$label3:
#77				(* END_IF *)
#78		
#79				(* SIGMA:=SQRT(SIGMA_SQRD); *)
#80				LD		SIGMA_SQRD	{L:19}
(*) UNDEF
A0012A64  8000C0BB		mov.u d8, #0xC
A0012A68  F600C801		addsc.a a15, a12, d8, #0
A0012A6C  0000FF19		ld.w d15, [a15]

#81				SQRT	{L:19}
(*) REAL
A0012A70  41F0F00B		mov d4, d15
A0012A74  F8009091		movh.a a15, #0x8009 ; _do_sqrt AT 0x80090598
A0012A78  6058FFD9		lea a15,[a15]0x0598
A0012A7C  0000000D		nop
A0012A80  00000F2D		calli a15
A0012A84  F1F0200B		mov d15, d2

#82				ST		SIGMA	{L:19}
(*) REAL
A0012A88  800240BB		mov.u d8, #0x24
A0012A8C  F600C801		addsc.a a15, a12, d8, #0
A0012A90  0000FF59		st.w [a15], d15

A0012A94  0180000D		ret


Frame allocation:

	001C       : VAR INPUT
	0020       : VAR ssMethodType
	0024       : VAR SIGMA
	0000       : VAR SUM_X
	0004       : VAR SUM_X_sqr
	0008       : VAR N
	000C       : VAR SIGMA_SQRD
	0010       : VAR $$TMP0
	0014       : VAR $$TMP1
	0018       : VAR $$TMP2

END_FUNCTION_BLOCK
**************************************************
	List function block: OL_trj_Marco
**************************************************

FUNCTION_BLOCK OL_trj_Marco

	VAR_INPUT
	vel : REAL; 
	pos : REAL; 
	fbInit : BOOL; 
	maxTRQ : REAL; 
	maxVEL : REAL; 
	maxPOS : REAL; 
	minPOS : REAL; 
	minVEL : REAL; 
	minTRQ : REAL; 
	STOP : BOOL; 
	staticFriction : REAL; 
	END_VAR

	VAR_OUTPUT
	u : REAL; 
	STOPPED : BOOL; 
	END_VAR

	VAR
	u_old : REAL; 
	state_prec : SINT; 
	state : SINT; 
	rand : fb_Random; 
	STOPPING : BOOL; 
	END_VAR

A0012A98  C0004001		mov.aa a12, a4

#0		{SRC:OL_trj_Marco}
#1		
#2		
#3			(* IF fbInit *)
#4			LD		fbInit	{L:1}
(*) UNDEF
A0012A9C  8002C0BB		mov.u d8, #0x2C
A0012AA0  F600C801		addsc.a a15, a12, d8, #0
A0012AA4  0000FF19		ld.w d15, [a15]

#5			JMPCN	$label0	{L:1}
(-) BOOL
A0012AA8  005A0FDF		jeq d15, #0, #0x005A ; JUMP 0xA0012B5C

#6		
#7			(* THEN *)
#8		
#9				(* state:=1; *)
#10				LD		1	{L:2}
(*) UNDEF
A0012AAC  F000103B		mov d15, #1

#11				ST		state	{L:2}
(*) USINT
A0012AB0  800050BB		mov.u d8, #0x5
A0012AB4  F600C801		addsc.a a15, a12, d8, #0
A0012AB8  0800FF89		st.b [a15], d15

#12		
#13				(* state_prec:=0; *)
#14				LD		0	{L:3}
(*) UNDEF
A0012ABC  F000003B		mov d15, #0

#15				ST		state_prec	{L:3}
(*) USINT
A0012AC0  800040BB		mov.u d8, #0x4
A0012AC4  F600C801		addsc.a a15, a12, d8, #0
A0012AC8  0800FF89		st.b [a15], d15

#16		
#17				(* u:=1.0; *)
#18				LD		1.0	{L:4}
(*) UNDEF
A0012ACC  F00000BB		mov.u d15, #0x0000 ; COSTREAL 1.000000
A0012AD0  F3F80F9B		addih d15, d15, #0x3F80

#19				ST		u	{L:4}
(*) REAL
A0012AD4  800500BB		mov.u d8, #0x50
A0012AD8  F600C801		addsc.a a15, a12, d8, #0
A0012ADC  0000FF59		st.w [a15], d15

#20		
#21				(* rand.fb_Init:=TRUE; *)
#22				LD		TRUE	{L:6}
(*) UNDEF
A0012AE0  F000103B		mov d15, #1

#23				ST		rand.fb_Init	{L:6}
(*) BOOL
A0012AE4  800180BB		mov.u d8, #0x18
A0012AE8  F600C801		addsc.a a15, a12, d8, #0
A0012AEC  0000FF59		st.w [a15], d15

#24		
#25				(* rand() *)
#26				CAL		rand	{L:7}
(*) BOOL
A0012AF0  F53CAF89		st.w [-sp]4, d15 
A0012AF4  4000C001		mov.aa a4, a12
A0012AF8  800080BB		mov.u d8, #0x8 ; FB FRAME BASE 0x8
A0012AFC  8000089B		addih d8, d8, #0x0
A0012B00  46004801		addsc.a a4, a4, d8, #0
A0012B04  FA001091		movh.a a15, #0xA001 ; CALL TO FB AT 0xA00111A8
A0012B08  6128FFD9		lea a15,[a15]0x11A8
A0012B0C  0000000D		nop
A0012B10  00000F2D		calli a15
A0012B14  0104AF09		ld.w d15, [sp+]4

#27		
#28				(* rand.fb_Init:=FALSE; *)
#29				LD		FALSE	{L:8}
(*) UNDEF
A0012B18  F000003B		mov d15, #0

#30				ST		rand.fb_Init	{L:8}
(*) BOOL
A0012B1C  800180BB		mov.u d8, #0x18
A0012B20  F600C801		addsc.a a15, a12, d8, #0
A0012B24  0000FF59		st.w [a15], d15

#31		
#32				(* STOP:=FALSE; *)
#33				LD		FALSE	{L:9}
(*) UNDEF
A0012B28  F000003B		mov d15, #0

#34				ST		STOP	{L:9}
(*) BOOL
A0012B2C  800480BB		mov.u d8, #0x48
A0012B30  F600C801		addsc.a a15, a12, d8, #0
A0012B34  0000FF59		st.w [a15], d15

#35		
#36				(* STOPPED:=FALSE; *)
#37				LD		FALSE	{L:10}
(*) UNDEF
A0012B38  F000003B		mov d15, #0

#38				ST		STOPPED	{L:10}
(*) BOOL
A0012B3C  800540BB		mov.u d8, #0x54
A0012B40  F600C801		addsc.a a15, a12, d8, #0
A0012B44  0000FF59		st.w [a15], d15

#39		
#40				(* STOPPING:=FALSE; *)
#41				LD		FALSE	{L:11}
(*) UNDEF
A0012B48  F000003B		mov d15, #0

#42				ST		STOPPING	{L:11}
(*) BOOL
A0012B4C  800200BB		mov.u d8, #0x20
A0012B50  F600C801		addsc.a a15, a12, d8, #0
A0012B54  0000FF59		st.w [a15], d15

#43				JMP		$label1
(-) BOOL
A0012B58  0208001D		j #0x000208 ; JUMP 0xA0012F68

#44		$label0:
#45		
#46			(* ELSE *)
#47		
#48				(* rand() *)
#49				CAL		rand	{L:15}
(*) BOOL
A0012B5C  F53CAF89		st.w [-sp]4, d15 
A0012B60  4000C001		mov.aa a4, a12
A0012B64  800080BB		mov.u d8, #0x8 ; FB FRAME BASE 0x8
A0012B68  8000089B		addih d8, d8, #0x0
A0012B6C  46004801		addsc.a a4, a4, d8, #0
A0012B70  FA001091		movh.a a15, #0xA001 ; CALL TO FB AT 0xA00111A8
A0012B74  6128FFD9		lea a15,[a15]0x11A8
A0012B78  0000000D		nop
A0012B7C  00000F2D		calli a15
A0012B80  0104AF09		ld.w d15, [sp+]4

#50		
#51		
#52				(* IF STOP AND NOT(STOPPING) *)
#53				LD		STOPPING	{L:17}
(*) UNDEF
A0012B84  800200BB		mov.u d8, #0x20
A0012B88  F600C801		addsc.a a15, a12, d8, #0
A0012B8C  0000FF19		ld.w d15, [a15]

#54				NOT	{L:17}
(*) BOOL
A0012B90  8000103B		mov d8, #1
A0012B94  9000003B		mov d9, #0
A0012B98  FF40892B		sel d15, d15, d9, d8

#55				AND		STOP	{L:17}
(*) BOOL
A0012B9C  800480BB		mov.u d8, #0x48
A0012BA0  F600C801		addsc.a a15, a12, d8, #0
A0012BA4  0000F819		ld.w d8, [a15]
A0012BA8  F0808F0F		and d15, d15, d8

#56				JMPCN	$label2	{L:17}
(-) BOOL
A0012BAC  000A0FDF		jeq d15, #0, #0x000A ; JUMP 0xA0012BC0

#57		
#58				(* THEN *)
#59		
#60					(* state:=99; *)
#61					LD		99	{L:18}
(*) UNDEF
A0012BB0  F006303B		mov d15, #99

#62					ST		state	{L:18}
(*) USINT
A0012BB4  800050BB		mov.u d8, #0x5
A0012BB8  F600C801		addsc.a a15, a12, d8, #0
A0012BBC  0800FF89		st.b [a15], d15

#63		
#64		$label2:
#65				(* END_IF *)
#66		
#67		
#68				(* CASE state OF *)
#69		
#70				(* 0: *)
#71				LD		state	{L:22}
(*) UNDEF
A0012BC0  800050BB		mov.u d8, #0x5
A0012BC4  F600C801		addsc.a a15, a12, d8, #0
A0012BC8  0800FF09		ld.b d15, [a15]

#72				EQ		0	{L:22}
(*) SINT
A0012BCC  8000003B		mov d8, #0
A0012BD0  F1008F0B		eq d15, d15, d8

#73				JMPC	$label4
(-) BOOL
A0012BD4  80280FDF		jne d15, #0, #0x0028 ; JUMP 0xA0012C24

#74		
#75				(* 1: *)
#76				LD		state	{L:29}
(*) UNDEF
A0012BD8  800050BB		mov.u d8, #0x5
A0012BDC  F600C801		addsc.a a15, a12, d8, #0
A0012BE0  0800FF09		ld.b d15, [a15]

#77				EQ		1	{L:29}
(*) SINT
A0012BE4  8000103B		mov d8, #1
A0012BE8  F1008F0B		eq d15, d15, d8

#78				JMPC	$label5
(-) BOOL
A0012BEC  80B00FDF		jne d15, #0, #0x00B0 ; JUMP 0xA0012D4C

#79		
#80				(* 99: *)
#81				LD		state	{L:35}
(*) UNDEF
A0012BF0  800050BB		mov.u d8, #0x5
A0012BF4  F600C801		addsc.a a15, a12, d8, #0
A0012BF8  0800FF09		ld.b d15, [a15]

#82				EQ		99	{L:35}
(*) SINT
A0012BFC  8006303B		mov d8, #99
A0012C00  F1008F0B		eq d15, d15, d8

#83				JMPC	$label6
(-) BOOL
A0012C04  813E0FDF		jne d15, #0, #0x013E ; JUMP 0xA0012E80

#84		
#85				(* 100: *)
#86				LD		state	{L:43}
(*) UNDEF
A0012C08  800050BB		mov.u d8, #0x5
A0012C0C  F600C801		addsc.a a15, a12, d8, #0
A0012C10  0800FF09		ld.b d15, [a15]

#87				EQ		100	{L:43}
(*) SINT
A0012C14  8006403B		mov d8, #100
A0012C18  F1008F0B		eq d15, d15, d8

#88				JMPC	$label7
(-) BOOL
A0012C1C  81740FDF		jne d15, #0, #0x0174 ; JUMP 0xA0012F04

#89				JMP		$label3
(-) BOOL
A0012C20  01A4001D		j #0x0001A4 ; JUMP 0xA0012F68

#90		
#91				(* Istruzioni di ciascun CASE: *)
#92		
#93		$label4:
#94		
#95					(* IF vel<minVEL*0.8 OR pos<(maxPOS-minPOS)/5.0*2.0 *)
#96					LD		pos	{L:24}
(*) UNDEF
A0012C24  800280BB		mov.u d8, #0x28
A0012C28  F600C801		addsc.a a15, a12, d8, #0
A0012C2C  0000FF19		ld.w d15, [a15]

#97					LT(		maxPOS	{L:24}
(*) REAL
A0012C30  F53CAF89		st.w [-sp]4, d15 
A0012C34  800380BB		mov.u d8, #0x38
A0012C38  F600C801		addsc.a a15, a12, d8, #0
A0012C3C  0000FF19		ld.w d15, [a15]

#98					SUB		minPOS	{L:24}
(*) REAL
A0012C40  8003C0BB		mov.u d8, #0x3C
A0012C44  F600C801		addsc.a a15, a12, d8, #0
A0012C48  0000F819		ld.w d8, [a15]
A0012C4C  FF31086B		sub.f d15, d15, d8

#99					DIV		5.0	{L:24}
(*) REAL
A0012C50  800000BB		mov.u d8, #0x0000 ; COSTREAL 5.000000
A0012C54  840A089B		addih d8, d8, #0x40A0
A0012C58  F0518F4B		div.f d15, d15, d8

#100					MUL		2.0	{L:24}
(*) REAL
A0012C5C  800000BB		mov.u d8, #0x0000 ; COSTREAL 2.000000
A0012C60  8400089B		addih d8, d8, #0x4000
A0012C64  F0418F4B		mul.f d15, d15, d8

#101					)	{L:24}
(*) REAL
A0012C68  01F0F00B		mov d0, d15
A0012C6C  0104AF09		ld.w d15, [sp+]4
A0012C70  51F0000B		mov d5, d0
A0012C74  F0015F4B		cmp.f d15, d15, d5
A0012C78  F2001F8B		eq d15, d15, #1

#102					OR(		vel	{L:24}
(*) BOOL
A0012C7C  F53CAF89		st.w [-sp]4, d15 
A0012C80  800240BB		mov.u d8, #0x24
A0012C84  F600C801		addsc.a a15, a12, d8, #0
A0012C88  0000FF19		ld.w d15, [a15]

#103					LT(		minVEL	{L:24}
(*) REAL
A0012C8C  F53CAF89		st.w [-sp]4, d15 
A0012C90  800400BB		mov.u d8, #0x40
A0012C94  F600C801		addsc.a a15, a12, d8, #0
A0012C98  0000FF19		ld.w d15, [a15]

#104					MUL		0.8	{L:24}
(*) REAL
A0012C9C  8CCCD0BB		mov.u d8, #0xCCCD ; COSTREAL 0.800000
A0012CA0  83F4C89B		addih d8, d8, #0x3F4C
A0012CA4  F0418F4B		mul.f d15, d15, d8

#105					)	{L:24}
(*) REAL
A0012CA8  01F0F00B		mov d0, d15
A0012CAC  0104AF09		ld.w d15, [sp+]4
A0012CB0  51F0000B		mov d5, d0
A0012CB4  F0015F4B		cmp.f d15, d15, d5
A0012CB8  F2001F8B		eq d15, d15, #1

#106					)	{L:24}
(*) BOOL
A0012CBC  01F0F00B		mov d0, d15
A0012CC0  0104AF09		ld.w d15, [sp+]4
A0012CC4  F0A00F0F		or d15, d15, d0

#107					JMPCN	$label8	{L:24}
(-) BOOL
A0012CC8  00400FDF		jeq d15, #0, #0x0040 ; JUMP 0xA0012D48

#108		
#109					(* THEN *)
#110		
#111						(* state:=1; *)
#112						LD		1	{L:25}
(*) UNDEF
A0012CCC  F000103B		mov d15, #1

#113						ST		state	{L:25}
(*) USINT
A0012CD0  800050BB		mov.u d8, #0x5
A0012CD4  F600C801		addsc.a a15, a12, d8, #0
A0012CD8  0800FF89		st.b [a15], d15

#114		
#115						(* u:=staticFriction+(maxTRQ-staticFriction)*(0.2+0.1*rand.rnd); *)
#116						LD		0.1	{L:26}
(*) UNDEF
A0012CDC  FCCCD0BB		mov.u d15, #0xCCCD ; COSTREAL 0.100000
A0012CE0  F3DCCF9B		addih d15, d15, #0x3DCC

#117						MUL		rand.rnd	{L:26}
(*) REAL
A0012CE4  8001C0BB		mov.u d8, #0x1C
A0012CE8  F600C801		addsc.a a15, a12, d8, #0
A0012CEC  0000F819		ld.w d8, [a15]
A0012CF0  F0418F4B		mul.f d15, d15, d8

#118						ADD		0.2	{L:26}
(*) REAL
A0012CF4  8CCCD0BB		mov.u d8, #0xCCCD ; COSTREAL 0.200000
A0012CF8  83E4C89B		addih d8, d8, #0x3E4C
A0012CFC  FF21086B		add.f d15, d15, d8

#119						MUL(		maxTRQ	{L:26}
(*) REAL
A0012D00  F53CAF89		st.w [-sp]4, d15 
A0012D04  800300BB		mov.u d8, #0x30
A0012D08  F600C801		addsc.a a15, a12, d8, #0
A0012D0C  0000FF19		ld.w d15, [a15]

#120						SUB		staticFriction	{L:26}
(*) REAL
A0012D10  8004C0BB		mov.u d8, #0x4C
A0012D14  F600C801		addsc.a a15, a12, d8, #0
A0012D18  0000F819		ld.w d8, [a15]
A0012D1C  FF31086B		sub.f d15, d15, d8

#121						)	{L:26}
(*) REAL
A0012D20  01F0F00B		mov d0, d15
A0012D24  0104AF09		ld.w d15, [sp+]4
A0012D28  F0410F4B		mul.f d15, d15, d0

#122						ADD		staticFriction	{L:26}
(*) REAL
A0012D2C  8004C0BB		mov.u d8, #0x4C
A0012D30  F600C801		addsc.a a15, a12, d8, #0
A0012D34  0000F819		ld.w d8, [a15]
A0012D38  FF21086B		add.f d15, d15, d8

#123						ST		u	{L:26}
(*) REAL
A0012D3C  800500BB		mov.u d8, #0x50
A0012D40  F600C801		addsc.a a15, a12, d8, #0
A0012D44  0000FF59		st.w [a15], d15

#124		
#125		$label8:
#126					(* END_IF *)
#127					JMP		$label3
(-) REAL
A0012D48  0110001D		j #0x000110 ; JUMP 0xA0012F68

#128		
#129		$label5:
#130		
#131					(* IF vel>maxVEL*0.8 OR pos>(maxPOS-minPOS)/5.0*3.0 *)
#132					LD		pos	{L:31}
(*) UNDEF
A0012D4C  800280BB		mov.u d8, #0x28
A0012D50  F600C801		addsc.a a15, a12, d8, #0
A0012D54  0000FF19		ld.w d15, [a15]

#133					GT(		maxPOS	{L:31}
(*) REAL
A0012D58  F53CAF89		st.w [-sp]4, d15 
A0012D5C  800380BB		mov.u d8, #0x38
A0012D60  F600C801		addsc.a a15, a12, d8, #0
A0012D64  0000FF19		ld.w d15, [a15]

#134					SUB		minPOS	{L:31}
(*) REAL
A0012D68  8003C0BB		mov.u d8, #0x3C
A0012D6C  F600C801		addsc.a a15, a12, d8, #0
A0012D70  0000F819		ld.w d8, [a15]
A0012D74  FF31086B		sub.f d15, d15, d8

#135					DIV		5.0	{L:31}
(*) REAL
A0012D78  800000BB		mov.u d8, #0x0000 ; COSTREAL 5.000000
A0012D7C  840A089B		addih d8, d8, #0x40A0
A0012D80  F0518F4B		div.f d15, d15, d8

#136					MUL		3.0	{L:31}
(*) REAL
A0012D84  800000BB		mov.u d8, #0x0000 ; COSTREAL 3.000000
A0012D88  8404089B		addih d8, d8, #0x4040
A0012D8C  F0418F4B		mul.f d15, d15, d8

#137					)	{L:31}
(*) REAL
A0012D90  01F0F00B		mov d0, d15
A0012D94  0104AF09		ld.w d15, [sp+]4
A0012D98  51F0000B		mov d5, d0
A0012D9C  F0015F4B		cmp.f d15, d15, d5
A0012DA0  F2004F8B		eq d15, d15, #4

#138					OR(		vel	{L:31}
(*) BOOL
A0012DA4  F53CAF89		st.w [-sp]4, d15 
A0012DA8  800240BB		mov.u d8, #0x24
A0012DAC  F600C801		addsc.a a15, a12, d8, #0
A0012DB0  0000FF19		ld.w d15, [a15]

#139					GT(		maxVEL	{L:31}
(*) REAL
A0012DB4  F53CAF89		st.w [-sp]4, d15 
A0012DB8  800340BB		mov.u d8, #0x34
A0012DBC  F600C801		addsc.a a15, a12, d8, #0
A0012DC0  0000FF19		ld.w d15, [a15]

#140					MUL		0.8	{L:31}
(*) REAL
A0012DC4  8CCCD0BB		mov.u d8, #0xCCCD ; COSTREAL 0.800000
A0012DC8  83F4C89B		addih d8, d8, #0x3F4C
A0012DCC  F0418F4B		mul.f d15, d15, d8

#141					)	{L:31}
(*) REAL
A0012DD0  01F0F00B		mov d0, d15
A0012DD4  0104AF09		ld.w d15, [sp+]4
A0012DD8  51F0000B		mov d5, d0
A0012DDC  F0015F4B		cmp.f d15, d15, d5
A0012DE0  F2004F8B		eq d15, d15, #4

#142					)	{L:31}
(*) BOOL
A0012DE4  01F0F00B		mov d0, d15
A0012DE8  0104AF09		ld.w d15, [sp+]4
A0012DEC  F0A00F0F		or d15, d15, d0

#143					JMPCN	$label9	{L:31}
(-) BOOL
A0012DF0  00460FDF		jeq d15, #0, #0x0046 ; JUMP 0xA0012E7C

#144		
#145					(* THEN *)
#146		
#147						(* state:=0; *)
#148						LD		0	{L:32}
(*) UNDEF
A0012DF4  F000003B		mov d15, #0

#149						ST		state	{L:32}
(*) USINT
A0012DF8  800050BB		mov.u d8, #0x5
A0012DFC  F600C801		addsc.a a15, a12, d8, #0
A0012E00  0800FF89		st.b [a15], d15

#150		
#151						(* u:=-(staticFriction+(maxTRQ-staticFriction)*(0.2+0.1*rand.rnd)); *)
#152						LD		0.1	{L:33}
(*) UNDEF
A0012E04  FCCCD0BB		mov.u d15, #0xCCCD ; COSTREAL 0.100000
A0012E08  F3DCCF9B		addih d15, d15, #0x3DCC

#153						MUL		rand.rnd	{L:33}
(*) REAL
A0012E0C  8001C0BB		mov.u d8, #0x1C
A0012E10  F600C801		addsc.a a15, a12, d8, #0
A0012E14  0000F819		ld.w d8, [a15]
A0012E18  F0418F4B		mul.f d15, d15, d8

#154						ADD		0.2	{L:33}
(*) REAL
A0012E1C  8CCCD0BB		mov.u d8, #0xCCCD ; COSTREAL 0.200000
A0012E20  83E4C89B		addih d8, d8, #0x3E4C
A0012E24  FF21086B		add.f d15, d15, d8

#155						MUL(		maxTRQ	{L:33}
(*) REAL
A0012E28  F53CAF89		st.w [-sp]4, d15 
A0012E2C  800300BB		mov.u d8, #0x30
A0012E30  F600C801		addsc.a a15, a12, d8, #0
A0012E34  0000FF19		ld.w d15, [a15]

#156						SUB		staticFriction	{L:33}
(*) REAL
A0012E38  8004C0BB		mov.u d8, #0x4C
A0012E3C  F600C801		addsc.a a15, a12, d8, #0
A0012E40  0000F819		ld.w d8, [a15]
A0012E44  FF31086B		sub.f d15, d15, d8

#157						)	{L:33}
(*) REAL
A0012E48  01F0F00B		mov d0, d15
A0012E4C  0104AF09		ld.w d15, [sp+]4
A0012E50  F0410F4B		mul.f d15, d15, d0

#158						ADD		staticFriction	{L:33}
(*) REAL
A0012E54  8004C0BB		mov.u d8, #0x4C
A0012E58  F600C801		addsc.a a15, a12, d8, #0
A0012E5C  0000F819		ld.w d8, [a15]
A0012E60  FF21086B		add.f d15, d15, d8

#159						MUL		-1	{L:33}
(*) REAL
A0012E64  8FFFF03B		mov d8, #-1
A0012E68  8141084B		itof d8, d8
A0012E6C  F0418F4B		mul.f d15, d15, d8

#160						ST		u	{L:33}
(*) REAL
A0012E70  800500BB		mov.u d8, #0x50
A0012E74  F600C801		addsc.a a15, a12, d8, #0
A0012E78  0000FF59		st.w [a15], d15

#161		
#162		$label9:
#163					(* END_IF *)
#164					JMP		$label3
(-) REAL
A0012E7C  0076001D		j #0x000076 ; JUMP 0xA0012F68

#165		
#166		$label6:
#167					(* STOPPING:=TRUE; *)
#168					LD		TRUE	{L:36}
(*) UNDEF
A0012E80  F000103B		mov d15, #1

#169					ST		STOPPING	{L:36}
(*) BOOL
A0012E84  800200BB		mov.u d8, #0x20
A0012E88  F600C801		addsc.a a15, a12, d8, #0
A0012E8C  0000FF59		st.w [a15], d15

#170		
#171		
#172					(* IF vel>0.0 *)
#173					LD		vel	{L:37}
(*) UNDEF
A0012E90  800240BB		mov.u d8, #0x24
A0012E94  F600C801		addsc.a a15, a12, d8, #0
A0012E98  0000FF19		ld.w d15, [a15]

#174					GT		0.0	{L:37}
(*) REAL
A0012E9C  500000BB		mov.u d5, #0x0000 ; COSTREAL 0.000000
A0012EA0  5000059B		addih d5, d5, #0x0000
A0012EA4  F0015F4B		cmp.f d15, d15, d5
A0012EA8  F2004F8B		eq d15, d15, #4

#175					JMPCN	$label10	{L:37}
(-) BOOL
A0012EAC  00160FDF		jeq d15, #0, #0x0016 ; JUMP 0xA0012ED8

#176		
#177					(* THEN *)
#178		
#179						(* u:=-maxTRQ; *)
#180						LD		maxTRQ	{L:38}
(*) UNDEF
A0012EB0  800300BB		mov.u d8, #0x30
A0012EB4  F600C801		addsc.a a15, a12, d8, #0
A0012EB8  0000FF19		ld.w d15, [a15]

#181						MUL		-1	{L:38}
(*) REAL
A0012EBC  8FFFF03B		mov d8, #-1
A0012EC0  8141084B		itof d8, d8
A0012EC4  F0418F4B		mul.f d15, d15, d8

#182						ST		u	{L:38}
(*) REAL
A0012EC8  800500BB		mov.u d8, #0x50
A0012ECC  F600C801		addsc.a a15, a12, d8, #0
A0012ED0  0000FF59		st.w [a15], d15

#183						JMP		$label11
(-) REAL
A0012ED4  000E001D		j #0x00000E ; JUMP 0xA0012EF0

#184		$label10:
#185		
#186					(* ELSE *)
#187		
#188						(* u:=maxTRQ; *)
#189						LD		maxTRQ	{L:40}
(*) UNDEF
A0012ED8  800300BB		mov.u d8, #0x30
A0012EDC  F600C801		addsc.a a15, a12, d8, #0
A0012EE0  0000FF19		ld.w d15, [a15]

#190						ST		u	{L:40}
(*) REAL
A0012EE4  800500BB		mov.u d8, #0x50
A0012EE8  F600C801		addsc.a a15, a12, d8, #0
A0012EEC  0000FF59		st.w [a15], d15

#191		
#192		$label11:
#193					(* END_IF *)
#194		
#195					(* state:=100; *)
#196					LD		100	{L:42}
(*) UNDEF
A0012EF0  F006403B		mov d15, #100

#197					ST		state	{L:42}
(*) USINT
A0012EF4  800050BB		mov.u d8, #0x5
A0012EF8  F600C801		addsc.a a15, a12, d8, #0
A0012EFC  0800FF89		st.b [a15], d15

#198					JMP		$label3
(-) SINT
A0012F00  0034001D		j #0x000034 ; JUMP 0xA0012F68

#199		
#200		$label7:
#201		
#202					(* IF u*vel>0.0 *)
#203					LD		u	{L:44}
(*) UNDEF
A0012F04  800500BB		mov.u d8, #0x50
A0012F08  F600C801		addsc.a a15, a12, d8, #0
A0012F0C  0000FF19		ld.w d15, [a15]

#204					MUL		vel	{L:44}
(*) REAL
A0012F10  800240BB		mov.u d8, #0x24
A0012F14  F600C801		addsc.a a15, a12, d8, #0
A0012F18  0000F819		ld.w d8, [a15]
A0012F1C  F0418F4B		mul.f d15, d15, d8

#205					GT		0.0	{L:44}
(*) REAL
A0012F20  500000BB		mov.u d5, #0x0000 ; COSTREAL 0.000000
A0012F24  5000059B		addih d5, d5, #0x0000
A0012F28  F0015F4B		cmp.f d15, d15, d5
A0012F2C  F2004F8B		eq d15, d15, #4

#206					JMPCN	$label12	{L:44}
(-) BOOL
A0012F30  001C0FDF		jeq d15, #0, #0x001C ; JUMP 0xA0012F68

#207		
#208					(* THEN *)
#209		
#210						(* u:=0.0; *)
#211						LD		0.0	{L:45}
(*) UNDEF
A0012F34  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A0012F38  F0000F9B		addih d15, d15, #0x0000

#212						ST		u	{L:45}
(*) REAL
A0012F3C  800500BB		mov.u d8, #0x50
A0012F40  F600C801		addsc.a a15, a12, d8, #0
A0012F44  0000FF59		st.w [a15], d15

#213		
#214						(* STOPPED:=TRUE; *)
#215						LD		TRUE	{L:46}
(*) UNDEF
A0012F48  F000103B		mov d15, #1

#216						ST		STOPPED	{L:46}
(*) BOOL
A0012F4C  800540BB		mov.u d8, #0x54
A0012F50  F600C801		addsc.a a15, a12, d8, #0
A0012F54  0000FF59		st.w [a15], d15

#217		
#218						(* state:=-1; *)
#219						LD		-1	{L:47}
(*) UNDEF
A0012F58  FFFFF03B		mov d15, #-1

#220						ST		state	{L:47}
(*) SINT
A0012F5C  800050BB		mov.u d8, #0x5
A0012F60  F600C801		addsc.a a15, a12, d8, #0
A0012F64  0800FF89		st.b [a15], d15

A0012F68  0180000D		ret


Frame allocation:

	0024       : VAR vel
	0028       : VAR pos
	002C bit  0: VAR fbInit
	0030       : VAR maxTRQ
	0034       : VAR maxVEL
	0038       : VAR maxPOS
	003C       : VAR minPOS
	0040       : VAR minVEL
	0044       : VAR minTRQ
	0048 bit  0: VAR STOP
	004C       : VAR staticFriction
	0050       : VAR u
	0054 bit  0: VAR STOPPED
	0000       : VAR u_old
	0004       : VAR state_prec
	0005       : VAR state
	0008       : FB  rand
	0020 bit  0: VAR STOPPING

END_FUNCTION_BLOCK
**************************************************
	List function block: fb_AutotuningManager
**************************************************

FUNCTION_BLOCK fb_AutotuningManager

	VAR_INPUT
	fbInit : BOOL; 
	ENABLE : BOOL; 
	Speed : REAL; 
	Position : REAL; 
	maxTrq : REAL; 
	maxVel : REAL; 
	maxPos : REAL; 
	Ts : REAL; 
	Time_identification : REAL; 
	phi_m_v : REAL; 
	phi_m_p : REAL; 
	PARAMETERS_UPDATED : BOOL; 
	Torque_ref : REAL; 
	minPos : REAL; 
	minVel : REAL; 
	MaxWc : REAL; 
	MinWc : REAL; 
	low_vel_thr : REAL; 
	END_VAR

	VAR_OUTPUT
	END : BOOL; 
	Torque : REAL; 
	staticFriction : REAL; 
	state : USINT; 
	noiseLevel : REAL; 
	Kp_v : REAL; 
	Kp_p : REAL; 
	Ti_v : REAL; 
	Ti_p : REAL; 
	Vel_SP : REAL; 
	UPDATE_PARAMETERS : BOOL; 
	Jm : REAL; 
	TUNE_LOW_VEL : BOOL; 
	Kp_high_vel_perc : INT; 
	Ti_high_vel_perc : INT; 
	END_VAR

	VAR_EXTERNAL
	pOscillationTollerance : REAL; 
	vCalcKpSp : REAL; 
	vCalcTiSp : REAL; 
	vEstBandwidth : REAL; 
	vEstDynFrict : REAL; 
	vEstInertia : REAL; 
	vEstStatFrict : REAL; 
	END_VAR

	VAR
	ENABLE_VARIANCE : BOOL; 
	FLAG : BOOL; 
	FLAG_IMPOSSIBLE : BOOL; 
	FLAG_LIMITS : BOOL; 
	TUNED : BOOL; 
	NO_OF_TRIAL : UINT := 10; 
	Wc_counter : UINT; 
	aux : REAL; 
	Bm : REAL; 
	Pos_SP : REAL; 
	PosPreTial : REAL; 
	Time : REAL; 
	Time_aux : REAL; 
	Time_HIGH_VEL : REAL; 
	Time_RLS : REAL; 
	tmpF : REAL; 
	TrialTime : REAL; 
	VARIANCE_THRESHOLD : REAL; 
	Wc_act : REAL; 
	Wc_high : REAL; 
	Wc_low : REAL; 
	Wc_pos : REAL; 
	Wc_Step : REAL; 
	Wc_vel : REAL; 
	NoiseLevelID : fb_NoiseLevelID; 
	NoiseLevelID_Trj : fb_NoiseLevelID_Trj; 
	RAND : fb_Random; 
	StaticFrictionID : fb_StaticFrictionID_OL; 
	StaticFrictionID_Trj : fb_StaticFrictionID_OL_Trj; 
	OL_trj_generator : OL_trj_Marco; 
	PIDp : PIDcontrol; 
	PIDv : PIDcontrol; 
	fb_RLS : RLS_senzaKf; 
	fb_Tune_PID : Tune_PID; 
	fb_VARIANCE : VARIANCE; 
	END_VAR

A0012F6C  C0004001		mov.aa a12, a4

#0		{SRC:fb_AutotuningManager}
#1		
#2		
#3			(* IF fbInit *)
#4			LD		fbInit	{L:1}
(*) UNDEF
A0012F70  803800BB		mov.u d8, #0x380
A0012F74  F600C801		addsc.a a15, a12, d8, #0
A0012F78  0000FF19		ld.w d15, [a15]

#5			JMPCN	$label0	{L:1}
(-) BOOL
A0012F7C  02A40FDF		jeq d15, #0, #0x02A4 ; JUMP 0xA00134C4

#6		
#7			(* THEN *)
#8		
#9				(* noiseLevel := 0.0; *)
#10				LD		0.0	{L:2}
(*) UNDEF
A0012F80  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A0012F84  F0000F9B		addih d15, d15, #0x0000

#11				ST		noiseLevel	{L:2}
(*) REAL
A0012F88  803D80BB		mov.u d8, #0x3D8
A0012F8C  F600C801		addsc.a a15, a12, d8, #0
A0012F90  0000FF59		st.w [a15], d15

#12		
#13				(* END		   := FALSE; *)
#14				LD		FALSE	{L:3}
(*) UNDEF
A0012F94  F000003B		mov d15, #0

#15				ST		END	{L:3}
(*) BOOL
A0012F98  803C80BB		mov.u d8, #0x3C8
A0012F9C  F600C801		addsc.a a15, a12, d8, #0
A0012FA0  0000FF59		st.w [a15], d15

#16		
#17				(* Time:=0.0; *)
#18				LD		0.0	{L:5}
(*) UNDEF
A0012FA4  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A0012FA8  F0000F9B		addih d15, d15, #0x0000

#19				ST		Time	{L:5}
(*) REAL
A0012FAC  800280BB		mov.u d8, #0x28
A0012FB0  F600C801		addsc.a a15, a12, d8, #0
A0012FB4  0000FF59		st.w [a15], d15

#20		
#21				(* Time_RLS:=0.0; *)
#22				LD		0.0	{L:6}
(*) UNDEF
A0012FB8  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A0012FBC  F0000F9B		addih d15, d15, #0x0000

#23				ST		Time_RLS	{L:6}
(*) REAL
A0012FC0  800340BB		mov.u d8, #0x34
A0012FC4  F600C801		addsc.a a15, a12, d8, #0
A0012FC8  0000FF59		st.w [a15], d15

#24		
#25				(* state := 0; *)
#26				LD		0	{L:7}
(*) UNDEF
A0012FCC  F000003B		mov d15, #0

#27				ST		state	{L:7}
(*) USINT
A0012FD0  803D40BB		mov.u d8, #0x3D4
A0012FD4  F600C801		addsc.a a15, a12, d8, #0
A0012FD8  0800FF89		st.b [a15], d15

#28		
#29				(* NoiseLevelID_Trj.fbInit := TRUE; *)
#30				LD		TRUE	{L:10}
(*) UNDEF
A0012FDC  F000103B		mov d15, #1

#31				ST		NoiseLevelID_Trj.fbInit	{L:10}
(*) BOOL
A0012FE0  8007C0BB		mov.u d8, #0x7C
A0012FE4  F600C801		addsc.a a15, a12, d8, #0
A0012FE8  0000FF59		st.w [a15], d15

#32		
#33				(* NoiseLevelID_Trj() *)
#34				CAL		NoiseLevelID_Trj	{L:11}
(*) BOOL
A0012FEC  F53CAF89		st.w [-sp]4, d15 
A0012FF0  4000C001		mov.aa a4, a12
A0012FF4  8007C0BB		mov.u d8, #0x7C ; FB FRAME BASE 0x7C
A0012FF8  8000089B		addih d8, d8, #0x0
A0012FFC  46004801		addsc.a a4, a4, d8, #0
A0013000  FA001091		movh.a a15, #0xA001 ; CALL TO FB AT 0xA0010F1C
A0013004  C0DCFFD9		lea a15,[a15]0x0F1C
A0013008  0000000D		nop
A001300C  00000F2D		calli a15
A0013010  0104AF09		ld.w d15, [sp+]4

#35		
#36				(* NoiseLevelID_Trj.fbInit := FALSE; *)
#37				LD		FALSE	{L:12}
(*) UNDEF
A0013014  F000003B		mov d15, #0

#38				ST		NoiseLevelID_Trj.fbInit	{L:12}
(*) BOOL
A0013018  8007C0BB		mov.u d8, #0x7C
A001301C  F600C801		addsc.a a15, a12, d8, #0
A0013020  0000FF59		st.w [a15], d15

#39		
#40				(* NoiseLevelID_Trj.ENABLE := FALSE; *)
#41				LD		FALSE	{L:13}
(*) UNDEF
A0013024  F000003B		mov d15, #0

#42				ST		NoiseLevelID_Trj.ENABLE	{L:13}
(*) BOOL
A0013028  800800BB		mov.u d8, #0x80
A001302C  F600C801		addsc.a a15, a12, d8, #0
A0013030  0000FF59		st.w [a15], d15

#43		
#44				(* NoiseLevelID_Trj.reference := 0.0; *)
#45				LD		0.0	{L:14}
(*) UNDEF
A0013034  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A0013038  F0000F9B		addih d15, d15, #0x0000

#46				ST		NoiseLevelID_Trj.reference	{L:14}
(*) REAL
A001303C  800840BB		mov.u d8, #0x84
A0013040  F600C801		addsc.a a15, a12, d8, #0
A0013044  0000FF59		st.w [a15], d15

#47		
#48				(* NoiseLevelID.fbInit := TRUE; *)
#49				LD		TRUE	{L:17}
(*) UNDEF
A0013048  F000103B		mov d15, #1

#50				ST		NoiseLevelID.fbInit	{L:17}
(*) BOOL
A001304C  800600BB		mov.u d8, #0x60
A0013050  F600C801		addsc.a a15, a12, d8, #0
A0013054  0000FF59		st.w [a15], d15

#51		
#52				(* NoiseLevelID() *)
#53				CAL		NoiseLevelID	{L:18}
(*) BOOL
A0013058  F53CAF89		st.w [-sp]4, d15 
A001305C  4000C001		mov.aa a4, a12
A0013060  8005C0BB		mov.u d8, #0x5C ; FB FRAME BASE 0x5C
A0013064  8000089B		addih d8, d8, #0x0
A0013068  46004801		addsc.a a4, a4, d8, #0
A001306C  FA001091		movh.a a15, #0xA001 ; CALL TO FB AT 0xA0010DD0
A0013070  70D0FFD9		lea a15,[a15]0x0DD0
A0013074  0000000D		nop
A0013078  00000F2D		calli a15
A001307C  0104AF09		ld.w d15, [sp+]4

#54		
#55				(* NoiseLevelID.fbInit := FALSE; *)
#56				LD		FALSE	{L:19}
(*) UNDEF
A0013080  F000003B		mov d15, #0

#57				ST		NoiseLevelID.fbInit	{L:19}
(*) BOOL
A0013084  800600BB		mov.u d8, #0x60
A0013088  F600C801		addsc.a a15, a12, d8, #0
A001308C  0000FF59		st.w [a15], d15

#58		
#59				(* NoiseLevelID.ENABLE := FALSE; *)
#60				LD		FALSE	{L:20}
(*) UNDEF
A0013090  F000003B		mov d15, #0

#61				ST		NoiseLevelID.ENABLE	{L:20}
(*) BOOL
A0013094  8006C0BB		mov.u d8, #0x6C
A0013098  F600C801		addsc.a a15, a12, d8, #0
A001309C  0000FF59		st.w [a15], d15

#62		
#63				(* NoiseLevelID.timeID := 1.0; *)
#64				LD		1.0	{L:21}
(*) UNDEF
A00130A0  F00000BB		mov.u d15, #0x0000 ; COSTREAL 1.000000
A00130A4  F3F80F9B		addih d15, d15, #0x3F80

#65				ST		NoiseLevelID.timeID	{L:21}
(*) REAL
A00130A8  800640BB		mov.u d8, #0x64
A00130AC  F600C801		addsc.a a15, a12, d8, #0
A00130B0  0000FF59		st.w [a15], d15

#66		
#67				(* NoiseLevelID.Ts     := 0.001; *)
#68				LD		0.001	{L:22}
(*) UNDEF
A00130B4  F126F0BB		mov.u d15, #0x126F ; COSTREAL 0.001000
A00130B8  F3A83F9B		addih d15, d15, #0x3A83

#69				ST		NoiseLevelID.Ts	{L:22}
(*) REAL
A00130BC  800700BB		mov.u d8, #0x70
A00130C0  F600C801		addsc.a a15, a12, d8, #0
A00130C4  0000FF59		st.w [a15], d15

#70		
#71				(* StaticFrictionID_Trj.fbInit := TRUE; *)
#72				LD		TRUE	{L:25}
(*) UNDEF
A00130C8  F000103B		mov d15, #1

#73				ST		StaticFrictionID_Trj.fbInit	{L:25}
(*) BOOL
A00130CC  800D40BB		mov.u d8, #0xD4
A00130D0  F600C801		addsc.a a15, a12, d8, #0
A00130D4  0000FF59		st.w [a15], d15

#74		
#75				(* StaticFrictionID_Trj() *)
#76				CAL		StaticFrictionID_Trj	{L:26}
(*) BOOL
A00130D8  F53CAF89		st.w [-sp]4, d15 
A00130DC  4000C001		mov.aa a4, a12
A00130E0  800D40BB		mov.u d8, #0xD4 ; FB FRAME BASE 0xD4
A00130E4  8000089B		addih d8, d8, #0x0
A00130E8  46004801		addsc.a a4, a4, d8, #0
A00130EC  FA001091		movh.a a15, #0xA001 ; CALL TO FB AT 0xA00110F0
A00130F0  3130FFD9		lea a15,[a15]0x10F0
A00130F4  0000000D		nop
A00130F8  00000F2D		calli a15
A00130FC  0104AF09		ld.w d15, [sp+]4

#77		
#78				(* StaticFrictionID_Trj.fbInit := FALSE; *)
#79				LD		FALSE	{L:27}
(*) UNDEF
A0013100  F000003B		mov d15, #0

#80				ST		StaticFrictionID_Trj.fbInit	{L:27}
(*) BOOL
A0013104  800D40BB		mov.u d8, #0xD4
A0013108  F600C801		addsc.a a15, a12, d8, #0
A001310C  0000FF59		st.w [a15], d15

#81		
#82				(* StaticFrictionID_Trj.ENABLE := FALSE; *)
#83				LD		FALSE	{L:28}
(*) UNDEF
A0013110  F000003B		mov d15, #0

#84				ST		StaticFrictionID_Trj.ENABLE	{L:28}
(*) BOOL
A0013114  800E00BB		mov.u d8, #0xE0
A0013118  F600C801		addsc.a a15, a12, d8, #0
A001311C  0000FF59		st.w [a15], d15

#85		
#86				(* StaticFrictionID_Trj.maxTrq := maxTrq; *)
#87				LD		maxTrq	{L:29}
(*) UNDEF
A0013120  803900BB		mov.u d8, #0x390
A0013124  F600C801		addsc.a a15, a12, d8, #0
A0013128  0000FF19		ld.w d15, [a15]

#88				ST		StaticFrictionID_Trj.maxTrq	{L:29}
(*) REAL
A001312C  800D80BB		mov.u d8, #0xD8
A0013130  F600C801		addsc.a a15, a12, d8, #0
A0013134  0000FF59		st.w [a15], d15

#89		
#90				(* StaticFrictionID_Trj.TrqResolution := maxTrq/100000.0; *)
#91				LD		maxTrq	{L:30}
(*) UNDEF
A0013138  803900BB		mov.u d8, #0x390
A001313C  F600C801		addsc.a a15, a12, d8, #0
A0013140  0000FF19		ld.w d15, [a15]

#92				DIV		100000.0	{L:30}
(*) REAL
A0013144  850000BB		mov.u d8, #0x5000 ; COSTREAL 100000.000000
A0013148  847C389B		addih d8, d8, #0x47C3
A001314C  F0518F4B		div.f d15, d15, d8

#93				ST		StaticFrictionID_Trj.TrqResolution	{L:30}
(*) REAL
A0013150  800DC0BB		mov.u d8, #0xDC
A0013154  F600C801		addsc.a a15, a12, d8, #0
A0013158  0000FF59		st.w [a15], d15

#94		
#95				(* StaticFrictionID.fbInit := TRUE; *)
#96				LD		TRUE	{L:33}
(*) UNDEF
A001315C  F000103B		mov d15, #1

#97				ST		StaticFrictionID.fbInit	{L:33}
(*) BOOL
A0013160  800B40BB		mov.u d8, #0xB4
A0013164  F600C801		addsc.a a15, a12, d8, #0
A0013168  0000FF59		st.w [a15], d15

#98		
#99				(* StaticFrictionID() *)
#100				CAL		StaticFrictionID	{L:34}
(*) BOOL
A001316C  F53CAF89		st.w [-sp]4, d15 
A0013170  4000C001		mov.aa a4, a12
A0013174  800A40BB		mov.u d8, #0xA4 ; FB FRAME BASE 0xA4
A0013178  8000089B		addih d8, d8, #0x0
A001317C  46004801		addsc.a a4, a4, d8, #0
A0013180  FA001091		movh.a a15, #0xA001 ; CALL TO FB AT 0xA0010F88
A0013184  E0C8FFD9		lea a15,[a15]0x0F88
A0013188  0000000D		nop
A001318C  00000F2D		calli a15
A0013190  0104AF09		ld.w d15, [sp+]4

#101		
#102				(* StaticFrictionID.fbInit := FALSE; *)
#103				LD		FALSE	{L:35}
(*) UNDEF
A0013194  F000003B		mov d15, #0

#104				ST		StaticFrictionID.fbInit	{L:35}
(*) BOOL
A0013198  800B40BB		mov.u d8, #0xB4
A001319C  F600C801		addsc.a a15, a12, d8, #0
A00131A0  0000FF59		st.w [a15], d15

#105		
#106				(* StaticFrictionID.ENABLE := FALSE; *)
#107				LD		FALSE	{L:36}
(*) UNDEF
A00131A4  F000003B		mov d15, #0

#108				ST		StaticFrictionID.ENABLE	{L:36}
(*) BOOL
A00131A8  800C00BB		mov.u d8, #0xC0
A00131AC  F600C801		addsc.a a15, a12, d8, #0
A00131B0  0000FF59		st.w [a15], d15

#109		
#110				(* StaticFrictionID.Threshold := 5.0; *)
#111				LD		5.0	{L:37}
(*) UNDEF
A00131B4  F00000BB		mov.u d15, #0x0000 ; COSTREAL 5.000000
A00131B8  F40A0F9B		addih d15, d15, #0x40A0

#112				ST		StaticFrictionID.Threshold	{L:37}
(*) REAL
A00131BC  800C40BB		mov.u d8, #0xC4
A00131C0  F600C801		addsc.a a15, a12, d8, #0
A00131C4  0000FF59		st.w [a15], d15

#113		
#114				(* OL_trj_generator.maxTRQ:= maxTrq; *)
#115				LD		maxTrq	{L:43}
(*) UNDEF
A00131C8  803900BB		mov.u d8, #0x390
A00131CC  F600C801		addsc.a a15, a12, d8, #0
A00131D0  0000FF19		ld.w d15, [a15]

#116				ST		OL_trj_generator.maxTRQ	{L:43}
(*) REAL
A00131D4  801180BB		mov.u d8, #0x118
A00131D8  F600C801		addsc.a a15, a12, d8, #0
A00131DC  0000FF59		st.w [a15], d15

#117		
#118				(* OL_trj_generator.maxVEL:= maxVel; *)
#119				LD		maxVel	{L:44}
(*) UNDEF
A00131E0  803940BB		mov.u d8, #0x394
A00131E4  F600C801		addsc.a a15, a12, d8, #0
A00131E8  0000FF19		ld.w d15, [a15]

#120				ST		OL_trj_generator.maxVEL	{L:44}
(*) REAL
A00131EC  8011C0BB		mov.u d8, #0x11C
A00131F0  F600C801		addsc.a a15, a12, d8, #0
A00131F4  0000FF59		st.w [a15], d15

#121		
#122				(* OL_trj_generator.maxPOS:= maxPos; *)
#123				LD		maxPos	{L:45}
(*) UNDEF
A00131F8  803980BB		mov.u d8, #0x398
A00131FC  F600C801		addsc.a a15, a12, d8, #0
A0013200  0000FF19		ld.w d15, [a15]

#124				ST		OL_trj_generator.maxPOS	{L:45}
(*) REAL
A0013204  801200BB		mov.u d8, #0x120
A0013208  F600C801		addsc.a a15, a12, d8, #0
A001320C  0000FF59		st.w [a15], d15

#125		
#126				(* OL_trj_generator.minTRQ:= -maxTrq; *)
#127				LD		maxTrq	{L:46}
(*) UNDEF
A0013210  803900BB		mov.u d8, #0x390
A0013214  F600C801		addsc.a a15, a12, d8, #0
A0013218  0000FF19		ld.w d15, [a15]

#128				MUL		-1	{L:46}
(*) REAL
A001321C  8FFFF03B		mov d8, #-1
A0013220  8141084B		itof d8, d8
A0013224  F0418F4B		mul.f d15, d15, d8

#129				ST		OL_trj_generator.minTRQ	{L:46}
(*) REAL
A0013228  8012C0BB		mov.u d8, #0x12C
A001322C  F600C801		addsc.a a15, a12, d8, #0
A0013230  0000FF59		st.w [a15], d15

#130		
#131				(* OL_trj_generator.minVEL:= minVel; *)
#132				LD		minVel	{L:47}
(*) UNDEF
A0013234  803B80BB		mov.u d8, #0x3B8
A0013238  F600C801		addsc.a a15, a12, d8, #0
A001323C  0000FF19		ld.w d15, [a15]

#133				ST		OL_trj_generator.minVEL	{L:47}
(*) REAL
A0013240  801280BB		mov.u d8, #0x128
A0013244  F600C801		addsc.a a15, a12, d8, #0
A0013248  0000FF59		st.w [a15], d15

#134		
#135				(* OL_trj_generator.minPOS:= minPos; *)
#136				LD		minPos	{L:48}
(*) UNDEF
A001324C  803B40BB		mov.u d8, #0x3B4
A0013250  F600C801		addsc.a a15, a12, d8, #0
A0013254  0000FF19		ld.w d15, [a15]

#137				ST		OL_trj_generator.minPOS	{L:48}
(*) REAL
A0013258  801240BB		mov.u d8, #0x124
A001325C  F600C801		addsc.a a15, a12, d8, #0
A0013260  0000FF59		st.w [a15], d15

#138		
#139				(* OL_trj_generator.fbInit:=TRUE; *)
#140				LD		TRUE	{L:49}
(*) UNDEF
A0013264  F000103B		mov d15, #1

#141				ST		OL_trj_generator.fbInit	{L:49}
(*) BOOL
A0013268  801140BB		mov.u d8, #0x114
A001326C  F600C801		addsc.a a15, a12, d8, #0
A0013270  0000FF59		st.w [a15], d15

#142		
#143				(* OL_trj_generator() *)
#144				CAL		OL_trj_generator	{L:50}
(*) BOOL
A0013274  F53CAF89		st.w [-sp]4, d15 
A0013278  4000C001		mov.aa a4, a12
A001327C  800E80BB		mov.u d8, #0xE8 ; FB FRAME BASE 0xE8
A0013280  8000089B		addih d8, d8, #0x0
A0013284  46004801		addsc.a a4, a4, d8, #0
A0013288  FA001091		movh.a a15, #0xA001 ; CALL TO FB AT 0xA0012A98
A001328C  A298FFD9		lea a15,[a15]0x2A98
A0013290  0000000D		nop
A0013294  00000F2D		calli a15
A0013298  0104AF09		ld.w d15, [sp+]4

#145		
#146				(* OL_trj_generator.fbInit:=FALSE; *)
#147				LD		FALSE	{L:51}
(*) UNDEF
A001329C  F000003B		mov d15, #0

#148				ST		OL_trj_generator.fbInit	{L:51}
(*) BOOL
A00132A0  801140BB		mov.u d8, #0x114
A00132A4  F600C801		addsc.a a15, a12, d8, #0
A00132A8  0000FF59		st.w [a15], d15

#149		
#150				(* fb_RLS.Ts	:=	0.01; *)
#151				LD		0.01	{L:54}
(*) UNDEF
A00132AC  FD70A0BB		mov.u d15, #0xD70A ; COSTREAL 0.010000
A00132B0  F3C23F9B		addih d15, d15, #0x3C23

#152				ST		fb_RLS.Ts	{L:54}
(*) REAL
A00132B4  802680BB		mov.u d8, #0x268
A00132B8  F600C801		addsc.a a15, a12, d8, #0
A00132BC  0000FF59		st.w [a15], d15

#153		
#154				(* fb_RLS.S 	:= 	3.0; *)
#155				LD		3.0	{L:55}
(*) UNDEF
A00132C0  F00000BB		mov.u d15, #0x0000 ; COSTREAL 3.000000
A00132C4  F4040F9B		addih d15, d15, #0x4040

#156				ST		fb_RLS.S	{L:55}
(*) REAL
A00132C8  8025C0BB		mov.u d8, #0x25C
A00132CC  F600C801		addsc.a a15, a12, d8, #0
A00132D0  0000FF59		st.w [a15], d15

#157		
#158				(* fb_RLS.Time_max:=10.0; *)
#159				LD		10.0	{L:56}
(*) UNDEF
A00132D4  F00000BB		mov.u d15, #0x0000 ; COSTREAL 10.000000
A00132D8  F4120F9B		addih d15, d15, #0x4120

#160				ST		fb_RLS.Time_max	{L:56}
(*) REAL
A00132DC  8026C0BB		mov.u d8, #0x26C
A00132E0  F600C801		addsc.a a15, a12, d8, #0
A00132E4  0000FF59		st.w [a15], d15

#161		
#162				(* fb_RLS.ssMethodType:=0; *)
#163				LD		0	{L:57}
(*) UNDEF
A00132E8  F000003B		mov d15, #0

#164				ST		fb_RLS.ssMethodType	{L:57}
(*) USINT
A00132EC  802700BB		mov.u d8, #0x270
A00132F0  F600C801		addsc.a a15, a12, d8, #0
A00132F4  0800FF89		st.b [a15], d15

#165		
#166				(* fb_RLS() *)
#167				CAL		fb_RLS	{L:58}
(*) SINT
A00132F8  F53CAF89		st.w [-sp]4, d15 
A00132FC  4000C001		mov.aa a4, a12
A0013300  801F00BB		mov.u d8, #0x1F0 ; FB FRAME BASE 0x1F0
A0013304  8000089B		addih d8, d8, #0x0
A0013308  46004801		addsc.a a4, a4, d8, #0
A001330C  FA001091		movh.a a15, #0xA001 ; CALL TO FB AT 0xA0011754
A0013310  D154FFD9		lea a15,[a15]0x1754
A0013314  0000000D		nop
A0013318  00000F2D		calli a15
A001331C  0104AF09		ld.w d15, [sp+]4

#168		
#169				(* fb_RLS.ssMethodType:=1; *)
#170				LD		1	{L:59}
(*) UNDEF
A0013320  F000103B		mov d15, #1

#171				ST		fb_RLS.ssMethodType	{L:59}
(*) USINT
A0013324  802700BB		mov.u d8, #0x270
A0013328  F600C801		addsc.a a15, a12, d8, #0
A001332C  0800FF89		st.b [a15], d15

#172		
#173				(* RAND.fb_Init:=TRUE; *)
#174				LD		TRUE	{L:61}
(*) UNDEF
A0013330  F000103B		mov d15, #1

#175				ST		RAND.fb_Init	{L:61}
(*) BOOL
A0013334  8009C0BB		mov.u d8, #0x9C
A0013338  F600C801		addsc.a a15, a12, d8, #0
A001333C  0000FF59		st.w [a15], d15

#176		
#177				(* RAND() *)
#178				CAL		RAND	{L:62}
(*) BOOL
A0013340  F53CAF89		st.w [-sp]4, d15 
A0013344  4000C001		mov.aa a4, a12
A0013348  8008C0BB		mov.u d8, #0x8C ; FB FRAME BASE 0x8C
A001334C  8000089B		addih d8, d8, #0x0
A0013350  46004801		addsc.a a4, a4, d8, #0
A0013354  FA001091		movh.a a15, #0xA001 ; CALL TO FB AT 0xA00111A8
A0013358  6128FFD9		lea a15,[a15]0x11A8
A001335C  0000000D		nop
A0013360  00000F2D		calli a15
A0013364  0104AF09		ld.w d15, [sp+]4

#179		
#180				(* RAND.fb_Init:=FALSE; *)
#181				LD		FALSE	{L:63}
(*) UNDEF
A0013368  F000003B		mov d15, #0

#182				ST		RAND.fb_Init	{L:63}
(*) BOOL
A001336C  8009C0BB		mov.u d8, #0x9C
A0013370  F600C801		addsc.a a15, a12, d8, #0
A0013374  0000FF59		st.w [a15], d15

#183		
#184				(* Wc_vel:=1.0; *)
#185				LD		1.0	{L:66}
(*) UNDEF
A0013378  F00000BB		mov.u d15, #0x0000 ; COSTREAL 1.000000
A001337C  F3F80F9B		addih d15, d15, #0x3F80

#186				ST		Wc_vel	{L:66}
(*) REAL
A0013380  800580BB		mov.u d8, #0x58
A0013384  F600C801		addsc.a a15, a12, d8, #0
A0013388  0000FF59		st.w [a15], d15

#187		
#188				(* TUNED:=FALSE; *)
#189				LD		FALSE	{L:67}
(*) UNDEF
A001338C  F000003B		mov d15, #0

#190				ST		TUNED	{L:67}
(*) BOOL
A0013390  800100BB		mov.u d8, #0x10
A0013394  F600C801		addsc.a a15, a12, d8, #0
A0013398  0000FF59		st.w [a15], d15

#191		
#192				(* VARIANCE_THRESHOLD:=maxTrq*1.5*pOscillationTollerance; *)
#193				LD		maxTrq	{L:68}
(*) UNDEF
A001339C  803900BB		mov.u d8, #0x390
A00133A0  F600C801		addsc.a a15, a12, d8, #0
A00133A4  0000FF19		ld.w d15, [a15]

#194				MUL		1.5	{L:68}
(*) REAL
A00133A8  800000BB		mov.u d8, #0x0000 ; COSTREAL 1.500000
A00133AC  83FC089B		addih d8, d8, #0x3FC0
A00133B0  F0418F4B		mul.f d15, d15, d8

#195				MUL		pOscillationTollerance	{L:68}
(*) REAL
A00133B4  D190C885		ld.w d8, #0x31B50 ; ADR 0xC0001B50
A00133B8  0000000D		nop
A00133BC  F0418F4B		mul.f d15, d15, d8

#196				ST		VARIANCE_THRESHOLD	{L:68}
(*) REAL
A00133C0  800400BB		mov.u d8, #0x40
A00133C4  F600C801		addsc.a a15, a12, d8, #0
A00133C8  0000FF59		st.w [a15], d15

#197		
#198				(* TrialTime:=2.0; *)
#199				LD		2.0	{L:70}
(*) UNDEF
A00133CC  F00000BB		mov.u d15, #0x0000 ; COSTREAL 2.000000
A00133D0  F4000F9B		addih d15, d15, #0x4000

#200				ST		TrialTime	{L:70}
(*) REAL
A00133D4  8003C0BB		mov.u d8, #0x3C
A00133D8  F600C801		addsc.a a15, a12, d8, #0
A00133DC  0000FF59		st.w [a15], d15

#201		
#202				(* ENABLE_VARIANCE:=FALSE; *)
#203				LD		FALSE	{L:71}
(*) UNDEF
A00133E0  F000003B		mov d15, #0

#204				ST		ENABLE_VARIANCE	{L:71}
(*) BOOL
A00133E4  F000C001		mov.aa a15, a12
A00133E8  0000FF59		st.w [a15], d15

#205		
#206				(* Wc_high:=MaxWc; *)
#207				LD		MaxWc	{L:72}
(*) UNDEF
A00133EC  803BC0BB		mov.u d8, #0x3BC
A00133F0  F600C801		addsc.a a15, a12, d8, #0
A00133F4  0000FF19		ld.w d15, [a15]

#208				ST		Wc_high	{L:72}
(*) REAL
A00133F8  800480BB		mov.u d8, #0x48
A00133FC  F600C801		addsc.a a15, a12, d8, #0
A0013400  0000FF59		st.w [a15], d15

#209		
#210				(* Wc_low:=MinWc; *)
#211				LD		MinWc	{L:73}
(*) UNDEF
A0013404  803C00BB		mov.u d8, #0x3C0
A0013408  F600C801		addsc.a a15, a12, d8, #0
A001340C  0000FF19		ld.w d15, [a15]

#212				ST		Wc_low	{L:73}
(*) REAL
A0013410  8004C0BB		mov.u d8, #0x4C
A0013414  F600C801		addsc.a a15, a12, d8, #0
A0013418  0000FF59		st.w [a15], d15

#213		
#214				(* Wc_act:= MinWc; *)
#215				LD		MinWc	{L:74}
(*) UNDEF
A001341C  803C00BB		mov.u d8, #0x3C0
A0013420  F600C801		addsc.a a15, a12, d8, #0
A0013424  0000FF19		ld.w d15, [a15]

#216				ST		Wc_act	{L:74}
(*) REAL
A0013428  800440BB		mov.u d8, #0x44
A001342C  F600C801		addsc.a a15, a12, d8, #0
A0013430  0000FF59		st.w [a15], d15

#217		
#218				(* NO_OF_TRIAL := 10; *)
#219				LD		10	{L:75}
(*) UNDEF
A0013434  F000A03B		mov d15, #10

#220				ST		NO_OF_TRIAL	{L:75}
(*) USINT
A0013438  800140BB		mov.u d8, #0x14
A001343C  F600C801		addsc.a a15, a12, d8, #0
A0013440  0880FF89		st.h [a15], d15

#221		
#222				(* Wc_Step := (Wc_high - Wc_low) / (TO_REAL(NO_OF_TRIAL)); *)
#223				LD		Wc_high	{L:76}
(*) UNDEF
A0013444  800480BB		mov.u d8, #0x48
A0013448  F600C801		addsc.a a15, a12, d8, #0
A001344C  0000FF19		ld.w d15, [a15]

#224				SUB		Wc_low	{L:76}
(*) REAL
A0013450  8004C0BB		mov.u d8, #0x4C
A0013454  F600C801		addsc.a a15, a12, d8, #0
A0013458  0000F819		ld.w d8, [a15]
A001345C  FF31086B		sub.f d15, d15, d8

#225				DIV(		NO_OF_TRIAL	{L:76}
(*) REAL
A0013460  F53CAF89		st.w [-sp]4, d15 
A0013464  800140BB		mov.u d8, #0x14
A0013468  F600C801		addsc.a a15, a12, d8, #0
A001346C  08C0FF09		ld.hu d15, [a15]

#226				TO_REAL	{L:76}
(*) UINT
A0013470  F1610F4B		utof d15, d15

#227				)	{L:76}
(*) REAL
A0013474  01F0F00B		mov d0, d15
A0013478  0104AF09		ld.w d15, [sp+]4
A001347C  81F0000B		mov d8, d0
A0013480  F0518F4B		div.f d15, d15, d8

#228				ST		Wc_Step	{L:76}
(*) REAL
A0013484  800540BB		mov.u d8, #0x54
A0013488  F600C801		addsc.a a15, a12, d8, #0
A001348C  0000FF59		st.w [a15], d15

#229		
#230				(* TUNE_LOW_VEL:=TRUE; *)
#231				LD		TRUE	{L:78}
(*) UNDEF
A0013490  F000103B		mov d15, #1

#232				ST		TUNE_LOW_VEL	{L:78}
(*) BOOL
A0013494  803F80BB		mov.u d8, #0x3F8
A0013498  F600C801		addsc.a a15, a12, d8, #0
A001349C  0000FF59		st.w [a15], d15

#233		
#234				(* FLAG_IMPOSSIBLE:=FALSE; *)
#235				LD		FALSE	{L:79}
(*) UNDEF
A00134A0  F000003B		mov d15, #0

#236				ST		FLAG_IMPOSSIBLE	{L:79}
(*) BOOL
A00134A4  800080BB		mov.u d8, #0x8
A00134A8  F600C801		addsc.a a15, a12, d8, #0
A00134AC  0000FF59		st.w [a15], d15

#237		
#238				(* FLAG_LIMITS:=FALSE; *)
#239				LD		FALSE	{L:80}
(*) UNDEF
A00134B0  F000003B		mov d15, #0

#240				ST		FLAG_LIMITS	{L:80}
(*) BOOL
A00134B4  8000C0BB		mov.u d8, #0xC
A00134B8  F600C801		addsc.a a15, a12, d8, #0
A00134BC  0000FF59		st.w [a15], d15

#241				JMP		$label1
(-) BOOL
A00134C0  0F9A001D		j #0x000F9A ; JUMP 0xA00153F4

#242		$label0:
#243		
#244			(* ELSE *)
#245		
#246		
#247				(* IF ENABLE *)
#248				LD		ENABLE	{L:84}
(*) UNDEF
A00134C4  803840BB		mov.u d8, #0x384
A00134C8  F600C801		addsc.a a15, a12, d8, #0
A00134CC  0000FF19		ld.w d15, [a15]

#249				JMPCN	$label2	{L:84}
(-) BOOL
A00134D0  0F880FDF		jeq d15, #0, #0x0F88 ; JUMP 0xA00153E0

#250		
#251				(* THEN *)
#252		
#253		
#254					(* CASE state OF *)
#255		
#256					(* 0: *)
#257					LD		state	{L:86}
(*) UNDEF
A00134D4  803D40BB		mov.u d8, #0x3D4
A00134D8  F600C801		addsc.a a15, a12, d8, #0
A00134DC  0840FF09		ld.bu d15, [a15]

#258					EQ		0	{L:86}
(*) USINT
A00134E0  8000003B		mov d8, #0
A00134E4  F1008F0B		eq d15, d15, d8

#259					JMPC	$label5
(-) BOOL
A00134E8  80580FDF		jne d15, #0, #0x0058 ; JUMP 0xA0013598

#260		
#261					(* 1: *)
#262					LD		state	{L:100}
(*) UNDEF
A00134EC  803D40BB		mov.u d8, #0x3D4
A00134F0  F600C801		addsc.a a15, a12, d8, #0
A00134F4  0840FF09		ld.bu d15, [a15]

#263					EQ		1	{L:100}
(*) USINT
A00134F8  8000103B		mov d8, #1
A00134FC  F1008F0B		eq d15, d15, d8

#264					JMPC	$label6
(-) BOOL
A0013500  80D00FDF		jne d15, #0, #0x00D0 ; JUMP 0xA00136A0

#265		
#266					(* 2: *)
#267					LD		state	{L:117}
(*) UNDEF
A0013504  803D40BB		mov.u d8, #0x3D4
A0013508  F600C801		addsc.a a15, a12, d8, #0
A001350C  0840FF09		ld.bu d15, [a15]

#268					EQ		2	{L:117}
(*) USINT
A0013510  8000203B		mov d8, #2
A0013514  F1008F0B		eq d15, d15, d8

#269					JMPC	$label7
(-) BOOL
A0013518  81720FDF		jne d15, #0, #0x0172 ; JUMP 0xA00137FC

#270		
#271					(* 3: *)
#272					LD		state	{L:168}
(*) UNDEF
A001351C  803D40BB		mov.u d8, #0x3D4
A0013520  F600C801		addsc.a a15, a12, d8, #0
A0013524  0840FF09		ld.bu d15, [a15]

#273					EQ		3	{L:168}
(*) USINT
A0013528  8000303B		mov d8, #3
A001352C  F1008F0B		eq d15, d15, d8

#274					JMPC	$label8
(-) BOOL
A0013530  83600FDF		jne d15, #0, #0x0360 ; JUMP 0xA0013BF0

#275		
#276					(* 4: *)
#277					LD		state	{L:258}
(*) UNDEF
A0013534  803D40BB		mov.u d8, #0x3D4
A0013538  F600C801		addsc.a a15, a12, d8, #0
A001353C  0840FF09		ld.bu d15, [a15]

#278					EQ		4	{L:258}
(*) USINT
A0013540  8000403B		mov d8, #4
A0013544  F1008F0B		eq d15, d15, d8

#279					JMPC	$label9
(-) BOOL
A0013548  889E0FDF		jne d15, #0, #0x089E ; JUMP 0xA0014684

#280		
#281					(* 5: *)
#282					LD		state	{L:315}
(*) UNDEF
A001354C  803D40BB		mov.u d8, #0x3D4
A0013550  F600C801		addsc.a a15, a12, d8, #0
A0013554  0840FF09		ld.bu d15, [a15]

#283					EQ		5	{L:315}
(*) USINT
A0013558  8000503B		mov d8, #5
A001355C  F1008F0B		eq d15, d15, d8

#284					JMPC	$label10
(-) BOOL
A0013560  8AF40FDF		jne d15, #0, #0x0AF4 ; JUMP 0xA0014B48

#285		
#286					(* 6: *)
#287					LD		state	{L:367}
(*) UNDEF
A0013564  803D40BB		mov.u d8, #0x3D4
A0013568  F600C801		addsc.a a15, a12, d8, #0
A001356C  0840FF09		ld.bu d15, [a15]

#288					EQ		6	{L:367}
(*) USINT
A0013570  8000603B		mov d8, #6
A0013574  F1008F0B		eq d15, d15, d8

#289					JMPC	$label11
(-) BOOL
A0013578  8D3A0FDF		jne d15, #0, #0x0D3A ; JUMP 0xA0014FEC

#290		
#291					(* 7: *)
#292					LD		state	{L:418}
(*) UNDEF
A001357C  803D40BB		mov.u d8, #0x3D4
A0013580  F600C801		addsc.a a15, a12, d8, #0
A0013584  0840FF09		ld.bu d15, [a15]

#293					EQ		7	{L:418}
(*) USINT
A0013588  8000703B		mov d8, #7
A001358C  F1008F0B		eq d15, d15, d8

#294					JMPC	$label12
(-) BOOL
A0013590  8F140FDF		jne d15, #0, #0x0F14 ; JUMP 0xA00153B8

#295					JMP		$label4
(-) BOOL
A0013594  0F24001D		j #0x000F24 ; JUMP 0xA00153DC

#296		
#297					(* Istruzioni di ciascun CASE: *)
#298		
#299		$label5:
#300						(* NoiseLevelID_Trj.ENABLE := TRUE; *)
#301						LD		TRUE	{L:87}
(*) UNDEF
A0013598  F000103B		mov d15, #1

#302						ST		NoiseLevelID_Trj.ENABLE	{L:87}
(*) BOOL
A001359C  800800BB		mov.u d8, #0x80
A00135A0  F600C801		addsc.a a15, a12, d8, #0
A00135A4  0000FF59		st.w [a15], d15

#303		
#304						(* NoiseLevelID.ENABLE     := TRUE; *)
#305						LD		TRUE	{L:88}
(*) UNDEF
A00135A8  F000103B		mov d15, #1

#306						ST		NoiseLevelID.ENABLE	{L:88}
(*) BOOL
A00135AC  8006C0BB		mov.u d8, #0x6C
A00135B0  F600C801		addsc.a a15, a12, d8, #0
A00135B4  0000FF59		st.w [a15], d15

#307		
#308						(* NoiseLevelID_Trj() *)
#309						CAL		NoiseLevelID_Trj	{L:89}
(*) BOOL
A00135B8  F53CAF89		st.w [-sp]4, d15 
A00135BC  4000C001		mov.aa a4, a12
A00135C0  8007C0BB		mov.u d8, #0x7C ; FB FRAME BASE 0x7C
A00135C4  8000089B		addih d8, d8, #0x0
A00135C8  46004801		addsc.a a4, a4, d8, #0
A00135CC  FA001091		movh.a a15, #0xA001 ; CALL TO FB AT 0xA0010F1C
A00135D0  C0DCFFD9		lea a15,[a15]0x0F1C
A00135D4  0000000D		nop
A00135D8  00000F2D		calli a15
A00135DC  0104AF09		ld.w d15, [sp+]4

#310		
#311						(* Torque := NoiseLevelID_Trj.TrqRef; *)
#312						LD		NoiseLevelID_Trj.TrqRef	{L:90}
(*) UNDEF
A00135E0  800880BB		mov.u d8, #0x88
A00135E4  F600C801		addsc.a a15, a12, d8, #0
A00135E8  0000FF19		ld.w d15, [a15]

#313						ST		Torque	{L:90}
(*) REAL
A00135EC  803CC0BB		mov.u d8, #0x3CC
A00135F0  F600C801		addsc.a a15, a12, d8, #0
A00135F4  0000FF59		st.w [a15], d15

#314		
#315						(* NoiseLevelID.signal := Speed; *)
#316						LD		Speed	{L:91}
(*) UNDEF
A00135F8  803880BB		mov.u d8, #0x388
A00135FC  F600C801		addsc.a a15, a12, d8, #0
A0013600  0000FF19		ld.w d15, [a15]

#317						ST		NoiseLevelID.signal	{L:91}
(*) REAL
A0013604  800680BB		mov.u d8, #0x68
A0013608  F600C801		addsc.a a15, a12, d8, #0
A001360C  0000FF59		st.w [a15], d15

#318		
#319						(* NoiseLevelID() *)
#320						CAL		NoiseLevelID	{L:92}
(*) REAL
A0013610  F53CAF89		st.w [-sp]4, d15 
A0013614  4000C001		mov.aa a4, a12
A0013618  8005C0BB		mov.u d8, #0x5C ; FB FRAME BASE 0x5C
A001361C  8000089B		addih d8, d8, #0x0
A0013620  46004801		addsc.a a4, a4, d8, #0
A0013624  FA001091		movh.a a15, #0xA001 ; CALL TO FB AT 0xA0010DD0
A0013628  70D0FFD9		lea a15,[a15]0x0DD0
A001362C  0000000D		nop
A0013630  00000F2D		calli a15
A0013634  0104AF09		ld.w d15, [sp+]4

#321		
#322		
#323						(* IF NoiseLevelID.END *)
#324						LD		NoiseLevelID.END	{L:93}
(*) UNDEF
A0013638  800780BB		mov.u d8, #0x78
A001363C  F600C801		addsc.a a15, a12, d8, #0
A0013640  0000FF19		ld.w d15, [a15]

#325						JMPCN	$label13	{L:93}
(-) BOOL
A0013644  002C0FDF		jeq d15, #0, #0x002C ; JUMP 0xA001369C

#326		
#327						(* THEN *)
#328		
#329							(* noiseLevel := NoiseLevelID.noiseLevel; *)
#330							LD		NoiseLevelID.noiseLevel	{L:94}
(*) UNDEF
A0013648  800740BB		mov.u d8, #0x74
A001364C  F600C801		addsc.a a15, a12, d8, #0
A0013650  0000FF19		ld.w d15, [a15]

#331							ST		noiseLevel	{L:94}
(*) REAL
A0013654  803D80BB		mov.u d8, #0x3D8
A0013658  F600C801		addsc.a a15, a12, d8, #0
A001365C  0000FF59		st.w [a15], d15

#332		
#333							(* NoiseLevelID_Trj.ENABLE := FALSE; *)
#334							LD		FALSE	{L:95}
(*) UNDEF
A0013660  F000003B		mov d15, #0

#335							ST		NoiseLevelID_Trj.ENABLE	{L:95}
(*) BOOL
A0013664  800800BB		mov.u d8, #0x80
A0013668  F600C801		addsc.a a15, a12, d8, #0
A001366C  0000FF59		st.w [a15], d15

#336		
#337							(* NoiseLevelID.ENABLE     := FALSE; *)
#338							LD		FALSE	{L:96}
(*) UNDEF
A0013670  F000003B		mov d15, #0

#339							ST		NoiseLevelID.ENABLE	{L:96}
(*) BOOL
A0013674  8006C0BB		mov.u d8, #0x6C
A0013678  F600C801		addsc.a a15, a12, d8, #0
A001367C  0000FF59		st.w [a15], d15

#340		
#341							(* state := state+1; *)
#342							LD		state	{L:97}
(*) UNDEF
A0013680  803D40BB		mov.u d8, #0x3D4
A0013684  F600C801		addsc.a a15, a12, d8, #0
A0013688  0840FF09		ld.bu d15, [a15]

#343							ADD		1	{L:97}
(*) USINT
A001368C  F0001F8B		add d15, d15, #1

#344							ST		state	{L:97}
(*) USINT
A0013690  803D40BB		mov.u d8, #0x3D4
A0013694  F600C801		addsc.a a15, a12, d8, #0
A0013698  0800FF89		st.b [a15], d15

#345		
#346		$label13:
#347						(* END_IF *)
#348						JMP		$label4
(-) USINT
A001369C  0EA0001D		j #0x000EA0 ; JUMP 0xA00153DC

#349		
#350		$label6:
#351						(* StaticFrictionID_Trj.ENABLE := TRUE; *)
#352						LD		TRUE	{L:101}
(*) UNDEF
A00136A0  F000103B		mov d15, #1

#353						ST		StaticFrictionID_Trj.ENABLE	{L:101}
(*) BOOL
A00136A4  800E00BB		mov.u d8, #0xE0
A00136A8  F600C801		addsc.a a15, a12, d8, #0
A00136AC  0000FF59		st.w [a15], d15

#354		
#355						(* StaticFrictionID.ENABLE     := TRUE; *)
#356						LD		TRUE	{L:102}
(*) UNDEF
A00136B0  F000103B		mov d15, #1

#357						ST		StaticFrictionID.ENABLE	{L:102}
(*) BOOL
A00136B4  800C00BB		mov.u d8, #0xC0
A00136B8  F600C801		addsc.a a15, a12, d8, #0
A00136BC  0000FF59		st.w [a15], d15

#358		
#359						(* StaticFrictionID_Trj() *)
#360						CAL		StaticFrictionID_Trj	{L:103}
(*) BOOL
A00136C0  F53CAF89		st.w [-sp]4, d15 
A00136C4  4000C001		mov.aa a4, a12
A00136C8  800D40BB		mov.u d8, #0xD4 ; FB FRAME BASE 0xD4
A00136CC  8000089B		addih d8, d8, #0x0
A00136D0  46004801		addsc.a a4, a4, d8, #0
A00136D4  FA001091		movh.a a15, #0xA001 ; CALL TO FB AT 0xA00110F0
A00136D8  3130FFD9		lea a15,[a15]0x10F0
A00136DC  0000000D		nop
A00136E0  00000F2D		calli a15
A00136E4  0104AF09		ld.w d15, [sp+]4

#361		
#362						(* Torque := StaticFrictionID_Trj.TrqRef; *)
#363						LD		StaticFrictionID_Trj.TrqRef	{L:104}
(*) UNDEF
A00136E8  800E40BB		mov.u d8, #0xE4
A00136EC  F600C801		addsc.a a15, a12, d8, #0
A00136F0  0000FF19		ld.w d15, [a15]

#364						ST		Torque	{L:104}
(*) REAL
A00136F4  803CC0BB		mov.u d8, #0x3CC
A00136F8  F600C801		addsc.a a15, a12, d8, #0
A00136FC  0000FF59		st.w [a15], d15

#365		
#366						(* StaticFrictionID.input      := Torque; *)
#367						LD		Torque	{L:105}
(*) UNDEF
A0013700  803CC0BB		mov.u d8, #0x3CC
A0013704  F600C801		addsc.a a15, a12, d8, #0
A0013708  0000FF19		ld.w d15, [a15]

#368						ST		StaticFrictionID.input	{L:105}
(*) REAL
A001370C  800B80BB		mov.u d8, #0xB8
A0013710  F600C801		addsc.a a15, a12, d8, #0
A0013714  0000FF59		st.w [a15], d15

#369		
#370						(* StaticFrictionID.output     := Speed; *)
#371						LD		Speed	{L:106}
(*) UNDEF
A0013718  803880BB		mov.u d8, #0x388
A001371C  F600C801		addsc.a a15, a12, d8, #0
A0013720  0000FF19		ld.w d15, [a15]

#372						ST		StaticFrictionID.output	{L:106}
(*) REAL
A0013724  800BC0BB		mov.u d8, #0xBC
A0013728  F600C801		addsc.a a15, a12, d8, #0
A001372C  0000FF59		st.w [a15], d15

#373		
#374						(* StaticFrictionID.noiseLevel := noiseLevel; *)
#375						LD		noiseLevel	{L:107}
(*) UNDEF
A0013730  803D80BB		mov.u d8, #0x3D8
A0013734  F600C801		addsc.a a15, a12, d8, #0
A0013738  0000FF19		ld.w d15, [a15]

#376						ST		StaticFrictionID.noiseLevel	{L:107}
(*) REAL
A001373C  800C80BB		mov.u d8, #0xC8
A0013740  F600C801		addsc.a a15, a12, d8, #0
A0013744  0000FF59		st.w [a15], d15

#377		
#378						(* StaticFrictionID() *)
#379						CAL		StaticFrictionID	{L:108}
(*) REAL
A0013748  F53CAF89		st.w [-sp]4, d15 
A001374C  4000C001		mov.aa a4, a12
A0013750  800A40BB		mov.u d8, #0xA4 ; FB FRAME BASE 0xA4
A0013754  8000089B		addih d8, d8, #0x0
A0013758  46004801		addsc.a a4, a4, d8, #0
A001375C  FA001091		movh.a a15, #0xA001 ; CALL TO FB AT 0xA0010F88
A0013760  E0C8FFD9		lea a15,[a15]0x0F88
A0013764  0000000D		nop
A0013768  00000F2D		calli a15
A001376C  0104AF09		ld.w d15, [sp+]4

#380		
#381		
#382						(* IF StaticFrictionID.END *)
#383						LD		StaticFrictionID.END	{L:109}
(*) UNDEF
A0013770  800D00BB		mov.u d8, #0xD0
A0013774  F600C801		addsc.a a15, a12, d8, #0
A0013778  0000FF19		ld.w d15, [a15]

#384						JMPCN	$label14	{L:109}
(-) BOOL
A001377C  003E0FDF		jeq d15, #0, #0x003E ; JUMP 0xA00137F8

#385		
#386						(* THEN *)
#387		
#388							(* staticFriction := StaticFrictionID.staticFriction*0.95; *)
#389							LD		StaticFrictionID.staticFriction	{L:110}
(*) UNDEF
A0013780  800CC0BB		mov.u d8, #0xCC
A0013784  F600C801		addsc.a a15, a12, d8, #0
A0013788  0000FF19		ld.w d15, [a15]

#390							MUL		0.95	{L:110}
(*) REAL
A001378C  833330BB		mov.u d8, #0x3333 ; COSTREAL 0.950000
A0013790  83F7389B		addih d8, d8, #0x3F73
A0013794  F0418F4B		mul.f d15, d15, d8

#391							ST		staticFriction	{L:110}
(*) REAL
A0013798  803D00BB		mov.u d8, #0x3D0
A001379C  F600C801		addsc.a a15, a12, d8, #0
A00137A0  0000FF59		st.w [a15], d15

#392		
#393							(* StaticFrictionID_Trj.ENABLE := FALSE; *)
#394							LD		FALSE	{L:111}
(*) UNDEF
A00137A4  F000003B		mov d15, #0

#395							ST		StaticFrictionID_Trj.ENABLE	{L:111}
(*) BOOL
A00137A8  800E00BB		mov.u d8, #0xE0
A00137AC  F600C801		addsc.a a15, a12, d8, #0
A00137B0  0000FF59		st.w [a15], d15

#396		
#397							(* StaticFrictionID.ENABLE     := FALSE; *)
#398							LD		FALSE	{L:112}
(*) UNDEF
A00137B4  F000003B		mov d15, #0

#399							ST		StaticFrictionID.ENABLE	{L:112}
(*) BOOL
A00137B8  800C00BB		mov.u d8, #0xC0
A00137BC  F600C801		addsc.a a15, a12, d8, #0
A00137C0  0000FF59		st.w [a15], d15

#400		
#401							(* OL_trj_generator.staticFriction:=staticFriction; *)
#402							LD		staticFriction	{L:113}
(*) UNDEF
A00137C4  803D00BB		mov.u d8, #0x3D0
A00137C8  F600C801		addsc.a a15, a12, d8, #0
A00137CC  0000FF19		ld.w d15, [a15]

#403							ST		OL_trj_generator.staticFriction	{L:113}
(*) REAL
A00137D0  801340BB		mov.u d8, #0x134
A00137D4  F600C801		addsc.a a15, a12, d8, #0
A00137D8  0000FF59		st.w [a15], d15

#404		
#405							(* state := state+1; *)
#406							LD		state	{L:114}
(*) UNDEF
A00137DC  803D40BB		mov.u d8, #0x3D4
A00137E0  F600C801		addsc.a a15, a12, d8, #0
A00137E4  0840FF09		ld.bu d15, [a15]

#407							ADD		1	{L:114}
(*) USINT
A00137E8  F0001F8B		add d15, d15, #1

#408							ST		state	{L:114}
(*) USINT
A00137EC  803D40BB		mov.u d8, #0x3D4
A00137F0  F600C801		addsc.a a15, a12, d8, #0
A00137F4  0800FF89		st.b [a15], d15

#409		
#410		$label14:
#411						(* END_IF *)
#412						JMP		$label4
(-) USINT
A00137F8  0DF2001D		j #0x000DF2 ; JUMP 0xA00153DC

#413		
#414		$label7:
#415		
#416						(* IF Position>maxPos OR Position<minPos OR ABS(Speed)>maxVel *)
#417						LD		Position	{L:119}
(*) UNDEF
A00137FC  8038C0BB		mov.u d8, #0x38C
A0013800  F600C801		addsc.a a15, a12, d8, #0
A0013804  0000FF19		ld.w d15, [a15]

#418						GT		maxPos	{L:119}
(*) REAL
A0013808  803980BB		mov.u d8, #0x398
A001380C  F600C801		addsc.a a15, a12, d8, #0
A0013810  0000F519		ld.w d5, [a15]
A0013814  F0015F4B		cmp.f d15, d15, d5
A0013818  F2004F8B		eq d15, d15, #4

#419						ST		$$TMP2	{L:119}
(*) BOOL
A001381C  8034C0BB		mov.u d8, #0x34C
A0013820  F600C801		addsc.a a15, a12, d8, #0
A0013824  0000FF59		st.w [a15], d15

#420						LD		Position	{L:119}
(*) UNDEF
A0013828  8038C0BB		mov.u d8, #0x38C
A001382C  F600C801		addsc.a a15, a12, d8, #0
A0013830  0000FF19		ld.w d15, [a15]

#421						LT		minPos	{L:119}
(*) REAL
A0013834  803B40BB		mov.u d8, #0x3B4
A0013838  F600C801		addsc.a a15, a12, d8, #0
A001383C  0000F519		ld.w d5, [a15]
A0013840  F0015F4B		cmp.f d15, d15, d5
A0013844  F2001F8B		eq d15, d15, #1

#422						OR		$$TMP2	{L:119}
(*) BOOL
A0013848  8034C0BB		mov.u d8, #0x34C
A001384C  F600C801		addsc.a a15, a12, d8, #0
A0013850  0000F819		ld.w d8, [a15]
A0013854  F0A08F0F		or d15, d15, d8

#423						ST		$$TMP3	{L:119}
(*) BOOL
A0013858  803500BB		mov.u d8, #0x350
A001385C  F600C801		addsc.a a15, a12, d8, #0
A0013860  0000FF59		st.w [a15], d15

#424						LD		Speed	{L:119}
(*) UNDEF
A0013864  803880BB		mov.u d8, #0x388
A0013868  F600C801		addsc.a a15, a12, d8, #0
A001386C  0000FF19		ld.w d15, [a15]

#425						ABS	{L:119}
(*) REAL
A0013870  41F0F00B		mov d4, d15
A0013874  F8009091		movh.a a15, #0x8009 ; _do_float_abs AT 0x80091CF0
A0013878  31F0FFD9		lea a15,[a15]0x1CF0
A001387C  0000000D		nop
A0013880  00000F2D		calli a15
A0013884  F1F0200B		mov d15, d2

#426						GT		maxVel	{L:119}
(*) REAL
A0013888  803940BB		mov.u d8, #0x394
A001388C  F600C801		addsc.a a15, a12, d8, #0
A0013890  0000F519		ld.w d5, [a15]
A0013894  F0015F4B		cmp.f d15, d15, d5
A0013898  F2004F8B		eq d15, d15, #4

#427						OR		$$TMP3	{L:119}
(*) BOOL
A001389C  803500BB		mov.u d8, #0x350
A00138A0  F600C801		addsc.a a15, a12, d8, #0
A00138A4  0000F819		ld.w d8, [a15]
A00138A8  F0A08F0F		or d15, d15, d8

#428						JMPCN	$label15	{L:119}
(-) BOOL
A00138AC  000A0FDF		jeq d15, #0, #0x000A ; JUMP 0xA00138C0

#429		
#430						(* THEN *)
#431		
#432							(* FLAG_LIMITS:=TRUE; *)
#433							LD		TRUE	{L:120}
(*) UNDEF
A00138B0  F000103B		mov d15, #1

#434							ST		FLAG_LIMITS	{L:120}
(*) BOOL
A00138B4  8000C0BB		mov.u d8, #0xC
A00138B8  F600C801		addsc.a a15, a12, d8, #0
A00138BC  0000FF59		st.w [a15], d15

#435		
#436		$label15:
#437						(* END_IF *)
#438		
#439						(* Time:=Time+Ts; *)
#440						LD		Time	{L:124}
(*) UNDEF
A00138C0  800280BB		mov.u d8, #0x28
A00138C4  F600C801		addsc.a a15, a12, d8, #0
A00138C8  0000FF19		ld.w d15, [a15]

#441						ADD		Ts	{L:124}
(*) REAL
A00138CC  8039C0BB		mov.u d8, #0x39C
A00138D0  F600C801		addsc.a a15, a12, d8, #0
A00138D4  0000F819		ld.w d8, [a15]
A00138D8  FF21086B		add.f d15, d15, d8

#442						ST		Time	{L:124}
(*) REAL
A00138DC  800280BB		mov.u d8, #0x28
A00138E0  F600C801		addsc.a a15, a12, d8, #0
A00138E4  0000FF59		st.w [a15], d15

#443		
#444						(* Time_RLS:=Time_RLS+Ts; *)
#445						LD		Time_RLS	{L:125}
(*) UNDEF
A00138E8  800340BB		mov.u d8, #0x34
A00138EC  F600C801		addsc.a a15, a12, d8, #0
A00138F0  0000FF19		ld.w d15, [a15]

#446						ADD		Ts	{L:125}
(*) REAL
A00138F4  8039C0BB		mov.u d8, #0x39C
A00138F8  F600C801		addsc.a a15, a12, d8, #0
A00138FC  0000F819		ld.w d8, [a15]
A0013900  FF21086B		add.f d15, d15, d8

#447						ST		Time_RLS	{L:125}
(*) REAL
A0013904  800340BB		mov.u d8, #0x34
A0013908  F600C801		addsc.a a15, a12, d8, #0
A001390C  0000FF59		st.w [a15], d15

#448		
#449						(* OL_trj_generator.vel	:= Speed; *)
#450						LD		Speed	{L:126}
(*) UNDEF
A0013910  803880BB		mov.u d8, #0x388
A0013914  F600C801		addsc.a a15, a12, d8, #0
A0013918  0000FF19		ld.w d15, [a15]

#451						ST		OL_trj_generator.vel	{L:126}
(*) REAL
A001391C  8010C0BB		mov.u d8, #0x10C
A0013920  F600C801		addsc.a a15, a12, d8, #0
A0013924  0000FF59		st.w [a15], d15

#452		
#453						(* OL_trj_generator.pos	:= Position; *)
#454						LD		Position	{L:127}
(*) UNDEF
A0013928  8038C0BB		mov.u d8, #0x38C
A001392C  F600C801		addsc.a a15, a12, d8, #0
A0013930  0000FF19		ld.w d15, [a15]

#455						ST		OL_trj_generator.pos	{L:127}
(*) REAL
A0013934  801100BB		mov.u d8, #0x110
A0013938  F600C801		addsc.a a15, a12, d8, #0
A001393C  0000FF59		st.w [a15], d15

#456		
#457		
#458						(* IF Time<Time_identification *)
#459						LD		Time	{L:130}
(*) UNDEF
A0013940  800280BB		mov.u d8, #0x28
A0013944  F600C801		addsc.a a15, a12, d8, #0
A0013948  0000FF19		ld.w d15, [a15]

#460						LT		Time_identification	{L:130}
(*) REAL
A001394C  803A00BB		mov.u d8, #0x3A0
A0013950  F600C801		addsc.a a15, a12, d8, #0
A0013954  0000F519		ld.w d5, [a15]
A0013958  F0015F4B		cmp.f d15, d15, d5
A001395C  F2001F8B		eq d15, d15, #1

#461						JMPCN	$label16	{L:130}
(-) BOOL
A0013960  00A40FDF		jeq d15, #0, #0x00A4 ; JUMP 0xA0013AA8

#462		
#463						(* THEN *)
#464		
#465							(* OL_trj_generator() *)
#466							CAL		OL_trj_generator	{L:132}
(*) BOOL
A0013964  F53CAF89		st.w [-sp]4, d15 
A0013968  4000C001		mov.aa a4, a12
A001396C  800E80BB		mov.u d8, #0xE8 ; FB FRAME BASE 0xE8
A0013970  8000089B		addih d8, d8, #0x0
A0013974  46004801		addsc.a a4, a4, d8, #0
A0013978  FA001091		movh.a a15, #0xA001 ; CALL TO FB AT 0xA0012A98
A001397C  A298FFD9		lea a15,[a15]0x2A98
A0013980  0000000D		nop
A0013984  00000F2D		calli a15
A0013988  0104AF09		ld.w d15, [sp+]4

#467		
#468							(* Torque:=OL_trj_generator.u; *)
#469							LD		OL_trj_generator.u	{L:134}
(*) UNDEF
A001398C  801380BB		mov.u d8, #0x138
A0013990  F600C801		addsc.a a15, a12, d8, #0
A0013994  0000FF19		ld.w d15, [a15]

#470							ST		Torque	{L:134}
(*) REAL
A0013998  803CC0BB		mov.u d8, #0x3CC
A001399C  F600C801		addsc.a a15, a12, d8, #0
A00139A0  0000FF59		st.w [a15], d15

#471		
#472		
#473							(* IF Time_RLS>fb_RLS.Ts *)
#474							LD		Time_RLS	{L:137}
(*) UNDEF
A00139A4  800340BB		mov.u d8, #0x34
A00139A8  F600C801		addsc.a a15, a12, d8, #0
A00139AC  0000FF19		ld.w d15, [a15]

#475							GT		fb_RLS.Ts	{L:137}
(*) REAL
A00139B0  802680BB		mov.u d8, #0x268
A00139B4  F600C801		addsc.a a15, a12, d8, #0
A00139B8  0000F519		ld.w d5, [a15]
A00139BC  F0015F4B		cmp.f d15, d15, d5
A00139C0  F2004F8B		eq d15, d15, #4

#476							JMPCN	$label18	{L:137}
(-) BOOL
A00139C4  00700FDF		jeq d15, #0, #0x0070 ; JUMP 0xA0013AA4

#477		
#478							(* THEN *)
#479		
#480								(* fb_RLS.y	:=	Torque - staticFriction* TANH(10.0*Speed); *)
#481								LD		10.0	{L:138}
(*) UNDEF
A00139C8  F00000BB		mov.u d15, #0x0000 ; COSTREAL 10.000000
A00139CC  F4120F9B		addih d15, d15, #0x4120

#482								MUL		Speed	{L:138}
(*) REAL
A00139D0  803880BB		mov.u d8, #0x388
A00139D4  F600C801		addsc.a a15, a12, d8, #0
A00139D8  0000F819		ld.w d8, [a15]
A00139DC  F0418F4B		mul.f d15, d15, d8

#483								TANH	{L:138}
(*) REAL
A00139E0  41F0F00B		mov d4, d15
A00139E4  F8009091		movh.a a15, #0x8009 ; _do_tanh AT 0x80091A90
A00139E8  A190FFD9		lea a15,[a15]0x1A90
A00139EC  0000000D		nop
A00139F0  00000F2D		calli a15
A00139F4  F1F0200B		mov d15, d2

#484								MUL		staticFriction	{L:138}
(*) REAL
A00139F8  803D00BB		mov.u d8, #0x3D0
A00139FC  F600C801		addsc.a a15, a12, d8, #0
A0013A00  0000F819		ld.w d8, [a15]
A0013A04  F0418F4B		mul.f d15, d15, d8

#485								ST		$$TMP4	{L:138}
(*) REAL
A0013A08  803540BB		mov.u d8, #0x354
A0013A0C  F600C801		addsc.a a15, a12, d8, #0
A0013A10  0000FF59		st.w [a15], d15

#486								LD		Torque	{L:138}
(*) UNDEF
A0013A14  803CC0BB		mov.u d8, #0x3CC
A0013A18  F600C801		addsc.a a15, a12, d8, #0
A0013A1C  0000FF19		ld.w d15, [a15]

#487								SUB		$$TMP4	{L:138}
(*) REAL
A0013A20  803540BB		mov.u d8, #0x354
A0013A24  F600C801		addsc.a a15, a12, d8, #0
A0013A28  0000F819		ld.w d8, [a15]
A0013A2C  FF31086B		sub.f d15, d15, d8

#488								ST		fb_RLS.y	{L:138}
(*) REAL
A0013A30  802600BB		mov.u d8, #0x260
A0013A34  F600C801		addsc.a a15, a12, d8, #0
A0013A38  0000FF59		st.w [a15], d15

#489		
#490								(* fb_RLS.vel	:=	Speed; *)
#491								LD		Speed	{L:139}
(*) UNDEF
A0013A3C  803880BB		mov.u d8, #0x388
A0013A40  F600C801		addsc.a a15, a12, d8, #0
A0013A44  0000FF19		ld.w d15, [a15]

#492								ST		fb_RLS.vel	{L:139}
(*) REAL
A0013A48  802640BB		mov.u d8, #0x264
A0013A4C  F600C801		addsc.a a15, a12, d8, #0
A0013A50  0000FF59		st.w [a15], d15

#493		
#494								(* fb_RLS() *)
#495								CAL		fb_RLS	{L:140}
(*) REAL
A0013A54  F53CAF89		st.w [-sp]4, d15 
A0013A58  4000C001		mov.aa a4, a12
A0013A5C  801F00BB		mov.u d8, #0x1F0 ; FB FRAME BASE 0x1F0
A0013A60  8000089B		addih d8, d8, #0x0
A0013A64  46004801		addsc.a a4, a4, d8, #0
A0013A68  FA001091		movh.a a15, #0xA001 ; CALL TO FB AT 0xA0011754
A0013A6C  D154FFD9		lea a15,[a15]0x1754
A0013A70  0000000D		nop
A0013A74  00000F2D		calli a15
A0013A78  0104AF09		ld.w d15, [sp+]4

#496		
#497								(* Time_RLS 	:= Time_RLS - fb_RLS.Ts; *)
#498								LD		Time_RLS	{L:141}
(*) UNDEF
A0013A7C  800340BB		mov.u d8, #0x34
A0013A80  F600C801		addsc.a a15, a12, d8, #0
A0013A84  0000FF19		ld.w d15, [a15]

#499								SUB		fb_RLS.Ts	{L:141}
(*) REAL
A0013A88  802680BB		mov.u d8, #0x268
A0013A8C  F600C801		addsc.a a15, a12, d8, #0
A0013A90  0000F819		ld.w d8, [a15]
A0013A94  FF31086B		sub.f d15, d15, d8

#500								ST		Time_RLS	{L:141}
(*) REAL
A0013A98  800340BB		mov.u d8, #0x34
A0013A9C  F600C801		addsc.a a15, a12, d8, #0
A0013AA0  0000FF59		st.w [a15], d15

#501		
#502		$label18:
#503							(* END_IF *)
#504							JMP		$label17
(-) REAL
A0013AA4  00A4001D		j #0x0000A4 ; JUMP 0xA0013BEC

#505		$label16:
#506		
#507						(* ELSE *)
#508		
#509							(* OL_trj_generator.STOP:=TRUE; *)
#510							LD		TRUE	{L:144}
(*) UNDEF
A0013AA8  F000103B		mov d15, #1

#511							ST		OL_trj_generator.STOP	{L:144}
(*) BOOL
A0013AAC  801300BB		mov.u d8, #0x130
A0013AB0  F600C801		addsc.a a15, a12, d8, #0
A0013AB4  0000FF59		st.w [a15], d15

#512		
#513							(* OL_trj_generator() *)
#514							CAL		OL_trj_generator	{L:145}
(*) BOOL
A0013AB8  F53CAF89		st.w [-sp]4, d15 
A0013ABC  4000C001		mov.aa a4, a12
A0013AC0  800E80BB		mov.u d8, #0xE8 ; FB FRAME BASE 0xE8
A0013AC4  8000089B		addih d8, d8, #0x0
A0013AC8  46004801		addsc.a a4, a4, d8, #0
A0013ACC  FA001091		movh.a a15, #0xA001 ; CALL TO FB AT 0xA0012A98
A0013AD0  A298FFD9		lea a15,[a15]0x2A98
A0013AD4  0000000D		nop
A0013AD8  00000F2D		calli a15
A0013ADC  0104AF09		ld.w d15, [sp+]4

#515		
#516							(* Torque:=OL_trj_generator.u; *)
#517							LD		OL_trj_generator.u	{L:147}
(*) UNDEF
A0013AE0  801380BB		mov.u d8, #0x138
A0013AE4  F600C801		addsc.a a15, a12, d8, #0
A0013AE8  0000FF19		ld.w d15, [a15]

#518							ST		Torque	{L:147}
(*) REAL
A0013AEC  803CC0BB		mov.u d8, #0x3CC
A0013AF0  F600C801		addsc.a a15, a12, d8, #0
A0013AF4  0000FF59		st.w [a15], d15

#519		
#520		
#521							(* IF OL_trj_generator.STOPPED *)
#522							LD		OL_trj_generator.STOPPED	{L:149}
(*) UNDEF
A0013AF8  8013C0BB		mov.u d8, #0x13C
A0013AFC  F600C801		addsc.a a15, a12, d8, #0
A0013B00  0000FF19		ld.w d15, [a15]

#523							JMPCN	$label19	{L:149}
(-) BOOL
A0013B04  00740FDF		jeq d15, #0, #0x0074 ; JUMP 0xA0013BEC

#524		
#525							(* THEN *)
#526		
#527								(* Time:=0.0; *)
#528								LD		0.0	{L:150}
(*) UNDEF
A0013B08  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A0013B0C  F0000F9B		addih d15, d15, #0x0000

#529								ST		Time	{L:150}
(*) REAL
A0013B10  800280BB		mov.u d8, #0x28
A0013B14  F600C801		addsc.a a15, a12, d8, #0
A0013B18  0000FF59		st.w [a15], d15

#530		
#531		
#532								(* IF fb_RLS.Jm>0.0 *)
#533								LD		fb_RLS.Jm	{L:151}
(*) UNDEF
A0013B1C  802740BB		mov.u d8, #0x274
A0013B20  F600C801		addsc.a a15, a12, d8, #0
A0013B24  0000FF19		ld.w d15, [a15]

#534								GT		0.0	{L:151}
(*) REAL
A0013B28  500000BB		mov.u d5, #0x0000 ; COSTREAL 0.000000
A0013B2C  5000059B		addih d5, d5, #0x0000
A0013B30  F0015F4B		cmp.f d15, d15, d5
A0013B34  F2004F8B		eq d15, d15, #4

#535								JMPCN	$label20	{L:151}
(-) BOOL
A0013B38  00100FDF		jeq d15, #0, #0x0010 ; JUMP 0xA0013B58

#536		
#537								(* THEN *)
#538		
#539									(* Jm:=fb_RLS.Jm; *)
#540									LD		fb_RLS.Jm	{L:152}
(*) UNDEF
A0013B3C  802740BB		mov.u d8, #0x274
A0013B40  F600C801		addsc.a a15, a12, d8, #0
A0013B44  0000FF19		ld.w d15, [a15]

#541									ST		Jm	{L:152}
(*) REAL
A0013B48  803F40BB		mov.u d8, #0x3F4
A0013B4C  F600C801		addsc.a a15, a12, d8, #0
A0013B50  0000FF59		st.w [a15], d15

#542									JMP		$label21
(-) REAL
A0013B54  000C001D		j #0x00000C ; JUMP 0xA0013B6C

#543		$label20:
#544		
#545								(* ELSE *)
#546		
#547									(* Jm:=0.000001; *)
#548									LD		0.000001	{L:154}
(*) UNDEF
A0013B58  F37BD0BB		mov.u d15, #0x37BD ; COSTREAL 0.000001
A0013B5C  F3586F9B		addih d15, d15, #0x3586

#549									ST		Jm	{L:154}
(*) REAL
A0013B60  803F40BB		mov.u d8, #0x3F4
A0013B64  F600C801		addsc.a a15, a12, d8, #0
A0013B68  0000FF59		st.w [a15], d15

#550		
#551		$label21:
#552								(* END_IF *)
#553		
#554		
#555								(* IF fb_RLS.Bm>0.0 *)
#556								LD		fb_RLS.Bm	{L:156}
(*) UNDEF
A0013B6C  802780BB		mov.u d8, #0x278
A0013B70  F600C801		addsc.a a15, a12, d8, #0
A0013B74  0000FF19		ld.w d15, [a15]

#557								GT		0.0	{L:156}
(*) REAL
A0013B78  500000BB		mov.u d5, #0x0000 ; COSTREAL 0.000000
A0013B7C  5000059B		addih d5, d5, #0x0000
A0013B80  F0015F4B		cmp.f d15, d15, d5
A0013B84  F2004F8B		eq d15, d15, #4

#558								JMPCN	$label22	{L:156}
(-) BOOL
A0013B88  00100FDF		jeq d15, #0, #0x0010 ; JUMP 0xA0013BA8

#559		
#560								(* THEN *)
#561		
#562									(* Bm:=fb_RLS.Bm; *)
#563									LD		fb_RLS.Bm	{L:157}
(*) UNDEF
A0013B8C  802780BB		mov.u d8, #0x278
A0013B90  F600C801		addsc.a a15, a12, d8, #0
A0013B94  0000FF19		ld.w d15, [a15]

#564									ST		Bm	{L:157}
(*) REAL
A0013B98  8001C0BB		mov.u d8, #0x1C
A0013B9C  F600C801		addsc.a a15, a12, d8, #0
A0013BA0  0000FF59		st.w [a15], d15

#565									JMP		$label23
(-) REAL
A0013BA4  000C001D		j #0x00000C ; JUMP 0xA0013BBC

#566		$label22:
#567		
#568								(* ELSE *)
#569		
#570									(* Bm:=0.00001; *)
#571									LD		0.00001	{L:159}
(*) UNDEF
A0013BA8  FC5AC0BB		mov.u d15, #0xC5AC ; COSTREAL 0.000010
A0013BAC  F3727F9B		addih d15, d15, #0x3727

#572									ST		Bm	{L:159}
(*) REAL
A0013BB0  8001C0BB		mov.u d8, #0x1C
A0013BB4  F600C801		addsc.a a15, a12, d8, #0
A0013BB8  0000FF59		st.w [a15], d15

#573		
#574		$label23:
#575								(* END_IF *)
#576		
#577								(* state := state+1; *)
#578								LD		state	{L:162}
(*) UNDEF
A0013BBC  803D40BB		mov.u d8, #0x3D4
A0013BC0  F600C801		addsc.a a15, a12, d8, #0
A0013BC4  0840FF09		ld.bu d15, [a15]

#579								ADD		1	{L:162}
(*) USINT
A0013BC8  F0001F8B		add d15, d15, #1

#580								ST		state	{L:162}
(*) USINT
A0013BCC  803D40BB		mov.u d8, #0x3D4
A0013BD0  F600C801		addsc.a a15, a12, d8, #0
A0013BD4  0800FF89		st.b [a15], d15

#581		
#582								(* Torque:=0.0; *)
#583								LD		0.0	{L:163}
(*) UNDEF
A0013BD8  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A0013BDC  F0000F9B		addih d15, d15, #0x0000

#584								ST		Torque	{L:163}
(*) REAL
A0013BE0  803CC0BB		mov.u d8, #0x3CC
A0013BE4  F600C801		addsc.a a15, a12, d8, #0
A0013BE8  0000FF59		st.w [a15], d15

#585		
#586		$label19:
#587							(* END_IF *)
#588		
#589		$label17:
#590						(* END_IF *)
#591						JMP		$label4
(-) REAL
A0013BEC  0BF8001D		j #0x000BF8 ; JUMP 0xA00153DC

#592		
#593		$label8:
#594		
#595						(* IF Position>maxPos OR Position<minPos OR ABS(Speed)>maxVel *)
#596						LD		Position	{L:169}
(*) UNDEF
A0013BF0  8038C0BB		mov.u d8, #0x38C
A0013BF4  F600C801		addsc.a a15, a12, d8, #0
A0013BF8  0000FF19		ld.w d15, [a15]

#597						GT		maxPos	{L:169}
(*) REAL
A0013BFC  803980BB		mov.u d8, #0x398
A0013C00  F600C801		addsc.a a15, a12, d8, #0
A0013C04  0000F519		ld.w d5, [a15]
A0013C08  F0015F4B		cmp.f d15, d15, d5
A0013C0C  F2004F8B		eq d15, d15, #4

#598						ST		$$TMP5	{L:169}
(*) BOOL
A0013C10  803580BB		mov.u d8, #0x358
A0013C14  F600C801		addsc.a a15, a12, d8, #0
A0013C18  0000FF59		st.w [a15], d15

#599						LD		Position	{L:169}
(*) UNDEF
A0013C1C  8038C0BB		mov.u d8, #0x38C
A0013C20  F600C801		addsc.a a15, a12, d8, #0
A0013C24  0000FF19		ld.w d15, [a15]

#600						LT		minPos	{L:169}
(*) REAL
A0013C28  803B40BB		mov.u d8, #0x3B4
A0013C2C  F600C801		addsc.a a15, a12, d8, #0
A0013C30  0000F519		ld.w d5, [a15]
A0013C34  F0015F4B		cmp.f d15, d15, d5
A0013C38  F2001F8B		eq d15, d15, #1

#601						OR		$$TMP5	{L:169}
(*) BOOL
A0013C3C  803580BB		mov.u d8, #0x358
A0013C40  F600C801		addsc.a a15, a12, d8, #0
A0013C44  0000F819		ld.w d8, [a15]
A0013C48  F0A08F0F		or d15, d15, d8

#602						ST		$$TMP6	{L:169}
(*) BOOL
A0013C4C  8035C0BB		mov.u d8, #0x35C
A0013C50  F600C801		addsc.a a15, a12, d8, #0
A0013C54  0000FF59		st.w [a15], d15

#603						LD		Speed	{L:169}
(*) UNDEF
A0013C58  803880BB		mov.u d8, #0x388
A0013C5C  F600C801		addsc.a a15, a12, d8, #0
A0013C60  0000FF19		ld.w d15, [a15]

#604						ABS	{L:169}
(*) REAL
A0013C64  41F0F00B		mov d4, d15
A0013C68  F8009091		movh.a a15, #0x8009 ; _do_float_abs AT 0x80091CF0
A0013C6C  31F0FFD9		lea a15,[a15]0x1CF0
A0013C70  0000000D		nop
A0013C74  00000F2D		calli a15
A0013C78  F1F0200B		mov d15, d2

#605						GT		maxVel	{L:169}
(*) REAL
A0013C7C  803940BB		mov.u d8, #0x394
A0013C80  F600C801		addsc.a a15, a12, d8, #0
A0013C84  0000F519		ld.w d5, [a15]
A0013C88  F0015F4B		cmp.f d15, d15, d5
A0013C8C  F2004F8B		eq d15, d15, #4

#606						OR		$$TMP6	{L:169}
(*) BOOL
A0013C90  8035C0BB		mov.u d8, #0x35C
A0013C94  F600C801		addsc.a a15, a12, d8, #0
A0013C98  0000F819		ld.w d8, [a15]
A0013C9C  F0A08F0F		or d15, d15, d8

#607						JMPCN	$label24	{L:169}
(-) BOOL
A0013CA0  000A0FDF		jeq d15, #0, #0x000A ; JUMP 0xA0013CB4

#608		
#609						(* THEN *)
#610		
#611							(* FLAG_LIMITS:=TRUE; *)
#612							LD		TRUE	{L:170}
(*) UNDEF
A0013CA4  F000103B		mov d15, #1

#613							ST		FLAG_LIMITS	{L:170}
(*) BOOL
A0013CA8  8000C0BB		mov.u d8, #0xC
A0013CAC  F600C801		addsc.a a15, a12, d8, #0
A0013CB0  0000FF59		st.w [a15], d15

#614		
#615		$label24:
#616						(* END_IF *)
#617		
#618						(* Time:=Time+Ts; *)
#619						LD		Time	{L:173}
(*) UNDEF
A0013CB4  800280BB		mov.u d8, #0x28
A0013CB8  F600C801		addsc.a a15, a12, d8, #0
A0013CBC  0000FF19		ld.w d15, [a15]

#620						ADD		Ts	{L:173}
(*) REAL
A0013CC0  8039C0BB		mov.u d8, #0x39C
A0013CC4  F600C801		addsc.a a15, a12, d8, #0
A0013CC8  0000F819		ld.w d8, [a15]
A0013CCC  FF21086B		add.f d15, d15, d8

#621						ST		Time	{L:173}
(*) REAL
A0013CD0  800280BB		mov.u d8, #0x28
A0013CD4  F600C801		addsc.a a15, a12, d8, #0
A0013CD8  0000FF59		st.w [a15], d15

#622		
#623						(* RAND() *)
#624						CAL		RAND	{L:174}
(*) REAL
A0013CDC  F53CAF89		st.w [-sp]4, d15 
A0013CE0  4000C001		mov.aa a4, a12
A0013CE4  8008C0BB		mov.u d8, #0x8C ; FB FRAME BASE 0x8C
A0013CE8  8000089B		addih d8, d8, #0x0
A0013CEC  46004801		addsc.a a4, a4, d8, #0
A0013CF0  FA001091		movh.a a15, #0xA001 ; CALL TO FB AT 0xA00111A8
A0013CF4  6128FFD9		lea a15,[a15]0x11A8
A0013CF8  0000000D		nop
A0013CFC  00000F2D		calli a15
A0013D00  0104AF09		ld.w d15, [sp+]4

#625		
#626						(* Torque:=0.0; *)
#627						LD		0.0	{L:176}
(*) UNDEF
A0013D04  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A0013D08  F0000F9B		addih d15, d15, #0x0000

#628						ST		Torque	{L:176}
(*) REAL
A0013D0C  803CC0BB		mov.u d8, #0x3CC
A0013D10  F600C801		addsc.a a15, a12, d8, #0
A0013D14  0000FF59		st.w [a15], d15

#629		
#630						(* Vel_SP:=0.0; *)
#631						LD		0.0	{L:177}
(*) UNDEF
A0013D18  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A0013D1C  F0000F9B		addih d15, d15, #0x0000

#632						ST		Vel_SP	{L:177}
(*) REAL
A0013D20  803EC0BB		mov.u d8, #0x3EC
A0013D24  F600C801		addsc.a a15, a12, d8, #0
A0013D28  0000FF59		st.w [a15], d15

#633		
#634						(* ENABLE_VARIANCE:=FALSE; *)
#635						LD		FALSE	{L:179}
(*) UNDEF
A0013D2C  F000003B		mov d15, #0

#636						ST		ENABLE_VARIANCE	{L:179}
(*) BOOL
A0013D30  F000C001		mov.aa a15, a12
A0013D34  0000FF59		st.w [a15], d15

#637		
#638						(* fb_Tune_PID.Jm:=Jm; *)
#639						LD		Jm	{L:185}
(*) UNDEF
A0013D38  803F40BB		mov.u d8, #0x3F4
A0013D3C  F600C801		addsc.a a15, a12, d8, #0
A0013D40  0000FF19		ld.w d15, [a15]

#640						ST		fb_Tune_PID.Jm	{L:185}
(*) REAL
A0013D44  803000BB		mov.u d8, #0x300
A0013D48  F600C801		addsc.a a15, a12, d8, #0
A0013D4C  0000FF59		st.w [a15], d15

#641		
#642						(* fb_Tune_PID.Bm:=Bm; *)
#643						LD		Bm	{L:186}
(*) UNDEF
A0013D50  8001C0BB		mov.u d8, #0x1C
A0013D54  F600C801		addsc.a a15, a12, d8, #0
A0013D58  0000FF19		ld.w d15, [a15]

#644						ST		fb_Tune_PID.Bm	{L:186}
(*) REAL
A0013D5C  803040BB		mov.u d8, #0x304
A0013D60  F600C801		addsc.a a15, a12, d8, #0
A0013D64  0000FF59		st.w [a15], d15

#645		
#646						(* fb_Tune_PID.TUNE:=0; *)
#647						LD		0	{L:187}
(*) UNDEF
A0013D68  F000003B		mov d15, #0

#648						ST		fb_Tune_PID.TUNE	{L:187}
(*) USINT
A0013D6C  803080BB		mov.u d8, #0x308
A0013D70  F600C801		addsc.a a15, a12, d8, #0
A0013D74  0800FF89		st.b [a15], d15

#649		
#650						(* Wc_vel:=Wc_act; *)
#651						LD		Wc_act	{L:188}
(*) UNDEF
A0013D78  800440BB		mov.u d8, #0x44
A0013D7C  F600C801		addsc.a a15, a12, d8, #0
A0013D80  0000FF19		ld.w d15, [a15]

#652						ST		Wc_vel	{L:188}
(*) REAL
A0013D84  800580BB		mov.u d8, #0x58
A0013D88  F600C801		addsc.a a15, a12, d8, #0
A0013D8C  0000FF59		st.w [a15], d15

#653		
#654						(* fb_Tune_PID.Wc_vel	:= 	Wc_vel; *)
#655						LD		Wc_vel	{L:189}
(*) UNDEF
A0013D90  800580BB		mov.u d8, #0x58
A0013D94  F600C801		addsc.a a15, a12, d8, #0
A0013D98  0000FF19		ld.w d15, [a15]

#656						ST		fb_Tune_PID.Wc_vel	{L:189}
(*) REAL
A0013D9C  802FC0BB		mov.u d8, #0x2FC
A0013DA0  F600C801		addsc.a a15, a12, d8, #0
A0013DA4  0000FF59		st.w [a15], d15

#657		
#658						(* Wc_pos:=Wc_vel/100.0; *)
#659						LD		Wc_vel	{L:190}
(*) UNDEF
A0013DA8  800580BB		mov.u d8, #0x58
A0013DAC  F600C801		addsc.a a15, a12, d8, #0
A0013DB0  0000FF19		ld.w d15, [a15]

#660						DIV		100.0	{L:190}
(*) REAL
A0013DB4  800000BB		mov.u d8, #0x0000 ; COSTREAL 100.000000
A0013DB8  842C889B		addih d8, d8, #0x42C8
A0013DBC  F0518F4B		div.f d15, d15, d8

#661						ST		Wc_pos	{L:190}
(*) REAL
A0013DC0  800500BB		mov.u d8, #0x50
A0013DC4  F600C801		addsc.a a15, a12, d8, #0
A0013DC8  0000FF59		st.w [a15], d15

#662		
#663						(* fb_Tune_PID.Wc_pos	:= Wc_pos; *)
#664						LD		Wc_pos	{L:191}
(*) UNDEF
A0013DCC  800500BB		mov.u d8, #0x50
A0013DD0  F600C801		addsc.a a15, a12, d8, #0
A0013DD4  0000FF19		ld.w d15, [a15]

#665						ST		fb_Tune_PID.Wc_pos	{L:191}
(*) REAL
A0013DD8  802F80BB		mov.u d8, #0x2F8
A0013DDC  F600C801		addsc.a a15, a12, d8, #0
A0013DE0  0000FF59		st.w [a15], d15

#666		
#667						(* fb_Tune_PID.phi_m_v := phi_m_v *(PI/180.0); *)
#668						LD		PI	{L:192}
(*) UNDEF
A0013DE4  F0FDB0BB		mov.u d15, #0x0FDB ; COSTREAL 3.141593
A0013DE8  F4049F9B		addih d15, d15, #0x4049

#669						DIV		180.0	{L:192}
(*) REAL
A0013DEC  800000BB		mov.u d8, #0x0000 ; COSTREAL 180.000000
A0013DF0  8433489B		addih d8, d8, #0x4334
A0013DF4  F0518F4B		div.f d15, d15, d8

#670						MUL		phi_m_v	{L:192}
(*) REAL
A0013DF8  803A40BB		mov.u d8, #0x3A4
A0013DFC  F600C801		addsc.a a15, a12, d8, #0
A0013E00  0000F819		ld.w d8, [a15]
A0013E04  F0418F4B		mul.f d15, d15, d8

#671						ST		fb_Tune_PID.phi_m_v	{L:192}
(*) REAL
A0013E08  802F00BB		mov.u d8, #0x2F0
A0013E0C  F600C801		addsc.a a15, a12, d8, #0
A0013E10  0000FF59		st.w [a15], d15

#672		
#673						(* fb_Tune_PID.phi_m_p	:= phi_m_p *(PI/180.0); *)
#674						LD		PI	{L:193}
(*) UNDEF
A0013E14  F0FDB0BB		mov.u d15, #0x0FDB ; COSTREAL 3.141593
A0013E18  F4049F9B		addih d15, d15, #0x4049

#675						DIV		180.0	{L:193}
(*) REAL
A0013E1C  800000BB		mov.u d8, #0x0000 ; COSTREAL 180.000000
A0013E20  8433489B		addih d8, d8, #0x4334
A0013E24  F0518F4B		div.f d15, d15, d8

#676						MUL		phi_m_p	{L:193}
(*) REAL
A0013E28  803A80BB		mov.u d8, #0x3A8
A0013E2C  F600C801		addsc.a a15, a12, d8, #0
A0013E30  0000F819		ld.w d8, [a15]
A0013E34  F0418F4B		mul.f d15, d15, d8

#677						ST		fb_Tune_PID.phi_m_p	{L:193}
(*) REAL
A0013E38  802F40BB		mov.u d8, #0x2F4
A0013E3C  F600C801		addsc.a a15, a12, d8, #0
A0013E40  0000FF59		st.w [a15], d15

#678		
#679						(* fb_Tune_PID() *)
#680						CAL		fb_Tune_PID	{L:194}
(*) REAL
A0013E44  F53CAF89		st.w [-sp]4, d15 
A0013E48  4000C001		mov.aa a4, a12
A0013E4C  802800BB		mov.u d8, #0x280 ; FB FRAME BASE 0x280
A0013E50  8000089B		addih d8, d8, #0x0
A0013E54  46004801		addsc.a a4, a4, d8, #0
A0013E58  FA001091		movh.a a15, #0xA001 ; CALL TO FB AT 0xA0011FAC
A0013E5C  E1ECFFD9		lea a15,[a15]0x1FAC
A0013E60  0000000D		nop
A0013E64  00000F2D		calli a15
A0013E68  0104AF09		ld.w d15, [sp+]4

#681		
#682		
#683						(* IF TUNE_LOW_VEL *)
#684						LD		TUNE_LOW_VEL	{L:196}
(*) UNDEF
A0013E6C  803F80BB		mov.u d8, #0x3F8
A0013E70  F600C801		addsc.a a15, a12, d8, #0
A0013E74  0000FF19		ld.w d15, [a15]

#685						JMPCN	$label25	{L:196}
(-) BOOL
A0013E78  001C0FDF		jeq d15, #0, #0x001C ; JUMP 0xA0013EB0

#686		
#687						(* THEN *)
#688		
#689							(* Kp_v:=fb_Tune_PID.kp_v; *)
#690							LD		fb_Tune_PID.kp_v	{L:197}
(*) UNDEF
A0013E7C  803100BB		mov.u d8, #0x310
A0013E80  F600C801		addsc.a a15, a12, d8, #0
A0013E84  0000FF19		ld.w d15, [a15]

#691							ST		Kp_v	{L:197}
(*) REAL
A0013E88  803DC0BB		mov.u d8, #0x3DC
A0013E8C  F600C801		addsc.a a15, a12, d8, #0
A0013E90  0000FF59		st.w [a15], d15

#692		
#693							(* Ti_v:=fb_Tune_PID.ti_v; *)
#694							LD		fb_Tune_PID.ti_v	{L:198}
(*) UNDEF
A0013E94  8030C0BB		mov.u d8, #0x30C
A0013E98  F600C801		addsc.a a15, a12, d8, #0
A0013E9C  0000FF19		ld.w d15, [a15]

#695							ST		Ti_v	{L:198}
(*) REAL
A0013EA0  803E40BB		mov.u d8, #0x3E4
A0013EA4  F600C801		addsc.a a15, a12, d8, #0
A0013EA8  0000FF59		st.w [a15], d15

#696							JMP		$label26
(-) REAL
A0013EAC  00B4001D		j #0x0000B4 ; JUMP 0xA0014014

#697		$label25:
#698		
#699						(* ELSE *)
#700		
#701							(* aux:=FLOOR(fb_Tune_PID.kp_v/Kp_v*100.0); *)
#702							LD		fb_Tune_PID.kp_v	{L:200}
(*) UNDEF
A0013EB0  803100BB		mov.u d8, #0x310
A0013EB4  F600C801		addsc.a a15, a12, d8, #0
A0013EB8  0000FF19		ld.w d15, [a15]

#703							DIV		Kp_v	{L:200}
(*) REAL
A0013EBC  803DC0BB		mov.u d8, #0x3DC
A0013EC0  F600C801		addsc.a a15, a12, d8, #0
A0013EC4  0000F819		ld.w d8, [a15]
A0013EC8  F0518F4B		div.f d15, d15, d8

#704							MUL		100.0	{L:200}
(*) REAL
A0013ECC  800000BB		mov.u d8, #0x0000 ; COSTREAL 100.000000
A0013ED0  842C889B		addih d8, d8, #0x42C8
A0013ED4  F0418F4B		mul.f d15, d15, d8

#705							FLOOR	{L:200}
(*) REAL
A0013ED8  41F0F00B		mov d4, d15
A0013EDC  F8009091		movh.a a15, #0x8009 ; _do_floor AT 0x80091CA8
A0013EE0  21E8FFD9		lea a15,[a15]0x1CA8
A0013EE4  0000000D		nop
A0013EE8  00000F2D		calli a15
A0013EEC  F1F0200B		mov d15, d2

#706							ST		aux	{L:200}
(*) REAL
A0013EF0  800180BB		mov.u d8, #0x18
A0013EF4  F600C801		addsc.a a15, a12, d8, #0
A0013EF8  0000FF59		st.w [a15], d15

#707		
#708							(* Kp_high_vel_perc:=TO_INT(FLOOR(fb_Tune_PID.kp_v/Kp_v*100.0)); *)
#709							LD		fb_Tune_PID.kp_v	{L:201}
(*) UNDEF
A0013EFC  803100BB		mov.u d8, #0x310
A0013F00  F600C801		addsc.a a15, a12, d8, #0
A0013F04  0000FF19		ld.w d15, [a15]

#710							DIV		Kp_v	{L:201}
(*) REAL
A0013F08  803DC0BB		mov.u d8, #0x3DC
A0013F0C  F600C801		addsc.a a15, a12, d8, #0
A0013F10  0000F819		ld.w d8, [a15]
A0013F14  F0518F4B		div.f d15, d15, d8

#711							MUL		100.0	{L:201}
(*) REAL
A0013F18  800000BB		mov.u d8, #0x0000 ; COSTREAL 100.000000
A0013F1C  842C889B		addih d8, d8, #0x42C8
A0013F20  F0418F4B		mul.f d15, d15, d8

#712							FLOOR	{L:201}
(*) REAL
A0013F24  41F0F00B		mov d4, d15
A0013F28  F8009091		movh.a a15, #0x8009 ; _do_floor AT 0x80091CA8
A0013F2C  21E8FFD9		lea a15,[a15]0x1CA8
A0013F30  0000000D		nop
A0013F34  00000F2D		calli a15
A0013F38  F1F0200B		mov d15, d2

#713							TO_INT	{L:201}
(*) REAL
A0013F3C  F1010F4B		ftoi d15, d15

#714							ST		Kp_high_vel_perc	{L:201}
(*) INT
A0013F40  803FC0BB		mov.u d8, #0x3FC
A0013F44  F600C801		addsc.a a15, a12, d8, #0
A0013F48  0880FF89		st.h [a15], d15

#715		
#716							(* Ti_high_vel_perc := TO_INT(FLOOR( (Kp_v / Ti_v) / ( fb_Tune_PID.kp_v/fb_Tune_PID.ti_v ) * 100.0 )); *)
#717							LD		Kp_v	{L:203}
(*) UNDEF
A0013F4C  803DC0BB		mov.u d8, #0x3DC
A0013F50  F600C801		addsc.a a15, a12, d8, #0
A0013F54  0000FF19		ld.w d15, [a15]

#718							DIV		Ti_v	{L:203}
(*) REAL
A0013F58  803E40BB		mov.u d8, #0x3E4
A0013F5C  F600C801		addsc.a a15, a12, d8, #0
A0013F60  0000F819		ld.w d8, [a15]
A0013F64  F0518F4B		div.f d15, d15, d8

#719							ST		$$TMP7	{L:203}
(*) REAL
A0013F68  803600BB		mov.u d8, #0x360
A0013F6C  F600C801		addsc.a a15, a12, d8, #0
A0013F70  0000FF59		st.w [a15], d15

#720							LD		fb_Tune_PID.kp_v	{L:203}
(*) UNDEF
A0013F74  803100BB		mov.u d8, #0x310
A0013F78  F600C801		addsc.a a15, a12, d8, #0
A0013F7C  0000FF19		ld.w d15, [a15]

#721							DIV		fb_Tune_PID.ti_v	{L:203}
(*) REAL
A0013F80  8030C0BB		mov.u d8, #0x30C
A0013F84  F600C801		addsc.a a15, a12, d8, #0
A0013F88  0000F819		ld.w d8, [a15]
A0013F8C  F0518F4B		div.f d15, d15, d8

#722							ST		$$TMP8	{L:203}
(*) REAL
A0013F90  803640BB		mov.u d8, #0x364
A0013F94  F600C801		addsc.a a15, a12, d8, #0
A0013F98  0000FF59		st.w [a15], d15

#723							LD		$$TMP7	{L:203}
(*) UNDEF
A0013F9C  803600BB		mov.u d8, #0x360
A0013FA0  F600C801		addsc.a a15, a12, d8, #0
A0013FA4  0000FF19		ld.w d15, [a15]

#724							DIV		$$TMP8	{L:203}
(*) REAL
A0013FA8  803640BB		mov.u d8, #0x364
A0013FAC  F600C801		addsc.a a15, a12, d8, #0
A0013FB0  0000F819		ld.w d8, [a15]
A0013FB4  F0518F4B		div.f d15, d15, d8

#725							MUL		100.0	{L:203}
(*) REAL
A0013FB8  800000BB		mov.u d8, #0x0000 ; COSTREAL 100.000000
A0013FBC  842C889B		addih d8, d8, #0x42C8
A0013FC0  F0418F4B		mul.f d15, d15, d8

#726							FLOOR	{L:203}
(*) REAL
A0013FC4  41F0F00B		mov d4, d15
A0013FC8  F8009091		movh.a a15, #0x8009 ; _do_floor AT 0x80091CA8
A0013FCC  21E8FFD9		lea a15,[a15]0x1CA8
A0013FD0  0000000D		nop
A0013FD4  00000F2D		calli a15
A0013FD8  F1F0200B		mov d15, d2

#727							TO_INT	{L:203}
(*) REAL
A0013FDC  F1010F4B		ftoi d15, d15

#728							ST		Ti_high_vel_perc	{L:203}
(*) INT
A0013FE0  803FE0BB		mov.u d8, #0x3FE
A0013FE4  F600C801		addsc.a a15, a12, d8, #0
A0013FE8  0880FF89		st.h [a15], d15

#729		
#730		
#731							(* IF Ti_high_vel_perc > 400 *)
#732							LD		Ti_high_vel_perc	{L:205}
(*) UNDEF
A0013FEC  803FE0BB		mov.u d8, #0x3FE
A0013FF0  F600C801		addsc.a a15, a12, d8, #0
A0013FF4  0880FF09		ld.h d15, [a15]

#733							GT		400	{L:205}
(*) INT
A0013FF8  8019003B		mov d8, #400
A0013FFC  F120F80B		lt d15, d8, d15

#734							JMPCN	$label27	{L:205}
(-) BOOL
A0014000  000A0FDF		jeq d15, #0, #0x000A ; JUMP 0xA0014014

#735		
#736							(* THEN *)
#737		
#738								(* Ti_high_vel_perc := 400; *)
#739								LD		400	{L:206}
(*) UNDEF
A0014004  F019003B		mov d15, #400

#740								ST		Ti_high_vel_perc	{L:206}
(*) UINT
A0014008  803FE0BB		mov.u d8, #0x3FE
A001400C  F600C801		addsc.a a15, a12, d8, #0
A0014010  0880FF89		st.h [a15], d15

#741		
#742		$label27:
#743							(* END_IF *)
#744		
#745		$label26:
#746						(* END_IF *)
#747		
#748						(* fb_VARIANCE.ssMethodType:=0; *)
#749						LD		0	{L:211}
(*) UNDEF
A0014014  F000003B		mov d15, #0

#750						ST		fb_VARIANCE.ssMethodType	{L:211}
(*) USINT
A0014018  803440BB		mov.u d8, #0x344
A001401C  F600C801		addsc.a a15, a12, d8, #0
A0014020  0800FF89		st.b [a15], d15

#751		
#752						(* fb_VARIANCE() *)
#753						CAL		fb_VARIANCE	{L:212}
(*) SINT
A0014024  F53CAF89		st.w [-sp]4, d15 
A0014028  4000C001		mov.aa a4, a12
A001402C  803240BB		mov.u d8, #0x324 ; FB FRAME BASE 0x324
A0014030  8000089B		addih d8, d8, #0x0
A0014034  46004801		addsc.a a4, a4, d8, #0
A0014038  FA001091		movh.a a15, #0xA001 ; CALL TO FB AT 0xA0012878
A001403C  12B8FFD9		lea a15,[a15]0x2878
A0014040  0000000D		nop
A0014044  00000F2D		calli a15
A0014048  0104AF09		ld.w d15, [sp+]4

#754		
#755						(* fb_VARIANCE.ssMethodType:=1; *)
#756						LD		1	{L:213}
(*) UNDEF
A001404C  F000103B		mov d15, #1

#757						ST		fb_VARIANCE.ssMethodType	{L:213}
(*) USINT
A0014050  803440BB		mov.u d8, #0x344
A0014054  F600C801		addsc.a a15, a12, d8, #0
A0014058  0800FF89		st.b [a15], d15

#758		
#759						(* tmpF := TrialTime/10.0*2.0; *)
#760						LD		TrialTime	{L:215}
(*) UNDEF
A001405C  8003C0BB		mov.u d8, #0x3C
A0014060  F600C801		addsc.a a15, a12, d8, #0
A0014064  0000FF19		ld.w d15, [a15]

#761						DIV		10.0	{L:215}
(*) REAL
A0014068  800000BB		mov.u d8, #0x0000 ; COSTREAL 10.000000
A001406C  8412089B		addih d8, d8, #0x4120
A0014070  F0518F4B		div.f d15, d15, d8

#762						MUL		2.0	{L:215}
(*) REAL
A0014074  800000BB		mov.u d8, #0x0000 ; COSTREAL 2.000000
A0014078  8400089B		addih d8, d8, #0x4000
A001407C  F0418F4B		mul.f d15, d15, d8

#763						ST		tmpF	{L:215}
(*) REAL
A0014080  800380BB		mov.u d8, #0x38
A0014084  F600C801		addsc.a a15, a12, d8, #0
A0014088  0000FF59		st.w [a15], d15

#764		
#765		
#766						(* IF Time > tmpF *)
#767						LD		Time	{L:216}
(*) UNDEF
A001408C  800280BB		mov.u d8, #0x28
A0014090  F600C801		addsc.a a15, a12, d8, #0
A0014094  0000FF19		ld.w d15, [a15]

#768						GT		tmpF	{L:216}
(*) REAL
A0014098  800380BB		mov.u d8, #0x38
A001409C  F600C801		addsc.a a15, a12, d8, #0
A00140A0  0000F519		ld.w d5, [a15]
A00140A4  F0015F4B		cmp.f d15, d15, d5
A00140A8  F2004F8B		eq d15, d15, #4

#769						JMPCN	$label28	{L:216}
(-) BOOL
A00140AC  02EA0FDF		jeq d15, #0, #0x02EA ; JUMP 0xA0014680

#770		
#771						(* THEN *)
#772		
#773							(* UPDATE_PARAMETERS:=TRUE; *)
#774							LD		TRUE	{L:219}
(*) UNDEF
A00140B0  F000103B		mov d15, #1

#775							ST		UPDATE_PARAMETERS	{L:219}
(*) BOOL
A00140B4  803F00BB		mov.u d8, #0x3F0
A00140B8  F600C801		addsc.a a15, a12, d8, #0
A00140BC  0000FF59		st.w [a15], d15

#776		
#777		
#778							(* IF PARAMETERS_UPDATED *)
#779							LD		PARAMETERS_UPDATED	{L:220}
(*) UNDEF
A00140C0  803AC0BB		mov.u d8, #0x3AC
A00140C4  F600C801		addsc.a a15, a12, d8, #0
A00140C8  0000FF19		ld.w d15, [a15]

#780							JMPCN	$label29	{L:220}
(-) BOOL
A00140CC  02DA0FDF		jeq d15, #0, #0x02DA ; JUMP 0xA0014680

#781		
#782							(* THEN *)
#783		
#784								(* UPDATE_PARAMETERS:=FALSE; *)
#785								LD		FALSE	{L:221}
(*) UNDEF
A00140D0  F000003B		mov d15, #0

#786								ST		UPDATE_PARAMETERS	{L:221}
(*) BOOL
A00140D4  803F00BB		mov.u d8, #0x3F0
A00140D8  F600C801		addsc.a a15, a12, d8, #0
A00140DC  0000FF59		st.w [a15], d15

#787		
#788								(* PARAMETERS_UPDATED:=FALSE; *)
#789								LD		FALSE	{L:222}
(*) UNDEF
A00140E0  F000003B		mov d15, #0

#790								ST		PARAMETERS_UPDATED	{L:222}
(*) BOOL
A00140E4  803AC0BB		mov.u d8, #0x3AC
A00140E8  F600C801		addsc.a a15, a12, d8, #0
A00140EC  0000FF59		st.w [a15], d15

#791		
#792								(* tmpF := (minPos+(maxPos-minPos)/2.0); *)
#793								LD		maxPos	{L:224}
(*) UNDEF
A00140F0  803980BB		mov.u d8, #0x398
A00140F4  F600C801		addsc.a a15, a12, d8, #0
A00140F8  0000FF19		ld.w d15, [a15]

#794								SUB		minPos	{L:224}
(*) REAL
A00140FC  803B40BB		mov.u d8, #0x3B4
A0014100  F600C801		addsc.a a15, a12, d8, #0
A0014104  0000F819		ld.w d8, [a15]
A0014108  FF31086B		sub.f d15, d15, d8

#795								DIV		2.0	{L:224}
(*) REAL
A001410C  800000BB		mov.u d8, #0x0000 ; COSTREAL 2.000000
A0014110  8400089B		addih d8, d8, #0x4000
A0014114  F0518F4B		div.f d15, d15, d8

#796								ADD		minPos	{L:224}
(*) REAL
A0014118  803B40BB		mov.u d8, #0x3B4
A001411C  F600C801		addsc.a a15, a12, d8, #0
A0014120  0000F819		ld.w d8, [a15]
A0014124  FF21086B		add.f d15, d15, d8

#797								ST		tmpF	{L:224}
(*) REAL
A0014128  800380BB		mov.u d8, #0x38
A001412C  F600C801		addsc.a a15, a12, d8, #0
A0014130  0000FF59		st.w [a15], d15

#798		
#799		
#800								(* IF Position>tmpF *)
#801								LD		Position	{L:225}
(*) UNDEF
A0014134  8038C0BB		mov.u d8, #0x38C
A0014138  F600C801		addsc.a a15, a12, d8, #0
A001413C  0000FF19		ld.w d15, [a15]

#802								GT		tmpF	{L:225}
(*) REAL
A0014140  800380BB		mov.u d8, #0x38
A0014144  F600C801		addsc.a a15, a12, d8, #0
A0014148  0000F519		ld.w d5, [a15]
A001414C  F0015F4B		cmp.f d15, d15, d5
A0014150  F2004F8B		eq d15, d15, #4

#803								JMPCN	$label30	{L:225}
(-) BOOL
A0014154  003A0FDF		jeq d15, #0, #0x003A ; JUMP 0xA00141C8

#804		
#805								(* THEN *)
#806		
#807									(* Vel_SP:=(minPos-Position)/(TrialTime/10.0*8.0)*0.8; *)
#808									LD		minPos	{L:226}
(*) UNDEF
A0014158  803B40BB		mov.u d8, #0x3B4
A001415C  F600C801		addsc.a a15, a12, d8, #0
A0014160  0000FF19		ld.w d15, [a15]

#809									SUB		Position	{L:226}
(*) REAL
A0014164  8038C0BB		mov.u d8, #0x38C
A0014168  F600C801		addsc.a a15, a12, d8, #0
A001416C  0000F819		ld.w d8, [a15]
A0014170  FF31086B		sub.f d15, d15, d8

#810									DIV(		TrialTime	{L:226}
(*) REAL
A0014174  F53CAF89		st.w [-sp]4, d15 
A0014178  8003C0BB		mov.u d8, #0x3C
A001417C  F600C801		addsc.a a15, a12, d8, #0
A0014180  0000FF19		ld.w d15, [a15]

#811									DIV		10.0	{L:226}
(*) REAL
A0014184  800000BB		mov.u d8, #0x0000 ; COSTREAL 10.000000
A0014188  8412089B		addih d8, d8, #0x4120
A001418C  F0518F4B		div.f d15, d15, d8

#812									MUL		8.0	{L:226}
(*) REAL
A0014190  800000BB		mov.u d8, #0x0000 ; COSTREAL 8.000000
A0014194  8410089B		addih d8, d8, #0x4100
A0014198  F0418F4B		mul.f d15, d15, d8

#813									)	{L:226}
(*) REAL
A001419C  01F0F00B		mov d0, d15
A00141A0  0104AF09		ld.w d15, [sp+]4
A00141A4  81F0000B		mov d8, d0
A00141A8  F0518F4B		div.f d15, d15, d8

#814									MUL		0.8	{L:226}
(*) REAL
A00141AC  8CCCD0BB		mov.u d8, #0xCCCD ; COSTREAL 0.800000
A00141B0  83F4C89B		addih d8, d8, #0x3F4C
A00141B4  F0418F4B		mul.f d15, d15, d8

#815									ST		Vel_SP	{L:226}
(*) REAL
A00141B8  803EC0BB		mov.u d8, #0x3EC
A00141BC  F600C801		addsc.a a15, a12, d8, #0
A00141C0  0000FF59		st.w [a15], d15

#816									JMP		$label31
(-) REAL
A00141C4  0038001D		j #0x000038 ; JUMP 0xA0014234

#817		$label30:
#818		
#819								(* ELSE *)
#820		
#821									(* Vel_SP:=(maxPos-Position)/(TrialTime/10.0*8.0)*0.8; *)
#822									LD		maxPos	{L:228}
(*) UNDEF
A00141C8  803980BB		mov.u d8, #0x398
A00141CC  F600C801		addsc.a a15, a12, d8, #0
A00141D0  0000FF19		ld.w d15, [a15]

#823									SUB		Position	{L:228}
(*) REAL
A00141D4  8038C0BB		mov.u d8, #0x38C
A00141D8  F600C801		addsc.a a15, a12, d8, #0
A00141DC  0000F819		ld.w d8, [a15]
A00141E0  FF31086B		sub.f d15, d15, d8

#824									DIV(		TrialTime	{L:228}
(*) REAL
A00141E4  F53CAF89		st.w [-sp]4, d15 
A00141E8  8003C0BB		mov.u d8, #0x3C
A00141EC  F600C801		addsc.a a15, a12, d8, #0
A00141F0  0000FF19		ld.w d15, [a15]

#825									DIV		10.0	{L:228}
(*) REAL
A00141F4  800000BB		mov.u d8, #0x0000 ; COSTREAL 10.000000
A00141F8  8412089B		addih d8, d8, #0x4120
A00141FC  F0518F4B		div.f d15, d15, d8

#826									MUL		8.0	{L:228}
(*) REAL
A0014200  800000BB		mov.u d8, #0x0000 ; COSTREAL 8.000000
A0014204  8410089B		addih d8, d8, #0x4100
A0014208  F0418F4B		mul.f d15, d15, d8

#827									)	{L:228}
(*) REAL
A001420C  01F0F00B		mov d0, d15
A0014210  0104AF09		ld.w d15, [sp+]4
A0014214  81F0000B		mov d8, d0
A0014218  F0518F4B		div.f d15, d15, d8

#828									MUL		0.8	{L:228}
(*) REAL
A001421C  8CCCD0BB		mov.u d8, #0xCCCD ; COSTREAL 0.800000
A0014220  83F4C89B		addih d8, d8, #0x3F4C
A0014224  F0418F4B		mul.f d15, d15, d8

#829									ST		Vel_SP	{L:228}
(*) REAL
A0014228  803EC0BB		mov.u d8, #0x3EC
A001422C  F600C801		addsc.a a15, a12, d8, #0
A0014230  0000FF59		st.w [a15], d15

#830		
#831		$label31:
#832								(* END_IF *)
#833		
#834		
#835								(* IF TUNE_LOW_VEL) *)
#836								LD		TUNE_LOW_VEL	{L:231}
(*) UNDEF
A0014234  803F80BB		mov.u d8, #0x3F8
A0014238  F600C801		addsc.a a15, a12, d8, #0
A001423C  0000FF19		ld.w d15, [a15]

#837								NOT	{L:231}
(*) BOOL
A0014240  8000103B		mov d8, #1
A0014244  9000003B		mov d9, #0
A0014248  FF40892B		sel d15, d15, d9, d8

#838								JMPCN	$label32	{L:231}
(-) BOOL
A001424C  015A0FDF		jeq d15, #0, #0x015A ; JUMP 0xA0014500

#839		
#840								(* THEN *)
#841		
#842		
#843									(* IF Vel_SP > 0.0 *)
#844									LD		Vel_SP	{L:232}
(*) UNDEF
A0014250  803EC0BB		mov.u d8, #0x3EC
A0014254  F600C801		addsc.a a15, a12, d8, #0
A0014258  0000FF19		ld.w d15, [a15]

#845									GT		0.0	{L:232}
(*) REAL
A001425C  500000BB		mov.u d5, #0x0000 ; COSTREAL 0.000000
A0014260  5000059B		addih d5, d5, #0x0000
A0014264  F0015F4B		cmp.f d15, d15, d5
A0014268  F2004F8B		eq d15, d15, #4

#846									JMPCN	$label34	{L:232}
(-) BOOL
A001426C  00800FDF		jeq d15, #0, #0x0080 ; JUMP 0xA001436C

#847		
#848									(* THEN *)
#849		
#850										(* Vel_SP:= maxVel		*	(0.2+0.8*(low_vel_thr*2.0 +(1.0-low_vel_thr*2.0)*RAND.rnd)); *)
#851										LD		1.0	{L:233}
(*) UNDEF
A0014270  F00000BB		mov.u d15, #0x0000 ; COSTREAL 1.000000
A0014274  F3F80F9B		addih d15, d15, #0x3F80

#852										SUB(		low_vel_thr	{L:233}
(*) REAL
A0014278  F53CAF89		st.w [-sp]4, d15 
A001427C  803C40BB		mov.u d8, #0x3C4
A0014280  F600C801		addsc.a a15, a12, d8, #0
A0014284  0000FF19		ld.w d15, [a15]

#853										MUL		2.0	{L:233}
(*) REAL
A0014288  800000BB		mov.u d8, #0x0000 ; COSTREAL 2.000000
A001428C  8400089B		addih d8, d8, #0x4000
A0014290  F0418F4B		mul.f d15, d15, d8

#854										)	{L:233}
(*) REAL
A0014294  01F0F00B		mov d0, d15
A0014298  0104AF09		ld.w d15, [sp+]4
A001429C  FF31006B		sub.f d15, d15, d0

#855										MUL		RAND.rnd	{L:233}
(*) REAL
A00142A0  800A00BB		mov.u d8, #0xA0
A00142A4  F600C801		addsc.a a15, a12, d8, #0
A00142A8  0000F819		ld.w d8, [a15]
A00142AC  F0418F4B		mul.f d15, d15, d8

#856										ADD(		low_vel_thr	{L:233}
(*) REAL
A00142B0  F53CAF89		st.w [-sp]4, d15 
A00142B4  803C40BB		mov.u d8, #0x3C4
A00142B8  F600C801		addsc.a a15, a12, d8, #0
A00142BC  0000FF19		ld.w d15, [a15]

#857										MUL		2.0	{L:233}
(*) REAL
A00142C0  800000BB		mov.u d8, #0x0000 ; COSTREAL 2.000000
A00142C4  8400089B		addih d8, d8, #0x4000
A00142C8  F0418F4B		mul.f d15, d15, d8

#858										)	{L:233}
(*) REAL
A00142CC  01F0F00B		mov d0, d15
A00142D0  0104AF09		ld.w d15, [sp+]4
A00142D4  FF21006B		add.f d15, d15, d0

#859										MUL		0.8	{L:233}
(*) REAL
A00142D8  8CCCD0BB		mov.u d8, #0xCCCD ; COSTREAL 0.800000
A00142DC  83F4C89B		addih d8, d8, #0x3F4C
A00142E0  F0418F4B		mul.f d15, d15, d8

#860										ADD		0.2	{L:233}
(*) REAL
A00142E4  8CCCD0BB		mov.u d8, #0xCCCD ; COSTREAL 0.200000
A00142E8  83E4C89B		addih d8, d8, #0x3E4C
A00142EC  FF21086B		add.f d15, d15, d8

#861										MUL		maxVel	{L:233}
(*) REAL
A00142F0  803940BB		mov.u d8, #0x394
A00142F4  F600C801		addsc.a a15, a12, d8, #0
A00142F8  0000F819		ld.w d8, [a15]
A00142FC  F0418F4B		mul.f d15, d15, d8

#862										ST		Vel_SP	{L:233}
(*) REAL
A0014300  803EC0BB		mov.u d8, #0x3EC
A0014304  F600C801		addsc.a a15, a12, d8, #0
A0014308  0000FF59		st.w [a15], d15

#863		
#864										(* Time_HIGH_VEL:=ABS((maxPos-Position)/Vel_SP)*0.5; *)
#865										LD		maxPos	{L:234}
(*) UNDEF
A001430C  803980BB		mov.u d8, #0x398
A0014310  F600C801		addsc.a a15, a12, d8, #0
A0014314  0000FF19		ld.w d15, [a15]

#866										SUB		Position	{L:234}
(*) REAL
A0014318  8038C0BB		mov.u d8, #0x38C
A001431C  F600C801		addsc.a a15, a12, d8, #0
A0014320  0000F819		ld.w d8, [a15]
A0014324  FF31086B		sub.f d15, d15, d8

#867										DIV		Vel_SP	{L:234}
(*) REAL
A0014328  803EC0BB		mov.u d8, #0x3EC
A001432C  F600C801		addsc.a a15, a12, d8, #0
A0014330  0000F819		ld.w d8, [a15]
A0014334  F0518F4B		div.f d15, d15, d8

#868										ABS	{L:234}
(*) REAL
A0014338  41F0F00B		mov d4, d15
A001433C  F8009091		movh.a a15, #0x8009 ; _do_float_abs AT 0x80091CF0
A0014340  31F0FFD9		lea a15,[a15]0x1CF0
A0014344  0000000D		nop
A0014348  00000F2D		calli a15
A001434C  F1F0200B		mov d15, d2

#869										MUL		0.5	{L:234}
(*) REAL
A0014350  800000BB		mov.u d8, #0x0000 ; COSTREAL 0.500000
A0014354  83F0089B		addih d8, d8, #0x3F00
A0014358  F0418F4B		mul.f d15, d15, d8

#870										ST		Time_HIGH_VEL	{L:234}
(*) REAL
A001435C  800300BB		mov.u d8, #0x30
A0014360  F600C801		addsc.a a15, a12, d8, #0
A0014364  0000FF59		st.w [a15], d15

#871										JMP		$label35
(-) REAL
A0014368  009A001D		j #0x00009A ; JUMP 0xA001449C

#872		$label34:
#873		
#874									(* ELSIF Vel_SP< 0.0 *)
#875									LD		Vel_SP	{L:235}
(*) UNDEF
A001436C  803EC0BB		mov.u d8, #0x3EC
A0014370  F600C801		addsc.a a15, a12, d8, #0
A0014374  0000FF19		ld.w d15, [a15]

#876									LT		0.0	{L:235}
(*) REAL
A0014378  500000BB		mov.u d5, #0x0000 ; COSTREAL 0.000000
A001437C  5000059B		addih d5, d5, #0x0000
A0014380  F0015F4B		cmp.f d15, d15, d5
A0014384  F2001F8B		eq d15, d15, #1

#877									JMPCN	$label35	{L:235}
(-) BOOL
A0014388  008A0FDF		jeq d15, #0, #0x008A ; JUMP 0xA001449C

#878		
#879									(* THEN *)
#880		
#881										(* Vel_SP:= -maxVel	*	(0.2+0.8*(low_vel_thr*2.0 +(1.0-low_vel_thr*2.0)*RAND.rnd)); *)
#882										LD		1.0	{L:236}
(*) UNDEF
A001438C  F00000BB		mov.u d15, #0x0000 ; COSTREAL 1.000000
A0014390  F3F80F9B		addih d15, d15, #0x3F80

#883										SUB(		low_vel_thr	{L:236}
(*) REAL
A0014394  F53CAF89		st.w [-sp]4, d15 
A0014398  803C40BB		mov.u d8, #0x3C4
A001439C  F600C801		addsc.a a15, a12, d8, #0
A00143A0  0000FF19		ld.w d15, [a15]

#884										MUL		2.0	{L:236}
(*) REAL
A00143A4  800000BB		mov.u d8, #0x0000 ; COSTREAL 2.000000
A00143A8  8400089B		addih d8, d8, #0x4000
A00143AC  F0418F4B		mul.f d15, d15, d8

#885										)	{L:236}
(*) REAL
A00143B0  01F0F00B		mov d0, d15
A00143B4  0104AF09		ld.w d15, [sp+]4
A00143B8  FF31006B		sub.f d15, d15, d0

#886										MUL		RAND.rnd	{L:236}
(*) REAL
A00143BC  800A00BB		mov.u d8, #0xA0
A00143C0  F600C801		addsc.a a15, a12, d8, #0
A00143C4  0000F819		ld.w d8, [a15]
A00143C8  F0418F4B		mul.f d15, d15, d8

#887										ADD(		low_vel_thr	{L:236}
(*) REAL
A00143CC  F53CAF89		st.w [-sp]4, d15 
A00143D0  803C40BB		mov.u d8, #0x3C4
A00143D4  F600C801		addsc.a a15, a12, d8, #0
A00143D8  0000FF19		ld.w d15, [a15]

#888										MUL		2.0	{L:236}
(*) REAL
A00143DC  800000BB		mov.u d8, #0x0000 ; COSTREAL 2.000000
A00143E0  8400089B		addih d8, d8, #0x4000
A00143E4  F0418F4B		mul.f d15, d15, d8

#889										)	{L:236}
(*) REAL
A00143E8  01F0F00B		mov d0, d15
A00143EC  0104AF09		ld.w d15, [sp+]4
A00143F0  FF21006B		add.f d15, d15, d0

#890										MUL		0.8	{L:236}
(*) REAL
A00143F4  8CCCD0BB		mov.u d8, #0xCCCD ; COSTREAL 0.800000
A00143F8  83F4C89B		addih d8, d8, #0x3F4C
A00143FC  F0418F4B		mul.f d15, d15, d8

#891										ADD		0.2	{L:236}
(*) REAL
A0014400  8CCCD0BB		mov.u d8, #0xCCCD ; COSTREAL 0.200000
A0014404  83E4C89B		addih d8, d8, #0x3E4C
A0014408  FF21086B		add.f d15, d15, d8

#892										MUL(		maxVel	{L:236}
(*) REAL
A001440C  F53CAF89		st.w [-sp]4, d15 
A0014410  803940BB		mov.u d8, #0x394
A0014414  F600C801		addsc.a a15, a12, d8, #0
A0014418  0000FF19		ld.w d15, [a15]

#893										MUL		-1	{L:236}
(*) REAL
A001441C  8FFFF03B		mov d8, #-1
A0014420  8141084B		itof d8, d8
A0014424  F0418F4B		mul.f d15, d15, d8

#894										)	{L:236}
(*) REAL
A0014428  01F0F00B		mov d0, d15
A001442C  0104AF09		ld.w d15, [sp+]4
A0014430  F0410F4B		mul.f d15, d15, d0

#895										ST		Vel_SP	{L:236}
(*) REAL
A0014434  803EC0BB		mov.u d8, #0x3EC
A0014438  F600C801		addsc.a a15, a12, d8, #0
A001443C  0000FF59		st.w [a15], d15

#896		
#897										(* Time_HIGH_VEL:=ABS((minPos-Position)/Vel_SP)*0.5; *)
#898										LD		minPos	{L:237}
(*) UNDEF
A0014440  803B40BB		mov.u d8, #0x3B4
A0014444  F600C801		addsc.a a15, a12, d8, #0
A0014448  0000FF19		ld.w d15, [a15]

#899										SUB		Position	{L:237}
(*) REAL
A001444C  8038C0BB		mov.u d8, #0x38C
A0014450  F600C801		addsc.a a15, a12, d8, #0
A0014454  0000F819		ld.w d8, [a15]
A0014458  FF31086B		sub.f d15, d15, d8

#900										DIV		Vel_SP	{L:237}
(*) REAL
A001445C  803EC0BB		mov.u d8, #0x3EC
A0014460  F600C801		addsc.a a15, a12, d8, #0
A0014464  0000F819		ld.w d8, [a15]
A0014468  F0518F4B		div.f d15, d15, d8

#901										ABS	{L:237}
(*) REAL
A001446C  41F0F00B		mov d4, d15
A0014470  F8009091		movh.a a15, #0x8009 ; _do_float_abs AT 0x80091CF0
A0014474  31F0FFD9		lea a15,[a15]0x1CF0
A0014478  0000000D		nop
A001447C  00000F2D		calli a15
A0014480  F1F0200B		mov d15, d2

#902										MUL		0.5	{L:237}
(*) REAL
A0014484  800000BB		mov.u d8, #0x0000 ; COSTREAL 0.500000
A0014488  83F0089B		addih d8, d8, #0x3F00
A001448C  F0418F4B		mul.f d15, d15, d8

#903										ST		Time_HIGH_VEL	{L:237}
(*) REAL
A0014490  800300BB		mov.u d8, #0x30
A0014494  F600C801		addsc.a a15, a12, d8, #0
A0014498  0000FF59		st.w [a15], d15

#904		
#905		$label35:
#906									(* END_IF *)
#907		
#908		
#909									(* IF Time_HIGH_VEL>TrialTime *)
#910									LD		Time_HIGH_VEL	{L:239}
(*) UNDEF
A001449C  800300BB		mov.u d8, #0x30
A00144A0  F600C801		addsc.a a15, a12, d8, #0
A00144A4  0000FF19		ld.w d15, [a15]

#911									GT		TrialTime	{L:239}
(*) REAL
A00144A8  8003C0BB		mov.u d8, #0x3C
A00144AC  F600C801		addsc.a a15, a12, d8, #0
A00144B0  0000F519		ld.w d5, [a15]
A00144B4  F0015F4B		cmp.f d15, d15, d5
A00144B8  F2004F8B		eq d15, d15, #4

#912									JMPCN	$label36	{L:239}
(-) BOOL
A00144BC  000E0FDF		jeq d15, #0, #0x000E ; JUMP 0xA00144D8

#913		
#914									(* THEN *)
#915		
#916										(* Time_HIGH_VEL:=TrialTime; *)
#917										LD		TrialTime	{L:240}
(*) UNDEF
A00144C0  8003C0BB		mov.u d8, #0x3C
A00144C4  F600C801		addsc.a a15, a12, d8, #0
A00144C8  0000FF19		ld.w d15, [a15]

#918										ST		Time_HIGH_VEL	{L:240}
(*) REAL
A00144CC  800300BB		mov.u d8, #0x30
A00144D0  F600C801		addsc.a a15, a12, d8, #0
A00144D4  0000FF59		st.w [a15], d15

#919		
#920		$label36:
#921									(* END_IF *)
#922		
#923									(* state 	:= 	5; *)
#924									LD		5	{L:242}
(*) UNDEF
A00144D8  F000503B		mov d15, #5

#925									ST		state	{L:242}
(*) USINT
A00144DC  803D40BB		mov.u d8, #0x3D4
A00144E0  F600C801		addsc.a a15, a12, d8, #0
A00144E4  0800FF89		st.b [a15], d15

#926		
#927									(* Time:=0.0; *)
#928									LD		0.0	{L:243}
(*) UNDEF
A00144E8  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A00144EC  F0000F9B		addih d15, d15, #0x0000

#929									ST		Time	{L:243}
(*) REAL
A00144F0  800280BB		mov.u d8, #0x28
A00144F4  F600C801		addsc.a a15, a12, d8, #0
A00144F8  0000FF59		st.w [a15], d15

#930									JMP		$label33
(-) REAL
A00144FC  00C2001D		j #0x0000C2 ; JUMP 0xA0014680

#931		$label32:
#932		
#933								(* ELSE *)
#934		
#935		
#936									(* IF Vel_SP > maxVel*low_vel_thr *)
#937									LD		Vel_SP	{L:245}
(*) UNDEF
A0014500  803EC0BB		mov.u d8, #0x3EC
A0014504  F600C801		addsc.a a15, a12, d8, #0
A0014508  0000FF19		ld.w d15, [a15]

#938									GT(		maxVel	{L:245}
(*) REAL
A001450C  F53CAF89		st.w [-sp]4, d15 
A0014510  803940BB		mov.u d8, #0x394
A0014514  F600C801		addsc.a a15, a12, d8, #0
A0014518  0000FF19		ld.w d15, [a15]

#939									MUL		low_vel_thr	{L:245}
(*) REAL
A001451C  803C40BB		mov.u d8, #0x3C4
A0014520  F600C801		addsc.a a15, a12, d8, #0
A0014524  0000F819		ld.w d8, [a15]
A0014528  F0418F4B		mul.f d15, d15, d8

#940									)	{L:245}
(*) REAL
A001452C  01F0F00B		mov d0, d15
A0014530  0104AF09		ld.w d15, [sp+]4
A0014534  51F0000B		mov d5, d0
A0014538  F0015F4B		cmp.f d15, d15, d5
A001453C  F2004F8B		eq d15, d15, #4

#941									JMPCN	$label37	{L:245}
(-) BOOL
A0014540  00320FDF		jeq d15, #0, #0x0032 ; JUMP 0xA00145A4

#942		
#943									(* THEN *)
#944		
#945										(* Vel_SP:= maxVel*low_vel_thr	*	(0.4 +0.6*RAND.rnd); *)
#946										LD		0.6	{L:246}
(*) UNDEF
A0014544  F999A0BB		mov.u d15, #0x999A ; COSTREAL 0.600000
A0014548  F3F19F9B		addih d15, d15, #0x3F19

#947										MUL		RAND.rnd	{L:246}
(*) REAL
A001454C  800A00BB		mov.u d8, #0xA0
A0014550  F600C801		addsc.a a15, a12, d8, #0
A0014554  0000F819		ld.w d8, [a15]
A0014558  F0418F4B		mul.f d15, d15, d8

#948										ADD		0.4	{L:246}
(*) REAL
A001455C  8CCCD0BB		mov.u d8, #0xCCCD ; COSTREAL 0.400000
A0014560  83ECC89B		addih d8, d8, #0x3ECC
A0014564  FF21086B		add.f d15, d15, d8

#949										MUL(		maxVel	{L:246}
(*) REAL
A0014568  F53CAF89		st.w [-sp]4, d15 
A001456C  803940BB		mov.u d8, #0x394
A0014570  F600C801		addsc.a a15, a12, d8, #0
A0014574  0000FF19		ld.w d15, [a15]

#950										MUL		low_vel_thr	{L:246}
(*) REAL
A0014578  803C40BB		mov.u d8, #0x3C4
A001457C  F600C801		addsc.a a15, a12, d8, #0
A0014580  0000F819		ld.w d8, [a15]
A0014584  F0418F4B		mul.f d15, d15, d8

#951										)	{L:246}
(*) REAL
A0014588  01F0F00B		mov d0, d15
A001458C  0104AF09		ld.w d15, [sp+]4
A0014590  F0410F4B		mul.f d15, d15, d0

#952										ST		Vel_SP	{L:246}
(*) REAL
A0014594  803EC0BB		mov.u d8, #0x3EC
A0014598  F600C801		addsc.a a15, a12, d8, #0
A001459C  0000FF59		st.w [a15], d15

#953										JMP		$label38
(-) REAL
A00145A0  005E001D		j #0x00005E ; JUMP 0xA001465C

#954		$label37:
#955		
#956									(* ELSIF Vel_SP <= -maxVel*low_vel_thr *)
#957									LD		Vel_SP	{L:247}
(*) UNDEF
A00145A4  803EC0BB		mov.u d8, #0x3EC
A00145A8  F600C801		addsc.a a15, a12, d8, #0
A00145AC  0000FF19		ld.w d15, [a15]

#958									LE(		maxVel	{L:247}
(*) REAL
A00145B0  F53CAF89		st.w [-sp]4, d15 
A00145B4  803940BB		mov.u d8, #0x394
A00145B8  F600C801		addsc.a a15, a12, d8, #0
A00145BC  0000FF19		ld.w d15, [a15]

#959									MUL		-1	{L:247}
(*) REAL
A00145C0  8FFFF03B		mov d8, #-1
A00145C4  8141084B		itof d8, d8
A00145C8  F0418F4B		mul.f d15, d15, d8

#960									MUL		low_vel_thr	{L:247}
(*) REAL
A00145CC  803C40BB		mov.u d8, #0x3C4
A00145D0  F600C801		addsc.a a15, a12, d8, #0
A00145D4  0000F819		ld.w d8, [a15]
A00145D8  F0418F4B		mul.f d15, d15, d8

#961									)	{L:247}
(*) REAL
A00145DC  01F0F00B		mov d0, d15
A00145E0  0104AF09		ld.w d15, [sp+]4
A00145E4  51F0000B		mov d5, d0
A00145E8  F0015F4B		cmp.f d15, d15, d5
A00145EC  F2204F8B		ne d15, d15, #4

#962									JMPCN	$label38	{L:247}
(-) BOOL
A00145F0  00360FDF		jeq d15, #0, #0x0036 ; JUMP 0xA001465C

#963		
#964									(* THEN *)
#965		
#966										(* Vel_SP:= -maxVel*low_vel_thr	*	(0.4 +0.6*RAND.rnd); *)
#967										LD		0.6	{L:248}
(*) UNDEF
A00145F4  F999A0BB		mov.u d15, #0x999A ; COSTREAL 0.600000
A00145F8  F3F19F9B		addih d15, d15, #0x3F19

#968										MUL		RAND.rnd	{L:248}
(*) REAL
A00145FC  800A00BB		mov.u d8, #0xA0
A0014600  F600C801		addsc.a a15, a12, d8, #0
A0014604  0000F819		ld.w d8, [a15]
A0014608  F0418F4B		mul.f d15, d15, d8

#969										ADD		0.4	{L:248}
(*) REAL
A001460C  8CCCD0BB		mov.u d8, #0xCCCD ; COSTREAL 0.400000
A0014610  83ECC89B		addih d8, d8, #0x3ECC
A0014614  FF21086B		add.f d15, d15, d8

#970										MUL(		maxVel	{L:248}
(*) REAL
A0014618  F53CAF89		st.w [-sp]4, d15 
A001461C  803940BB		mov.u d8, #0x394
A0014620  F600C801		addsc.a a15, a12, d8, #0
A0014624  0000FF19		ld.w d15, [a15]

#971										MUL		-1	{L:248}
(*) REAL
A0014628  8FFFF03B		mov d8, #-1
A001462C  8141084B		itof d8, d8
A0014630  F0418F4B		mul.f d15, d15, d8

#972										MUL		low_vel_thr	{L:248}
(*) REAL
A0014634  803C40BB		mov.u d8, #0x3C4
A0014638  F600C801		addsc.a a15, a12, d8, #0
A001463C  0000F819		ld.w d8, [a15]
A0014640  F0418F4B		mul.f d15, d15, d8

#973										)	{L:248}
(*) REAL
A0014644  01F0F00B		mov d0, d15
A0014648  0104AF09		ld.w d15, [sp+]4
A001464C  F0410F4B		mul.f d15, d15, d0

#974										ST		Vel_SP	{L:248}
(*) REAL
A0014650  803EC0BB		mov.u d8, #0x3EC
A0014654  F600C801		addsc.a a15, a12, d8, #0
A0014658  0000FF59		st.w [a15], d15

#975		
#976		$label38:
#977									(* END_IF *)
#978		
#979									(* state 	:= 	4; *)
#980									LD		4	{L:250}
(*) UNDEF
A001465C  F000403B		mov d15, #4

#981									ST		state	{L:250}
(*) USINT
A0014660  803D40BB		mov.u d8, #0x3D4
A0014664  F600C801		addsc.a a15, a12, d8, #0
A0014668  0800FF89		st.b [a15], d15

#982		
#983									(* Time:=0.0; *)
#984									LD		0.0	{L:251}
(*) UNDEF
A001466C  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A0014670  F0000F9B		addih d15, d15, #0x0000

#985									ST		Time	{L:251}
(*) REAL
A0014674  800280BB		mov.u d8, #0x28
A0014678  F600C801		addsc.a a15, a12, d8, #0
A001467C  0000FF59		st.w [a15], d15

#986		
#987		$label33:
#988								(* END_IF *)
#989		
#990		$label29:
#991							(* END_IF *)
#992		
#993		$label28:
#994						(* END_IF *)
#995						JMP		$label4
(-) REAL
A0014680  06AE001D		j #0x0006AE ; JUMP 0xA00153DC

#996		
#997		$label9:
#998		
#999						(* IF Position>maxPos OR Position<minPos OR ABS(Speed)>maxVel *)
#1000						LD		Position	{L:259}
(*) UNDEF
A0014684  8038C0BB		mov.u d8, #0x38C
A0014688  F600C801		addsc.a a15, a12, d8, #0
A001468C  0000FF19		ld.w d15, [a15]

#1001						GT		maxPos	{L:259}
(*) REAL
A0014690  803980BB		mov.u d8, #0x398
A0014694  F600C801		addsc.a a15, a12, d8, #0
A0014698  0000F519		ld.w d5, [a15]
A001469C  F0015F4B		cmp.f d15, d15, d5
A00146A0  F2004F8B		eq d15, d15, #4

#1002						ST		$$TMP22	{L:259}
(*) BOOL
A00146A4  803680BB		mov.u d8, #0x368
A00146A8  F600C801		addsc.a a15, a12, d8, #0
A00146AC  0000FF59		st.w [a15], d15

#1003						LD		Position	{L:259}
(*) UNDEF
A00146B0  8038C0BB		mov.u d8, #0x38C
A00146B4  F600C801		addsc.a a15, a12, d8, #0
A00146B8  0000FF19		ld.w d15, [a15]

#1004						LT		minPos	{L:259}
(*) REAL
A00146BC  803B40BB		mov.u d8, #0x3B4
A00146C0  F600C801		addsc.a a15, a12, d8, #0
A00146C4  0000F519		ld.w d5, [a15]
A00146C8  F0015F4B		cmp.f d15, d15, d5
A00146CC  F2001F8B		eq d15, d15, #1

#1005						OR		$$TMP22	{L:259}
(*) BOOL
A00146D0  803680BB		mov.u d8, #0x368
A00146D4  F600C801		addsc.a a15, a12, d8, #0
A00146D8  0000F819		ld.w d8, [a15]
A00146DC  F0A08F0F		or d15, d15, d8

#1006						ST		$$TMP23	{L:259}
(*) BOOL
A00146E0  8036C0BB		mov.u d8, #0x36C
A00146E4  F600C801		addsc.a a15, a12, d8, #0
A00146E8  0000FF59		st.w [a15], d15

#1007						LD		Speed	{L:259}
(*) UNDEF
A00146EC  803880BB		mov.u d8, #0x388
A00146F0  F600C801		addsc.a a15, a12, d8, #0
A00146F4  0000FF19		ld.w d15, [a15]

#1008						ABS	{L:259}
(*) REAL
A00146F8  41F0F00B		mov d4, d15
A00146FC  F8009091		movh.a a15, #0x8009 ; _do_float_abs AT 0x80091CF0
A0014700  31F0FFD9		lea a15,[a15]0x1CF0
A0014704  0000000D		nop
A0014708  00000F2D		calli a15
A001470C  F1F0200B		mov d15, d2

#1009						GT		maxVel	{L:259}
(*) REAL
A0014710  803940BB		mov.u d8, #0x394
A0014714  F600C801		addsc.a a15, a12, d8, #0
A0014718  0000F519		ld.w d5, [a15]
A001471C  F0015F4B		cmp.f d15, d15, d5
A0014720  F2004F8B		eq d15, d15, #4

#1010						OR		$$TMP23	{L:259}
(*) BOOL
A0014724  8036C0BB		mov.u d8, #0x36C
A0014728  F600C801		addsc.a a15, a12, d8, #0
A001472C  0000F819		ld.w d8, [a15]
A0014730  F0A08F0F		or d15, d15, d8

#1011						JMPCN	$label39	{L:259}
(-) BOOL
A0014734  000A0FDF		jeq d15, #0, #0x000A ; JUMP 0xA0014748

#1012		
#1013						(* THEN *)
#1014		
#1015							(* FLAG_LIMITS:=TRUE; *)
#1016							LD		TRUE	{L:260}
(*) UNDEF
A0014738  F000103B		mov d15, #1

#1017							ST		FLAG_LIMITS	{L:260}
(*) BOOL
A001473C  8000C0BB		mov.u d8, #0xC
A0014740  F600C801		addsc.a a15, a12, d8, #0
A0014744  0000FF59		st.w [a15], d15

#1018		
#1019		$label39:
#1020						(* END_IF *)
#1021		
#1022						(* Time:=Time+Ts; *)
#1023						LD		Time	{L:263}
(*) UNDEF
A0014748  800280BB		mov.u d8, #0x28
A001474C  F600C801		addsc.a a15, a12, d8, #0
A0014750  0000FF19		ld.w d15, [a15]

#1024						ADD		Ts	{L:263}
(*) REAL
A0014754  8039C0BB		mov.u d8, #0x39C
A0014758  F600C801		addsc.a a15, a12, d8, #0
A001475C  0000F819		ld.w d8, [a15]
A0014760  FF21086B		add.f d15, d15, d8

#1025						ST		Time	{L:263}
(*) REAL
A0014764  800280BB		mov.u d8, #0x28
A0014768  F600C801		addsc.a a15, a12, d8, #0
A001476C  0000FF59		st.w [a15], d15

#1026		
#1027						(* tmpF := Vel_SP * 0.95; *)
#1028						LD		Vel_SP	{L:265}
(*) UNDEF
A0014770  803EC0BB		mov.u d8, #0x3EC
A0014774  F600C801		addsc.a a15, a12, d8, #0
A0014778  0000FF19		ld.w d15, [a15]

#1029						MUL		0.95	{L:265}
(*) REAL
A001477C  833330BB		mov.u d8, #0x3333 ; COSTREAL 0.950000
A0014780  83F7389B		addih d8, d8, #0x3F73
A0014784  F0418F4B		mul.f d15, d15, d8

#1030						ST		tmpF	{L:265}
(*) REAL
A0014788  800380BB		mov.u d8, #0x38
A001478C  F600C801		addsc.a a15, a12, d8, #0
A0014790  0000FF59		st.w [a15], d15

#1031		
#1032		
#1033						(* IF Speed>tmpF AND NOT(ENABLE_VARIANCE) *)
#1034						LD		ENABLE_VARIANCE	{L:268}
(*) UNDEF
A0014794  F000C001		mov.aa a15, a12
A0014798  0000FF19		ld.w d15, [a15]

#1035						NOT	{L:268}
(*) BOOL
A001479C  8000103B		mov d8, #1
A00147A0  9000003B		mov d9, #0
A00147A4  FF40892B		sel d15, d15, d9, d8

#1036						AND(		Speed	{L:268}
(*) BOOL
A00147A8  F53CAF89		st.w [-sp]4, d15 
A00147AC  803880BB		mov.u d8, #0x388
A00147B0  F600C801		addsc.a a15, a12, d8, #0
A00147B4  0000FF19		ld.w d15, [a15]

#1037						GT		tmpF	{L:268}
(*) REAL
A00147B8  800380BB		mov.u d8, #0x38
A00147BC  F600C801		addsc.a a15, a12, d8, #0
A00147C0  0000F519		ld.w d5, [a15]
A00147C4  F0015F4B		cmp.f d15, d15, d5
A00147C8  F2004F8B		eq d15, d15, #4

#1038						)	{L:268}
(*) BOOL
A00147CC  01F0F00B		mov d0, d15
A00147D0  0104AF09		ld.w d15, [sp+]4
A00147D4  F0800F0F		and d15, d15, d0

#1039						JMPCN	$label40	{L:268}
(-) BOOL
A00147D8  00140FDF		jeq d15, #0, #0x0014 ; JUMP 0xA0014800

#1040		
#1041						(* THEN *)
#1042		
#1043							(* ENABLE_VARIANCE:=TRUE; *)
#1044							LD		TRUE	{L:269}
(*) UNDEF
A00147DC  F000103B		mov d15, #1

#1045							ST		ENABLE_VARIANCE	{L:269}
(*) BOOL
A00147E0  F000C001		mov.aa a15, a12
A00147E4  0000FF59		st.w [a15], d15

#1046		
#1047							(* Time_aux:=Time; *)
#1048							LD		Time	{L:270}
(*) UNDEF
A00147E8  800280BB		mov.u d8, #0x28
A00147EC  F600C801		addsc.a a15, a12, d8, #0
A00147F0  0000FF19		ld.w d15, [a15]

#1049							ST		Time_aux	{L:270}
(*) REAL
A00147F4  8002C0BB		mov.u d8, #0x2C
A00147F8  F600C801		addsc.a a15, a12, d8, #0
A00147FC  0000FF59		st.w [a15], d15

#1050		
#1051		$label40:
#1052						(* END_IF *)
#1053		
#1054		
#1055						(* IF ENABLE_VARIANCE AND (Time>Time_aux*2.0 *)
#1056						LD		Time	{L:273}
(*) UNDEF
A0014800  800280BB		mov.u d8, #0x28
A0014804  F600C801		addsc.a a15, a12, d8, #0
A0014808  0000FF19		ld.w d15, [a15]

#1057						GT(		Time_aux	{L:273}
(*) REAL
A001480C  F53CAF89		st.w [-sp]4, d15 
A0014810  8002C0BB		mov.u d8, #0x2C
A0014814  F600C801		addsc.a a15, a12, d8, #0
A0014818  0000FF19		ld.w d15, [a15]

#1058						MUL		2.0	{L:273}
(*) REAL
A001481C  800000BB		mov.u d8, #0x0000 ; COSTREAL 2.000000
A0014820  8400089B		addih d8, d8, #0x4000
A0014824  F0418F4B		mul.f d15, d15, d8

#1059						)	{L:273}
(*) REAL
A0014828  01F0F00B		mov d0, d15
A001482C  0104AF09		ld.w d15, [sp+]4
A0014830  51F0000B		mov d5, d0
A0014834  F0015F4B		cmp.f d15, d15, d5
A0014838  F2004F8B		eq d15, d15, #4

#1060						AND		ENABLE_VARIANCE	{L:273}
(*) BOOL
A001483C  F000C001		mov.aa a15, a12
A0014840  0000F819		ld.w d8, [a15]
A0014844  F0808F0F		and d15, d15, d8

#1061						JMPCN	$label41	{L:273}
(-) BOOL
A0014848  00220FDF		jeq d15, #0, #0x0022 ; JUMP 0xA001488C

#1062		
#1063						(* THEN *)
#1064		
#1065							(* fb_VARIANCE.INPUT:=Torque_ref; *)
#1066							LD		Torque_ref	{L:274}
(*) UNDEF
A001484C  803B00BB		mov.u d8, #0x3B0
A0014850  F600C801		addsc.a a15, a12, d8, #0
A0014854  0000FF19		ld.w d15, [a15]

#1067							ST		fb_VARIANCE.INPUT	{L:274}
(*) REAL
A0014858  803400BB		mov.u d8, #0x340
A001485C  F600C801		addsc.a a15, a12, d8, #0
A0014860  0000FF59		st.w [a15], d15

#1068		
#1069							(* fb_VARIANCE() *)
#1070							CAL		fb_VARIANCE	{L:275}
(*) REAL
A0014864  F53CAF89		st.w [-sp]4, d15 
A0014868  4000C001		mov.aa a4, a12
A001486C  803240BB		mov.u d8, #0x324 ; FB FRAME BASE 0x324
A0014870  8000089B		addih d8, d8, #0x0
A0014874  46004801		addsc.a a4, a4, d8, #0
A0014878  FA001091		movh.a a15, #0xA001 ; CALL TO FB AT 0xA0012878
A001487C  12B8FFD9		lea a15,[a15]0x2878
A0014880  0000000D		nop
A0014884  00000F2D		calli a15
A0014888  0104AF09		ld.w d15, [sp+]4

#1071		
#1072		$label41:
#1073						(* END_IF *)
#1074		
#1075		
#1076						(* IF Time>Time_aux*3.0 AND ENABLE_VARIANCE AND fb_VARIANCE.SIGMA>VARIANCE_THRESHOLD *)
#1077						LD		fb_VARIANCE.SIGMA	{L:279}
(*) UNDEF
A001488C  803480BB		mov.u d8, #0x348
A0014890  F600C801		addsc.a a15, a12, d8, #0
A0014894  0000FF19		ld.w d15, [a15]

#1078						GT		VARIANCE_THRESHOLD	{L:279}
(*) REAL
A0014898  800400BB		mov.u d8, #0x40
A001489C  F600C801		addsc.a a15, a12, d8, #0
A00148A0  0000F519		ld.w d5, [a15]
A00148A4  F0015F4B		cmp.f d15, d15, d5
A00148A8  F2004F8B		eq d15, d15, #4

#1079						AND(		Time	{L:279}
(*) BOOL
A00148AC  F53CAF89		st.w [-sp]4, d15 
A00148B0  800280BB		mov.u d8, #0x28
A00148B4  F600C801		addsc.a a15, a12, d8, #0
A00148B8  0000FF19		ld.w d15, [a15]

#1080						GT(		Time_aux	{L:279}
(*) REAL
A00148BC  F53CAF89		st.w [-sp]4, d15 
A00148C0  8002C0BB		mov.u d8, #0x2C
A00148C4  F600C801		addsc.a a15, a12, d8, #0
A00148C8  0000FF19		ld.w d15, [a15]

#1081						MUL		3.0	{L:279}
(*) REAL
A00148CC  800000BB		mov.u d8, #0x0000 ; COSTREAL 3.000000
A00148D0  8404089B		addih d8, d8, #0x4040
A00148D4  F0418F4B		mul.f d15, d15, d8

#1082						)	{L:279}
(*) REAL
A00148D8  01F0F00B		mov d0, d15
A00148DC  0104AF09		ld.w d15, [sp+]4
A00148E0  51F0000B		mov d5, d0
A00148E4  F0015F4B		cmp.f d15, d15, d5
A00148E8  F2004F8B		eq d15, d15, #4

#1083						AND		ENABLE_VARIANCE	{L:279}
(*) BOOL
A00148EC  F000C001		mov.aa a15, a12
A00148F0  0000F819		ld.w d8, [a15]
A00148F4  F0808F0F		and d15, d15, d8

#1084						)	{L:279}
(*) BOOL
A00148F8  01F0F00B		mov d0, d15
A00148FC  0104AF09		ld.w d15, [sp+]4
A0014900  F0800F0F		and d15, d15, d0

#1085						JMPCN	$label42	{L:279}
(-) BOOL
A0014904  000C0FDF		jeq d15, #0, #0x000C ; JUMP 0xA001491C

#1086		
#1087						(* THEN *)
#1088		
#1089							(* Time:=100.0; *)
#1090							LD		100.0	{L:281}
(*) UNDEF
A0014908  F00000BB		mov.u d15, #0x0000 ; COSTREAL 100.000000
A001490C  F42C8F9B		addih d15, d15, #0x42C8

#1091							ST		Time	{L:281}
(*) REAL
A0014910  800280BB		mov.u d8, #0x28
A0014914  F600C801		addsc.a a15, a12, d8, #0
A0014918  0000FF59		st.w [a15], d15

#1092		
#1093		$label42:
#1094						(* END_IF *)
#1095		
#1096						(* tmpF := TrialTime*0.7; *)
#1097						LD		TrialTime	{L:285}
(*) UNDEF
A001491C  8003C0BB		mov.u d8, #0x3C
A0014920  F600C801		addsc.a a15, a12, d8, #0
A0014924  0000FF19		ld.w d15, [a15]

#1098						MUL		0.7	{L:285}
(*) REAL
A0014928  833330BB		mov.u d8, #0x3333 ; COSTREAL 0.700000
A001492C  83F3389B		addih d8, d8, #0x3F33
A0014930  F0418F4B		mul.f d15, d15, d8

#1099						ST		tmpF	{L:285}
(*) REAL
A0014934  800380BB		mov.u d8, #0x38
A0014938  F600C801		addsc.a a15, a12, d8, #0
A001493C  0000FF59		st.w [a15], d15

#1100		
#1101		
#1102						(* IF Time>tmpF) AND Time>Time_aux*3.0 AND ENABLE_VARIANCE *)
#1103						LD		Time	{L:287}
(*) UNDEF
A0014940  800280BB		mov.u d8, #0x28
A0014944  F600C801		addsc.a a15, a12, d8, #0
A0014948  0000FF19		ld.w d15, [a15]

#1104						GT(		Time_aux	{L:287}
(*) REAL
A001494C  F53CAF89		st.w [-sp]4, d15 
A0014950  8002C0BB		mov.u d8, #0x2C
A0014954  F600C801		addsc.a a15, a12, d8, #0
A0014958  0000FF19		ld.w d15, [a15]

#1105						MUL		3.0	{L:287}
(*) REAL
A001495C  800000BB		mov.u d8, #0x0000 ; COSTREAL 3.000000
A0014960  8404089B		addih d8, d8, #0x4040
A0014964  F0418F4B		mul.f d15, d15, d8

#1106						)	{L:287}
(*) REAL
A0014968  01F0F00B		mov d0, d15
A001496C  0104AF09		ld.w d15, [sp+]4
A0014970  51F0000B		mov d5, d0
A0014974  F0015F4B		cmp.f d15, d15, d5
A0014978  F2004F8B		eq d15, d15, #4

#1107						AND(		Time	{L:287}
(*) BOOL
A001497C  F53CAF89		st.w [-sp]4, d15 
A0014980  800280BB		mov.u d8, #0x28
A0014984  F600C801		addsc.a a15, a12, d8, #0
A0014988  0000FF19		ld.w d15, [a15]

#1108						GT		tmpF	{L:287}
(*) REAL
A001498C  800380BB		mov.u d8, #0x38
A0014990  F600C801		addsc.a a15, a12, d8, #0
A0014994  0000F519		ld.w d5, [a15]
A0014998  F0015F4B		cmp.f d15, d15, d5
A001499C  F2004F8B		eq d15, d15, #4

#1109						)	{L:287}
(*) BOOL
A00149A0  01F0F00B		mov d0, d15
A00149A4  0104AF09		ld.w d15, [sp+]4
A00149A8  F0800F0F		and d15, d15, d0

#1110						AND		ENABLE_VARIANCE	{L:287}
(*) BOOL
A00149AC  F000C001		mov.aa a15, a12
A00149B0  0000F819		ld.w d8, [a15]
A00149B4  F0808F0F		and d15, d15, d8

#1111						JMPCN	$label43	{L:287}
(-) BOOL
A00149B8  00A20FDF		jeq d15, #0, #0x00A2 ; JUMP 0xA0014AFC

#1112		
#1113						(* THEN *)
#1114		
#1115							(* Time:=0.0; *)
#1116							LD		0.0	{L:288}
(*) UNDEF
A00149BC  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A00149C0  F0000F9B		addih d15, d15, #0x0000

#1117							ST		Time	{L:288}
(*) REAL
A00149C4  800280BB		mov.u d8, #0x28
A00149C8  F600C801		addsc.a a15, a12, d8, #0
A00149CC  0000FF59		st.w [a15], d15

#1118		
#1119							(* Vel_SP:=0.0; *)
#1120							LD		0.0	{L:289}
(*) UNDEF
A00149D0  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A00149D4  F0000F9B		addih d15, d15, #0x0000

#1121							ST		Vel_SP	{L:289}
(*) REAL
A00149D8  803EC0BB		mov.u d8, #0x3EC
A00149DC  F600C801		addsc.a a15, a12, d8, #0
A00149E0  0000FF59		st.w [a15], d15

#1122		
#1123		
#1124							(* IF fb_VARIANCE.SIGMA>VARIANCE_THRESHOLD *)
#1125							LD		fb_VARIANCE.SIGMA	{L:292}
(*) UNDEF
A00149E4  803480BB		mov.u d8, #0x348
A00149E8  F600C801		addsc.a a15, a12, d8, #0
A00149EC  0000FF19		ld.w d15, [a15]

#1126							GT		VARIANCE_THRESHOLD	{L:292}
(*) REAL
A00149F0  800400BB		mov.u d8, #0x40
A00149F4  F600C801		addsc.a a15, a12, d8, #0
A00149F8  0000F519		ld.w d5, [a15]
A00149FC  F0015F4B		cmp.f d15, d15, d5
A0014A00  F2004F8B		eq d15, d15, #4

#1127							JMPCN	$label44	{L:292}
(-) BOOL
A0014A04  00300FDF		jeq d15, #0, #0x0030 ; JUMP 0xA0014A64

#1128		
#1129							(* THEN *)
#1130		
#1131								(* Wc_act:=Wc_act*0.75; *)
#1132								LD		Wc_act	{L:293}
(*) UNDEF
A0014A08  800440BB		mov.u d8, #0x44
A0014A0C  F600C801		addsc.a a15, a12, d8, #0
A0014A10  0000FF19		ld.w d15, [a15]

#1133								MUL		0.75	{L:293}
(*) REAL
A0014A14  800000BB		mov.u d8, #0x0000 ; COSTREAL 0.750000
A0014A18  83F4089B		addih d8, d8, #0x3F40
A0014A1C  F0418F4B		mul.f d15, d15, d8

#1134								ST		Wc_act	{L:293}
(*) REAL
A0014A20  800440BB		mov.u d8, #0x44
A0014A24  F600C801		addsc.a a15, a12, d8, #0
A0014A28  0000FF59		st.w [a15], d15

#1135		
#1136								(* TUNED:=TRUE; *)
#1137								LD		TRUE	{L:294}
(*) UNDEF
A0014A2C  F000103B		mov d15, #1

#1138								ST		TUNED	{L:294}
(*) BOOL
A0014A30  800100BB		mov.u d8, #0x10
A0014A34  F600C801		addsc.a a15, a12, d8, #0
A0014A38  0000FF59		st.w [a15], d15

#1139		
#1140								(* state	:=	6; *)
#1141								LD		6	{L:295}
(*) UNDEF
A0014A3C  F000603B		mov d15, #6

#1142								ST		state	{L:295}
(*) USINT
A0014A40  803D40BB		mov.u d8, #0x3D4
A0014A44  F600C801		addsc.a a15, a12, d8, #0
A0014A48  0800FF89		st.b [a15], d15

#1143		
#1144								(* Time:=0.0; *)
#1145								LD		0.0	{L:296}
(*) UNDEF
A0014A4C  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A0014A50  F0000F9B		addih d15, d15, #0x0000

#1146								ST		Time	{L:296}
(*) REAL
A0014A54  800280BB		mov.u d8, #0x28
A0014A58  F600C801		addsc.a a15, a12, d8, #0
A0014A5C  0000FF59		st.w [a15], d15

#1147								JMP		$label45
(-) REAL
A0014A60  004E001D		j #0x00004E ; JUMP 0xA0014AFC

#1148		$label44:
#1149		
#1150							(* ELSE *)
#1151		
#1152		
#1153								(* IF Wc_act >= MaxWc *)
#1154								LD		Wc_act	{L:298}
(*) UNDEF
A0014A64  800440BB		mov.u d8, #0x44
A0014A68  F600C801		addsc.a a15, a12, d8, #0
A0014A6C  0000FF19		ld.w d15, [a15]

#1155								GE		MaxWc	{L:298}
(*) REAL
A0014A70  803BC0BB		mov.u d8, #0x3BC
A0014A74  F600C801		addsc.a a15, a12, d8, #0
A0014A78  0000F519		ld.w d5, [a15]
A0014A7C  F0015F4B		cmp.f d15, d15, d5
A0014A80  F2201F8B		ne d15, d15, #1

#1156								JMPCN	$label46	{L:298}
(-) BOOL
A0014A84  00200FDF		jeq d15, #0, #0x0020 ; JUMP 0xA0014AC4

#1157		
#1158								(* THEN *)
#1159		
#1160									(* Wc_act:=MaxWc; *)
#1161									LD		MaxWc	{L:299}
(*) UNDEF
A0014A88  803BC0BB		mov.u d8, #0x3BC
A0014A8C  F600C801		addsc.a a15, a12, d8, #0
A0014A90  0000FF19		ld.w d15, [a15]

#1162									ST		Wc_act	{L:299}
(*) REAL
A0014A94  800440BB		mov.u d8, #0x44
A0014A98  F600C801		addsc.a a15, a12, d8, #0
A0014A9C  0000FF59		st.w [a15], d15

#1163		
#1164									(* TUNED := TRUE; *)
#1165									LD		TRUE	{L:300}
(*) UNDEF
A0014AA0  F000103B		mov d15, #1

#1166									ST		TUNED	{L:300}
(*) BOOL
A0014AA4  800100BB		mov.u d8, #0x10
A0014AA8  F600C801		addsc.a a15, a12, d8, #0
A0014AAC  0000FF59		st.w [a15], d15

#1167		
#1168									(* state := 6; *)
#1169									LD		6	{L:301}
(*) UNDEF
A0014AB0  F000603B		mov d15, #6

#1170									ST		state	{L:301}
(*) USINT
A0014AB4  803D40BB		mov.u d8, #0x3D4
A0014AB8  F600C801		addsc.a a15, a12, d8, #0
A0014ABC  0800FF89		st.b [a15], d15

#1171									JMP		$label47
(-) USINT
A0014AC0  001E001D		j #0x00001E ; JUMP 0xA0014AFC

#1172		$label46:
#1173		
#1174								(* ELSE *)
#1175		
#1176									(* Wc_act := Wc_act + Wc_Step; *)
#1177									LD		Wc_act	{L:303}
(*) UNDEF
A0014AC4  800440BB		mov.u d8, #0x44
A0014AC8  F600C801		addsc.a a15, a12, d8, #0
A0014ACC  0000FF19		ld.w d15, [a15]

#1178									ADD		Wc_Step	{L:303}
(*) REAL
A0014AD0  800540BB		mov.u d8, #0x54
A0014AD4  F600C801		addsc.a a15, a12, d8, #0
A0014AD8  0000F819		ld.w d8, [a15]
A0014ADC  FF21086B		add.f d15, d15, d8

#1179									ST		Wc_act	{L:303}
(*) REAL
A0014AE0  800440BB		mov.u d8, #0x44
A0014AE4  F600C801		addsc.a a15, a12, d8, #0
A0014AE8  0000FF59		st.w [a15], d15

#1180		
#1181									(* state := 3; *)
#1182									LD		3	{L:304}
(*) UNDEF
A0014AEC  F000303B		mov d15, #3

#1183									ST		state	{L:304}
(*) USINT
A0014AF0  803D40BB		mov.u d8, #0x3D4
A0014AF4  F600C801		addsc.a a15, a12, d8, #0
A0014AF8  0800FF89		st.b [a15], d15

#1184		
#1185		$label47:
#1186								(* END_IF *)
#1187		
#1188		$label45:
#1189							(* END_IF *)
#1190		
#1191		$label43:
#1192						(* END_IF *)
#1193		
#1194		
#1195						(* IF Time>TrialTime *)
#1196						LD		Time	{L:309}
(*) UNDEF
A0014AFC  800280BB		mov.u d8, #0x28
A0014B00  F600C801		addsc.a a15, a12, d8, #0
A0014B04  0000FF19		ld.w d15, [a15]

#1197						GT		TrialTime	{L:309}
(*) REAL
A0014B08  8003C0BB		mov.u d8, #0x3C
A0014B0C  F600C801		addsc.a a15, a12, d8, #0
A0014B10  0000F519		ld.w d5, [a15]
A0014B14  F0015F4B		cmp.f d15, d15, d5
A0014B18  F2004F8B		eq d15, d15, #4

#1198						JMPCN	$label48	{L:309}
(-) BOOL
A0014B1C  00140FDF		jeq d15, #0, #0x0014 ; JUMP 0xA0014B44

#1199		
#1200						(* THEN *)
#1201		
#1202							(* state := 3; *)
#1203							LD		3	{L:310}
(*) UNDEF
A0014B20  F000303B		mov d15, #3

#1204							ST		state	{L:310}
(*) USINT
A0014B24  803D40BB		mov.u d8, #0x3D4
A0014B28  F600C801		addsc.a a15, a12, d8, #0
A0014B2C  0800FF89		st.b [a15], d15

#1205		
#1206							(* Time_aux:=0.0; *)
#1207							LD		0.0	{L:311}
(*) UNDEF
A0014B30  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A0014B34  F0000F9B		addih d15, d15, #0x0000

#1208							ST		Time_aux	{L:311}
(*) REAL
A0014B38  8002C0BB		mov.u d8, #0x2C
A0014B3C  F600C801		addsc.a a15, a12, d8, #0
A0014B40  0000FF59		st.w [a15], d15

#1209		
#1210		$label48:
#1211						(* END_IF *)
#1212						JMP		$label4
(-) REAL
A0014B44  044C001D		j #0x00044C ; JUMP 0xA00153DC

#1213		
#1214		$label10:
#1215		
#1216						(* IF Position>maxPos OR Position<minPos OR ABS(Speed)>maxVel *)
#1217						LD		Position	{L:316}
(*) UNDEF
A0014B48  8038C0BB		mov.u d8, #0x38C
A0014B4C  F600C801		addsc.a a15, a12, d8, #0
A0014B50  0000FF19		ld.w d15, [a15]

#1218						GT		maxPos	{L:316}
(*) REAL
A0014B54  803980BB		mov.u d8, #0x398
A0014B58  F600C801		addsc.a a15, a12, d8, #0
A0014B5C  0000F519		ld.w d5, [a15]
A0014B60  F0015F4B		cmp.f d15, d15, d5
A0014B64  F2004F8B		eq d15, d15, #4

#1219						ST		$$TMP30	{L:316}
(*) BOOL
A0014B68  803700BB		mov.u d8, #0x370
A0014B6C  F600C801		addsc.a a15, a12, d8, #0
A0014B70  0000FF59		st.w [a15], d15

#1220						LD		Position	{L:316}
(*) UNDEF
A0014B74  8038C0BB		mov.u d8, #0x38C
A0014B78  F600C801		addsc.a a15, a12, d8, #0
A0014B7C  0000FF19		ld.w d15, [a15]

#1221						LT		minPos	{L:316}
(*) REAL
A0014B80  803B40BB		mov.u d8, #0x3B4
A0014B84  F600C801		addsc.a a15, a12, d8, #0
A0014B88  0000F519		ld.w d5, [a15]
A0014B8C  F0015F4B		cmp.f d15, d15, d5
A0014B90  F2001F8B		eq d15, d15, #1

#1222						OR		$$TMP30	{L:316}
(*) BOOL
A0014B94  803700BB		mov.u d8, #0x370
A0014B98  F600C801		addsc.a a15, a12, d8, #0
A0014B9C  0000F819		ld.w d8, [a15]
A0014BA0  F0A08F0F		or d15, d15, d8

#1223						ST		$$TMP31	{L:316}
(*) BOOL
A0014BA4  803740BB		mov.u d8, #0x374
A0014BA8  F600C801		addsc.a a15, a12, d8, #0
A0014BAC  0000FF59		st.w [a15], d15

#1224						LD		Speed	{L:316}
(*) UNDEF
A0014BB0  803880BB		mov.u d8, #0x388
A0014BB4  F600C801		addsc.a a15, a12, d8, #0
A0014BB8  0000FF19		ld.w d15, [a15]

#1225						ABS	{L:316}
(*) REAL
A0014BBC  41F0F00B		mov d4, d15
A0014BC0  F8009091		movh.a a15, #0x8009 ; _do_float_abs AT 0x80091CF0
A0014BC4  31F0FFD9		lea a15,[a15]0x1CF0
A0014BC8  0000000D		nop
A0014BCC  00000F2D		calli a15
A0014BD0  F1F0200B		mov d15, d2

#1226						GT		maxVel	{L:316}
(*) REAL
A0014BD4  803940BB		mov.u d8, #0x394
A0014BD8  F600C801		addsc.a a15, a12, d8, #0
A0014BDC  0000F519		ld.w d5, [a15]
A0014BE0  F0015F4B		cmp.f d15, d15, d5
A0014BE4  F2004F8B		eq d15, d15, #4

#1227						OR		$$TMP31	{L:316}
(*) BOOL
A0014BE8  803740BB		mov.u d8, #0x374
A0014BEC  F600C801		addsc.a a15, a12, d8, #0
A0014BF0  0000F819		ld.w d8, [a15]
A0014BF4  F0A08F0F		or d15, d15, d8

#1228						JMPCN	$label49	{L:316}
(-) BOOL
A0014BF8  000A0FDF		jeq d15, #0, #0x000A ; JUMP 0xA0014C0C

#1229		
#1230						(* THEN *)
#1231		
#1232							(* FLAG_LIMITS:=TRUE; *)
#1233							LD		TRUE	{L:317}
(*) UNDEF
A0014BFC  F000103B		mov d15, #1

#1234							ST		FLAG_LIMITS	{L:317}
(*) BOOL
A0014C00  8000C0BB		mov.u d8, #0xC
A0014C04  F600C801		addsc.a a15, a12, d8, #0
A0014C08  0000FF59		st.w [a15], d15

#1235		
#1236		$label49:
#1237						(* END_IF *)
#1238		
#1239						(* Time:=Time+Ts; *)
#1240						LD		Time	{L:320}
(*) UNDEF
A0014C0C  800280BB		mov.u d8, #0x28
A0014C10  F600C801		addsc.a a15, a12, d8, #0
A0014C14  0000FF19		ld.w d15, [a15]

#1241						ADD		Ts	{L:320}
(*) REAL
A0014C18  8039C0BB		mov.u d8, #0x39C
A0014C1C  F600C801		addsc.a a15, a12, d8, #0
A0014C20  0000F819		ld.w d8, [a15]
A0014C24  FF21086B		add.f d15, d15, d8

#1242						ST		Time	{L:320}
(*) REAL
A0014C28  800280BB		mov.u d8, #0x28
A0014C2C  F600C801		addsc.a a15, a12, d8, #0
A0014C30  0000FF59		st.w [a15], d15

#1243		
#1244						(* tmpF := Vel_SP * 1.0; *)
#1245						LD		Vel_SP	{L:322}
(*) UNDEF
A0014C34  803EC0BB		mov.u d8, #0x3EC
A0014C38  F600C801		addsc.a a15, a12, d8, #0
A0014C3C  0000FF19		ld.w d15, [a15]

#1246						MUL		1.0	{L:322}
(*) REAL
A0014C40  800000BB		mov.u d8, #0x0000 ; COSTREAL 1.000000
A0014C44  83F8089B		addih d8, d8, #0x3F80
A0014C48  F0418F4B		mul.f d15, d15, d8

#1247						ST		tmpF	{L:322}
(*) REAL
A0014C4C  800380BB		mov.u d8, #0x38
A0014C50  F600C801		addsc.a a15, a12, d8, #0
A0014C54  0000FF59		st.w [a15], d15

#1248		
#1249		
#1250						(* IF Speed>tmpF AND NOT(ENABLE_VARIANCE) *)
#1251						LD		ENABLE_VARIANCE	{L:324}
(*) UNDEF
A0014C58  F000C001		mov.aa a15, a12
A0014C5C  0000FF19		ld.w d15, [a15]

#1252						NOT	{L:324}
(*) BOOL
A0014C60  8000103B		mov d8, #1
A0014C64  9000003B		mov d9, #0
A0014C68  FF40892B		sel d15, d15, d9, d8

#1253						AND(		Speed	{L:324}
(*) BOOL
A0014C6C  F53CAF89		st.w [-sp]4, d15 
A0014C70  803880BB		mov.u d8, #0x388
A0014C74  F600C801		addsc.a a15, a12, d8, #0
A0014C78  0000FF19		ld.w d15, [a15]

#1254						GT		tmpF	{L:324}
(*) REAL
A0014C7C  800380BB		mov.u d8, #0x38
A0014C80  F600C801		addsc.a a15, a12, d8, #0
A0014C84  0000F519		ld.w d5, [a15]
A0014C88  F0015F4B		cmp.f d15, d15, d5
A0014C8C  F2004F8B		eq d15, d15, #4

#1255						)	{L:324}
(*) BOOL
A0014C90  01F0F00B		mov d0, d15
A0014C94  0104AF09		ld.w d15, [sp+]4
A0014C98  F0800F0F		and d15, d15, d0

#1256						JMPCN	$label50	{L:324}
(-) BOOL
A0014C9C  00140FDF		jeq d15, #0, #0x0014 ; JUMP 0xA0014CC4

#1257		
#1258						(* THEN *)
#1259		
#1260							(* ENABLE_VARIANCE:=TRUE; *)
#1261							LD		TRUE	{L:325}
(*) UNDEF
A0014CA0  F000103B		mov d15, #1

#1262							ST		ENABLE_VARIANCE	{L:325}
(*) BOOL
A0014CA4  F000C001		mov.aa a15, a12
A0014CA8  0000FF59		st.w [a15], d15

#1263		
#1264							(* Time_aux:=Time; *)
#1265							LD		Time	{L:326}
(*) UNDEF
A0014CAC  800280BB		mov.u d8, #0x28
A0014CB0  F600C801		addsc.a a15, a12, d8, #0
A0014CB4  0000FF19		ld.w d15, [a15]

#1266							ST		Time_aux	{L:326}
(*) REAL
A0014CB8  8002C0BB		mov.u d8, #0x2C
A0014CBC  F600C801		addsc.a a15, a12, d8, #0
A0014CC0  0000FF59		st.w [a15], d15

#1267		
#1268		$label50:
#1269						(* END_IF *)
#1270		
#1271		
#1272						(* IF ENABLE_VARIANCE AND (Time>Time_aux*1.5 *)
#1273						LD		Time	{L:329}
(*) UNDEF
A0014CC4  800280BB		mov.u d8, #0x28
A0014CC8  F600C801		addsc.a a15, a12, d8, #0
A0014CCC  0000FF19		ld.w d15, [a15]

#1274						GT(		Time_aux	{L:329}
(*) REAL
A0014CD0  F53CAF89		st.w [-sp]4, d15 
A0014CD4  8002C0BB		mov.u d8, #0x2C
A0014CD8  F600C801		addsc.a a15, a12, d8, #0
A0014CDC  0000FF19		ld.w d15, [a15]

#1275						MUL		1.5	{L:329}
(*) REAL
A0014CE0  800000BB		mov.u d8, #0x0000 ; COSTREAL 1.500000
A0014CE4  83FC089B		addih d8, d8, #0x3FC0
A0014CE8  F0418F4B		mul.f d15, d15, d8

#1276						)	{L:329}
(*) REAL
A0014CEC  01F0F00B		mov d0, d15
A0014CF0  0104AF09		ld.w d15, [sp+]4
A0014CF4  51F0000B		mov d5, d0
A0014CF8  F0015F4B		cmp.f d15, d15, d5
A0014CFC  F2004F8B		eq d15, d15, #4

#1277						AND		ENABLE_VARIANCE	{L:329}
(*) BOOL
A0014D00  F000C001		mov.aa a15, a12
A0014D04  0000F819		ld.w d8, [a15]
A0014D08  F0808F0F		and d15, d15, d8

#1278						JMPCN	$label51	{L:329}
(-) BOOL
A0014D0C  00220FDF		jeq d15, #0, #0x0022 ; JUMP 0xA0014D50

#1279		
#1280						(* THEN *)
#1281		
#1282							(* fb_VARIANCE.INPUT:=Torque_ref; *)
#1283							LD		Torque_ref	{L:330}
(*) UNDEF
A0014D10  803B00BB		mov.u d8, #0x3B0
A0014D14  F600C801		addsc.a a15, a12, d8, #0
A0014D18  0000FF19		ld.w d15, [a15]

#1284							ST		fb_VARIANCE.INPUT	{L:330}
(*) REAL
A0014D1C  803400BB		mov.u d8, #0x340
A0014D20  F600C801		addsc.a a15, a12, d8, #0
A0014D24  0000FF59		st.w [a15], d15

#1285		
#1286							(* fb_VARIANCE() *)
#1287							CAL		fb_VARIANCE	{L:331}
(*) REAL
A0014D28  F53CAF89		st.w [-sp]4, d15 
A0014D2C  4000C001		mov.aa a4, a12
A0014D30  803240BB		mov.u d8, #0x324 ; FB FRAME BASE 0x324
A0014D34  8000089B		addih d8, d8, #0x0
A0014D38  46004801		addsc.a a4, a4, d8, #0
A0014D3C  FA001091		movh.a a15, #0xA001 ; CALL TO FB AT 0xA0012878
A0014D40  12B8FFD9		lea a15,[a15]0x2878
A0014D44  0000000D		nop
A0014D48  00000F2D		calli a15
A0014D4C  0104AF09		ld.w d15, [sp+]4

#1288		
#1289		$label51:
#1290						(* END_IF *)
#1291		
#1292		
#1293						(* IF Time>Time_aux*6.0 AND ENABLE_VARIANCE AND fb_VARIANCE.SIGMA>VARIANCE_THRESHOLD *)
#1294						LD		fb_VARIANCE.SIGMA	{L:334}
(*) UNDEF
A0014D50  803480BB		mov.u d8, #0x348
A0014D54  F600C801		addsc.a a15, a12, d8, #0
A0014D58  0000FF19		ld.w d15, [a15]

#1295						GT		VARIANCE_THRESHOLD	{L:334}
(*) REAL
A0014D5C  800400BB		mov.u d8, #0x40
A0014D60  F600C801		addsc.a a15, a12, d8, #0
A0014D64  0000F519		ld.w d5, [a15]
A0014D68  F0015F4B		cmp.f d15, d15, d5
A0014D6C  F2004F8B		eq d15, d15, #4

#1296						AND(		Time	{L:334}
(*) BOOL
A0014D70  F53CAF89		st.w [-sp]4, d15 
A0014D74  800280BB		mov.u d8, #0x28
A0014D78  F600C801		addsc.a a15, a12, d8, #0
A0014D7C  0000FF19		ld.w d15, [a15]

#1297						GT(		Time_aux	{L:334}
(*) REAL
A0014D80  F53CAF89		st.w [-sp]4, d15 
A0014D84  8002C0BB		mov.u d8, #0x2C
A0014D88  F600C801		addsc.a a15, a12, d8, #0
A0014D8C  0000FF19		ld.w d15, [a15]

#1298						MUL		6.0	{L:334}
(*) REAL
A0014D90  800000BB		mov.u d8, #0x0000 ; COSTREAL 6.000000
A0014D94  840C089B		addih d8, d8, #0x40C0
A0014D98  F0418F4B		mul.f d15, d15, d8

#1299						)	{L:334}
(*) REAL
A0014D9C  01F0F00B		mov d0, d15
A0014DA0  0104AF09		ld.w d15, [sp+]4
A0014DA4  51F0000B		mov d5, d0
A0014DA8  F0015F4B		cmp.f d15, d15, d5
A0014DAC  F2004F8B		eq d15, d15, #4

#1300						AND		ENABLE_VARIANCE	{L:334}
(*) BOOL
A0014DB0  F000C001		mov.aa a15, a12
A0014DB4  0000F819		ld.w d8, [a15]
A0014DB8  F0808F0F		and d15, d15, d8

#1301						)	{L:334}
(*) BOOL
A0014DBC  01F0F00B		mov d0, d15
A0014DC0  0104AF09		ld.w d15, [sp+]4
A0014DC4  F0800F0F		and d15, d15, d0

#1302						JMPCN	$label52	{L:334}
(-) BOOL
A0014DC8  000C0FDF		jeq d15, #0, #0x000C ; JUMP 0xA0014DE0

#1303		
#1304						(* THEN *)
#1305		
#1306							(* Time:=100.0; *)
#1307							LD		100.0	{L:335}
(*) UNDEF
A0014DCC  F00000BB		mov.u d15, #0x0000 ; COSTREAL 100.000000
A0014DD0  F42C8F9B		addih d15, d15, #0x42C8

#1308							ST		Time	{L:335}
(*) REAL
A0014DD4  800280BB		mov.u d8, #0x28
A0014DD8  F600C801		addsc.a a15, a12, d8, #0
A0014DDC  0000FF59		st.w [a15], d15

#1309		
#1310		$label52:
#1311						(* END_IF *)
#1312		
#1313		
#1314						(* IF Time>Time_HIGH_VEL AND Time>Time_aux*2.0 *)
#1315						LD		Time	{L:339}
(*) UNDEF
A0014DE0  800280BB		mov.u d8, #0x28
A0014DE4  F600C801		addsc.a a15, a12, d8, #0
A0014DE8  0000FF19		ld.w d15, [a15]

#1316						GT(		Time_aux	{L:339}
(*) REAL
A0014DEC  F53CAF89		st.w [-sp]4, d15 
A0014DF0  8002C0BB		mov.u d8, #0x2C
A0014DF4  F600C801		addsc.a a15, a12, d8, #0
A0014DF8  0000FF19		ld.w d15, [a15]

#1317						MUL		2.0	{L:339}
(*) REAL
A0014DFC  800000BB		mov.u d8, #0x0000 ; COSTREAL 2.000000
A0014E00  8400089B		addih d8, d8, #0x4000
A0014E04  F0418F4B		mul.f d15, d15, d8

#1318						)	{L:339}
(*) REAL
A0014E08  01F0F00B		mov d0, d15
A0014E0C  0104AF09		ld.w d15, [sp+]4
A0014E10  51F0000B		mov d5, d0
A0014E14  F0015F4B		cmp.f d15, d15, d5
A0014E18  F2004F8B		eq d15, d15, #4

#1319						AND(		Time	{L:339}
(*) BOOL
A0014E1C  F53CAF89		st.w [-sp]4, d15 
A0014E20  800280BB		mov.u d8, #0x28
A0014E24  F600C801		addsc.a a15, a12, d8, #0
A0014E28  0000FF19		ld.w d15, [a15]

#1320						GT		Time_HIGH_VEL	{L:339}
(*) REAL
A0014E2C  800300BB		mov.u d8, #0x30
A0014E30  F600C801		addsc.a a15, a12, d8, #0
A0014E34  0000F519		ld.w d5, [a15]
A0014E38  F0015F4B		cmp.f d15, d15, d5
A0014E3C  F2004F8B		eq d15, d15, #4

#1321						)	{L:339}
(*) BOOL
A0014E40  01F0F00B		mov d0, d15
A0014E44  0104AF09		ld.w d15, [sp+]4
A0014E48  F0800F0F		and d15, d15, d0

#1322						JMPCN	$label53	{L:339}
(-) BOOL
A0014E4C  00CE0FDF		jeq d15, #0, #0x00CE ; JUMP 0xA0014FE8

#1323		
#1324						(* THEN *)
#1325		
#1326							(* Time:=0.0; *)
#1327							LD		0.0	{L:340}
(*) UNDEF
A0014E50  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A0014E54  F0000F9B		addih d15, d15, #0x0000

#1328							ST		Time	{L:340}
(*) REAL
A0014E58  800280BB		mov.u d8, #0x28
A0014E5C  F600C801		addsc.a a15, a12, d8, #0
A0014E60  0000FF59		st.w [a15], d15

#1329		
#1330							(* Vel_SP:=0.0; *)
#1331							LD		0.0	{L:341}
(*) UNDEF
A0014E64  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A0014E68  F0000F9B		addih d15, d15, #0x0000

#1332							ST		Vel_SP	{L:341}
(*) REAL
A0014E6C  803EC0BB		mov.u d8, #0x3EC
A0014E70  F600C801		addsc.a a15, a12, d8, #0
A0014E74  0000FF59		st.w [a15], d15

#1333		
#1334		
#1335							(* IF ENABLE_VARIANCE *)
#1336							LD		ENABLE_VARIANCE	{L:342}
(*) UNDEF
A0014E78  F000C001		mov.aa a15, a12
A0014E7C  0000FF19		ld.w d15, [a15]

#1337							JMPCN	$label54	{L:342}
(-) BOOL
A0014E80  00900FDF		jeq d15, #0, #0x0090 ; JUMP 0xA0014FA0

#1338		
#1339							(* THEN *)
#1340		
#1341		
#1342								(* IF fb_VARIANCE.SIGMA>VARIANCE_THRESHOLD *)
#1343								LD		fb_VARIANCE.SIGMA	{L:344}
(*) UNDEF
A0014E84  803480BB		mov.u d8, #0x348
A0014E88  F600C801		addsc.a a15, a12, d8, #0
A0014E8C  0000FF19		ld.w d15, [a15]

#1344								GT		VARIANCE_THRESHOLD	{L:344}
(*) REAL
A0014E90  800400BB		mov.u d8, #0x40
A0014E94  F600C801		addsc.a a15, a12, d8, #0
A0014E98  0000F519		ld.w d5, [a15]
A0014E9C  F0015F4B		cmp.f d15, d15, d5
A0014EA0  F2004F8B		eq d15, d15, #4

#1345								JMPCN	$label56	{L:344}
(-) BOOL
A0014EA4  00300FDF		jeq d15, #0, #0x0030 ; JUMP 0xA0014F04

#1346		
#1347								(* THEN *)
#1348		
#1349									(* Wc_act:=Wc_act*0.75; *)
#1350									LD		Wc_act	{L:345}
(*) UNDEF
A0014EA8  800440BB		mov.u d8, #0x44
A0014EAC  F600C801		addsc.a a15, a12, d8, #0
A0014EB0  0000FF19		ld.w d15, [a15]

#1351									MUL		0.75	{L:345}
(*) REAL
A0014EB4  800000BB		mov.u d8, #0x0000 ; COSTREAL 0.750000
A0014EB8  83F4089B		addih d8, d8, #0x3F40
A0014EBC  F0418F4B		mul.f d15, d15, d8

#1352									ST		Wc_act	{L:345}
(*) REAL
A0014EC0  800440BB		mov.u d8, #0x44
A0014EC4  F600C801		addsc.a a15, a12, d8, #0
A0014EC8  0000FF59		st.w [a15], d15

#1353		
#1354									(* TUNED:=TRUE; *)
#1355									LD		TRUE	{L:346}
(*) UNDEF
A0014ECC  F000103B		mov d15, #1

#1356									ST		TUNED	{L:346}
(*) BOOL
A0014ED0  800100BB		mov.u d8, #0x10
A0014ED4  F600C801		addsc.a a15, a12, d8, #0
A0014ED8  0000FF59		st.w [a15], d15

#1357		
#1358									(* state	:=	6; *)
#1359									LD		6	{L:347}
(*) UNDEF
A0014EDC  F000603B		mov d15, #6

#1360									ST		state	{L:347}
(*) USINT
A0014EE0  803D40BB		mov.u d8, #0x3D4
A0014EE4  F600C801		addsc.a a15, a12, d8, #0
A0014EE8  0800FF89		st.b [a15], d15

#1361		
#1362									(* Time:=0.0; *)
#1363									LD		0.0	{L:348}
(*) UNDEF
A0014EEC  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A0014EF0  F0000F9B		addih d15, d15, #0x0000

#1364									ST		Time	{L:348}
(*) REAL
A0014EF4  800280BB		mov.u d8, #0x28
A0014EF8  F600C801		addsc.a a15, a12, d8, #0
A0014EFC  0000FF59		st.w [a15], d15

#1365									JMP		$label57
(-) REAL
A0014F00  004E001D		j #0x00004E ; JUMP 0xA0014F9C

#1366		$label56:
#1367		
#1368								(* ELSE *)
#1369		
#1370		
#1371									(* IF Wc_act >= MaxWc *)
#1372									LD		Wc_act	{L:350}
(*) UNDEF
A0014F04  800440BB		mov.u d8, #0x44
A0014F08  F600C801		addsc.a a15, a12, d8, #0
A0014F0C  0000FF19		ld.w d15, [a15]

#1373									GE		MaxWc	{L:350}
(*) REAL
A0014F10  803BC0BB		mov.u d8, #0x3BC
A0014F14  F600C801		addsc.a a15, a12, d8, #0
A0014F18  0000F519		ld.w d5, [a15]
A0014F1C  F0015F4B		cmp.f d15, d15, d5
A0014F20  F2201F8B		ne d15, d15, #1

#1374									JMPCN	$label58	{L:350}
(-) BOOL
A0014F24  00200FDF		jeq d15, #0, #0x0020 ; JUMP 0xA0014F64

#1375		
#1376									(* THEN *)
#1377		
#1378										(* Wc_act:=MaxWc; *)
#1379										LD		MaxWc	{L:351}
(*) UNDEF
A0014F28  803BC0BB		mov.u d8, #0x3BC
A0014F2C  F600C801		addsc.a a15, a12, d8, #0
A0014F30  0000FF19		ld.w d15, [a15]

#1380										ST		Wc_act	{L:351}
(*) REAL
A0014F34  800440BB		mov.u d8, #0x44
A0014F38  F600C801		addsc.a a15, a12, d8, #0
A0014F3C  0000FF59		st.w [a15], d15

#1381		
#1382										(* TUNED := TRUE; *)
#1383										LD		TRUE	{L:352}
(*) UNDEF
A0014F40  F000103B		mov d15, #1

#1384										ST		TUNED	{L:352}
(*) BOOL
A0014F44  800100BB		mov.u d8, #0x10
A0014F48  F600C801		addsc.a a15, a12, d8, #0
A0014F4C  0000FF59		st.w [a15], d15

#1385		
#1386										(* state := 3; *)
#1387										LD		3	{L:353}
(*) UNDEF
A0014F50  F000303B		mov d15, #3

#1388										ST		state	{L:353}
(*) USINT
A0014F54  803D40BB		mov.u d8, #0x3D4
A0014F58  F600C801		addsc.a a15, a12, d8, #0
A0014F5C  0800FF89		st.b [a15], d15

#1389										JMP		$label59
(-) USINT
A0014F60  001E001D		j #0x00001E ; JUMP 0xA0014F9C

#1390		$label58:
#1391		
#1392									(* ELSE *)
#1393		
#1394										(* Wc_act := Wc_act + Wc_Step; *)
#1395										LD		Wc_act	{L:355}
(*) UNDEF
A0014F64  800440BB		mov.u d8, #0x44
A0014F68  F600C801		addsc.a a15, a12, d8, #0
A0014F6C  0000FF19		ld.w d15, [a15]

#1396										ADD		Wc_Step	{L:355}
(*) REAL
A0014F70  800540BB		mov.u d8, #0x54
A0014F74  F600C801		addsc.a a15, a12, d8, #0
A0014F78  0000F819		ld.w d8, [a15]
A0014F7C  FF21086B		add.f d15, d15, d8

#1397										ST		Wc_act	{L:355}
(*) REAL
A0014F80  800440BB		mov.u d8, #0x44
A0014F84  F600C801		addsc.a a15, a12, d8, #0
A0014F88  0000FF59		st.w [a15], d15

#1398		
#1399										(* state := 3; *)
#1400										LD		3	{L:356}
(*) UNDEF
A0014F8C  F000303B		mov d15, #3

#1401										ST		state	{L:356}
(*) USINT
A0014F90  803D40BB		mov.u d8, #0x3D4
A0014F94  F600C801		addsc.a a15, a12, d8, #0
A0014F98  0800FF89		st.b [a15], d15

#1402		
#1403		$label59:
#1404									(* END_IF *)
#1405		
#1406		$label57:
#1407								(* END_IF *)
#1408								JMP		$label55
(-) USINT
A0014F9C  0026001D		j #0x000026 ; JUMP 0xA0014FE8

#1409		$label54:
#1410		
#1411							(* ELSE *)
#1412		
#1413								(* FLAG_IMPOSSIBLE:=TRUE; *)
#1414								LD		TRUE	{L:360}
(*) UNDEF
A0014FA0  F000103B		mov d15, #1

#1415								ST		FLAG_IMPOSSIBLE	{L:360}
(*) BOOL
A0014FA4  800080BB		mov.u d8, #0x8
A0014FA8  F600C801		addsc.a a15, a12, d8, #0
A0014FAC  0000FF59		st.w [a15], d15

#1416		
#1417								(* Wc_act := Wc_act + Wc_Step; *)
#1418								LD		Wc_act	{L:361}
(*) UNDEF
A0014FB0  800440BB		mov.u d8, #0x44
A0014FB4  F600C801		addsc.a a15, a12, d8, #0
A0014FB8  0000FF19		ld.w d15, [a15]

#1419								ADD		Wc_Step	{L:361}
(*) REAL
A0014FBC  800540BB		mov.u d8, #0x54
A0014FC0  F600C801		addsc.a a15, a12, d8, #0
A0014FC4  0000F819		ld.w d8, [a15]
A0014FC8  FF21086B		add.f d15, d15, d8

#1420								ST		Wc_act	{L:361}
(*) REAL
A0014FCC  800440BB		mov.u d8, #0x44
A0014FD0  F600C801		addsc.a a15, a12, d8, #0
A0014FD4  0000FF59		st.w [a15], d15

#1421		
#1422								(* state := 3; *)
#1423								LD		3	{L:362}
(*) UNDEF
A0014FD8  F000303B		mov d15, #3

#1424								ST		state	{L:362}
(*) USINT
A0014FDC  803D40BB		mov.u d8, #0x3D4
A0014FE0  F600C801		addsc.a a15, a12, d8, #0
A0014FE4  0800FF89		st.b [a15], d15

#1425		
#1426		$label55:
#1427							(* END_IF *)
#1428		
#1429		$label53:
#1430						(* END_IF *)
#1431						JMP		$label4
(-) USINT
A0014FE8  01FA001D		j #0x0001FA ; JUMP 0xA00153DC

#1432		
#1433		$label11:
#1434						(* TUNED:=FALSE; *)
#1435						LD		FALSE	{L:368}
(*) UNDEF
A0014FEC  F000003B		mov d15, #0

#1436						ST		TUNED	{L:368}
(*) BOOL
A0014FF0  800100BB		mov.u d8, #0x10
A0014FF4  F600C801		addsc.a a15, a12, d8, #0
A0014FF8  0000FF59		st.w [a15], d15

#1437		
#1438						(* FLAG:=TRUE; *)
#1439						LD		TRUE	{L:369}
(*) UNDEF
A0014FFC  F000103B		mov d15, #1

#1440						ST		FLAG	{L:369}
(*) BOOL
A0015000  800040BB		mov.u d8, #0x4
A0015004  F600C801		addsc.a a15, a12, d8, #0
A0015008  0000FF59		st.w [a15], d15

#1441		
#1442						(* fb_Tune_PID.Jm:=Jm; *)
#1443						LD		Jm	{L:376}
(*) UNDEF
A001500C  803F40BB		mov.u d8, #0x3F4
A0015010  F600C801		addsc.a a15, a12, d8, #0
A0015014  0000FF19		ld.w d15, [a15]

#1444						ST		fb_Tune_PID.Jm	{L:376}
(*) REAL
A0015018  803000BB		mov.u d8, #0x300
A001501C  F600C801		addsc.a a15, a12, d8, #0
A0015020  0000FF59		st.w [a15], d15

#1445		
#1446						(* fb_Tune_PID.Bm:=Bm; *)
#1447						LD		Bm	{L:377}
(*) UNDEF
A0015024  8001C0BB		mov.u d8, #0x1C
A0015028  F600C801		addsc.a a15, a12, d8, #0
A001502C  0000FF19		ld.w d15, [a15]

#1448						ST		fb_Tune_PID.Bm	{L:377}
(*) REAL
A0015030  803040BB		mov.u d8, #0x304
A0015034  F600C801		addsc.a a15, a12, d8, #0
A0015038  0000FF59		st.w [a15], d15

#1449		
#1450						(* fb_Tune_PID.TUNE:=0; *)
#1451						LD		0	{L:378}
(*) UNDEF
A001503C  F000003B		mov d15, #0

#1452						ST		fb_Tune_PID.TUNE	{L:378}
(*) USINT
A0015040  803080BB		mov.u d8, #0x308
A0015044  F600C801		addsc.a a15, a12, d8, #0
A0015048  0800FF89		st.b [a15], d15

#1453		
#1454						(* Wc_vel:=Wc_act; *)
#1455						LD		Wc_act	{L:379}
(*) UNDEF
A001504C  800440BB		mov.u d8, #0x44
A0015050  F600C801		addsc.a a15, a12, d8, #0
A0015054  0000FF19		ld.w d15, [a15]

#1456						ST		Wc_vel	{L:379}
(*) REAL
A0015058  800580BB		mov.u d8, #0x58
A001505C  F600C801		addsc.a a15, a12, d8, #0
A0015060  0000FF59		st.w [a15], d15

#1457		
#1458						(* fb_Tune_PID.Wc_vel	:= 	Wc_vel; *)
#1459						LD		Wc_vel	{L:380}
(*) UNDEF
A0015064  800580BB		mov.u d8, #0x58
A0015068  F600C801		addsc.a a15, a12, d8, #0
A001506C  0000FF19		ld.w d15, [a15]

#1460						ST		fb_Tune_PID.Wc_vel	{L:380}
(*) REAL
A0015070  802FC0BB		mov.u d8, #0x2FC
A0015074  F600C801		addsc.a a15, a12, d8, #0
A0015078  0000FF59		st.w [a15], d15

#1461		
#1462						(* Wc_pos:=Wc_vel/100.0; *)
#1463						LD		Wc_vel	{L:381}
(*) UNDEF
A001507C  800580BB		mov.u d8, #0x58
A0015080  F600C801		addsc.a a15, a12, d8, #0
A0015084  0000FF19		ld.w d15, [a15]

#1464						DIV		100.0	{L:381}
(*) REAL
A0015088  800000BB		mov.u d8, #0x0000 ; COSTREAL 100.000000
A001508C  842C889B		addih d8, d8, #0x42C8
A0015090  F0518F4B		div.f d15, d15, d8

#1465						ST		Wc_pos	{L:381}
(*) REAL
A0015094  800500BB		mov.u d8, #0x50
A0015098  F600C801		addsc.a a15, a12, d8, #0
A001509C  0000FF59		st.w [a15], d15

#1466		
#1467						(* fb_Tune_PID.Wc_pos	:= Wc_pos; *)
#1468						LD		Wc_pos	{L:382}
(*) UNDEF
A00150A0  800500BB		mov.u d8, #0x50
A00150A4  F600C801		addsc.a a15, a12, d8, #0
A00150A8  0000FF19		ld.w d15, [a15]

#1469						ST		fb_Tune_PID.Wc_pos	{L:382}
(*) REAL
A00150AC  802F80BB		mov.u d8, #0x2F8
A00150B0  F600C801		addsc.a a15, a12, d8, #0
A00150B4  0000FF59		st.w [a15], d15

#1470		
#1471						(* fb_Tune_PID.phi_m_v := phi_m_v *(PI/180.0); *)
#1472						LD		PI	{L:383}
(*) UNDEF
A00150B8  F0FDB0BB		mov.u d15, #0x0FDB ; COSTREAL 3.141593
A00150BC  F4049F9B		addih d15, d15, #0x4049

#1473						DIV		180.0	{L:383}
(*) REAL
A00150C0  800000BB		mov.u d8, #0x0000 ; COSTREAL 180.000000
A00150C4  8433489B		addih d8, d8, #0x4334
A00150C8  F0518F4B		div.f d15, d15, d8

#1474						MUL		phi_m_v	{L:383}
(*) REAL
A00150CC  803A40BB		mov.u d8, #0x3A4
A00150D0  F600C801		addsc.a a15, a12, d8, #0
A00150D4  0000F819		ld.w d8, [a15]
A00150D8  F0418F4B		mul.f d15, d15, d8

#1475						ST		fb_Tune_PID.phi_m_v	{L:383}
(*) REAL
A00150DC  802F00BB		mov.u d8, #0x2F0
A00150E0  F600C801		addsc.a a15, a12, d8, #0
A00150E4  0000FF59		st.w [a15], d15

#1476		
#1477						(* fb_Tune_PID.phi_m_p	:= phi_m_p *(PI/180.0); *)
#1478						LD		PI	{L:384}
(*) UNDEF
A00150E8  F0FDB0BB		mov.u d15, #0x0FDB ; COSTREAL 3.141593
A00150EC  F4049F9B		addih d15, d15, #0x4049

#1479						DIV		180.0	{L:384}
(*) REAL
A00150F0  800000BB		mov.u d8, #0x0000 ; COSTREAL 180.000000
A00150F4  8433489B		addih d8, d8, #0x4334
A00150F8  F0518F4B		div.f d15, d15, d8

#1480						MUL		phi_m_p	{L:384}
(*) REAL
A00150FC  803A80BB		mov.u d8, #0x3A8
A0015100  F600C801		addsc.a a15, a12, d8, #0
A0015104  0000F819		ld.w d8, [a15]
A0015108  F0418F4B		mul.f d15, d15, d8

#1481						ST		fb_Tune_PID.phi_m_p	{L:384}
(*) REAL
A001510C  802F40BB		mov.u d8, #0x2F4
A0015110  F600C801		addsc.a a15, a12, d8, #0
A0015114  0000FF59		st.w [a15], d15

#1482		
#1483						(* fb_Tune_PID() *)
#1484						CAL		fb_Tune_PID	{L:385}
(*) REAL
A0015118  F53CAF89		st.w [-sp]4, d15 
A001511C  4000C001		mov.aa a4, a12
A0015120  802800BB		mov.u d8, #0x280 ; FB FRAME BASE 0x280
A0015124  8000089B		addih d8, d8, #0x0
A0015128  46004801		addsc.a a4, a4, d8, #0
A001512C  FA001091		movh.a a15, #0xA001 ; CALL TO FB AT 0xA0011FAC
A0015130  E1ECFFD9		lea a15,[a15]0x1FAC
A0015134  0000000D		nop
A0015138  00000F2D		calli a15
A001513C  0104AF09		ld.w d15, [sp+]4

#1485		
#1486		
#1487						(* IF TUNE_LOW_VEL *)
#1488						LD		TUNE_LOW_VEL	{L:387}
(*) UNDEF
A0015140  803F80BB		mov.u d8, #0x3F8
A0015144  F600C801		addsc.a a15, a12, d8, #0
A0015148  0000FF19		ld.w d15, [a15]

#1489						JMPCN	$label60	{L:387}
(-) BOOL
A001514C  001C0FDF		jeq d15, #0, #0x001C ; JUMP 0xA0015184

#1490		
#1491						(* THEN *)
#1492		
#1493							(* Kp_v:=fb_Tune_PID.kp_v; *)
#1494							LD		fb_Tune_PID.kp_v	{L:388}
(*) UNDEF
A0015150  803100BB		mov.u d8, #0x310
A0015154  F600C801		addsc.a a15, a12, d8, #0
A0015158  0000FF19		ld.w d15, [a15]

#1495							ST		Kp_v	{L:388}
(*) REAL
A001515C  803DC0BB		mov.u d8, #0x3DC
A0015160  F600C801		addsc.a a15, a12, d8, #0
A0015164  0000FF59		st.w [a15], d15

#1496		
#1497							(* Ti_v:=fb_Tune_PID.ti_v; *)
#1498							LD		fb_Tune_PID.ti_v	{L:389}
(*) UNDEF
A0015168  8030C0BB		mov.u d8, #0x30C
A001516C  F600C801		addsc.a a15, a12, d8, #0
A0015170  0000FF19		ld.w d15, [a15]

#1499							ST		Ti_v	{L:389}
(*) REAL
A0015174  803E40BB		mov.u d8, #0x3E4
A0015178  F600C801		addsc.a a15, a12, d8, #0
A001517C  0000FF59		st.w [a15], d15

#1500							JMP		$label61
(-) REAL
A0015180  00B4001D		j #0x0000B4 ; JUMP 0xA00152E8

#1501		$label60:
#1502		
#1503						(* ELSE *)
#1504		
#1505							(* aux:=FLOOR(fb_Tune_PID.kp_v/Kp_v*100.0); *)
#1506							LD		fb_Tune_PID.kp_v	{L:391}
(*) UNDEF
A0015184  803100BB		mov.u d8, #0x310
A0015188  F600C801		addsc.a a15, a12, d8, #0
A001518C  0000FF19		ld.w d15, [a15]

#1507							DIV		Kp_v	{L:391}
(*) REAL
A0015190  803DC0BB		mov.u d8, #0x3DC
A0015194  F600C801		addsc.a a15, a12, d8, #0
A0015198  0000F819		ld.w d8, [a15]
A001519C  F0518F4B		div.f d15, d15, d8

#1508							MUL		100.0	{L:391}
(*) REAL
A00151A0  800000BB		mov.u d8, #0x0000 ; COSTREAL 100.000000
A00151A4  842C889B		addih d8, d8, #0x42C8
A00151A8  F0418F4B		mul.f d15, d15, d8

#1509							FLOOR	{L:391}
(*) REAL
A00151AC  41F0F00B		mov d4, d15
A00151B0  F8009091		movh.a a15, #0x8009 ; _do_floor AT 0x80091CA8
A00151B4  21E8FFD9		lea a15,[a15]0x1CA8
A00151B8  0000000D		nop
A00151BC  00000F2D		calli a15
A00151C0  F1F0200B		mov d15, d2

#1510							ST		aux	{L:391}
(*) REAL
A00151C4  800180BB		mov.u d8, #0x18
A00151C8  F600C801		addsc.a a15, a12, d8, #0
A00151CC  0000FF59		st.w [a15], d15

#1511		
#1512							(* Kp_high_vel_perc:=TO_INT(FLOOR(fb_Tune_PID.kp_v/Kp_v*100.0)); *)
#1513							LD		fb_Tune_PID.kp_v	{L:392}
(*) UNDEF
A00151D0  803100BB		mov.u d8, #0x310
A00151D4  F600C801		addsc.a a15, a12, d8, #0
A00151D8  0000FF19		ld.w d15, [a15]

#1514							DIV		Kp_v	{L:392}
(*) REAL
A00151DC  803DC0BB		mov.u d8, #0x3DC
A00151E0  F600C801		addsc.a a15, a12, d8, #0
A00151E4  0000F819		ld.w d8, [a15]
A00151E8  F0518F4B		div.f d15, d15, d8

#1515							MUL		100.0	{L:392}
(*) REAL
A00151EC  800000BB		mov.u d8, #0x0000 ; COSTREAL 100.000000
A00151F0  842C889B		addih d8, d8, #0x42C8
A00151F4  F0418F4B		mul.f d15, d15, d8

#1516							FLOOR	{L:392}
(*) REAL
A00151F8  41F0F00B		mov d4, d15
A00151FC  F8009091		movh.a a15, #0x8009 ; _do_floor AT 0x80091CA8
A0015200  21E8FFD9		lea a15,[a15]0x1CA8
A0015204  0000000D		nop
A0015208  00000F2D		calli a15
A001520C  F1F0200B		mov d15, d2

#1517							TO_INT	{L:392}
(*) REAL
A0015210  F1010F4B		ftoi d15, d15

#1518							ST		Kp_high_vel_perc	{L:392}
(*) INT
A0015214  803FC0BB		mov.u d8, #0x3FC
A0015218  F600C801		addsc.a a15, a12, d8, #0
A001521C  0880FF89		st.h [a15], d15

#1519		
#1520							(* Ti_high_vel_perc := TO_INT(FLOOR( (Kp_v / Ti_v) / ( fb_Tune_PID.kp_v/fb_Tune_PID.ti_v ) * 100.0 )); *)
#1521							LD		Kp_v	{L:394}
(*) UNDEF
A0015220  803DC0BB		mov.u d8, #0x3DC
A0015224  F600C801		addsc.a a15, a12, d8, #0
A0015228  0000FF19		ld.w d15, [a15]

#1522							DIV		Ti_v	{L:394}
(*) REAL
A001522C  803E40BB		mov.u d8, #0x3E4
A0015230  F600C801		addsc.a a15, a12, d8, #0
A0015234  0000F819		ld.w d8, [a15]
A0015238  F0518F4B		div.f d15, d15, d8

#1523							ST		$$TMP38	{L:394}
(*) REAL
A001523C  803780BB		mov.u d8, #0x378
A0015240  F600C801		addsc.a a15, a12, d8, #0
A0015244  0000FF59		st.w [a15], d15

#1524							LD		fb_Tune_PID.kp_v	{L:394}
(*) UNDEF
A0015248  803100BB		mov.u d8, #0x310
A001524C  F600C801		addsc.a a15, a12, d8, #0
A0015250  0000FF19		ld.w d15, [a15]

#1525							DIV		fb_Tune_PID.ti_v	{L:394}
(*) REAL
A0015254  8030C0BB		mov.u d8, #0x30C
A0015258  F600C801		addsc.a a15, a12, d8, #0
A001525C  0000F819		ld.w d8, [a15]
A0015260  F0518F4B		div.f d15, d15, d8

#1526							ST		$$TMP39	{L:394}
(*) REAL
A0015264  8037C0BB		mov.u d8, #0x37C
A0015268  F600C801		addsc.a a15, a12, d8, #0
A001526C  0000FF59		st.w [a15], d15

#1527							LD		$$TMP38	{L:394}
(*) UNDEF
A0015270  803780BB		mov.u d8, #0x378
A0015274  F600C801		addsc.a a15, a12, d8, #0
A0015278  0000FF19		ld.w d15, [a15]

#1528							DIV		$$TMP39	{L:394}
(*) REAL
A001527C  8037C0BB		mov.u d8, #0x37C
A0015280  F600C801		addsc.a a15, a12, d8, #0
A0015284  0000F819		ld.w d8, [a15]
A0015288  F0518F4B		div.f d15, d15, d8

#1529							MUL		100.0	{L:394}
(*) REAL
A001528C  800000BB		mov.u d8, #0x0000 ; COSTREAL 100.000000
A0015290  842C889B		addih d8, d8, #0x42C8
A0015294  F0418F4B		mul.f d15, d15, d8

#1530							FLOOR	{L:394}
(*) REAL
A0015298  41F0F00B		mov d4, d15
A001529C  F8009091		movh.a a15, #0x8009 ; _do_floor AT 0x80091CA8
A00152A0  21E8FFD9		lea a15,[a15]0x1CA8
A00152A4  0000000D		nop
A00152A8  00000F2D		calli a15
A00152AC  F1F0200B		mov d15, d2

#1531							TO_INT	{L:394}
(*) REAL
A00152B0  F1010F4B		ftoi d15, d15

#1532							ST		Ti_high_vel_perc	{L:394}
(*) INT
A00152B4  803FE0BB		mov.u d8, #0x3FE
A00152B8  F600C801		addsc.a a15, a12, d8, #0
A00152BC  0880FF89		st.h [a15], d15

#1533		
#1534		
#1535							(* IF Ti_high_vel_perc > 400 *)
#1536							LD		Ti_high_vel_perc	{L:396}
(*) UNDEF
A00152C0  803FE0BB		mov.u d8, #0x3FE
A00152C4  F600C801		addsc.a a15, a12, d8, #0
A00152C8  0880FF09		ld.h d15, [a15]

#1537							GT		400	{L:396}
(*) INT
A00152CC  8019003B		mov d8, #400
A00152D0  F120F80B		lt d15, d8, d15

#1538							JMPCN	$label62	{L:396}
(-) BOOL
A00152D4  000A0FDF		jeq d15, #0, #0x000A ; JUMP 0xA00152E8

#1539		
#1540							(* THEN *)
#1541		
#1542								(* Ti_high_vel_perc := 400; *)
#1543								LD		400	{L:397}
(*) UNDEF
A00152D8  F019003B		mov d15, #400

#1544								ST		Ti_high_vel_perc	{L:397}
(*) UINT
A00152DC  803FE0BB		mov.u d8, #0x3FE
A00152E0  F600C801		addsc.a a15, a12, d8, #0
A00152E4  0880FF89		st.h [a15], d15

#1545		
#1546		$label62:
#1547							(* END_IF *)
#1548		
#1549		$label61:
#1550						(* END_IF *)
#1551		
#1552						(* UPDATE_PARAMETERS:=TRUE; *)
#1553						LD		TRUE	{L:403}
(*) UNDEF
A00152E8  F000103B		mov d15, #1

#1554						ST		UPDATE_PARAMETERS	{L:403}
(*) BOOL
A00152EC  803F00BB		mov.u d8, #0x3F0
A00152F0  F600C801		addsc.a a15, a12, d8, #0
A00152F4  0000FF59		st.w [a15], d15

#1555		
#1556		
#1557						(* IF PARAMETERS_UPDATED *)
#1558						LD		PARAMETERS_UPDATED	{L:404}
(*) UNDEF
A00152F8  803AC0BB		mov.u d8, #0x3AC
A00152FC  F600C801		addsc.a a15, a12, d8, #0
A0015300  0000FF19		ld.w d15, [a15]

#1559						JMPCN	$label63	{L:404}
(-) BOOL
A0015304  00580FDF		jeq d15, #0, #0x0058 ; JUMP 0xA00153B4

#1560		
#1561						(* THEN *)
#1562		
#1563							(* UPDATE_PARAMETERS:=FALSE; *)
#1564							LD		FALSE	{L:405}
(*) UNDEF
A0015308  F000003B		mov d15, #0

#1565							ST		UPDATE_PARAMETERS	{L:405}
(*) BOOL
A001530C  803F00BB		mov.u d8, #0x3F0
A0015310  F600C801		addsc.a a15, a12, d8, #0
A0015314  0000FF59		st.w [a15], d15

#1566		
#1567							(* PARAMETERS_UPDATED:=FALSE; *)
#1568							LD		FALSE	{L:406}
(*) UNDEF
A0015318  F000003B		mov d15, #0

#1569							ST		PARAMETERS_UPDATED	{L:406}
(*) BOOL
A001531C  803AC0BB		mov.u d8, #0x3AC
A0015320  F600C801		addsc.a a15, a12, d8, #0
A0015324  0000FF59		st.w [a15], d15

#1570		
#1571		
#1572							(* IF TUNE_LOW_VEL *)
#1573							LD		TUNE_LOW_VEL	{L:407}
(*) UNDEF
A0015328  803F80BB		mov.u d8, #0x3F8
A001532C  F600C801		addsc.a a15, a12, d8, #0
A0015330  0000FF19		ld.w d15, [a15]

#1574							JMPCN	$label64	{L:407}
(-) BOOL
A0015334  00380FDF		jeq d15, #0, #0x0038 ; JUMP 0xA00153A4

#1575		
#1576							(* THEN *)
#1577		
#1578								(* TUNE_LOW_VEL:=FALSE; *)
#1579								LD		FALSE	{L:408}
(*) UNDEF
A0015338  F000003B		mov d15, #0

#1580								ST		TUNE_LOW_VEL	{L:408}
(*) BOOL
A001533C  803F80BB		mov.u d8, #0x3F8
A0015340  F600C801		addsc.a a15, a12, d8, #0
A0015344  0000FF59		st.w [a15], d15

#1581		
#1582								(* Wc_high:=MaxWc; *)
#1583								LD		MaxWc	{L:409}
(*) UNDEF
A0015348  803BC0BB		mov.u d8, #0x3BC
A001534C  F600C801		addsc.a a15, a12, d8, #0
A0015350  0000FF19		ld.w d15, [a15]

#1584								ST		Wc_high	{L:409}
(*) REAL
A0015354  800480BB		mov.u d8, #0x48
A0015358  F600C801		addsc.a a15, a12, d8, #0
A001535C  0000FF59		st.w [a15], d15

#1585		
#1586								(* Wc_low:=MinWc; *)
#1587								LD		MinWc	{L:410}
(*) UNDEF
A0015360  803C00BB		mov.u d8, #0x3C0
A0015364  F600C801		addsc.a a15, a12, d8, #0
A0015368  0000FF19		ld.w d15, [a15]

#1588								ST		Wc_low	{L:410}
(*) REAL
A001536C  8004C0BB		mov.u d8, #0x4C
A0015370  F600C801		addsc.a a15, a12, d8, #0
A0015374  0000FF59		st.w [a15], d15

#1589		
#1590								(* Wc_act:= Wc_low; *)
#1591								LD		Wc_low	{L:411}
(*) UNDEF
A0015378  8004C0BB		mov.u d8, #0x4C
A001537C  F600C801		addsc.a a15, a12, d8, #0
A0015380  0000FF19		ld.w d15, [a15]

#1592								ST		Wc_act	{L:411}
(*) REAL
A0015384  800440BB		mov.u d8, #0x44
A0015388  F600C801		addsc.a a15, a12, d8, #0
A001538C  0000FF59		st.w [a15], d15

#1593		
#1594								(* state:=3; *)
#1595								LD		3	{L:412}
(*) UNDEF
A0015390  F000303B		mov d15, #3

#1596								ST		state	{L:412}
(*) USINT
A0015394  803D40BB		mov.u d8, #0x3D4
A0015398  F600C801		addsc.a a15, a12, d8, #0
A001539C  0800FF89		st.b [a15], d15

#1597								JMP		$label65
(-) USINT
A00153A0  000A001D		j #0x00000A ; JUMP 0xA00153B4

#1598		$label64:
#1599		
#1600							(* ELSE *)
#1601		
#1602								(* state:=7; *)
#1603								LD		7	{L:414}
(*) UNDEF
A00153A4  F000703B		mov d15, #7

#1604								ST		state	{L:414}
(*) USINT
A00153A8  803D40BB		mov.u d8, #0x3D4
A00153AC  F600C801		addsc.a a15, a12, d8, #0
A00153B0  0800FF89		st.b [a15], d15

#1605		
#1606		$label65:
#1607							(* END_IF *)
#1608		
#1609		$label63:
#1610						(* END_IF *)
#1611						JMP		$label4
(-) USINT
A00153B4  0014001D		j #0x000014 ; JUMP 0xA00153DC

#1612		
#1613		$label12:
#1614						(* Torque:=0.0; *)
#1615						LD		0.0	{L:419}
(*) UNDEF
A00153B8  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A00153BC  F0000F9B		addih d15, d15, #0x0000

#1616						ST		Torque	{L:419}
(*) REAL
A00153C0  803CC0BB		mov.u d8, #0x3CC
A00153C4  F600C801		addsc.a a15, a12, d8, #0
A00153C8  0000FF59		st.w [a15], d15

#1617		
#1618						(* END:=TRUE; *)
#1619						LD		TRUE	{L:420}
(*) UNDEF
A00153CC  F000103B		mov d15, #1

#1620						ST		END	{L:420}
(*) BOOL
A00153D0  803C80BB		mov.u d8, #0x3C8
A00153D4  F600C801		addsc.a a15, a12, d8, #0
A00153D8  0000FF59		st.w [a15], d15

#1621		$label4:
#1622		
#1623					(* END_CASE *)
#1624					JMP		$label3
(-) BOOL
A00153DC  000C001D		j #0x00000C ; JUMP 0xA00153F4

#1625		$label2:
#1626		
#1627				(* ELSE *)
#1628		
#1629					(* Torque:=0.0; *)
#1630					LD		0.0	{L:423}
(*) UNDEF
A00153E0  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A00153E4  F0000F9B		addih d15, d15, #0x0000

#1631					ST		Torque	{L:423}
(*) REAL
A00153E8  803CC0BB		mov.u d8, #0x3CC
A00153EC  F600C801		addsc.a a15, a12, d8, #0
A00153F0  0000FF59		st.w [a15], d15

#1632		
#1633		$label3:
#1634				(* END_IF *)
#1635		
#1636		$label1:
#1637			(* END_IF *)
#1638		
#1639			(* vEstInertia := fb_RLS.Jm; *)
#1640			LD		fb_RLS.Jm	{L:430}
(*) UNDEF
A00153F4  802740BB		mov.u d8, #0x274
A00153F8  F600C801		addsc.a a15, a12, d8, #0
A00153FC  0000FF19		ld.w d15, [a15]

#1641			ST		vEstInertia	{L:430}
(*) REAL
A0015400  1208CFA5		st.w #0x32048, d15 ; ADR 0xC0002048
A0015404  0000000D		nop

#1642		
#1643			(* vEstStatFrict := staticFriction; *)
#1644			LD		staticFriction	{L:431}
(*) UNDEF
A0015408  803D00BB		mov.u d8, #0x3D0
A001540C  F600C801		addsc.a a15, a12, d8, #0
A0015410  0000FF19		ld.w d15, [a15]

#1645			ST		vEstStatFrict	{L:431}
(*) REAL
A0015414  120CCFA5		st.w #0x3204C, d15 ; ADR 0xC000204C
A0015418  0000000D		nop

#1646		
#1647			(* vEstDynFrict := fb_RLS.Bm; *)
#1648			LD		fb_RLS.Bm	{L:432}
(*) UNDEF
A001541C  802780BB		mov.u d8, #0x278
A0015420  F600C801		addsc.a a15, a12, d8, #0
A0015424  0000FF19		ld.w d15, [a15]

#1649			ST		vEstDynFrict	{L:432}
(*) REAL
A0015428  1210CFA5		st.w #0x32050, d15 ; ADR 0xC0002050
A001542C  0000000D		nop

#1650		
#1651			(* vCalcKpSp := Kp_v * RPM2RAD; *)
#1652			LD		Kp_v	{L:433}
(*) UNDEF
A0015430  803DC0BB		mov.u d8, #0x3DC
A0015434  F600C801		addsc.a a15, a12, d8, #0
A0015438  0000FF19		ld.w d15, [a15]

#1653			MUL		RPM2RAD	{L:433}
(*) REAL
A001543C  877500BB		mov.u d8, #0x7750 ; COSTREAL 0.104720
A0015440  83DD689B		addih d8, d8, #0x3DD6
A0015444  F0418F4B		mul.f d15, d15, d8

#1654			ST		vCalcKpSp	{L:433}
(*) REAL
A0015448  1214CFA5		st.w #0x32054, d15 ; ADR 0xC0002054
A001544C  0000000D		nop

#1655		
#1656			(* vCalcTiSp := Ti_v * 1000.0; *)
#1657			LD		Ti_v	{L:434}
(*) UNDEF
A0015450  803E40BB		mov.u d8, #0x3E4
A0015454  F600C801		addsc.a a15, a12, d8, #0
A0015458  0000FF19		ld.w d15, [a15]

#1658			MUL		1000.0	{L:434}
(*) REAL
A001545C  800000BB		mov.u d8, #0x0000 ; COSTREAL 1000.000000
A0015460  8447A89B		addih d8, d8, #0x447A
A0015464  F0418F4B		mul.f d15, d15, d8

#1659			ST		vCalcTiSp	{L:434}
(*) REAL
A0015468  1218CFA5		st.w #0x32058, d15 ; ADR 0xC0002058
A001546C  0000000D		nop

#1660		
#1661			(* vEstBandwidth := Wc_vel; *)
#1662			LD		Wc_vel	{L:435}
(*) UNDEF
A0015470  800580BB		mov.u d8, #0x58
A0015474  F600C801		addsc.a a15, a12, d8, #0
A0015478  0000FF19		ld.w d15, [a15]

#1663			ST		vEstBandwidth	{L:435}
(*) REAL
A001547C  121CCFA5		st.w #0x3205C, d15 ; ADR 0xC000205C
A0015480  0000000D		nop

A0015484  0180000D		ret


Frame allocation:

	0380 bit  0: VAR fbInit
	0384 bit  0: VAR ENABLE
	0388       : VAR Speed
	038C       : VAR Position
	0390       : VAR maxTrq
	0394       : VAR maxVel
	0398       : VAR maxPos
	039C       : VAR Ts
	03A0       : VAR Time_identification
	03A4       : VAR phi_m_v
	03A8       : VAR phi_m_p
	03AC bit  0: VAR PARAMETERS_UPDATED
	03B0       : VAR Torque_ref
	03B4       : VAR minPos
	03B8       : VAR minVel
	03BC       : VAR MaxWc
	03C0       : VAR MinWc
	03C4       : VAR low_vel_thr
	03C8 bit  0: VAR END
	03CC       : VAR Torque
	03D0       : VAR staticFriction
	03D4       : VAR state
	03D8       : VAR noiseLevel
	03DC       : VAR Kp_v
	03E0       : VAR Kp_p
	03E4       : VAR Ti_v
	03E8       : VAR Ti_p
	03EC       : VAR Vel_SP
	03F0 bit  0: VAR UPDATE_PARAMETERS
	03F4       : VAR Jm
	03F8 bit  0: VAR TUNE_LOW_VEL
	03FC       : VAR Kp_high_vel_perc
	03FE       : VAR Ti_high_vel_perc
	0000 bit  0: VAR ENABLE_VARIANCE
	0004 bit  0: VAR FLAG
	0008 bit  0: VAR FLAG_IMPOSSIBLE
	000C bit  0: VAR FLAG_LIMITS
	0010 bit  0: VAR TUNED
	0014       : VAR NO_OF_TRIAL
	0016       : VAR Wc_counter
	0018       : VAR aux
	001C       : VAR Bm
	0020       : VAR Pos_SP
	0024       : VAR PosPreTial
	0028       : VAR Time
	002C       : VAR Time_aux
	0030       : VAR Time_HIGH_VEL
	0034       : VAR Time_RLS
	0038       : VAR tmpF
	003C       : VAR TrialTime
	0040       : VAR VARIANCE_THRESHOLD
	0044       : VAR Wc_act
	0048       : VAR Wc_high
	004C       : VAR Wc_low
	0050       : VAR Wc_pos
	0054       : VAR Wc_Step
	0058       : VAR Wc_vel
	005C       : FB  NoiseLevelID
	007C       : FB  NoiseLevelID_Trj
	008C       : FB  RAND
	00A4       : FB  StaticFrictionID
	00D4       : FB  StaticFrictionID_Trj
	00E8       : FB  OL_trj_generator
	0140       : FB  PIDp
	0198       : FB  PIDv
	01F0       : FB  fb_RLS
	0280       : FB  fb_Tune_PID
	0324       : FB  fb_VARIANCE
	034C bit  0: VAR $$TMP2
	0350 bit  0: VAR $$TMP3
	0354       : VAR $$TMP4
	0358 bit  0: VAR $$TMP5
	035C bit  0: VAR $$TMP6
	0360       : VAR $$TMP7
	0364       : VAR $$TMP8
	0368 bit  0: VAR $$TMP22
	036C bit  0: VAR $$TMP23
	0370 bit  0: VAR $$TMP30
	0374 bit  0: VAR $$TMP31
	0378       : VAR $$TMP38
	037C       : VAR $$TMP39

END_FUNCTION_BLOCK
**************************************************
	List function block: Derivative_PB
**************************************************

FUNCTION_BLOCK Derivative_PB

{ DE:"DERIVATIVE + LOW PASS FILTER	(s/(1+s*TauP))

Rev.0	10/12/99 	by SSS
Suggestion: If there is no cpu time issue use DerivativeR.

Derivativ + Low pass filter with TAUP constant.
The basic values do not have to cause an overflow (2^31) in case two of them 
are multiplied each other.

I valori base devono essere tali da non provocare overflow
quando moltiplicati tra loro

Values to be used:
Signals	10000		Limits	-20000 -> +20000
Times	1000		Limits  0 -> 25000

Note:
1000 ms  max. filter (suggested < 80 ms)
Output: max. 32.000.000 counts" }

	VAR_INPUT
	inU : DINT; { DE:"Input signal. Referred to signals base value" } 
	fS : DINT; { DE:"sampling freq =1/Ts [1/s]. 
                     i.e. cycle time =1msec -> fS:=1000 sampling freq = 1kz" } 
	tauP : DINT; { DE:"Time constant. Referred to times base value" } 
	TiN : DINT; { DE:"Times base value
                        i.e. to set TimeBase = 1 sec, tau = 10msec
                        set
                        TiN := 1000
                        tauP:= 10" } 
	END_VAR

	VAR_OUTPUT
	outY : DINT; { DE:"Output signal. Referred to signals base value" } 
	END_VAR

	VAR
	Yint : DINT; { DE:"Internal signal. Rferred to Kr * signals base value" } 
	prevInU : DINT; { DE:"Prec step input signal" } 
	Kr : DINT; { DE:"signals scale" } 
	KrN : DINT; { DE:"signals scale numerator" } 
	KrD : DINT; { DE:"signals scale denominator" } 
	END_VAR

A0015488  C0004001		mov.aa a12, a4

#0		{SRC:Derivative_PB}
#1		
#2		
#3		
#4			(*	Calcolo Kr = KrN/KrD					*)
#5			(*	= (TAUi+TiC)/TiN = (fS*tauP+TiN/fS*TiN)	*)
#6		
#7			LD		fS
(*) UNDEF
A001548C  800180BB		mov.u d8, #0x18
A0015490  F600C801		addsc.a a15, a12, d8, #0
A0015494  0000FF19		ld.w d15, [a15]

#8			MUL		tauP
(*) DINT
A0015498  8001C0BB		mov.u d8, #0x1C
A001549C  F600C801		addsc.a a15, a12, d8, #0
A00154A0  0000F819		ld.w d8, [a15]
A00154A4  F00A8F73		mul d15, d15, d8

#9			ADD		TiN
(*) DINT
A00154A8  800200BB		mov.u d8, #0x20
A00154AC  F600C801		addsc.a a15, a12, d8, #0
A00154B0  0000F819		ld.w d8, [a15]
A00154B4  F0008F0B		add d15, d15, d8

#10			ST		KrN
(*) DINT
A00154B8  8000C0BB		mov.u d8, #0xC
A00154BC  F600C801		addsc.a a15, a12, d8, #0
A00154C0  0000FF59		st.w [a15], d15

#11		
#12			LD		fS
(*) UNDEF
A00154C4  800180BB		mov.u d8, #0x18
A00154C8  F600C801		addsc.a a15, a12, d8, #0
A00154CC  0000FF19		ld.w d15, [a15]

#13			MUL		TiN
(*) DINT
A00154D0  800200BB		mov.u d8, #0x20
A00154D4  F600C801		addsc.a a15, a12, d8, #0
A00154D8  0000F819		ld.w d8, [a15]
A00154DC  F00A8F73		mul d15, d15, d8

#14			ST		KrD
(*) DINT
A00154E0  800100BB		mov.u d8, #0x10
A00154E4  F600C801		addsc.a a15, a12, d8, #0
A00154E8  0000FF59		st.w [a15], d15

#15		
#16			(*	Corpo derivativo							*)
#17			(*	Yint[k]=tauP/TiN*outY[k-1]+inU[k]-inU[k-1]	*)
#18			(*  Il segnale è referred to Yint*Kr				*)
#19		
#20			LD		tauP
(*) UNDEF
A00154EC  8001C0BB		mov.u d8, #0x1C
A00154F0  F600C801		addsc.a a15, a12, d8, #0
A00154F4  0000FF19		ld.w d15, [a15]

#21			MUL		outY
(*) DINT
A00154F8  800240BB		mov.u d8, #0x24
A00154FC  F600C801		addsc.a a15, a12, d8, #0
A0015500  0000F819		ld.w d8, [a15]
A0015504  F00A8F73		mul d15, d15, d8

#22			DIV		TiN
(*) DINT
A0015508  800200BB		mov.u d8, #0x20
A001550C  F600C801		addsc.a a15, a12, d8, #0
A0015510  0000F819		ld.w d8, [a15]
A0015514  21A08F4B		dvinit d2/d3, d15, d8
A0015518  9000303B		mov d9, #3
A001551C  F6309001		mov.a a15, d9
A0015520  22F0806B		dvstep d2/d3, d2/d3, d8
A0015524  7FFEF0FD		loop a15, #-2
A0015528  22D0806B		dvadj d2/d3, d2/d3, d8
A001552C  F1F0200B		mov d15, d2

#23			ADD		inU
(*) DINT
A0015530  800140BB		mov.u d8, #0x14
A0015534  F600C801		addsc.a a15, a12, d8, #0
A0015538  0000F819		ld.w d8, [a15]
A001553C  F0008F0B		add d15, d15, d8

#24			SUB		prevInU
(*) DINT
A0015540  800040BB		mov.u d8, #0x4
A0015544  F600C801		addsc.a a15, a12, d8, #0
A0015548  0000F819		ld.w d8, [a15]
A001554C  F0808F0B		sub d15, d15, d8

#25			ST		Yint
(*) DINT
A0015550  F000C001		mov.aa a15, a12
A0015554  0000FF59		st.w [a15], d15

#26		
#27			(*	Scalatura uscita			*)
#28			(*	outY=Yint/Kr				*)
#29		
#30			LD		KrN
(*) UNDEF
A0015558  8000C0BB		mov.u d8, #0xC
A001555C  F600C801		addsc.a a15, a12, d8, #0
A0015560  0000FF19		ld.w d15, [a15]

#31			GE		KrD
(*) DINT
A0015564  800100BB		mov.u d8, #0x10
A0015568  F600C801		addsc.a a15, a12, d8, #0
A001556C  0000F819		ld.w d8, [a15]
A0015570  F1408F0B		ge d15, d15, d8

#32			JMPCN	l1
(-) BOOL
A0015574  002A0FDF		jeq d15, #0, #0x002A ; JUMP 0xA00155C8

#33		
#34			LD		Yint
(*) UNDEF
A0015578  F000C001		mov.aa a15, a12
A001557C  0000FF19		ld.w d15, [a15]

#35			DIV		KrN
(*) DINT
A0015580  8000C0BB		mov.u d8, #0xC
A0015584  F600C801		addsc.a a15, a12, d8, #0
A0015588  0000F819		ld.w d8, [a15]
A001558C  21A08F4B		dvinit d2/d3, d15, d8
A0015590  9000303B		mov d9, #3
A0015594  F6309001		mov.a a15, d9
A0015598  22F0806B		dvstep d2/d3, d2/d3, d8
A001559C  7FFEF0FD		loop a15, #-2
A00155A0  22D0806B		dvadj d2/d3, d2/d3, d8
A00155A4  F1F0200B		mov d15, d2

#36			MUL		KrD
(*) DINT
A00155A8  800100BB		mov.u d8, #0x10
A00155AC  F600C801		addsc.a a15, a12, d8, #0
A00155B0  0000F819		ld.w d8, [a15]
A00155B4  F00A8F73		mul d15, d15, d8

#37			ST		outY
(*) DINT
A00155B8  800240BB		mov.u d8, #0x24
A00155BC  F600C801		addsc.a a15, a12, d8, #0
A00155C0  0000FF59		st.w [a15], d15

#38			JMP		l2
(-) DINT
A00155C4  0034001D		j #0x000034 ; JUMP 0xA001562C

#39		
#40		l1:
#41		
#42			LD		KrD
(*) UNDEF
A00155C8  800100BB		mov.u d8, #0x10
A00155CC  F600C801		addsc.a a15, a12, d8, #0
A00155D0  0000FF19		ld.w d15, [a15]

#43			DIV		KrN
(*) DINT
A00155D4  8000C0BB		mov.u d8, #0xC
A00155D8  F600C801		addsc.a a15, a12, d8, #0
A00155DC  0000F819		ld.w d8, [a15]
A00155E0  21A08F4B		dvinit d2/d3, d15, d8
A00155E4  9000303B		mov d9, #3
A00155E8  F6309001		mov.a a15, d9
A00155EC  22F0806B		dvstep d2/d3, d2/d3, d8
A00155F0  7FFEF0FD		loop a15, #-2
A00155F4  22D0806B		dvadj d2/d3, d2/d3, d8
A00155F8  F1F0200B		mov d15, d2

#44			ST		Kr
(*) DINT
A00155FC  800080BB		mov.u d8, #0x8
A0015600  F600C801		addsc.a a15, a12, d8, #0
A0015604  0000FF59		st.w [a15], d15

#45			LD		Yint
(*) UNDEF
A0015608  F000C001		mov.aa a15, a12
A001560C  0000FF19		ld.w d15, [a15]

#46			MUL		Kr
(*) DINT
A0015610  800080BB		mov.u d8, #0x8
A0015614  F600C801		addsc.a a15, a12, d8, #0
A0015618  0000F819		ld.w d8, [a15]
A001561C  F00A8F73		mul d15, d15, d8

#47			ST		outY
(*) DINT
A0015620  800240BB		mov.u d8, #0x24
A0015624  F600C801		addsc.a a15, a12, d8, #0
A0015628  0000FF59		st.w [a15], d15

#48		
#49		l2:
#50		
#51			LD		inU
(*) UNDEF
A001562C  800140BB		mov.u d8, #0x14
A0015630  F600C801		addsc.a a15, a12, d8, #0
A0015634  0000FF19		ld.w d15, [a15]

#52			ST		prevInU
(*) DINT
A0015638  800040BB		mov.u d8, #0x4
A001563C  F600C801		addsc.a a15, a12, d8, #0
A0015640  0000FF59		st.w [a15], d15

A0015644  0180000D		ret


Frame allocation:

	0014       : VAR inU
	0018       : VAR fS
	001C       : VAR tauP
	0020       : VAR TiN
	0024       : VAR outY
	0000       : VAR Yint
	0004       : VAR prevInU
	0008       : VAR Kr
	000C       : VAR KrN
	0010       : VAR KrD

END_FUNCTION_BLOCK
**************************************************
	List function block: DerivativeR
**************************************************

FUNCTION_BLOCK DerivativeR

{ DE:"DERIVATIVE REAL

Version 1.0	3/8/2001		by SSS

Derivative with low passing filter with floating point variables

Transfer function:
Continous time:	outY(s)/inU(s)=s/(1+tauP*s)
Discrete time:	outY(z)/inU(z)={[1-z(-1)]/Ts}/{1+[1-z(-1)]*tauP/Ts}
" }

	VAR_INPUT
	inU : REAL; { DE:"input signal" } 
	tauP : REAL; { DE:"filter time constant in sec" } 
	Ts : REAL; { DE:"Sampling time; i.e. in Fast Cycle Ts := 0.001" } 
	END_VAR

	VAR_OUTPUT
	outY : REAL; { DE:"Output signal" } 
	END_VAR

	VAR
	prevInU : REAL; { DE:"input at prec step" } 
	END_VAR

A0015648  C0004001		mov.aa a12, a4

#0		{SRC:DerivativeR}
#1			(*	Corpo derivativo												*)
#2			(*	outY[k]=1/(tauP+Ts)*outY[k-1]+tauP/(tauP+Ts)*(inU[k]-inU[k-1])	*)
#3		
#4			LD		outY
(*) UNDEF
A001564C  800100BB		mov.u d8, #0x10
A0015650  F600C801		addsc.a a15, a12, d8, #0
A0015654  0000FF19		ld.w d15, [a15]

#5			MUL		tauP
(*) REAL
A0015658  800080BB		mov.u d8, #0x8
A001565C  F600C801		addsc.a a15, a12, d8, #0
A0015660  0000F819		ld.w d8, [a15]
A0015664  F0418F4B		mul.f d15, d15, d8

#6			ADD		inU
(*) REAL
A0015668  800040BB		mov.u d8, #0x4
A001566C  F600C801		addsc.a a15, a12, d8, #0
A0015670  0000F819		ld.w d8, [a15]
A0015674  FF21086B		add.f d15, d15, d8

#7			SUB		prevInU
(*) REAL
A0015678  F000C001		mov.aa a15, a12
A001567C  0000F819		ld.w d8, [a15]
A0015680  FF31086B		sub.f d15, d15, d8

#8			DIV(	tauP
(*) REAL
A0015684  F53CAF89		st.w [-sp]4, d15 
A0015688  800080BB		mov.u d8, #0x8
A001568C  F600C801		addsc.a a15, a12, d8, #0
A0015690  0000FF19		ld.w d15, [a15]

#9			ADD		Ts
(*) REAL
A0015694  8000C0BB		mov.u d8, #0xC
A0015698  F600C801		addsc.a a15, a12, d8, #0
A001569C  0000F819		ld.w d8, [a15]
A00156A0  FF21086B		add.f d15, d15, d8

#10			)
(*) REAL
A00156A4  01F0F00B		mov d0, d15
A00156A8  0104AF09		ld.w d15, [sp+]4
A00156AC  81F0000B		mov d8, d0
A00156B0  F0518F4B		div.f d15, d15, d8

#11			ST		outY
(*) REAL
A00156B4  800100BB		mov.u d8, #0x10
A00156B8  F600C801		addsc.a a15, a12, d8, #0
A00156BC  0000FF59		st.w [a15], d15

#12		
#13			(*	Aggiornamento prevInU	*)
#14		
#15			LD		inU
(*) UNDEF
A00156C0  800040BB		mov.u d8, #0x4
A00156C4  F600C801		addsc.a a15, a12, d8, #0
A00156C8  0000FF19		ld.w d15, [a15]

#16			ST		prevInU
(*) REAL
A00156CC  F000C001		mov.aa a15, a12
A00156D0  0000FF59		st.w [a15], d15

A00156D4  0180000D		ret


Frame allocation:

	0004       : VAR inU
	0008       : VAR tauP
	000C       : VAR Ts
	0010       : VAR outY
	0000       : VAR prevInU

END_FUNCTION_BLOCK
**************************************************
	List function block: IntegratorDW
**************************************************

FUNCTION_BLOCK IntegratorDW

{ DE:"INTEGRATOR DOUBLE WORD

Version 1.0	25/10/2001		by SSS

Integrator with anti-windup function with double word variables

Transfer functions
Continuous time:
outY(s)/inU(s)=1/s
Discrete time
OutY(z)/inU(z)=Ts/[1-z(-1)]

Particular functions:
- Preset of the starting value (presetValue) when presetBit=TRUE;
- Minimum and maximum limits with anti-windup function.

Basic values to  be used:
Signals	16384
Times	4000" }

	VAR_INPUT
	inU : DINT; { DE:"Input signal. Referred to signals base value" } 
	preset : DINT; { DE:"Preset value. Referred to signals base value" } 
	fS : DINT; { DE:"sampling frequency =1/Ts [1/s]." } 
	lowLimit : DINT; { DE:"Lower limit. Referred to signals base value" } 
	highLimit : DINT; { DE:"Upper limit. Referred to signals base value" } 
	presetBit : BOOL; { DE:"Preset bit" } 
	END_VAR

	VAR_OUTPUT
	outY : DINT; { DE:"Output signal. Referred to signals base value" } 
	END_VAR

	VAR
	Yint : DINT; { DE:"Integrated internal signal. Referred to fS * signals base value" } 
	prevYint : DINT; { DE:"preceeding value of integrated internal signal" } 
	intLowLim : DINT; { DE:"Min internal limt. referred to fS * signals base value" } 
	intHighLim : DINT; { DE:"Max internal limit. referred to fS * signals base value" } 
	END_VAR

A00156D8  C0004001		mov.aa a12, a4

#0		{SRC:IntegratorDW}
#1		
#2		
#3			(*	Calcolo limiti interni		*)
#4			(*	= extLimit*fS				*)
#5		
#6			LD		lowLimit
(*) UNDEF
A00156DC  8001C0BB		mov.u d8, #0x1C
A00156E0  F600C801		addsc.a a15, a12, d8, #0
A00156E4  0000FF19		ld.w d15, [a15]

#7			MUL		fS
(*) DINT
A00156E8  800180BB		mov.u d8, #0x18
A00156EC  F600C801		addsc.a a15, a12, d8, #0
A00156F0  0000F819		ld.w d8, [a15]
A00156F4  F00A8F73		mul d15, d15, d8

#8			ST		intLowLim
(*) DINT
A00156F8  800080BB		mov.u d8, #0x8
A00156FC  F600C801		addsc.a a15, a12, d8, #0
A0015700  0000FF59		st.w [a15], d15

#9		
#10			LD		highLimit
(*) UNDEF
A0015704  800200BB		mov.u d8, #0x20
A0015708  F600C801		addsc.a a15, a12, d8, #0
A001570C  0000FF19		ld.w d15, [a15]

#11			MUL		fS
(*) DINT
A0015710  800180BB		mov.u d8, #0x18
A0015714  F600C801		addsc.a a15, a12, d8, #0
A0015718  0000F819		ld.w d8, [a15]
A001571C  F00A8F73		mul d15, d15, d8

#12			ST		intHighLim
(*) DINT
A0015720  8000C0BB		mov.u d8, #0xC
A0015724  F600C801		addsc.a a15, a12, d8, #0
A0015728  0000FF59		st.w [a15], d15

#13		
#14			(*	Settaggio Preset value	*)
#15		
#16			LD		presetBit
(*) UNDEF
A001572C  800240BB		mov.u d8, #0x24
A0015730  F600C801		addsc.a a15, a12, d8, #0
A0015734  0000FF19		ld.w d15, [a15]

#17			JMPCN	l1
(-) BOOL
A0015738  00160FDF		jeq d15, #0, #0x0016 ; JUMP 0xA0015764

#18			LD		preset
(*) UNDEF
A001573C  800140BB		mov.u d8, #0x14
A0015740  F600C801		addsc.a a15, a12, d8, #0
A0015744  0000FF19		ld.w d15, [a15]

#19			MUL		fS
(*) DINT
A0015748  800180BB		mov.u d8, #0x18
A001574C  F600C801		addsc.a a15, a12, d8, #0
A0015750  0000F819		ld.w d8, [a15]
A0015754  F00A8F73		mul d15, d15, d8

#20			ST		Yint
(*) DINT
A0015758  F000C001		mov.aa a15, a12
A001575C  0000FF59		st.w [a15], d15

#21		
#22			JMP             l2
(-) DINT
A0015760  002A001D		j #0x00002A ; JUMP 0xA00157B4

#23		
#24		l1:
#25		
#26			(*	Corpo integratore								*)
#27			(*	Yint[k]=Yint[k-1]+inU[k]						*)
#28			(*  Il segnale è referred to Yin*fS					*)
#29		
#30			LD		inU
(*) UNDEF
A0015764  800100BB		mov.u d8, #0x10
A0015768  F600C801		addsc.a a15, a12, d8, #0
A001576C  0000FF19		ld.w d15, [a15]

#31			ADD		Yint
(*) DINT
A0015770  F000C001		mov.aa a15, a12
A0015774  0000F819		ld.w d8, [a15]
A0015778  F0008F0B		add d15, d15, d8

#32			ST		Yint
(*) DINT
A001577C  F000C001		mov.aa a15, a12
A0015780  0000FF59		st.w [a15], d15

#33		
#34			(*	Verifica limiti												*)
#35			(*  Se fuori limite Yint viene posto uguale al limite stesso	*)
#36		
#37			LD		Yint
(*) UNDEF
A0015784  F000C001		mov.aa a15, a12
A0015788  0000FF19		ld.w d15, [a15]

#38			LIMIT	intLowLim, intHighLim
(*) DINT
A001578C  800080BB		mov.u d8, #0x8
A0015790  F600C801		addsc.a a15, a12, d8, #0
A0015794  0000F819		ld.w d8, [a15]
A0015798  F1A0F80B		max d15, d8, d15
A001579C  8000C0BB		mov.u d8, #0xC
A00157A0  F600C801		addsc.a a15, a12, d8, #0
A00157A4  0000F819		ld.w d8, [a15]
A00157A8  F180F80B		min d15, d8, d15

#39			ST		Yint
(*) DINT
A00157AC  F000C001		mov.aa a15, a12
A00157B0  0000FF59		st.w [a15], d15

#40		
#41		l2:
#42		
#43			(*	Scalatura uscita			*)
#44			(*	outY=Yint*YiN*ts/(UiN*TiN)	*)
#45			(*	=Yint/fS -> i valori base per i segnali devono essere uguali	*)
#46		
#47			LD		Yint
(*) UNDEF
A00157B4  F000C001		mov.aa a15, a12
A00157B8  0000FF19		ld.w d15, [a15]

#48			DIV		fS
(*) DINT
A00157BC  800180BB		mov.u d8, #0x18
A00157C0  F600C801		addsc.a a15, a12, d8, #0
A00157C4  0000F819		ld.w d8, [a15]
A00157C8  21A08F4B		dvinit d2/d3, d15, d8
A00157CC  9000303B		mov d9, #3
A00157D0  F6309001		mov.a a15, d9
A00157D4  22F0806B		dvstep d2/d3, d2/d3, d8
A00157D8  7FFEF0FD		loop a15, #-2
A00157DC  22D0806B		dvadj d2/d3, d2/d3, d8
A00157E0  F1F0200B		mov d15, d2

#49			ST		outY
(*) DINT
A00157E4  800280BB		mov.u d8, #0x28
A00157E8  F600C801		addsc.a a15, a12, d8, #0
A00157EC  0000FF59		st.w [a15], d15

A00157F0  0180000D		ret


Frame allocation:

	0010       : VAR inU
	0014       : VAR preset
	0018       : VAR fS
	001C       : VAR lowLimit
	0020       : VAR highLimit
	0024 bit  0: VAR presetBit
	0028       : VAR outY
	0000       : VAR Yint
	0004       : VAR prevYint
	0008       : VAR intLowLim
	000C       : VAR intHighLim

END_FUNCTION_BLOCK
**************************************************
	List function block: IntegratorR
**************************************************

FUNCTION_BLOCK IntegratorR

{ DE:"INTEGRATOR REAL

Version 1.0	3/8/2001		by SSS

Integrator with anti-windup function with floating point variables

Transfer functions
Continuous time:outY(s)/inU(s)=1/s
Discrete timeOutY(z)/inU(z)=Ts/[1-z(-1)]

Particular functions:
- Preset of the starting value (presetValue) when presetBit=TRUE;
- Minimum and maximum limits with anti-windup function" }

	VAR_INPUT
	inU : REAL; { DE:"Input variable" } 
	Ts : REAL; { DE:"Sampling time [s]" } 
	presetValue : REAL; { DE:"Preset value" } 
	presetBit : BOOL; { DE:"Preset command" } 
	lowLimit : REAL; { DE:"Output Lower limit " } 
	highLimit : REAL; { DE:"Output Upper limit " } 
	END_VAR

	VAR_OUTPUT
	outY : REAL; { DE:"Output variable" } 
	END_VAR

A00157F4  C0004001		mov.aa a12, a4

#0		{SRC:IntegratorR}
#1		
#2			(*	Settaggio Preset value	*)
#3		
#4			LD		presetBit
(*) UNDEF
A00157F8  8000C0BB		mov.u d8, #0xC
A00157FC  F600C801		addsc.a a15, a12, d8, #0
A0015800  0000FF19		ld.w d15, [a15]

#5			JMPCN	l1
(-) BOOL
A0015804  000E0FDF		jeq d15, #0, #0x000E ; JUMP 0xA0015820

#6			LD		presetValue
(*) UNDEF
A0015808  800080BB		mov.u d8, #0x8
A001580C  F600C801		addsc.a a15, a12, d8, #0
A0015810  0000FF19		ld.w d15, [a15]

#7			ST		outY
(*) REAL
A0015814  800180BB		mov.u d8, #0x18
A0015818  F600C801		addsc.a a15, a12, d8, #0
A001581C  0000FF59		st.w [a15], d15

#8		
#9		l1:
#10		
#11			(*	Corpo integratore					*)
#12			(*	outY[k]=outY[k-1]+inU[k]*Ts			*)
#13		
#14			LD		inU
(*) UNDEF
A0015820  F000C001		mov.aa a15, a12
A0015824  0000FF19		ld.w d15, [a15]

#15			MUL		Ts
(*) REAL
A0015828  800040BB		mov.u d8, #0x4
A001582C  F600C801		addsc.a a15, a12, d8, #0
A0015830  0000F819		ld.w d8, [a15]
A0015834  F0418F4B		mul.f d15, d15, d8

#16			ADD		outY
(*) REAL
A0015838  800180BB		mov.u d8, #0x18
A001583C  F600C801		addsc.a a15, a12, d8, #0
A0015840  0000F819		ld.w d8, [a15]
A0015844  FF21086B		add.f d15, d15, d8

#17			ST		outY
(*) REAL
A0015848  800180BB		mov.u d8, #0x18
A001584C  F600C801		addsc.a a15, a12, d8, #0
A0015850  0000FF59		st.w [a15], d15

#18		
#19			(*	Verifica limiti												*)
#20			(*  Se fuori limite outY viene posto uguale al limite stesso	*)
#21		
#22			LD		outY
(*) UNDEF
A0015854  800180BB		mov.u d8, #0x18
A0015858  F600C801		addsc.a a15, a12, d8, #0
A001585C  0000FF19		ld.w d15, [a15]

#23			LIMIT_R	lowLimit, highLimit
(-) REAL
A0015860  800140BB		mov.u d8, #0x14
A0015864  F600C801		addsc.a a15, a12, d8, #0
A0015868  0000F619		ld.w d6, [a15]
A001586C  800100BB		mov.u d8, #0x10
A0015870  F600C801		addsc.a a15, a12, d8, #0
A0015874  0000F519		ld.w d5, [a15]
A0015878  41F0F00B		mov d4, d15
A001587C  D45EFF6D		call #0xFFD45E ; CALL 0xA0010138
A0015880  F1F0200B		mov d15, d2

#24			ST		outY
(*) REAL
A0015884  800180BB		mov.u d8, #0x18
A0015888  F600C801		addsc.a a15, a12, d8, #0
A001588C  0000FF59		st.w [a15], d15

A0015890  0180000D		ret


Frame allocation:

	0000       : VAR inU
	0004       : VAR Ts
	0008       : VAR presetValue
	000C bit  0: VAR presetBit
	0010       : VAR lowLimit
	0014       : VAR highLimit
	0018       : VAR outY

END_FUNCTION_BLOCK
**************************************************
	List function block: LP_FilterDW
**************************************************

FUNCTION_BLOCK LP_FilterDW

{ DE:"LOW PASS FILTER DOUBLE WORD

Version 1.0	23/8/2001		by SSS

First order low passing filter with double integer variables (32 bits)

Transfer functions
Continuous time:outY(s)/inU(s)=1/(1+s*(tauP/TiN))
Discrete timeoutY(z)/inU(z)=1/{1+[1-z(-1)]*tauP*fS}
Particular functions:
-	Preset of the starting value (presetValue) when presetBit=TRUE.
Note:
The basic values do not have to cause an overflow (2^31) in case two of them are multiplied.
Values to be used:
Signals	16384
Times	1000-1024

" }

	VAR_INPUT
	inU : DINT; { DE:"Input signal. Referred to signals base value" } 
	fS : DINT; { DE:"sampling frequency =1/Ts [1/s]." } 
	tauP : DINT; { DE:"Time constant. Referred to times base value" } 
	TiN : DINT; { DE:"Times base value. Corresponds to 1s." } 
	presetValue : DINT; { DE:"Preset value. Referred to signals base value" } 
	presetBit : BOOL; { DE:"Preset command" } 
	END_VAR

	VAR_OUTPUT
	outY : DINT; { DE:"Output signal. Referred to signals base value" } 
	END_VAR

	VAR
	Yint : DINT; { DE:"Internal filered signal. referred to Kr * signals base value" } 
	prevYint : DINT; { DE:"Integrated internal signal. Valore precedente" } 
	Kr : DINT; { DE:"Signal scale" } 
	prevRest : DINT; { DE:"Reminder of prec step division" } 
	auxYint : DINT; { DE:"aux var for division" } 
	END_VAR

A0015894  C0004001		mov.aa a12, a4

#0		{SRC:LP_FilterDW}
#1		
#2			(*	Settaggio Preset value	*)
#3		
#4			LD		presetBit
(*) UNDEF
A0015898  800280BB		mov.u d8, #0x28
A001589C  F600C801		addsc.a a15, a12, d8, #0
A00158A0  0000FF19		ld.w d15, [a15]

#5			JMPCN	l1
(-) BOOL
A00158A4  00160FDF		jeq d15, #0, #0x0016 ; JUMP 0xA00158D0

#6		
#7			LD		presetValue
(*) UNDEF
A00158A8  800240BB		mov.u d8, #0x24
A00158AC  F600C801		addsc.a a15, a12, d8, #0
A00158B0  0000FF19		ld.w d15, [a15]

#8			ST		outY
(*) DINT
A00158B4  8002C0BB		mov.u d8, #0x2C
A00158B8  F600C801		addsc.a a15, a12, d8, #0
A00158BC  0000FF59		st.w [a15], d15

#9			RET
(-) DINT
A00158C0  FA001091		movh.a a15, #0xA001 ; 0xA00159FC
A00158C4  75BCFFD9		lea a15,[a15]0x59FC
A00158C8  0000000D		nop
A00158CC  00300F2D		ji a15

#10		
#11		l1:
#12		
#13			(*	Calcolo Kr							*)
#14			(*	= (tauP+ts)/ts = 1+(fS*tauP/TiN)	*)
#15		
#16			LD		fS
(*) UNDEF
A00158D0  800180BB		mov.u d8, #0x18
A00158D4  F600C801		addsc.a a15, a12, d8, #0
A00158D8  0000FF19		ld.w d15, [a15]

#17			MUL		tauP
(*) DINT
A00158DC  8001C0BB		mov.u d8, #0x1C
A00158E0  F600C801		addsc.a a15, a12, d8, #0
A00158E4  0000F819		ld.w d8, [a15]
A00158E8  F00A8F73		mul d15, d15, d8

#18			DIV		TiN
(*) DINT
A00158EC  800200BB		mov.u d8, #0x20
A00158F0  F600C801		addsc.a a15, a12, d8, #0
A00158F4  0000F819		ld.w d8, [a15]
A00158F8  21A08F4B		dvinit d2/d3, d15, d8
A00158FC  9000303B		mov d9, #3
A0015900  F6309001		mov.a a15, d9
A0015904  22F0806B		dvstep d2/d3, d2/d3, d8
A0015908  7FFEF0FD		loop a15, #-2
A001590C  22D0806B		dvadj d2/d3, d2/d3, d8
A0015910  F1F0200B		mov d15, d2

#19			ADD		1
(*) DINT
A0015914  F0001F8B		add d15, d15, #1

#20			ST		Kr
(*) DINT
A0015918  800080BB		mov.u d8, #0x8
A001591C  F600C801		addsc.a a15, a12, d8, #0
A0015920  0000FF59		st.w [a15], d15

#21		
#22			(*	Corpo filtro								*)
#23			(*	Yint[k]=(Kr-1)*outY[k-1]+inU[k]				*)
#24			(*  Il segnale è referred to Yin*Kr				*)
#25		
#26			LD		Kr
(*) UNDEF
A0015924  800080BB		mov.u d8, #0x8
A0015928  F600C801		addsc.a a15, a12, d8, #0
A001592C  0000FF19		ld.w d15, [a15]

#27			SUB		1
(*) DINT
A0015930  8000103B		mov d8, #1
A0015934  F0808F0B		sub d15, d15, d8

#28			MUL		outY
(*) DINT
A0015938  8002C0BB		mov.u d8, #0x2C
A001593C  F600C801		addsc.a a15, a12, d8, #0
A0015940  0000F819		ld.w d8, [a15]
A0015944  F00A8F73		mul d15, d15, d8

#29			ADD		inU
(*) DINT
A0015948  800140BB		mov.u d8, #0x14
A001594C  F600C801		addsc.a a15, a12, d8, #0
A0015950  0000F819		ld.w d8, [a15]
A0015954  F0008F0B		add d15, d15, d8

#30			ST		Yint
(*) DINT
A0015958  F000C001		mov.aa a15, a12
A001595C  0000FF59		st.w [a15], d15

#31		
#32			(*	Scalatura uscita con recupero resti			*)
#33			(*	outY=(Yint+/Kr								*)
#34		
#35			LD		Yint
(*) UNDEF
A0015960  F000C001		mov.aa a15, a12
A0015964  0000FF19		ld.w d15, [a15]

#36			ADD		prevRest
(*) DINT
A0015968  8000C0BB		mov.u d8, #0xC
A001596C  F600C801		addsc.a a15, a12, d8, #0
A0015970  0000F819		ld.w d8, [a15]
A0015974  F0008F0B		add d15, d15, d8

#37			ST		auxYint
(*) DINT
A0015978  800100BB		mov.u d8, #0x10
A001597C  F600C801		addsc.a a15, a12, d8, #0
A0015980  0000FF59		st.w [a15], d15

#38			DIV		Kr
(*) DINT
A0015984  800080BB		mov.u d8, #0x8
A0015988  F600C801		addsc.a a15, a12, d8, #0
A001598C  0000F819		ld.w d8, [a15]
A0015990  21A08F4B		dvinit d2/d3, d15, d8
A0015994  9000303B		mov d9, #3
A0015998  F6309001		mov.a a15, d9
A001599C  22F0806B		dvstep d2/d3, d2/d3, d8
A00159A0  7FFEF0FD		loop a15, #-2
A00159A4  22D0806B		dvadj d2/d3, d2/d3, d8
A00159A8  F1F0200B		mov d15, d2

#39			ST		outY
(*) DINT
A00159AC  8002C0BB		mov.u d8, #0x2C
A00159B0  F600C801		addsc.a a15, a12, d8, #0
A00159B4  0000FF59		st.w [a15], d15

#40		
#41			(*	Calcolo resto per ciclo successivo	*)
#42		
#43			LD		auxYint
(*) UNDEF
A00159B8  800100BB		mov.u d8, #0x10
A00159BC  F600C801		addsc.a a15, a12, d8, #0
A00159C0  0000FF19		ld.w d15, [a15]

#44			SUB(	Kr
(*) DINT
A00159C4  F53CAF89		st.w [-sp]4, d15 
A00159C8  800080BB		mov.u d8, #0x8
A00159CC  F600C801		addsc.a a15, a12, d8, #0
A00159D0  0000FF19		ld.w d15, [a15]

#45			MUL		outY
(*) DINT
A00159D4  8002C0BB		mov.u d8, #0x2C
A00159D8  F600C801		addsc.a a15, a12, d8, #0
A00159DC  0000F819		ld.w d8, [a15]
A00159E0  F00A8F73		mul d15, d15, d8

#46			)
(*) DINT
A00159E4  01F0F00B		mov d0, d15
A00159E8  0104AF09		ld.w d15, [sp+]4
A00159EC  F0800F0B		sub d15, d15, d0

#47			ST		prevRest
(*) DINT
A00159F0  8000C0BB		mov.u d8, #0xC
A00159F4  F600C801		addsc.a a15, a12, d8, #0
A00159F8  0000FF59		st.w [a15], d15

A00159FC  0180000D		ret


Frame allocation:

	0014       : VAR inU
	0018       : VAR fS
	001C       : VAR tauP
	0020       : VAR TiN
	0024       : VAR presetValue
	0028 bit  0: VAR presetBit
	002C       : VAR outY
	0000       : VAR Yint
	0004       : VAR prevYint
	0008       : VAR Kr
	000C       : VAR prevRest
	0010       : VAR auxYint

END_FUNCTION_BLOCK
**************************************************
	List function block: LineFB
**************************************************

FUNCTION_BLOCK LineFB

{ DE:"4/10/2001			by SSS

Calculation of the line passing through two points with the following coordinates (xIni,yIni), (xEnd,yEnd)

Result=yIni+(yEnd-yIni)/(xEnd-xIni)*(x-xIni)" }

	VAR_INPUT
	inX : DINT; { DE:"Input X [cnts]" } 
	xIni : DINT; { DE:"Initial X [cnts]" } 
	yIni : DINT; { DE:"Initial Y [cnts]" } 
	xEnd : DINT; { DE:"Final X [cnts]" } 
	yEnd : DINT; { DE:"Final Y [cnts]" } 
	END_VAR

	VAR_OUTPUT
	outY : DINT; { DE:"Output Y [cnts]" } 
	END_VAR

A0015A00  C0004001		mov.aa a12, a4

#0		{SRC:LineFB}
#1		
#2			LD		inX
(*) UNDEF
A0015A04  F000C001		mov.aa a15, a12
A0015A08  0000FF19		ld.w d15, [a15]

#3			SUB		xIni
(*) DINT
A0015A0C  800040BB		mov.u d8, #0x4
A0015A10  F600C801		addsc.a a15, a12, d8, #0
A0015A14  0000F819		ld.w d8, [a15]
A0015A18  F0808F0B		sub d15, d15, d8

#4			MUL(	yEnd
(*) DINT
A0015A1C  F53CAF89		st.w [-sp]4, d15 
A0015A20  800100BB		mov.u d8, #0x10
A0015A24  F600C801		addsc.a a15, a12, d8, #0
A0015A28  0000FF19		ld.w d15, [a15]

#5			SUB		yIni
(*) DINT
A0015A2C  800080BB		mov.u d8, #0x8
A0015A30  F600C801		addsc.a a15, a12, d8, #0
A0015A34  0000F819		ld.w d8, [a15]
A0015A38  F0808F0B		sub d15, d15, d8

#6			)
(*) DINT
A0015A3C  01F0F00B		mov d0, d15
A0015A40  0104AF09		ld.w d15, [sp+]4
A0015A44  F00A0F73		mul d15, d15, d0

#7			DIV(	xEnd
(*) DINT
A0015A48  F53CAF89		st.w [-sp]4, d15 
A0015A4C  8000C0BB		mov.u d8, #0xC
A0015A50  F600C801		addsc.a a15, a12, d8, #0
A0015A54  0000FF19		ld.w d15, [a15]

#8			SUB		xIni
(*) DINT
A0015A58  800040BB		mov.u d8, #0x4
A0015A5C  F600C801		addsc.a a15, a12, d8, #0
A0015A60  0000F819		ld.w d8, [a15]
A0015A64  F0808F0B		sub d15, d15, d8

#9			)
(*) DINT
A0015A68  01F0F00B		mov d0, d15
A0015A6C  0104AF09		ld.w d15, [sp+]4
A0015A70  81F0000B		mov d8, d0
A0015A74  21A08F4B		dvinit d2/d3, d15, d8
A0015A78  9000303B		mov d9, #3
A0015A7C  F6309001		mov.a a15, d9
A0015A80  22F0806B		dvstep d2/d3, d2/d3, d8
A0015A84  7FFEF0FD		loop a15, #-2
A0015A88  22D0806B		dvadj d2/d3, d2/d3, d8
A0015A8C  F1F0200B		mov d15, d2

#10			ADD		yIni
(*) DINT
A0015A90  800080BB		mov.u d8, #0x8
A0015A94  F600C801		addsc.a a15, a12, d8, #0
A0015A98  0000F819		ld.w d8, [a15]
A0015A9C  F0008F0B		add d15, d15, d8

#11			ST		outY
(*) DINT
A0015AA0  800140BB		mov.u d8, #0x14
A0015AA4  F600C801		addsc.a a15, a12, d8, #0
A0015AA8  0000FF59		st.w [a15], d15

A0015AAC  0180000D		ret


Frame allocation:

	0000       : VAR inX
	0004       : VAR xIni
	0008       : VAR yIni
	000C       : VAR xEnd
	0010       : VAR yEnd
	0014       : VAR outY

END_FUNCTION_BLOCK
**************************************************
	List program: cyclic_prg
**************************************************

PROGRAM cyclic_prg

	VAR
	AUTOTUNING : BOOL; 
	Load : LOAD; 
	time : REAL; 
	TAU : REAL; 
	timeAT : REAL; 
	pos : REAL; 
	vel : REAL; 
	rnd : fb_Random; 
	NOISE : REAL; 
	aux00 : REAL; 
	Position_SP : REAL; 
	VEL_SP_ : REAL; 
	VEL_TESTING : REAL; 
	END_VAR

#0		{SRC:cyclic_prg}
#1		
#2			(* InputConv.sysSpd 	:= 	sysSpd; *)
#3			LD		sysSpd	{L:2}
(*) UNDEF
A0015AB0  4088CF85		ld.w d15, #0x30908 ; ADR 0xC0000908

#4			ST		InputConv.sysSpd	{L:2}
(*) DINT
A0015AB4  3058CFA5		st.w #0x304D8, d15 ; ADR 0xC00004D8

#5		
#6			(* InputConv.sysPos 	:= 	sysPos; *)
#7			LD		sysPos	{L:3}
(*) UNDEF
A0015AB8  408CCF85		ld.w d15, #0x3090C ; ADR 0xC000090C

#8			ST		InputConv.sysPos	{L:3}
(*) DINT
A0015ABC  3054CFA5		st.w #0x304D4, d15 ; ADR 0xC00004D4

#9		
#10			(* InputConv.sysIq 	:= 	sysIq; *)
#11			LD		sysIq	{L:4}
(*) UNDEF
A0015AC0  4090CF85		ld.w d15, #0x30910 ; ADR 0xC0000910

#12			ST		InputConv.sysIq	{L:4}
(*) DINT
A0015AC4  305CCFA5		st.w #0x304DC, d15 ; ADR 0xC00004DC

#13		
#14			(* InputConv.sysTrqRef := 	sysTrqRef; *)
#15			LD		sysTrqRef	{L:5}
(*) UNDEF
A0015AC8  3350DF85		ld.w d15, #0x374D0 ; ADR 0xD00034D0

#16			ST		InputConv.sysTrqRef	{L:5}
(*) DINT
A0015ACC  3060CFA5		st.w #0x304E0, d15 ; ADR 0xC00004E0

#17		
#18			(* InputConv.sysRev 	:= 	sysRev; *)
#19			LD		sysRev	{L:6}
(*) UNDEF
A0015AD0  4094CF85		ld.w d15, #0x30914 ; ADR 0xC0000914

#20			ST		InputConv.sysRev	{L:6}
(*) DINT
A0015AD4  306CCFA5		st.w #0x304EC, d15 ; ADR 0xC00004EC

#21		
#22			(* InputConv.PosDINT	:=	sysSpeedPosPulsesPerRev; *)
#23			LD		sysSpeedPosPulsesPerRev	{L:7}
(*) UNDEF
A0015AD8  22F8DF85		ld.w d15, #0x36CB8 ; ADR 0xD0002CB8

#24			ST		InputConv.PosDINT	{L:7}
(*) DINT
A0015ADC  3064CFA5		st.w #0x304E4, d15 ; ADR 0xC00004E4

#25		
#26			(* InputConv._sysTrqNoFilt := 	sysTrqNoFilt; *)
#27			LD		sysTrqNoFilt	{L:8}
(*) UNDEF
A0015AE0  4098CF85		ld.w d15, #0x30918 ; ADR 0xC0000918

#28			ST		InputConv._sysTrqNoFilt	{L:8}
(*) DINT
A0015AE4  3070CFA5		st.w #0x304F0, d15 ; ADR 0xC00004F0

#29		
#30			(* InputConv() *)
#31			CAL		InputConv	{L:9}
(*) DINT
A0015AE8  F53CAF89		st.w [-sp]4, d15 
A0015AEC  4C000091		movh.a a4, #0xC000 ; FB FRAME BASE 0xC00004C4
A0015AF0  304444D9		lea a4,[a4]0x04C4
A0015AF4  FA001091		movh.a a15, #0xA001 ; CALL TO FB AT 0xA0010C74
A0015AF8  10F4FFD9		lea a15,[a15]0x0C74
A0015AFC  0000000D		nop
A0015B00  00000F2D		calli a15
A0015B04  0104AF09		ld.w d15, [sp+]4

#32		
#33			(* Torque_bis := v_Torque; *)
#34			LD		v_Torque	{L:10}
(*) UNDEF
A0015B08  0238CF85		ld.w d15, #0x32038 ; ADR 0xC0002038

#35			ST		Torque_bis	{L:10}
(*) REAL
A0015B0C  409CCFA5		st.w #0x3091C, d15 ; ADR 0xC000091C

#36		
#37			(* sysPad10 := TO_DINT(Torque_bis * 1000.0); *)
#38			LD		Torque_bis	{L:11}
(*) UNDEF
A0015B10  409CCF85		ld.w d15, #0x3091C ; ADR 0xC000091C

#39			MUL		1000.0	{L:11}
(*) REAL
A0015B14  800000BB		mov.u d8, #0x0000 ; COSTREAL 1000.000000
A0015B18  8447A89B		addih d8, d8, #0x447A
A0015B1C  F0418F4B		mul.f d15, d15, d8

#40			TO_DINT	{L:11}
(*) REAL
A0015B20  F1010F4B		ftoi d15, d15

#41			ST		sysPad10	{L:11}
(*) DINT
A0015B24  72A8DFA5		st.w #0x369E8, d15 ; ADR 0xD00029E8

#42		
#43			(* sysPad11 := TO_DINT(TO_REAL(sysTrqRefNoFilt) * InputConv.KCnt2Nm * 1000.0); *)
#44			LD		sysTrqRefNoFilt	{L:12}
(*) UNDEF
A0015B28  40A0CF85		ld.w d15, #0x30920 ; ADR 0xC0000920

#45			TO_REAL	{L:12}
(*) DINT
A0015B2C  F1410F4B		itof d15, d15

#46			MUL		InputConv.KCnt2Nm	{L:12}
(*) REAL
A0015B30  3050C885		ld.w d8, #0x304D0 ; ADR 0xC00004D0
A0015B34  F0418F4B		mul.f d15, d15, d8

#47			MUL		1000.0	{L:12}
(*) REAL
A0015B38  800000BB		mov.u d8, #0x0000 ; COSTREAL 1000.000000
A0015B3C  8447A89B		addih d8, d8, #0x447A
A0015B40  F0418F4B		mul.f d15, d15, d8

#48			TO_DINT	{L:12}
(*) REAL
A0015B44  F1010F4B		ftoi d15, d15

#49			ST		sysPad11	{L:12}
(*) DINT
A0015B48  72ACDFA5		st.w #0x369EC, d15 ; ADR 0xD00029EC

#50		
#51			(* StartCND := (pStartAuto) AND (sysEnableStatus) AND (sysStartStatus); *)
#52			LD		pStartAuto	{L:14}
(*) UNDEF
A0015B4C  D180CF85		ld.w d15, #0x31B40 ; ADR 0xC0001B40

#53			AND		sysEnableStatus	{L:14}
(*) BOOL
A0015B50  03E0D885		ld.w d8, #0x37C20 ; ADR 0xD0003C20
A0015B54  F0808F0F		and d15, d15, d8

#54			AND		sysStartStatus	{L:14}
(*) BOOL
A0015B58  03E4D885		ld.w d8, #0x37C24 ; ADR 0xD0003C24
A0015B5C  F0808F0F		and d15, d15, d8

#55			ST		StartCND	{L:14}
(*) BOOL
A0015B60  40A4CFA5		st.w #0x30924, d15 ; ADR 0xC0000924

#56		
#57		
#58			(* CASE State_internal OF *)
#59		
#60			(* 1: *)
#61			LD		State_internal	{L:17}
(*) UNDEF
A0015B64  48A8CF05		ld.h d15, #0x30928 ; ADR 0xC0000928

#62			EQ		1	{L:17}
(*) INT
A0015B68  8000103B		mov d8, #1
A0015B6C  F1008F0B		eq d15, d15, d8

#63			JMPC	$label1
(-) BOOL
A0015B70  800C0FDF		jne d15, #0, #0x000C ; JUMP 0xA0015B88

#64		
#65			(* 2: *)
#66			LD		State_internal	{L:27}
(*) UNDEF
A0015B74  48A8CF05		ld.h d15, #0x30928 ; ADR 0xC0000928

#67			EQ		2	{L:27}
(*) INT
A0015B78  8000203B		mov d8, #2
A0015B7C  F1008F0B		eq d15, d15, d8

#68			JMPC	$label2
(-) BOOL
A0015B80  802E0FDF		jne d15, #0, #0x002E ; JUMP 0xA0015BDC

#69			JMP		$label0
(-) BOOL
A0015B84  0036001D		j #0x000036 ; JUMP 0xA0015BF0

#70		
#71			(* Istruzioni di ciascun CASE: *)
#72		
#73		$label1:
#74				(* AutotuningManager.ENABLE   := TRUE; *)
#75				LD		TRUE	{L:19}
(*) UNDEF
A0015B88  F000103B		mov d15, #1

#76				ST		AutotuningManager.ENABLE	{L:19}
(*) BOOL
A0015B8C  208CCFA5		st.w #0x3088C, d15 ; ADR 0xC000088C

#77		
#78				(* AutotuningManager.Speed    := v_Speed; *)
#79				LD		v_Speed	{L:20}
(*) UNDEF
A0015B90  0234CF85		ld.w d15, #0x32034 ; ADR 0xC0002034

#80				ST		AutotuningManager.Speed	{L:20}
(*) REAL
A0015B94  2090CFA5		st.w #0x30890, d15 ; ADR 0xC0000890

#81		
#82				(* AutotuningManager.Position := v_Position; *)
#83				LD		v_Position	{L:21}
(*) UNDEF
A0015B98  0230CF85		ld.w d15, #0x32030 ; ADR 0xC0002030

#84				ST		AutotuningManager.Position	{L:21}
(*) REAL
A0015B9C  2094CFA5		st.w #0x30894, d15 ; ADR 0xC0000894

#85		
#86				(* AutotuningManager.Torque_ref := Torque_bis; *)
#87				LD		Torque_bis	{L:22}
(*) UNDEF
A0015BA0  409CCF85		ld.w d15, #0x3091C ; ADR 0xC000091C

#88				ST		AutotuningManager.Torque_ref	{L:22}
(*) REAL
A0015BA4  20B8CFA5		st.w #0x308B8, d15 ; ADR 0xC00008B8

#89		
#90				(* AutotuningManager() *)
#91				CAL		AutotuningManager	{L:23}
(*) REAL
A0015BA8  F53CAF89		st.w [-sp]4, d15 
A0015BAC  4C000091		movh.a a4, #0xC000 ; FB FRAME BASE 0xC0000508
A0015BB0  404844D9		lea a4,[a4]0x0508
A0015BB4  FA001091		movh.a a15, #0xA001 ; CALL TO FB AT 0xA0012F6C
A0015BB8  D2ECFFD9		lea a15,[a15]0x2F6C
A0015BBC  0000000D		nop
A0015BC0  00000F2D		calli a15
A0015BC4  0104AF09		ld.w d15, [sp+]4

#92		
#93				(* v_Torque := AutotuningManager.Torque; *)
#94				LD		AutotuningManager.Torque	{L:24}
(*) UNDEF
A0015BC8  3094CF85		ld.w d15, #0x308D4 ; ADR 0xC00008D4

#95				ST		v_Torque	{L:24}
(*) REAL
A0015BCC  0238CFA5		st.w #0x32038, d15 ; ADR 0xC0002038

#96		
#97				(* VEL_SP_:=AutotuningManager.Vel_SP; *)
#98				LD		AutotuningManager.Vel_SP	{L:25}
(*) UNDEF
A0015BD0  30B4CF85		ld.w d15, #0x308F4 ; ADR 0xC00008F4

#99				ST		VEL_SP_	{L:25}
(*) REAL
A0015BD4  40AACFA5		st.w #0x3092A, d15 ; ADR 0xC000092A

#100				JMP		$label0
(-) REAL
A0015BD8  000C001D		j #0x00000C ; JUMP 0xA0015BF0

#101		
#102		$label2:
#103				(* VEL_SP_:=VEL_TESTING; *)
#104				LD		VEL_TESTING	{L:29}
(*) UNDEF
A0015BDC  40AECF85		ld.w d15, #0x3092E ; ADR 0xC000092E

#105				ST		VEL_SP_	{L:29}
(*) REAL
A0015BE0  40AACFA5		st.w #0x3092A, d15 ; ADR 0xC000092A

#106		
#107				(* v_Torque	:= 0.0; *)
#108				LD		0.0	{L:30}
(*) UNDEF
A0015BE4  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A0015BE8  F0000F9B		addih d15, d15, #0x0000

#109				ST		v_Torque	{L:30}
(*) REAL
A0015BEC  0238CFA5		st.w #0x32038, d15 ; ADR 0xC0002038

#110		$label0:
#111		
#112			(* END_CASE *)
#113		
#114		
#115			(* IF v_Torque > MaxTorque *)
#116			LD		v_Torque	{L:36}
(*) UNDEF
A0015BF0  0238CF85		ld.w d15, #0x32038 ; ADR 0xC0002038

#117			GT		MaxTorque	{L:36}
(*) REAL
A0015BF4  40B2C585		ld.w d5, #0x30932 ; ADR 0xC0000932
A0015BF8  F0015F4B		cmp.f d15, d15, d5
A0015BFC  F2004F8B		eq d15, d15, #4

#118			JMPCN	$label3	{L:36}
(-) BOOL
A0015C00  00080FDF		jeq d15, #0, #0x0008 ; JUMP 0xA0015C10

#119		
#120			(* THEN *)
#121		
#122				(* v_Torque := MaxTorque; *)
#123				LD		MaxTorque	{L:37}
(*) UNDEF
A0015C04  40B2CF85		ld.w d15, #0x30932 ; ADR 0xC0000932

#124				ST		v_Torque	{L:37}
(*) REAL
A0015C08  0238CFA5		st.w #0x32038, d15 ; ADR 0xC0002038

#125				JMP		$label4
(-) REAL
A0015C0C  0024001D		j #0x000024 ; JUMP 0xA0015C54

#126		$label3:
#127		
#128			(* ELSIF v_Torque < -MaxTorque *)
#129			LD		v_Torque	{L:38}
(*) UNDEF
A0015C10  0238CF85		ld.w d15, #0x32038 ; ADR 0xC0002038

#130			LT(		MaxTorque	{L:38}
(*) REAL
A0015C14  F53CAF89		st.w [-sp]4, d15 
A0015C18  40B2CF85		ld.w d15, #0x30932 ; ADR 0xC0000932

#131			MUL		-1	{L:38}
(*) REAL
A0015C1C  8FFFF03B		mov d8, #-1
A0015C20  8141084B		itof d8, d8
A0015C24  F0418F4B		mul.f d15, d15, d8

#132			)	{L:38}
(*) REAL
A0015C28  01F0F00B		mov d0, d15
A0015C2C  0104AF09		ld.w d15, [sp+]4
A0015C30  51F0000B		mov d5, d0
A0015C34  F0015F4B		cmp.f d15, d15, d5
A0015C38  F2001F8B		eq d15, d15, #1

#133			JMPCN	$label4	{L:38}
(-) BOOL
A0015C3C  000C0FDF		jeq d15, #0, #0x000C ; JUMP 0xA0015C54

#134		
#135			(* THEN *)
#136		
#137				(* v_Torque := -MaxTorque; *)
#138				LD		MaxTorque	{L:39}
(*) UNDEF
A0015C40  40B2CF85		ld.w d15, #0x30932 ; ADR 0xC0000932

#139				MUL		-1	{L:39}
(*) REAL
A0015C44  8FFFF03B		mov d8, #-1
A0015C48  8141084B		itof d8, d8
A0015C4C  F0418F4B		mul.f d15, d15, d8

#140				ST		v_Torque	{L:39}
(*) REAL
A0015C50  0238CFA5		st.w #0x32038, d15 ; ADR 0xC0002038

#141		
#142		$label4:
#143			(* END_IF *)
#144		
#145			(* sysTrqFFwd := TO_DINT((v_Torque) * KNm2Cnt); *)
#146			LD		v_Torque	{L:50}
(*) UNDEF
A0015C54  0238CF85		ld.w d15, #0x32038 ; ADR 0xC0002038

#147			MUL		KNm2Cnt	{L:50}
(*) REAL
A0015C58  40B6C885		ld.w d8, #0x30936 ; ADR 0xC0000936
A0015C5C  F0418F4B		mul.f d15, d15, d8

#148			TO_DINT	{L:50}
(*) REAL
A0015C60  F1010F4B		ftoi d15, d15

#149			ST		sysTrqFFwd	{L:50}
(*) DINT
A0015C64  C2ACDFA5		st.w #0x36B2C, d15 ; ADR 0xD0002B2C

#150		
#151			(* sysSpdRef1 := TO_DINT(VEL_SP_*60/2.0/PI * 1073741824.0 / FullScaleSpeed); *)
#152			LD		VEL_SP_	{L:51}
(*) UNDEF
A0015C68  40AACF85		ld.w d15, #0x3092A ; ADR 0xC000092A

#153			MUL		60	{L:51}
(*) REAL
A0015C6C  8003C03B		mov d8, #60
A0015C70  8161084B		utof d8, d8
A0015C74  F0418F4B		mul.f d15, d15, d8

#154			DIV		2.0	{L:51}
(*) REAL
A0015C78  800000BB		mov.u d8, #0x0000 ; COSTREAL 2.000000
A0015C7C  8400089B		addih d8, d8, #0x4000
A0015C80  F0518F4B		div.f d15, d15, d8

#155			DIV		PI	{L:51}
(*) REAL
A0015C84  80FDB0BB		mov.u d8, #0x0FDB ; COSTREAL 3.141593
A0015C88  8404989B		addih d8, d8, #0x4049
A0015C8C  F0518F4B		div.f d15, d15, d8

#156			MUL		1073741824.0	{L:51}
(*) REAL
A0015C90  800000BB		mov.u d8, #0x0000 ; COSTREAL 1073741824.000000
A0015C94  84E8089B		addih d8, d8, #0x4E80
A0015C98  F0418F4B		mul.f d15, d15, d8

#157			DIV		FullScaleSpeed	{L:51}
(*) REAL
A0015C9C  40BAC885		ld.w d8, #0x3093A ; ADR 0xC000093A
A0015CA0  F0518F4B		div.f d15, d15, d8

#158			TO_DINT	{L:51}
(*) REAL
A0015CA4  F1010F4B		ftoi d15, d15

#159			ST		sysSpdRef1	{L:51}
(*) DINT
A0015CA8  43C4DFA5		st.w #0x37D04, d15 ; ADR 0xD0003D04

#160		
#161			(* vStateMachine := (AutotuningManager.state); *)
#162			LD		AutotuningManager.state	{L:53}
(*) UNDEF
A0015CAC  349CCF05		ld.bu d15, #0x308DC ; ADR 0xC00008DC

#163			ST		vStateMachine	{L:53}
(*) USINT
A0015CB0  1A04CF25		st.h #0x32044, d15 ; ADR 0xC0002044

#164		
#165		
#166			(* IF TimeMsg > 0 *)
#167			LD		TimeMsg	{L:55}
(*) UNDEF
A0015CB4  40BECF85		ld.w d15, #0x3093E ; ADR 0xC000093E

#168			GT		0	{L:55}
(*) UDINT
A0015CB8  8000003B		mov d8, #0
A0015CBC  F130F80B		lt.u d15, d8, d15

#169			JMPCN	$label5	{L:55}
(-) BOOL
A0015CC0  000A0FDF		jeq d15, #0, #0x000A ; JUMP 0xA0015CD4

#170		
#171			(* THEN *)
#172		
#173				(* TimeMsg := TimeMsg - 1; *)
#174				LD		TimeMsg	{L:56}
(*) UNDEF
A0015CC4  40BECF85		ld.w d15, #0x3093E ; ADR 0xC000093E

#175				SUB		1	{L:56}
(*) UDINT
A0015CC8  8000103B		mov d8, #1
A0015CCC  F0808F0B		sub d15, d15, d8

#176				ST		TimeMsg	{L:56}
(*) UDINT
A0015CD0  40BECFA5		st.w #0x3093E, d15 ; ADR 0xC000093E

A0015CD4  0180000D		ret

END_PROGRAM


**************************************************
	Target variable image generation
**************************************************


*** INPUT:
A0015CD8  FD000091		movh.a a15, #0xD000
A0015CDC  D2B4FFD9		lea a15,[a15]0x2B74
A0015CE0  0000FF19		ld.w d15, [a15]
A0015CE4  FC000091		movh.a a15, #0xC000
A0015CE8  4088FFD9		lea a15,[a15]0x0908
A0015CEC  0000FF59		st.w [a15], d15

A0015CF0  FD000091		movh.a a15, #0xD000
A0015CF4  E284FFD9		lea a15,[a15]0x2B84
A0015CF8  0000FF19		ld.w d15, [a15]
A0015CFC  FC000091		movh.a a15, #0xC000
A0015D00  408CFFD9		lea a15,[a15]0x090C
A0015D04  0000FF59		st.w [a15], d15

A0015D08  FD000091		movh.a a15, #0xD000
A0015D0C  D2B0FFD9		lea a15,[a15]0x2B70
A0015D10  0000FF19		ld.w d15, [a15]
A0015D14  FC000091		movh.a a15, #0xC000
A0015D18  4090FFD9		lea a15,[a15]0x0910
A0015D1C  0000FF59		st.w [a15], d15

A0015D20  FD000091		movh.a a15, #0xD000
A0015D24  E288FFD9		lea a15,[a15]0x2B88
A0015D28  0000FF19		ld.w d15, [a15]
A0015D2C  FC000091		movh.a a15, #0xC000
A0015D30  4094FFD9		lea a15,[a15]0x0914
A0015D34  0000FF59		st.w [a15], d15

A0015D38  FD000091		movh.a a15, #0xD000
A0015D3C  F29CFFD9		lea a15,[a15]0x2BDC
A0015D40  0000FF19		ld.w d15, [a15]
A0015D44  FC000091		movh.a a15, #0xC000
A0015D48  4098FFD9		lea a15,[a15]0x0918
A0015D4C  0000FF59		st.w [a15], d15

A0015D50  FD000091		movh.a a15, #0xD000
A0015D54  E2A8FFD9		lea a15,[a15]0x2BA8
A0015D58  0000FF19		ld.w d15, [a15]
A0015D5C  FC000091		movh.a a15, #0xC000
A0015D60  40A0FFD9		lea a15,[a15]0x0920
A0015D64  0000FF59		st.w [a15], d15

A0015D68  0180000D		ret


*** OUTPUT:
A0015D6C  0180000D		ret



**************************************************
	Init code generation for task Fast
**************************************************

A0015D70  0180000D		ret

**************************************************
	List program: state_machine
**************************************************

PROGRAM state_machine

	VAR
	INIT_END : BOOL; { DE:"Transition result" } 
	readRealPar : sysDBReadRealPar; 
	readIntPar : sysDBReadIntegerPar; 
	idx : UINT; 
	r_idx : USINT; 
	c_idx : USINT; 
	AUTOTUNING_STOP : BOOL; { DE:"Transition result" } 
	CYCLE_STOP : BOOL; 
	CL_control_STOP : BOOL; { DE:"Transition result" } 
	STOP_PROC : BOOL; { DE:"Transition result" } 
	Res : INT; 
	TempUI : UINT; 
	SEND_MESSAGE : BOOL; 
	PAUSE : UDINT; 
	END_VAR

#0		{SRC:state_machine}
#1			LD		state_machine$$Init_x
(*) UNDEF
A0015D80  5082CF85		ld.w d15, #0x30942 ; ADR 0xC0000942

#2			JMPCN	end_state_machine$Init
(-) BOOL
A0015D84  01EE0FDF		jeq d15, #0, #0x01EE ; JUMP 0xA0016160

#3		
#4		(* BODY OF Init *)
#5		{SRC:state_machine/Init_state}
#6		
#7			(* INIT_END := FALSE; *)
#8			LD		FALSE	{L:3}
(*) UNDEF
A0015D88  F000003B		mov d15, #0

#9			ST		INIT_END	{L:3}
(*) BOOL
A0015D8C  5086CFA5		st.w #0x30946, d15 ; ADR 0xC0000946

#10		
#11			(* CYCLE_STOP := FALSE; *)
#12			LD		FALSE	{L:4}
(*) UNDEF
A0015D90  F000003B		mov d15, #0

#13			ST		CYCLE_STOP	{L:4}
(*) BOOL
A0015D94  508ACFA5		st.w #0x3094A, d15 ; ADR 0xC000094A

#14		
#15			(* ENABLE_CYCLIC_PRG := FALSE; *)
#16			LD		FALSE	{L:5}
(*) UNDEF
A0015D98  F000003B		mov d15, #0

#17			ST		ENABLE_CYCLIC_PRG	{L:5}
(*) BOOL
A0015D9C  508ECFA5		st.w #0x3094E, d15 ; ADR 0xC000094E

#18		
#19			(* sysControlMode := 0; *)
#20			LD		0	{L:9}
(*) UNDEF
A0015DA0  F000003B		mov d15, #0

#21			ST		sysControlMode	{L:9}
(*) USINT
A0015DA4  FC000091		movh.a a15, #0xC000 ; ADR 0xC00045DC
A0015DA8  745CFF59		st.w [a15]0x45DC, d15

#22		
#23			(* readRealPar.ipa := 300; *)
#24			LD		300	{L:13}
(*) UNDEF
A0015DAC  F012C03B		mov d15, #300

#25			ST		readRealPar.ipa	{L:13}
(*) UINT
A0015DB0  5092CFA5		st.w #0x30952, d15 ; ADR 0xC0000952

#26		
#27			(* readRealPar() *)
#28			CAL		readRealPar	{L:14}
(*) DINT
A0015DB4  F53CAF89		st.w [-sp]4, d15 
A0015DB8  4C000091		movh.a a4, #0xC000 ; ADR EMB-FUNCTION BLOCK AT 0xC0000952
A0015DBC  509244D9		lea a4,[a4]0x0952
A0015DC0  F8009091		movh.a a15, #0x8009 ; sysDBReadRealPar AT 0x80092698
A0015DC4  A258FFD9		lea a15,[a15]0x2698
A0015DC8  0000000D		nop
A0015DCC  00000F2D		calli a15
A0015DD0  F1F0200B		mov d15, d2
A0015DD4  0104AF09		ld.w d15, [sp+]4

#29		
#30			(* DriveRatCur:= readRealPar.val ; *)
#31			LD		readRealPar.val	{L:15}
(*) UNDEF
A0015DD8  509ACF85		ld.w d15, #0x3095A ; ADR 0xC000095A

#32			ST		DriveRatCur	{L:15}
(*) REAL
A0015DDC  509ECFA5		st.w #0x3095E, d15 ; ADR 0xC000095E

#33		
#34			(* InputConv.KArms:=DriveRatCur/(8192.0*65536.0); *)
#35			LD		DriveRatCur	{L:16}
(*) UNDEF
A0015DE0  509ECF85		ld.w d15, #0x3095E ; ADR 0xC000095E

#36			DIV(		8192.0	{L:16}
(*) REAL
A0015DE4  F53CAF89		st.w [-sp]4, d15 
A0015DE8  F00000BB		mov.u d15, #0x0000 ; COSTREAL 8192.000000
A0015DEC  F4600F9B		addih d15, d15, #0x4600

#37			MUL		65536.0	{L:16}
(*) REAL
A0015DF0  800000BB		mov.u d8, #0x0000 ; COSTREAL 65536.000000
A0015DF4  8478089B		addih d8, d8, #0x4780
A0015DF8  F0418F4B		mul.f d15, d15, d8

#38			)	{L:16}
(*) REAL
A0015DFC  01F0F00B		mov d0, d15
A0015E00  0104AF09		ld.w d15, [sp+]4
A0015E04  81F0000B		mov d8, d0
A0015E08  F0518F4B		div.f d15, d15, d8

#39			ST		InputConv.KArms	{L:16}
(*) REAL
A0015E0C  304CCFA5		st.w #0x304CC, d15 ; ADR 0xC00004CC

#40		
#41			(* readIntPar.ipa := 680; *)
#42			LD		680	{L:20}
(*) UNDEF
A0015E10  F02A803B		mov d15, #680

#43			ST		readIntPar.ipa	{L:20}
(*) UINT
A0015E14  50A2CFA5		st.w #0x30962, d15 ; ADR 0xC0000962

#44		
#45			(* readIntPar() *)
#46			CAL		readIntPar	{L:21}
(*) DINT
A0015E18  F53CAF89		st.w [-sp]4, d15 
A0015E1C  4C000091		movh.a a4, #0xC000 ; ADR EMB-FUNCTION BLOCK AT 0xC0000962
A0015E20  50A244D9		lea a4,[a4]0x0962
A0015E24  F8009091		movh.a a15, #0x8009 ; sysDBReadIntegerPar AT 0x80092606
A0015E28  8246FFD9		lea a15,[a15]0x2606
A0015E2C  0000000D		nop
A0015E30  00000F2D		calli a15
A0015E34  F1F0200B		mov d15, d2
A0015E38  0104AF09		ld.w d15, [sp+]4

#47		
#48			(* FullScaleSpeed := TO_REAL(readIntPar.val); *)
#49			LD		readIntPar.val	{L:22}
(*) UNDEF
A0015E3C  50AACF85		ld.w d15, #0x3096A ; ADR 0xC000096A

#50			TO_REAL	{L:22}
(*) DINT
A0015E40  F1410F4B		itof d15, d15

#51			ST		FullScaleSpeed	{L:22}
(*) REAL
A0015E44  40BACFA5		st.w #0x3093A, d15 ; ADR 0xC000093A

#52		
#53			(* InputConv.Krpm:=FullScaleSpeed/(16384.0*65536.0); *)
#54			LD		FullScaleSpeed	{L:23}
(*) UNDEF
A0015E48  40BACF85		ld.w d15, #0x3093A ; ADR 0xC000093A

#55			DIV(		16384.0	{L:23}
(*) REAL
A0015E4C  F53CAF89		st.w [-sp]4, d15 
A0015E50  F00000BB		mov.u d15, #0x0000 ; COSTREAL 16384.000000
A0015E54  F4680F9B		addih d15, d15, #0x4680

#56			MUL		65536.0	{L:23}
(*) REAL
A0015E58  800000BB		mov.u d8, #0x0000 ; COSTREAL 65536.000000
A0015E5C  8478089B		addih d8, d8, #0x4780
A0015E60  F0418F4B		mul.f d15, d15, d8

#57			)	{L:23}
(*) REAL
A0015E64  01F0F00B		mov d0, d15
A0015E68  0104AF09		ld.w d15, [sp+]4
A0015E6C  81F0000B		mov d8, d0
A0015E70  F0518F4B		div.f d15, d15, d8

#58			ST		InputConv.Krpm	{L:23}
(*) REAL
A0015E74  3044CFA5		st.w #0x304C4, d15 ; ADR 0xC00004C4

#59		
#60			(* InputConv.Krad_s:=InputConv.Krpm*2.0*PI/60.0; *)
#61			LD		InputConv.Krpm	{L:24}
(*) UNDEF
A0015E78  3044CF85		ld.w d15, #0x304C4 ; ADR 0xC00004C4

#62			MUL		2.0	{L:24}
(*) REAL
A0015E7C  800000BB		mov.u d8, #0x0000 ; COSTREAL 2.000000
A0015E80  8400089B		addih d8, d8, #0x4000
A0015E84  F0418F4B		mul.f d15, d15, d8

#63			MUL		PI	{L:24}
(*) REAL
A0015E88  80FDB0BB		mov.u d8, #0x0FDB ; COSTREAL 3.141593
A0015E8C  8404989B		addih d8, d8, #0x4049
A0015E90  F0418F4B		mul.f d15, d15, d8

#64			DIV		60.0	{L:24}
(*) REAL
A0015E94  800000BB		mov.u d8, #0x0000 ; COSTREAL 60.000000
A0015E98  8427089B		addih d8, d8, #0x4270
A0015E9C  F0518F4B		div.f d15, d15, d8

#65			ST		InputConv.Krad_s	{L:24}
(*) REAL
A0015EA0  3048CFA5		st.w #0x304C8, d15 ; ADR 0xC00004C8

#66		
#67			(* readRealPar.ipa := 2002; *)
#68			LD		2002	{L:28}
(*) UNDEF
A0015EA4  F07D203B		mov d15, #2002

#69			ST		readRealPar.ipa	{L:28}
(*) UINT
A0015EA8  5092CFA5		st.w #0x30952, d15 ; ADR 0xC0000952

#70		
#71			(* readRealPar() *)
#72			CAL		readRealPar	{L:29}
(*) DINT
A0015EAC  F53CAF89		st.w [-sp]4, d15 
A0015EB0  4C000091		movh.a a4, #0xC000 ; ADR EMB-FUNCTION BLOCK AT 0xC0000952
A0015EB4  509244D9		lea a4,[a4]0x0952
A0015EB8  F8009091		movh.a a15, #0x8009 ; sysDBReadRealPar AT 0x80092698
A0015EBC  A258FFD9		lea a15,[a15]0x2698
A0015EC0  0000000D		nop
A0015EC4  00000F2D		calli a15
A0015EC8  F1F0200B		mov d15, d2
A0015ECC  0104AF09		ld.w d15, [sp+]4

#73		
#74			(* RatCur:= readRealPar.val ; *)
#75			LD		readRealPar.val	{L:30}
(*) UNDEF
A0015ED0  509ACF85		ld.w d15, #0x3095A ; ADR 0xC000095A

#76			ST		RatCur	{L:30}
(*) REAL
A0015ED4  50AECFA5		st.w #0x3096E, d15 ; ADR 0xC000096E

#77		
#78			(* readRealPar.ipa := 2010; *)
#79			LD		2010	{L:32}
(*) UNDEF
A0015ED8  F07DA03B		mov d15, #2010

#80			ST		readRealPar.ipa	{L:32}
(*) UINT
A0015EDC  5092CFA5		st.w #0x30952, d15 ; ADR 0xC0000952

#81		
#82			(* readRealPar() *)
#83			CAL		readRealPar	{L:33}
(*) DINT
A0015EE0  F53CAF89		st.w [-sp]4, d15 
A0015EE4  4C000091		movh.a a4, #0xC000 ; ADR EMB-FUNCTION BLOCK AT 0xC0000952
A0015EE8  509244D9		lea a4,[a4]0x0952
A0015EEC  F8009091		movh.a a15, #0x8009 ; sysDBReadRealPar AT 0x80092698
A0015EF0  A258FFD9		lea a15,[a15]0x2698
A0015EF4  0000000D		nop
A0015EF8  00000F2D		calli a15
A0015EFC  F1F0200B		mov d15, d2
A0015F00  0104AF09		ld.w d15, [sp+]4

#84		
#85			(* RatKTrq:= readRealPar.val ; *)
#86			LD		readRealPar.val	{L:34}
(*) UNDEF
A0015F04  509ACF85		ld.w d15, #0x3095A ; ADR 0xC000095A

#87			ST		RatKTrq	{L:34}
(*) REAL
A0015F08  50B2CFA5		st.w #0x30972, d15 ; ADR 0xC0000972

#88		
#89			(* RatedTorque := RatCur*RatKTrq; *)
#90			LD		RatCur	{L:35}
(*) UNDEF
A0015F0C  50AECF85		ld.w d15, #0x3096E ; ADR 0xC000096E

#91			MUL		RatKTrq	{L:35}
(*) REAL
A0015F10  50B2C885		ld.w d8, #0x30972 ; ADR 0xC0000972
A0015F14  F0418F4B		mul.f d15, d15, d8

#92			ST		RatedTorque	{L:35}
(*) REAL
A0015F18  50B6CFA5		st.w #0x30976, d15 ; ADR 0xC0000976

#93		
#94			(* KNm2Cnt := TO_REAL(TrqToCount(1.0 / RatedTorque * 100.0)); *)
#95			LD		1.0	{L:37}
(*) UNDEF
A0015F1C  F00000BB		mov.u d15, #0x0000 ; COSTREAL 1.000000
A0015F20  F3F80F9B		addih d15, d15, #0x3F80

#96			DIV		RatedTorque	{L:37}
(*) REAL
A0015F24  50B6C885		ld.w d8, #0x30976 ; ADR 0xC0000976
A0015F28  F0518F4B		div.f d15, d15, d8

#97			MUL		100.0	{L:37}
(*) REAL
A0015F2C  800000BB		mov.u d8, #0x0000 ; COSTREAL 100.000000
A0015F30  842C889B		addih d8, d8, #0x42C8
A0015F34  F0418F4B		mul.f d15, d15, d8

#98			TrqToCount	{L:37}
(-) REAL
A0015F38  41F0F00B		mov d4, d15
A0015F3C  D42AFF6D		call #0xFFD42A ; CALL 0xA0010790
A0015F40  F1F0200B		mov d15, d2

#99			TO_REAL	{L:37}
(*) DINT
A0015F44  F1410F4B		itof d15, d15

#100			ST		KNm2Cnt	{L:37}
(*) REAL
A0015F48  40B6CFA5		st.w #0x30936, d15 ; ADR 0xC0000936

#101		
#102			(* InputConv.KCnt2Nm := 1.0 / KNm2Cnt; *)
#103			LD		1.0	{L:38}
(*) UNDEF
A0015F4C  F00000BB		mov.u d15, #0x0000 ; COSTREAL 1.000000
A0015F50  F3F80F9B		addih d15, d15, #0x3F80

#104			DIV		KNm2Cnt	{L:38}
(*) REAL
A0015F54  40B6C885		ld.w d8, #0x30936 ; ADR 0xC0000936
A0015F58  F0518F4B		div.f d15, d15, d8

#105			ST		InputConv.KCnt2Nm	{L:38}
(*) REAL
A0015F5C  3050CFA5		st.w #0x304D0, d15 ; ADR 0xC00004D0

#106		
#107			(* res:= sysDBWriteIntegerPar(650,640); *)
#108			LD		650	{L:41}
(*) UNDEF
A0015F60  F028A03B		mov d15, #650

#109			sysDBWriteIntegerPar		640	{L:41}
(-) UINT
A0015F64  5028003B		mov d5, #640
A0015F68  41F0F00B		mov d4, d15
A0015F6C  F8009091		movh.a a15, #0x8009 ; sysDBWriteIntegerPar AT 0x80092438
A0015F70  0278FFD9		lea a15,[a15]0x2438
A0015F74  0000000D		nop
A0015F78  00000F2D		calli a15
A0015F7C  F1F0200B		mov d15, d2

#110			ST		res	{L:41}
(*) DINT
A0015F80  50BACFA5		st.w #0x3097A, d15 ; ADR 0xC000097A

#111		
#112			(* res:= sysDBWriteIntegerPar(652,642); *)
#113			LD		652	{L:42}
(*) UNDEF
A0015F84  F028C03B		mov d15, #652

#114			sysDBWriteIntegerPar		642	{L:42}
(-) UINT
A0015F88  5028203B		mov d5, #642
A0015F8C  41F0F00B		mov d4, d15
A0015F90  F8009091		movh.a a15, #0x8009 ; sysDBWriteIntegerPar AT 0x80092438
A0015F94  0278FFD9		lea a15,[a15]0x2438
A0015F98  0000000D		nop
A0015F9C  00000F2D		calli a15
A0015FA0  F1F0200B		mov d15, d2

#115			ST		res	{L:42}
(*) DINT
A0015FA4  50BACFA5		st.w #0x3097A, d15 ; ADR 0xC000097A

#116		
#117			(* sysSpdRef1 := 0; *)
#118			LD		0	{L:43}
(*) UNDEF
A0015FA8  F000003B		mov d15, #0

#119			ST		sysSpdRef1	{L:43}
(*) USINT
A0015FAC  43C4DFA5		st.w #0x37D04, d15 ; ADR 0xD0003D04

#120		
#121			(* sysSpdRef2 := 0; *)
#122			LD		0	{L:44}
(*) UNDEF
A0015FB0  F000003B		mov d15, #0

#123			ST		sysSpdRef2	{L:44}
(*) USINT
A0015FB4  43C8DFA5		st.w #0x37D08, d15 ; ADR 0xD0003D08

#124		
#125			(* sysTrqFFwd := 0; *)
#126			LD		0	{L:45}
(*) UNDEF
A0015FB8  F000003B		mov d15, #0

#127			ST		sysTrqFFwd	{L:45}
(*) USINT
A0015FBC  C2ACDFA5		st.w #0x36B2C, d15 ; ADR 0xD0002B2C

#128		
#129			(* MaxTorque    := pMaxTorque; *)
#130			LD		pMaxTorque	{L:50}
(*) UNDEF
A0015FC0  C1B0CF85		ld.w d15, #0x31B30 ; ADR 0xC0001B30

#131			ST		MaxTorque	{L:50}
(*) REAL
A0015FC4  40B2CFA5		st.w #0x30932, d15 ; ADR 0xC0000932

#132		
#133			(* MaxSpeed     := pMaxSpeed * RPM2RAD; *)
#134			LD		pMaxSpeed	{L:51}
(*) UNDEF
A0015FC8  C1B4CF85		ld.w d15, #0x31B34 ; ADR 0xC0001B34

#135			MUL		RPM2RAD	{L:51}
(*) REAL
A0015FCC  877500BB		mov.u d8, #0x7750 ; COSTREAL 0.104720
A0015FD0  83DD689B		addih d8, d8, #0x3DD6
A0015FD4  F0418F4B		mul.f d15, d15, d8

#136			ST		MaxSpeed	{L:51}
(*) REAL
A0015FD8  50BECFA5		st.w #0x3097E, d15 ; ADR 0xC000097E

#137		
#138			(* MaxPosition  := pMaxPos * PI * 2.0; *)
#139			LD		pMaxPos	{L:52}
(*) UNDEF
A0015FDC  C1B8CF85		ld.w d15, #0x31B38 ; ADR 0xC0001B38

#140			MUL		PI	{L:52}
(*) REAL
A0015FE0  80FDB0BB		mov.u d8, #0x0FDB ; COSTREAL 3.141593
A0015FE4  8404989B		addih d8, d8, #0x4049
A0015FE8  F0418F4B		mul.f d15, d15, d8

#141			MUL		2.0	{L:52}
(*) REAL
A0015FEC  800000BB		mov.u d8, #0x0000 ; COSTREAL 2.000000
A0015FF0  8400089B		addih d8, d8, #0x4000
A0015FF4  F0418F4B		mul.f d15, d15, d8

#142			ST		MaxPosition	{L:52}
(*) REAL
A0015FF8  6082CFA5		st.w #0x30982, d15 ; ADR 0xC0000982

#143		
#144			(* MotorInertia := pMotJ; *)
#145			LD		pMotJ	{L:53}
(*) UNDEF
A0015FFC  C1BCCF85		ld.w d15, #0x31B3C ; ADR 0xC0001B3C

#146			ST		MotorInertia	{L:53}
(*) REAL
A0016000  6086CFA5		st.w #0x30986, d15 ; ADR 0xC0000986

#147		
#148			(* AutotuningManager.fbInit := TRUE; *)
#149			LD		TRUE	{L:55}
(*) UNDEF
A0016004  F000103B		mov d15, #1

#150			ST		AutotuningManager.fbInit	{L:55}
(*) BOOL
A0016008  2088CFA5		st.w #0x30888, d15 ; ADR 0xC0000888

#151		
#152			(* AutotuningManager.maxTrq := MaxTorque; *)
#153			LD		MaxTorque	{L:56}
(*) UNDEF
A001600C  40B2CF85		ld.w d15, #0x30932 ; ADR 0xC0000932

#154			ST		AutotuningManager.maxTrq	{L:56}
(*) REAL
A0016010  2098CFA5		st.w #0x30898, d15 ; ADR 0xC0000898

#155		
#156			(* AutotuningManager.maxVel := MaxSpeed; *)
#157			LD		MaxSpeed	{L:57}
(*) UNDEF
A0016014  50BECF85		ld.w d15, #0x3097E ; ADR 0xC000097E

#158			ST		AutotuningManager.maxVel	{L:57}
(*) REAL
A0016018  209CCFA5		st.w #0x3089C, d15 ; ADR 0xC000089C

#159		
#160			(* AutotuningManager.maxPos := MaxPosition; *)
#161			LD		MaxPosition	{L:58}
(*) UNDEF
A001601C  6082CF85		ld.w d15, #0x30982 ; ADR 0xC0000982

#162			ST		AutotuningManager.maxPos	{L:58}
(*) REAL
A0016020  20A0CFA5		st.w #0x308A0, d15 ; ADR 0xC00008A0

#163		
#164			(* AutotuningManager.minVel := -MaxSpeed; *)
#165			LD		MaxSpeed	{L:59}
(*) UNDEF
A0016024  50BECF85		ld.w d15, #0x3097E ; ADR 0xC000097E

#166			MUL		-1	{L:59}
(*) REAL
A0016028  8FFFF03B		mov d8, #-1
A001602C  8141084B		itof d8, d8
A0016030  F0418F4B		mul.f d15, d15, d8

#167			ST		AutotuningManager.minVel	{L:59}
(*) REAL
A0016034  3080CFA5		st.w #0x308C0, d15 ; ADR 0xC00008C0

#168		
#169			(* AutotuningManager.minPos := 0.0; *)
#170			LD		0.0	{L:60}
(*) UNDEF
A0016038  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A001603C  F0000F9B		addih d15, d15, #0x0000

#171			ST		AutotuningManager.minPos	{L:60}
(*) REAL
A0016040  20BCCFA5		st.w #0x308BC, d15 ; ADR 0xC00008BC

#172		
#173			(* AutotuningManager.phi_m_v	:=75.0; *)
#174			LD		75.0	{L:61}
(*) UNDEF
A0016044  F00000BB		mov.u d15, #0x0000 ; COSTREAL 75.000000
A0016048  F4296F9B		addih d15, d15, #0x4296

#175			ST		AutotuningManager.phi_m_v	{L:61}
(*) REAL
A001604C  20ACCFA5		st.w #0x308AC, d15 ; ADR 0xC00008AC

#176		
#177			(* AutotuningManager.phi_m_p 	:=90.0; *)
#178			LD		90.0	{L:62}
(*) UNDEF
A0016050  F00000BB		mov.u d15, #0x0000 ; COSTREAL 90.000000
A0016054  F42B4F9B		addih d15, d15, #0x42B4

#179			ST		AutotuningManager.phi_m_p	{L:62}
(*) REAL
A0016058  20B0CFA5		st.w #0x308B0, d15 ; ADR 0xC00008B0

#180		
#181			(* AutotuningManager.MinWc	:= 	pMinWc; *)
#182			LD		pMinWc	{L:63}
(*) UNDEF
A001605C  D184CF85		ld.w d15, #0x31B44 ; ADR 0xC0001B44

#183			ST		AutotuningManager.MinWc	{L:63}
(*) REAL
A0016060  3088CFA5		st.w #0x308C8, d15 ; ADR 0xC00008C8

#184		
#185			(* AutotuningManager.MaxWc	:=	pMaxWc; *)
#186			LD		pMaxWc	{L:64}
(*) UNDEF
A0016064  D188CF85		ld.w d15, #0x31B48 ; ADR 0xC0001B48

#187			ST		AutotuningManager.MaxWc	{L:64}
(*) REAL
A0016068  3084CFA5		st.w #0x308C4, d15 ; ADR 0xC00008C4

#188		
#189			(* res:= sysDBWriteIntegerPar(680,TO_INT(FLOOR(pMaxSpeed))); *)
#190			LD		pMaxSpeed	{L:66}
(*) UNDEF
A001606C  C1B4CF85		ld.w d15, #0x31B34 ; ADR 0xC0001B34

#191			FLOOR	{L:66}
(*) REAL
A0016070  41F0F00B		mov d4, d15
A0016074  F8009091		movh.a a15, #0x8009 ; _do_floor AT 0x80091CA8
A0016078  21E8FFD9		lea a15,[a15]0x1CA8
A001607C  0000000D		nop
A0016080  00000F2D		calli a15
A0016084  F1F0200B		mov d15, d2

#192			TO_INT	{L:66}
(*) REAL
A0016088  F1010F4B		ftoi d15, d15

#193			ST		state_machine/Init_state$$TEMP0	{L:66}
(*) INT
A001608C  688ACF25		st.h #0x3098A, d15 ; ADR 0xC000098A

#194			LD		680	{L:66}
(*) UNDEF
A0016090  F02A803B		mov d15, #680

#195			sysDBWriteIntegerPar		state_machine/Init_state$$TEMP0	{L:66}
(-) UINT
A0016094  688AC805		ld.h d8, #0x3098A ; ADR 0xC000098A
A0016098  51F0800B		mov d5, d8
A001609C  41F0F00B		mov d4, d15
A00160A0  F8009091		movh.a a15, #0x8009 ; sysDBWriteIntegerPar AT 0x80092438
A00160A4  0278FFD9		lea a15,[a15]0x2438
A00160A8  0000000D		nop
A00160AC  00000F2D		calli a15
A00160B0  F1F0200B		mov d15, d2

#196			ST		res	{L:66}
(*) DINT
A00160B4  50BACFA5		st.w #0x3097A, d15 ; ADR 0xC000097A

#197		
#198			(* AutotuningManager.Time_identification:=7.0; *)
#199			LD		7.0	{L:68}
(*) UNDEF
A00160B8  F00000BB		mov.u d15, #0x0000 ; COSTREAL 7.000000
A00160BC  F40E0F9B		addih d15, d15, #0x40E0

#200			ST		AutotuningManager.Time_identification	{L:68}
(*) REAL
A00160C0  20A8CFA5		st.w #0x308A8, d15 ; ADR 0xC00008A8

#201		
#202			(* AutotuningManager.Ts	:=0.001; *)
#203			LD		0.001	{L:69}
(*) UNDEF
A00160C4  F126F0BB		mov.u d15, #0x126F ; COSTREAL 0.001000
A00160C8  F3A83F9B		addih d15, d15, #0x3A83

#204			ST		AutotuningManager.Ts	{L:69}
(*) REAL
A00160CC  20A4CFA5		st.w #0x308A4, d15 ; ADR 0xC00008A4

#205		
#206			(* AutotuningManager() *)
#207			CAL		AutotuningManager	{L:71}
(*) REAL
A00160D0  F53CAF89		st.w [-sp]4, d15 
A00160D4  4C000091		movh.a a4, #0xC000 ; FB FRAME BASE 0xC0000508
A00160D8  404844D9		lea a4,[a4]0x0508
A00160DC  FA001091		movh.a a15, #0xA001 ; CALL TO FB AT 0xA0012F6C
A00160E0  D2ECFFD9		lea a15,[a15]0x2F6C
A00160E4  0000000D		nop
A00160E8  00000F2D		calli a15
A00160EC  0104AF09		ld.w d15, [sp+]4

#208		
#209			(* AutotuningManager.fbInit := FALSE; *)
#210			LD		FALSE	{L:72}
(*) UNDEF
A00160F0  F000003B		mov d15, #0

#211			ST		AutotuningManager.fbInit	{L:72}
(*) BOOL
A00160F4  2088CFA5		st.w #0x30888, d15 ; ADR 0xC0000888

#212		
#213			(* State_internal := 0; *)
#214			LD		0	{L:75}
(*) UNDEF
A00160F8  F000003B		mov d15, #0

#215			ST		State_internal	{L:75}
(*) USINT
A00160FC  48A8CF25		st.h #0x30928, d15 ; ADR 0xC0000928

#216		
#217			(* CYCLE_STOP := FALSE; *)
#218			LD		FALSE	{L:87}
(*) UNDEF
A0016100  F000003B		mov d15, #0

#219			ST		CYCLE_STOP	{L:87}
(*) BOOL
A0016104  508ACFA5		st.w #0x3094A, d15 ; ADR 0xC000094A

#220		
#221		
#222			(* IF StartCND *)
#223			LD		StartCND	{L:89}
(*) UNDEF
A0016108  40A4CF85		ld.w d15, #0x30924 ; ADR 0xC0000924

#224			JMPCN	state_machine/Init_state$lab1	{L:89}
(-) BOOL
A001610C  00100FDF		jeq d15, #0, #0x0010 ; JUMP 0xA001612C

#225		
#226			(* THEN *)
#227		
#228				(* state_of_the_machine :=1; *)
#229				LD		1	{L:90}
(*) UNDEF
A0016110  F000103B		mov d15, #1

#230				ST		state_of_the_machine	{L:90}
(*) USINT
A0016114  688CCF25		st.h #0x3098C, d15 ; ADR 0xC000098C

#231		
#232				(* ENABLE_CYCLIC_PRG := TRUE; *)
#233				LD		TRUE	{L:91}
(*) UNDEF
A0016118  F000103B		mov d15, #1

#234				ST		ENABLE_CYCLIC_PRG	{L:91}
(*) BOOL
A001611C  508ECFA5		st.w #0x3094E, d15 ; ADR 0xC000094E

#235		
#236				(* INIT_END := TRUE; *)
#237				LD		TRUE	{L:92}
(*) UNDEF
A0016120  F000103B		mov d15, #1

#238				ST		INIT_END	{L:92}
(*) BOOL
A0016124  5086CFA5		st.w #0x30946, d15 ; ADR 0xC0000946

#239				JMP		state_machine/Init_state$lab0
(-) BOOL
A0016128  000E001D		j #0x00000E ; JUMP 0xA0016144

#240		state_machine/Init_state$lab1:
#241		
#242			(* ELSE *)
#243		
#244				(* state_of_the_machine :=0; *)
#245				LD		0	{L:94}
(*) UNDEF
A001612C  F000003B		mov d15, #0

#246				ST		state_of_the_machine	{L:94}
(*) USINT
A0016130  688CCF25		st.h #0x3098C, d15 ; ADR 0xC000098C

#247		
#248				(* ENABLE_CYCLIC_PRG := FALSE; *)
#249				LD		FALSE	{L:95}
(*) UNDEF
A0016134  F000003B		mov d15, #0

#250				ST		ENABLE_CYCLIC_PRG	{L:95}
(*) BOOL
A0016138  508ECFA5		st.w #0x3094E, d15 ; ADR 0xC000094E

#251		
#252				(* INIT_END := FALSE; *)
#253				LD		FALSE	{L:96}
(*) UNDEF
A001613C  F000003B		mov d15, #0

#254				ST		INIT_END	{L:96}
(*) BOOL
A0016140  5086CFA5		st.w #0x30946, d15 ; ADR 0xC0000946

#255		
#256		state_machine/Init_state$lab0:
#257			(* END_IF *)
#258		
#259		
#260		(* Test condition TR4 pin_in 0 *)
#261			LD		INIT_END
(*) UNDEF
A0016144  5086CF85		ld.w d15, #0x30946 ; ADR 0xC0000946

#262			ST		state_machine$$Cycle_x
(*) BOOL
A0016148  608ECFA5		st.w #0x3098E, d15 ; ADR 0xC000098E

#263			R		state_machine$$Init_x
(*) BOOL
A001614C  FC000091		movh.a a15, #0xC000 ; ADR 0xC0000942
A0016150  5082FFD9		lea a15,[a15]0x0942
A0016154  0840F809		ld.bu d8, [a15]
A0016158  8FA008AB		seln d8, d15, d8, #0
A001615C  0800F889		st.b [a15], d8

#264		
#265		end_state_machine$Init:
#266			LD		state_machine$$Cycle_x
(*) UNDEF
A0016160  608ECF85		ld.w d15, #0x3098E ; ADR 0xC000098E

#267			JMPCN	end_state_machine$Cycle
(-) BOOL
A0016164  01840FDF		jeq d15, #0, #0x0184 ; JUMP 0xA001646C

#268		
#269		(* BODY OF Cycle *)
#270		{SRC:state_machine/Cycle_state}
#271		
#272			(* ENABLE_CYCLIC_PRG := StartCND; *)
#273			LD		StartCND	{L:2}
(*) UNDEF
A0016168  40A4CF85		ld.w d15, #0x30924 ; ADR 0xC0000924

#274			ST		ENABLE_CYCLIC_PRG	{L:2}
(*) BOOL
A001616C  508ECFA5		st.w #0x3094E, d15 ; ADR 0xC000094E

#275		
#276			(* ABORT_PROCEDURE := NOT(StartCND); *)
#277			LD		StartCND	{L:3}
(*) UNDEF
A0016170  40A4CF85		ld.w d15, #0x30924 ; ADR 0xC0000924

#278			NOT	{L:3}
(*) BOOL
A0016174  8000103B		mov d8, #1
A0016178  9000003B		mov d9, #0
A001617C  FF40892B		sel d15, d15, d9, d8

#279			ST		ABORT_PROCEDURE	{L:3}
(*) BOOL
A0016180  6092CFA5		st.w #0x30992, d15 ; ADR 0xC0000992

#280		
#281			(* State_internal:=1; *)
#282			LD		1	{L:5}
(*) UNDEF
A0016184  F000103B		mov d15, #1

#283			ST		State_internal	{L:5}
(*) USINT
A0016188  48A8CF25		st.h #0x30928, d15 ; ADR 0xC0000928

#284		
#285			(* readIntPar.ipa := 650; *)
#286			LD		650	{L:7}
(*) UNDEF
A001618C  F028A03B		mov d15, #650

#287			ST		readIntPar.ipa	{L:7}
(*) UINT
A0016190  50A2CFA5		st.w #0x30962, d15 ; ADR 0xC0000962

#288		
#289			(* readIntPar() *)
#290			CAL		readIntPar	{L:8}
(*) DINT
A0016194  F53CAF89		st.w [-sp]4, d15 
A0016198  4C000091		movh.a a4, #0xC000 ; ADR EMB-FUNCTION BLOCK AT 0xC0000962
A001619C  50A244D9		lea a4,[a4]0x0962
A00161A0  F8009091		movh.a a15, #0x8009 ; sysDBReadIntegerPar AT 0x80092606
A00161A4  8246FFD9		lea a15,[a15]0x2606
A00161A8  0000000D		nop
A00161AC  00000F2D		calli a15
A00161B0  F1F0200B		mov d15, d2
A00161B4  0104AF09		ld.w d15, [sp+]4

#291		
#292			(* SPEED_REF_IPA:= readIntPar.val ; *)
#293			LD		readIntPar.val	{L:9}
(*) UNDEF
A00161B8  50AACF85		ld.w d15, #0x3096A ; ADR 0xC000096A

#294			ST		SPEED_REF_IPA	{L:9}
(*) DINT
A00161BC  6096CFA5		st.w #0x30996, d15 ; ADR 0xC0000996

#295		
#296			(* AutotuningManager.low_vel_thr:=pLow_Vel_Thr/100.0; *)
#297			LD		pLow_Vel_Thr	{L:11}
(*) UNDEF
A00161C0  D18CCF85		ld.w d15, #0x31B4C ; ADR 0xC0001B4C

#298			DIV		100.0	{L:11}
(*) REAL
A00161C4  800000BB		mov.u d8, #0x0000 ; COSTREAL 100.000000
A00161C8  842C889B		addih d8, d8, #0x42C8
A00161CC  F0518F4B		div.f d15, d15, d8

#299			ST		AutotuningManager.low_vel_thr	{L:11}
(*) REAL
A00161D0  308CCFA5		st.w #0x308CC, d15 ; ADR 0xC00008CC

#300		
#301		
#302			(* IF AutotuningManager.UPDATE_PARAMETERS *)
#303			LD		AutotuningManager.UPDATE_PARAMETERS	{L:12}
(*) UNDEF
A00161D4  30B8CF85		ld.w d15, #0x308F8 ; ADR 0xC00008F8

#304			JMPCN	state_machine/Cycle_state$lab8	{L:12}
(-) BOOL
A00161D8  010E0FDF		jeq d15, #0, #0x010E ; JUMP 0xA00163F4

#305		
#306			(* THEN *)
#307		
#308				(* sysControlMode := 1; *)
#309				LD		1	{L:13}
(*) UNDEF
A00161DC  F000103B		mov d15, #1

#310				ST		sysControlMode	{L:13}
(*) USINT
A00161E0  FC000091		movh.a a15, #0xC000 ; ADR 0xC00045DC
A00161E4  745CFF59		st.w [a15]0x45DC, d15

#311		
#312				(* res := sysDBWriteRealPar(2236,AutotuningManager.Kp_v*PI*2.0/60.0); *)
#313				LD		AutotuningManager.Kp_v	{L:14}
(*) UNDEF
A00161E8  30A4CF85		ld.w d15, #0x308E4 ; ADR 0xC00008E4

#314				MUL		PI	{L:14}
(*) REAL
A00161EC  80FDB0BB		mov.u d8, #0x0FDB ; COSTREAL 3.141593
A00161F0  8404989B		addih d8, d8, #0x4049
A00161F4  F0418F4B		mul.f d15, d15, d8

#315				MUL		2.0	{L:14}
(*) REAL
A00161F8  800000BB		mov.u d8, #0x0000 ; COSTREAL 2.000000
A00161FC  8400089B		addih d8, d8, #0x4000
A0016200  F0418F4B		mul.f d15, d15, d8

#316				DIV		60.0	{L:14}
(*) REAL
A0016204  800000BB		mov.u d8, #0x0000 ; COSTREAL 60.000000
A0016208  8427089B		addih d8, d8, #0x4270
A001620C  F0518F4B		div.f d15, d15, d8

#317				ST		state_machine/Cycle_state$$TEMP2	{L:14}
(*) REAL
A0016210  609ACFA5		st.w #0x3099A, d15 ; ADR 0xC000099A

#318				LD		2236	{L:14}
(*) UNDEF
A0016214  F08BC03B		mov d15, #2236

#319				sysDBWriteRealPar		state_machine/Cycle_state$$TEMP2	{L:14}
(-) UINT
A0016218  609AC585		ld.w d5, #0x3099A ; ADR 0xC000099A
A001621C  41F0F00B		mov d4, d15
A0016220  F8009091		movh.a a15, #0x8009 ; sysDBWriteRealPar AT 0x80092488
A0016224  2248FFD9		lea a15,[a15]0x2488
A0016228  0000000D		nop
A001622C  00000F2D		calli a15
A0016230  F1F0200B		mov d15, d2

#320				ST		res	{L:14}
(*) DINT
A0016234  50BACFA5		st.w #0x3097A, d15 ; ADR 0xC000097A

#321		
#322				(* res := sysDBWriteRealPar(2238,AutotuningManager.Ti_v*1000.0); *)
#323				LD		AutotuningManager.Ti_v	{L:15}
(*) UNDEF
A0016238  30ACCF85		ld.w d15, #0x308EC ; ADR 0xC00008EC

#324				MUL		1000.0	{L:15}
(*) REAL
A001623C  800000BB		mov.u d8, #0x0000 ; COSTREAL 1000.000000
A0016240  8447A89B		addih d8, d8, #0x447A
A0016244  F0418F4B		mul.f d15, d15, d8

#325				ST		state_machine/Cycle_state$$TEMP1	{L:15}
(*) REAL
A0016248  609ECFA5		st.w #0x3099E, d15 ; ADR 0xC000099E

#326				LD		2238	{L:15}
(*) UNDEF
A001624C  F08BE03B		mov d15, #2238

#327				sysDBWriteRealPar		state_machine/Cycle_state$$TEMP1	{L:15}
(-) UINT
A0016250  609EC585		ld.w d5, #0x3099E ; ADR 0xC000099E
A0016254  41F0F00B		mov d4, d15
A0016258  F8009091		movh.a a15, #0x8009 ; sysDBWriteRealPar AT 0x80092488
A001625C  2248FFD9		lea a15,[a15]0x2488
A0016260  0000000D		nop
A0016264  00000F2D		calli a15
A0016268  F1F0200B		mov d15, d2

#328				ST		res	{L:15}
(*) DINT
A001626C  50BACFA5		st.w #0x3097A, d15 ; ADR 0xC000097A

#329		
#330				(* res := sysDBWriteRealPar(3100,AutotuningManager.Jm); *)
#331				LD		3100	{L:17}
(*) UNDEF
A0016270  F0C1C03B		mov d15, #3100

#332				sysDBWriteRealPar		AutotuningManager.Jm	{L:17}
(-) UINT
A0016274  30BCC585		ld.w d5, #0x308FC ; ADR 0xC00008FC
A0016278  41F0F00B		mov d4, d15
A001627C  F8009091		movh.a a15, #0x8009 ; sysDBWriteRealPar AT 0x80092488
A0016280  2248FFD9		lea a15,[a15]0x2488
A0016284  0000000D		nop
A0016288  00000F2D		calli a15
A001628C  F1F0200B		mov d15, d2

#333				ST		res	{L:17}
(*) DINT
A0016290  50BACFA5		st.w #0x3097A, d15 ; ADR 0xC000097A

#334		
#335				(* res := sysDBWriteIntegerPar(3102,2); *)
#336				LD		3102	{L:18}
(*) UNDEF
A0016294  F0C1E03B		mov d15, #3102

#337				sysDBWriteIntegerPar		2	{L:18}
(-) UINT
A0016298  5000203B		mov d5, #2
A001629C  41F0F00B		mov d4, d15
A00162A0  F8009091		movh.a a15, #0x8009 ; sysDBWriteIntegerPar AT 0x80092438
A00162A4  0278FFD9		lea a15,[a15]0x2438
A00162A8  0000000D		nop
A00162AC  00000F2D		calli a15
A00162B0  F1F0200B		mov d15, d2

#338				ST		res	{L:18}
(*) DINT
A00162B4  50BACFA5		st.w #0x3097A, d15 ; ADR 0xC000097A

#339		
#340		
#341				(* IF SEND_MESSAGE *)
#342				LD		SEND_MESSAGE	{L:20}
(*) UNDEF
A00162B8  60A2CF85		ld.w d15, #0x309A2 ; ADR 0xC00009A2

#343				JMPCN	state_machine/Cycle_state$lab6	{L:20}
(-) BOOL
A00162BC  003E0FDF		jeq d15, #0, #0x003E ; JUMP 0xA0016338

#344		
#345				(* THEN *)
#346		
#347					(* sysMsgPlc1	:='UPDATE PARAMETER'; *)
#348					LD		'UPDATE PARAMETER'	{L:22}
(*) UNDEF
A00162C0  F66100BB		mov.u d15, #0x6610 ; 0xA0016610
A00162C4  FA001F9B		addih d15, d15, #0xA001

#349					ST		sysMsgPlc1	{L:22}
(*) STRING
A00162C8  F53CAF89		st.w [-sp]4, d15 
A00162CC  6001303B		mov d6, #19
A00162D0  51F0F00B		mov d5, d15
A00162D4  F803F091		movh.a a15, #0x803F ; ADR 0x803F0264
A00162D8  9024FFD9		lea a15,[a15]0x0264
A00162DC  44C0F001		mov.d d4, a15 ; END Loading Address
A00162E0  F8009091		movh.a a15, #0x8009 ; _tri_strncpy AT 0x800923E0
A00162E4  F220FFD9		lea a15,[a15]0x23E0
A00162E8  0000000D		nop
A00162EC  00000F2D		calli a15
A00162F0  0104AF09		ld.w d15, [sp+]4

#350		
#351					(* TempUI := TO_UINT(vEstBandwidth); *)
#352					LD		vEstBandwidth	{L:23}
(*) UNDEF
A00162F4  121CCF85		ld.w d15, #0x3205C ; ADR 0xC000205C

#353					TO_UINT	{L:23}
(*) REAL
A00162F8  F1210F4B		ftou d15, d15

#354					ST		TempUI	{L:23}
(*) UINT
A00162FC  68A6CF25		st.h #0x309A6, d15 ; ADR 0xC00009A6

#355		
#356					(* res		:= sysKpdWriteMsg(1,TempUI,1); *)
#357					LD		1	{L:25}
(*) UNDEF
A0016300  F000103B		mov d15, #1

#358					sysKpdWriteMsg		TempUI, 1	{L:25}
(-) USINT
A0016304  6000103B		mov d6, #1
A0016308  6CA6C505		ld.hu d5, #0x309A6 ; ADR 0xC00009A6
A001630C  41F0F00B		mov d4, d15
A0016310  F8009091		movh.a a15, #0x8009 ; sysKpdWriteMsg AT 0x800925E0
A0016314  7260FFD9		lea a15,[a15]0x25E0
A0016318  0000000D		nop
A001631C  00000F2D		calli a15
A0016320  F1F0200B		mov d15, d2

#359					ST		res	{L:25}
(*) DINT
A0016324  50BACFA5		st.w #0x3097A, d15 ; ADR 0xC000097A

#360		
#361					(* TimeMsg := 1000; *)
#362					LD		1000	{L:26}
(*) UNDEF
A0016328  F03E803B		mov d15, #1000

#363					ST		TimeMsg	{L:26}
(*) UINT
A001632C  40BECFA5		st.w #0x3093E, d15 ; ADR 0xC000093E

#364		
#365					(* SEND_MESSAGE := FALSE; *)
#366					LD		FALSE	{L:27}
(*) UNDEF
A0016330  F000003B		mov d15, #0

#367					ST		SEND_MESSAGE	{L:27}
(*) BOOL
A0016334  60A2CFA5		st.w #0x309A2, d15 ; ADR 0xC00009A2

#368		
#369		state_machine/Cycle_state$lab6:
#370				(* END_IF *)
#371		
#372		
#373				(* IF AutotuningManager.TUNE_LOW_VEL) *)
#374				LD		AutotuningManager.TUNE_LOW_VEL	{L:31}
(*) UNDEF
A0016338  4080CF85		ld.w d15, #0x30900 ; ADR 0xC0000900

#375				NOT	{L:31}
(*) BOOL
A001633C  8000103B		mov d8, #1
A0016340  9000003B		mov d9, #0
A0016344  FF40892B		sel d15, d15, d9, d8

#376				JMPCN	state_machine/Cycle_state$lab5	{L:31}
(-) BOOL
A0016348  00500FDF		jeq d15, #0, #0x0050 ; JUMP 0xA00163E8

#377		
#378				(* THEN *)
#379		
#380					(* res:=sysDBWriteIntegerPar(2200,AutotuningManager.Kp_high_vel_perc); *)
#381					LD		2200	{L:32}
(*) UNDEF
A001634C  F089803B		mov d15, #2200

#382					sysDBWriteIntegerPar		AutotuningManager.Kp_high_vel_perc	{L:32}
(-) UINT
A0016350  4884C805		ld.h d8, #0x30904 ; ADR 0xC0000904
A0016354  51F0800B		mov d5, d8
A0016358  41F0F00B		mov d4, d15
A001635C  F8009091		movh.a a15, #0x8009 ; sysDBWriteIntegerPar AT 0x80092438
A0016360  0278FFD9		lea a15,[a15]0x2438
A0016364  0000000D		nop
A0016368  00000F2D		calli a15
A001636C  F1F0200B		mov d15, d2

#383					ST		res	{L:32}
(*) DINT
A0016370  50BACFA5		st.w #0x3097A, d15 ; ADR 0xC000097A

#384		
#385					(* res:=sysDBWriteIntegerPar(2202,AutotuningManager.Ti_high_vel_perc); *)
#386					LD		2202	{L:33}
(*) UNDEF
A0016374  F089A03B		mov d15, #2202

#387					sysDBWriteIntegerPar		AutotuningManager.Ti_high_vel_perc	{L:33}
(-) UINT
A0016378  4886C805		ld.h d8, #0x30906 ; ADR 0xC0000906
A001637C  51F0800B		mov d5, d8
A0016380  41F0F00B		mov d4, d15
A0016384  F8009091		movh.a a15, #0x8009 ; sysDBWriteIntegerPar AT 0x80092438
A0016388  0278FFD9		lea a15,[a15]0x2438
A001638C  0000000D		nop
A0016390  00000F2D		calli a15
A0016394  F1F0200B		mov d15, d2

#388					ST		res	{L:33}
(*) DINT
A0016398  50BACFA5		st.w #0x3097A, d15 ; ADR 0xC000097A

#389		
#390					(* res := sysDBWriteRealPar(2218,pLow_Vel_Thr); *)
#391					LD		2218	{L:34}
(*) UNDEF
A001639C  F08AA03B		mov d15, #2218

#392					sysDBWriteRealPar		pLow_Vel_Thr	{L:34}
(-) UINT
A00163A0  D18CC585		ld.w d5, #0x31B4C ; ADR 0xC0001B4C
A00163A4  41F0F00B		mov d4, d15
A00163A8  F8009091		movh.a a15, #0x8009 ; sysDBWriteRealPar AT 0x80092488
A00163AC  2248FFD9		lea a15,[a15]0x2488
A00163B0  0000000D		nop
A00163B4  00000F2D		calli a15
A00163B8  F1F0200B		mov d15, d2

#393					ST		res	{L:34}
(*) DINT
A00163BC  50BACFA5		st.w #0x3097A, d15 ; ADR 0xC000097A

#394		
#395					(* res := sysDBWriteRealPar(2220,2.0); *)
#396					LD		2220	{L:35}
(*) UNDEF
A00163C0  F08AC03B		mov d15, #2220

#397					sysDBWriteRealPar		2.0	{L:35}
(-) UINT
A00163C4  500000BB		mov.u d5, #0x0000 ; COSTREAL 2.000000
A00163C8  5400059B		addih d5, d5, #0x4000
A00163CC  41F0F00B		mov d4, d15
A00163D0  F8009091		movh.a a15, #0x8009 ; sysDBWriteRealPar AT 0x80092488
A00163D4  2248FFD9		lea a15,[a15]0x2488
A00163D8  0000000D		nop
A00163DC  00000F2D		calli a15
A00163E0  F1F0200B		mov d15, d2

#398					ST		res	{L:35}
(*) DINT
A00163E4  50BACFA5		st.w #0x3097A, d15 ; ADR 0xC000097A

#399		
#400		state_machine/Cycle_state$lab5:
#401				(* END_IF *)
#402		
#403				(* AutotuningManager.PARAMETERS_UPDATED:=TRUE; *)
#404				LD		TRUE	{L:39}
(*) UNDEF
A00163E8  F000103B		mov d15, #1

#405				ST		AutotuningManager.PARAMETERS_UPDATED	{L:39}
(*) BOOL
A00163EC  20B4CFA5		st.w #0x308B4, d15 ; ADR 0xC00008B4

#406				JMP		state_machine/Cycle_state$lab7
(-) BOOL
A00163F0  000E001D		j #0x00000E ; JUMP 0xA001640C

#407		state_machine/Cycle_state$lab8:
#408		
#409			(* ELSE *)
#410		
#411		
#412				(* IF TimeMsg = 0 *)
#413				LD		TimeMsg	{L:45}
(*) UNDEF
A00163F4  40BECF85		ld.w d15, #0x3093E ; ADR 0xC000093E

#414				EQ		0	{L:45}
(*) UDINT
A00163F8  8000003B		mov d8, #0
A00163FC  F1008F0B		eq d15, d15, d8

#415				JMPCN	state_machine/Cycle_state$lab4	{L:45}
(-) BOOL
A0016400  00060FDF		jeq d15, #0, #0x0006 ; JUMP 0xA001640C

#416		
#417				(* THEN *)
#418		
#419					(* SEND_MESSAGE := TRUE; *)
#420					LD		TRUE	{L:46}
(*) UNDEF
A0016404  F000103B		mov d15, #1

#421					ST		SEND_MESSAGE	{L:46}
(*) BOOL
A0016408  60A2CFA5		st.w #0x309A2, d15 ; ADR 0xC00009A2

#422		
#423		state_machine/Cycle_state$lab4:
#424				(* END_IF *)
#425		
#426		state_machine/Cycle_state$lab7:
#427			(* END_IF *)
#428		
#429		
#430			(* IF AutotuningManager.END *)
#431			LD		AutotuningManager.END	{L:54}
(*) UNDEF
A001640C  3090CF85		ld.w d15, #0x308D0 ; ADR 0xC00008D0

#432			JMPCN	state_machine/Cycle_state$lab3	{L:54}
(-) BOOL
A0016410  000C0FDF		jeq d15, #0, #0x000C ; JUMP 0xA0016428

#433		
#434			(* THEN *)
#435		
#436				(* AUTOTUNING_STOP := TRUE; *)
#437				LD		TRUE	{L:55}
(*) UNDEF
A0016414  F000103B		mov d15, #1

#438				ST		AUTOTUNING_STOP	{L:55}
(*) BOOL
A0016418  60A8CFA5		st.w #0x309A8, d15 ; ADR 0xC00009A8

#439		
#440				(* pStartAuto := FALSE; *)
#441				LD		FALSE	{L:56}
(*) UNDEF
A001641C  F000003B		mov d15, #0

#442				ST		pStartAuto	{L:56}
(*) BOOL
A0016420  D180CFA5		st.w #0x31B40, d15 ; ADR 0xC0001B40

#443				JMP		state_machine/Cycle_state$lab2
(-) BOOL
A0016424  0006001D		j #0x000006 ; JUMP 0xA0016430

#444		state_machine/Cycle_state$lab3:
#445		
#446			(* ELSE *)
#447		
#448				(* AUTOTUNING_STOP := FALSE; *)
#449				LD		FALSE	{L:58}
(*) UNDEF
A0016428  F000003B		mov d15, #0

#450				ST		AUTOTUNING_STOP	{L:58}
(*) BOOL
A001642C  60A8CFA5		st.w #0x309A8, d15 ; ADR 0xC00009A8

#451		
#452		state_machine/Cycle_state$lab2:
#453			(* END_IF *)
#454		
#455		
#456		(* Test condition TR6 pin_out 0 *)
#457			LD		AUTOTUNING_STOP
(*) UNDEF
A0016430  60A8CF85		ld.w d15, #0x309A8 ; ADR 0xC00009A8

#458			ST		state_machine$$CL_control_state_x
(*) BOOL
A0016434  60ACCFA5		st.w #0x309AC, d15 ; ADR 0xC00009AC

#459			R		state_machine$$Cycle_x
(*) BOOL
A0016438  FC000091		movh.a a15, #0xC000 ; ADR 0xC000098E
A001643C  608EFFD9		lea a15,[a15]0x098E
A0016440  0840F809		ld.bu d8, [a15]
A0016444  8FA008AB		seln d8, d15, d8, #0
A0016448  0800F889		st.b [a15], d8

#460			JMPC	end_state_machine$Cycle
(-) BOOL
A001644C  80100FDF		jne d15, #0, #0x0010 ; JUMP 0xA001646C

#461		
#462		(* Test condition TR6 pin_out 1 *)
#463			LD		ABORT_PROCEDURE
(*) UNDEF
A0016450  6092CF85		ld.w d15, #0x30992 ; ADR 0xC0000992

#464			ST		state_machine$$Jump9_x
(*) BOOL
A0016454  60B0CFA5		st.w #0x309B0, d15 ; ADR 0xC00009B0

#465			R		state_machine$$Cycle_x
(*) BOOL
A0016458  FC000091		movh.a a15, #0xC000 ; ADR 0xC000098E
A001645C  608EFFD9		lea a15,[a15]0x098E
A0016460  0840F809		ld.bu d8, [a15]
A0016464  8FA008AB		seln d8, d15, d8, #0
A0016468  0800F889		st.b [a15], d8

#466		
#467		end_state_machine$Cycle:
#468			LD		state_machine$$CL_control_state_x
(*) UNDEF
A001646C  60ACCF85		ld.w d15, #0x309AC ; ADR 0xC00009AC

#469			JMPCN	end_state_machine$CL_control_state
(-) BOOL
A0016470  00140FDF		jeq d15, #0, #0x0014 ; JUMP 0xA0016498

#470		
#471		(* BODY OF CL_control_state *)
#472		{SRC:state_machine/CL_control}
#473		
#474			(* State_internal := 2; *)
#475			LD		2	{L:4}
(*) UNDEF
A0016474  F000203B		mov d15, #2

#476			ST		State_internal	{L:4}
(*) USINT
A0016478  48A8CF25		st.h #0x30928, d15 ; ADR 0xC0000928

#477		
#478		
#479		(* Test condition TR7 pin_in 0 *)
#480			LD		CL_control_STOP
(*) UNDEF
A001647C  60B4CF85		ld.w d15, #0x309B4 ; ADR 0xC00009B4

#481			ST		state_machine$$Stop_x
(*) BOOL
A0016480  60B8CFA5		st.w #0x309B8, d15 ; ADR 0xC00009B8

#482			R		state_machine$$CL_control_state_x
(*) BOOL
A0016484  FC000091		movh.a a15, #0xC000 ; ADR 0xC00009AC
A0016488  60ACFFD9		lea a15,[a15]0x09AC
A001648C  0840F809		ld.bu d8, [a15]
A0016490  8FA008AB		seln d8, d15, d8, #0
A0016494  0800F889		st.b [a15], d8

#483		
#484		end_state_machine$CL_control_state:
#485			LD		state_machine$$Stop_x
(*) UNDEF
A0016498  60B8CF85		ld.w d15, #0x309B8 ; ADR 0xC00009B8

#486			JMPCN	end_state_machine$Stop
(-) BOOL
A001649C  002C0FDF		jeq d15, #0, #0x002C ; JUMP 0xA00164F4

#487		
#488		(* BODY OF Stop *)
#489		{SRC:state_machine/Stop_state}
#490		
#491			(* ENABLE_CYCLIC_PRG := FALSE; *)
#492			LD		FALSE	{L:1}
(*) UNDEF
A00164A0  F000003B		mov d15, #0

#493			ST		ENABLE_CYCLIC_PRG	{L:1}
(*) BOOL
A00164A4  508ECFA5		st.w #0x3094E, d15 ; ADR 0xC000094E

#494		
#495			(* v_Torque := 0.0; *)
#496			LD		0.0	{L:3}
(*) UNDEF
A00164A8  F00000BB		mov.u d15, #0x0000 ; COSTREAL 0.000000
A00164AC  F0000F9B		addih d15, d15, #0x0000

#497			ST		v_Torque	{L:3}
(*) REAL
A00164B0  0238CFA5		st.w #0x32038, d15 ; ADR 0xC0002038

#498		
#499			(* State_internal:=3; *)
#500			LD		3	{L:4}
(*) UNDEF
A00164B4  F000303B		mov d15, #3

#501			ST		State_internal	{L:4}
(*) USINT
A00164B8  48A8CF25		st.h #0x30928, d15 ; ADR 0xC0000928

#502		
#503		
#504			(* IF pStartAuto *)
#505			LD		pStartAuto	{L:6}
(*) UNDEF
A00164BC  D180CF85		ld.w d15, #0x31B40 ; ADR 0xC0001B40

#506			JMPCN	state_machine/Stop_state$lab10	{L:6}
(-) BOOL
A00164C0  00080FDF		jeq d15, #0, #0x0008 ; JUMP 0xA00164D0

#507		
#508			(* THEN *)
#509		
#510				(* CYCLE_STOP 	:= TRUE; *)
#511				LD		TRUE	{L:7}
(*) UNDEF
A00164C4  F000103B		mov d15, #1

#512				ST		CYCLE_STOP	{L:7}
(*) BOOL
A00164C8  508ACFA5		st.w #0x3094A, d15 ; ADR 0xC000094A

#513				JMP		state_machine/Stop_state$lab9
(-) BOOL
A00164CC  0006001D		j #0x000006 ; JUMP 0xA00164D8

#514		state_machine/Stop_state$lab10:
#515		
#516			(* ELSE *)
#517		
#518				(* CYCLE_STOP 	:= FALSE; *)
#519				LD		FALSE	{L:9}
(*) UNDEF
A00164D0  F000003B		mov d15, #0

#520				ST		CYCLE_STOP	{L:9}
(*) BOOL
A00164D4  508ACFA5		st.w #0x3094A, d15 ; ADR 0xC000094A

#521		
#522		state_machine/Stop_state$lab9:
#523			(* END_IF *)
#524		
#525		
#526		(* Test condition TR5 pin_in 0 *)
#527			LD		CYCLE_STOP
(*) UNDEF
A00164D8  508ACF85		ld.w d15, #0x3094A ; ADR 0xC000094A

#528			ST		state_machine$$Jump8_x
(*) BOOL
A00164DC  60BCCFA5		st.w #0x309BC, d15 ; ADR 0xC00009BC

#529			R		state_machine$$Stop_x
(*) BOOL
A00164E0  FC000091		movh.a a15, #0xC000 ; ADR 0xC00009B8
A00164E4  60B8FFD9		lea a15,[a15]0x09B8
A00164E8  0840F809		ld.bu d8, [a15]
A00164EC  8FA008AB		seln d8, d15, d8, #0
A00164F0  0800F889		st.b [a15], d8

#530		
#531		end_state_machine$Stop:
#532			LD		state_machine$$Jump8_x
(*) UNDEF
A00164F4  60BCCF85		ld.w d15, #0x309BC ; ADR 0xC00009BC

#533			JMPCN	end_state_machine$Jump8
(-) BOOL
A00164F8  00100FDF		jeq d15, #0, #0x0010 ; JUMP 0xA0016518

#534		
#535		(* JUMP TO Init *)
#536			LD		TRUE
(*) UNDEF
A00164FC  F000103B		mov d15, #1

#537			ST		state_machine$$Init_x
(*) BOOL
A0016500  5082CFA5		st.w #0x30942, d15 ; ADR 0xC0000942

#538			R		state_machine$$Jump8_x
(*) BOOL
A0016504  FC000091		movh.a a15, #0xC000 ; ADR 0xC00009BC
A0016508  60BCFFD9		lea a15,[a15]0x09BC
A001650C  0840F809		ld.bu d8, [a15]
A0016510  8FA008AB		seln d8, d15, d8, #0
A0016514  0800F889		st.b [a15], d8

#539		
#540		end_state_machine$Jump8:
#541			LD		state_machine$$Jump9_x
(*) UNDEF
A0016518  60B0CF85		ld.w d15, #0x309B0 ; ADR 0xC00009B0

#542			JMPCN	end_state_machine$Jump9
(-) BOOL
A001651C  00100FDF		jeq d15, #0, #0x0010 ; JUMP 0xA001653C

#543		
#544		(* JUMP TO Init *)
#545			LD		TRUE
(*) UNDEF
A0016520  F000103B		mov d15, #1

#546			ST		state_machine$$Init_x
(*) BOOL
A0016524  5082CFA5		st.w #0x30942, d15 ; ADR 0xC0000942

#547			R		state_machine$$Jump9_x
(*) BOOL
A0016528  FC000091		movh.a a15, #0xC000 ; ADR 0xC00009B0
A001652C  60B0FFD9		lea a15,[a15]0x09B0
A0016530  0840F809		ld.bu d8, [a15]
A0016534  8FA008AB		seln d8, d15, d8, #0
A0016538  0800F889		st.b [a15], d8

A001653C  0180000D		ret

END_PROGRAM


**************************************************
	Target variable image generation
**************************************************


*** INPUT:
A0016540  0180000D		ret


*** OUTPUT:
A0016544  0180000D		ret



**************************************************
	Init code generation for task Background
**************************************************

A0016548  F000103B		mov d15, #1
A001654C  5082CFA5		st.w #0x30942, d15 ; ADR 0xC0000942

A0016550  0180000D		ret



**************************************************
	Global init code generation
**************************************************

A0016570  F000A03B		mov d15, #10
A0016574  485CCF25		st.h #0x3051C, d15 ; ADR 0xC000051C

A0016578  FCCCD0BB		mov.u d15, #0xCCCD ; COSTREAL 0.100000
A001657C  F3DCCF9B		addih d15, d15, #0x3DCC
A0016580  A040CFA5		st.w #0x30680, d15 ; ADR 0xC0000680

A0016584  F00000BB		mov.u d15, #0x0000 ; COSTREAL 10.000000
A0016588  F4120F9B		addih d15, d15, #0x4120
A001658C  A044CFA5		st.w #0x30684, d15 ; ADR 0xC0000684

A0016590  F00000BB		mov.u d15, #0x0000 ; COSTREAL 2.000000
A0016594  F4000F9B		addih d15, d15, #0x4000
A0016598  A04CCFA5		st.w #0x3068C, d15 ; ADR 0xC000068C

A001659C  F00000BB		mov.u d15, #0x0000 ; COSTREAL 2.000000
A00165A0  F4000F9B		addih d15, d15, #0x4000
A00165A4  A050CFA5		st.w #0x30690, d15 ; ADR 0xC0000690

A00165A8  F00000BB		mov.u d15, #0x0000 ; COSTREAL 10.000000
A00165AC  F4120F9B		addih d15, d15, #0x4120
A00165B0  A054CFA5		st.w #0x30694, d15 ; ADR 0xC0000694

A00165B4  F126F0BB		mov.u d15, #0x126F ; COSTREAL 0.001000
A00165B8  F3A83F9B		addih d15, d15, #0x3A83
A00165BC  9068CFA5		st.w #0x30668, d15 ; ADR 0xC0000668

A00165C0  FCCCD0BB		mov.u d15, #0xCCCD ; COSTREAL 0.100000
A00165C4  F3DCCF9B		addih d15, d15, #0x3DCC
A00165C8  B058CFA5		st.w #0x306D8, d15 ; ADR 0xC00006D8

A00165CC  F00000BB		mov.u d15, #0x0000 ; COSTREAL 10.000000
A00165D0  F4120F9B		addih d15, d15, #0x4120
A00165D4  B05CCFA5		st.w #0x306DC, d15 ; ADR 0xC00006DC

A00165D8  F00000BB		mov.u d15, #0x0000 ; COSTREAL 2.000000
A00165DC  F4000F9B		addih d15, d15, #0x4000
A00165E0  B064CFA5		st.w #0x306E4, d15 ; ADR 0xC00006E4

A00165E4  F00000BB		mov.u d15, #0x0000 ; COSTREAL 2.000000
A00165E8  F4000F9B		addih d15, d15, #0x4000
A00165EC  B068CFA5		st.w #0x306E8, d15 ; ADR 0xC00006E8

A00165F0  F00000BB		mov.u d15, #0x0000 ; COSTREAL 10.000000
A00165F4  F4120F9B		addih d15, d15, #0x4120
A00165F8  B06CCFA5		st.w #0x306EC, d15 ; ADR 0xC00006EC

A00165FC  F126F0BB		mov.u d15, #0x126F ; COSTREAL 0.001000
A0016600  F3A83F9B		addih d15, d15, #0x3A83
A0016604  B040CFA5		st.w #0x306C0, d15 ; ADR 0xC00006C0

A0016608  0180000D		ret



********************************************
MEMORY MAP
********************************************

Start code area:			A0010000h
End code area:				A0016622h
Code size:					    6622h

Start local data area:		C00004C0h
End local data area:		C00009C0h
Local data size:			     500h

Start retentive data area:	C0001AC0h
End retentive data area:	C0001AC0h
Retentive data size:		       0h

Start bit data area:		C0001B00h
End bit data area:			C0001B00h
Bit data size:				       0h



----------------------------------
ADDRESS MAP
----------------------------------

               803F0264 (20) sysMsgPlc1
--FREE--       803F0278 (1069613640)
               C00004C0 (4) $$STKLIMIT$$
               C00004C4 (4) InputConv.Krpm
               C00004C8 (4) InputConv.Krad_s
               C00004CC (4) InputConv.KArms
               C00004D0 (4) InputConv.KCnt2Nm
               C00004D4 (4) InputConv.sysPos
               C00004D8 (4) InputConv.sysSpd
               C00004DC (4) InputConv.sysIq
               C00004E0 (4) InputConv.sysTrqRef
               C00004E4 (4) InputConv.PosDINT
               C00004E8 (4) InputConv.offset
               C00004EC (4) InputConv.sysRev
               C00004F0 (4) InputConv._sysTrqNoFilt
               C00004F4 (4) InputConv.pos
               C00004F8 (4) InputConv.vel_rpm
               C00004FC (4) InputConv.vel
               C0000500 (4) InputConv.trq
               C0000504 (4) InputConv.curr
               C0000508 (4) AutotuningManager.ENABLE_VARIANCE
               C000050C (4) AutotuningManager.FLAG
               C0000510 (4) AutotuningManager.FLAG_IMPOSSIBLE
               C0000514 (4) AutotuningManager.FLAG_LIMITS
               C0000518 (4) AutotuningManager.TUNED
               C000051C (2) AutotuningManager.NO_OF_TRIAL
               C000051E (2) AutotuningManager.Wc_counter
               C0000520 (4) AutotuningManager.aux
               C0000524 (4) AutotuningManager.Bm
               C0000528 (4) AutotuningManager.Pos_SP
               C000052C (4) AutotuningManager.PosPreTial
               C0000530 (4) AutotuningManager.Time
               C0000534 (4) AutotuningManager.Time_aux
               C0000538 (4) AutotuningManager.Time_HIGH_VEL
               C000053C (4) AutotuningManager.Time_RLS
               C0000540 (4) AutotuningManager.tmpF
               C0000544 (4) AutotuningManager.TrialTime
               C0000548 (4) AutotuningManager.VARIANCE_THRESHOLD
               C000054C (4) AutotuningManager.Wc_act
               C0000550 (4) AutotuningManager.Wc_high
               C0000554 (4) AutotuningManager.Wc_low
               C0000558 (4) AutotuningManager.Wc_pos
               C000055C (4) AutotuningManager.Wc_Step
               C0000560 (4) AutotuningManager.Wc_vel
               C0000564 (4) AutotuningManager.NoiseLevelID.time
               C0000568 (4) AutotuningManager.NoiseLevelID.fbInit
               C000056C (4) AutotuningManager.NoiseLevelID.timeID
               C0000570 (4) AutotuningManager.NoiseLevelID.signal
               C0000574 (4) AutotuningManager.NoiseLevelID.ENABLE
               C0000578 (4) AutotuningManager.NoiseLevelID.Ts
               C000057C (4) AutotuningManager.NoiseLevelID.noiseLevel
               C0000580 (4) AutotuningManager.NoiseLevelID.END
               C0000584 (4) AutotuningManager.NoiseLevelID_Trj.fbInit
               C0000588 (4) AutotuningManager.NoiseLevelID_Trj.ENABLE
               C000058C (4) AutotuningManager.NoiseLevelID_Trj.reference
               C0000590 (4) AutotuningManager.NoiseLevelID_Trj.TrqRef
               C0000594 (4) AutotuningManager.RAND.rnd_int
               C0000598 (4) AutotuningManager.RAND.a
               C000059C (4) AutotuningManager.RAND.b
               C00005A0 (4) AutotuningManager.RAND.m
               C00005A4 (4) AutotuningManager.RAND.fb_Init
               C00005A8 (4) AutotuningManager.RAND.rnd
               C00005AC (4) AutotuningManager.StaticFrictionID.time
               C00005B0 (2) AutotuningManager.StaticFrictionID.cnt
--FREE--       C00005B2 (2)
               C00005B4 (4) AutotuningManager.StaticFrictionID.$$TMP0
               C00005B8 (4) AutotuningManager.StaticFrictionID.$$TMP1
               C00005BC (4) AutotuningManager.StaticFrictionID.fbInit
               C00005C0 (4) AutotuningManager.StaticFrictionID.input
               C00005C4 (4) AutotuningManager.StaticFrictionID.output
               C00005C8 (4) AutotuningManager.StaticFrictionID.ENABLE
               C00005CC (4) AutotuningManager.StaticFrictionID.Threshold
               C00005D0 (4) AutotuningManager.StaticFrictionID.noiseLevel
               C00005D4 (4) AutotuningManager.StaticFrictionID.staticFriction
               C00005D8 (4) AutotuningManager.StaticFrictionID.END
               C00005DC (4) AutotuningManager.StaticFrictionID_Trj.fbInit
               C00005E0 (4) AutotuningManager.StaticFrictionID_Trj.maxTrq
               C00005E4 (4) AutotuningManager.StaticFrictionID_Trj.TrqResolution
               C00005E8 (4) AutotuningManager.StaticFrictionID_Trj.ENABLE
               C00005EC (4) AutotuningManager.StaticFrictionID_Trj.TrqRef
               C00005F0 (4) AutotuningManager.OL_trj_generator.u_old
               C00005F4 (1) AutotuningManager.OL_trj_generator.state_prec
               C00005F5 (1) AutotuningManager.OL_trj_generator.state
--FREE--       C00005F6 (2)
               C00005F8 (4) AutotuningManager.OL_trj_generator.rand.rnd_int
               C00005FC (4) AutotuningManager.OL_trj_generator.rand.a
               C0000600 (4) AutotuningManager.OL_trj_generator.rand.b
               C0000604 (4) AutotuningManager.OL_trj_generator.rand.m
               C0000608 (4) AutotuningManager.OL_trj_generator.rand.fb_Init
               C000060C (4) AutotuningManager.OL_trj_generator.rand.rnd
               C0000610 (4) AutotuningManager.OL_trj_generator.STOPPING
               C0000614 (4) AutotuningManager.OL_trj_generator.vel
               C0000618 (4) AutotuningManager.OL_trj_generator.pos
               C000061C (4) AutotuningManager.OL_trj_generator.fbInit
               C0000620 (4) AutotuningManager.OL_trj_generator.maxTRQ
               C0000624 (4) AutotuningManager.OL_trj_generator.maxVEL
               C0000628 (4) AutotuningManager.OL_trj_generator.maxPOS
               C000062C (4) AutotuningManager.OL_trj_generator.minPOS
               C0000630 (4) AutotuningManager.OL_trj_generator.minVEL
               C0000634 (4) AutotuningManager.OL_trj_generator.minTRQ
               C0000638 (4) AutotuningManager.OL_trj_generator.STOP
               C000063C (4) AutotuningManager.OL_trj_generator.staticFriction
               C0000640 (4) AutotuningManager.OL_trj_generator.u
               C0000644 (4) AutotuningManager.OL_trj_generator.STOPPED
               C0000648 (4) AutotuningManager.PIDp.uns
               C000064C (4) AutotuningManager.PIDp.uk
               C0000650 (4) AutotuningManager.PIDp.ui_prec
               C0000654 (4) AutotuningManager.PIDp.ui
               C0000658 (4) AutotuningManager.PIDp.ud_prec
               C000065C (4) AutotuningManager.PIDp.ud
               C0000660 (4) AutotuningManager.PIDp.tr_prec
               C0000664 (4) AutotuningManager.PIDp.tr
               C0000668 (4) AutotuningManager.PIDp.st
               C000066C (4) AutotuningManager.PIDp.e_prec
               C0000670 (4) AutotuningManager.PIDp.e
               C0000674 (4) AutotuningManager.PIDp.fbInit
               C0000678 (4) AutotuningManager.PIDp.y_ref
               C000067C (4) AutotuningManager.PIDp.y
               C0000680 (4) AutotuningManager.PIDp.Kp
               C0000684 (4) AutotuningManager.PIDp.N
               C0000688 (4) AutotuningManager.PIDp.Td
               C000068C (4) AutotuningManager.PIDp.Ti
               C0000690 (4) AutotuningManager.PIDp.Tt
               C0000694 (4) AutotuningManager.PIDp.Vmax
               C0000698 (4) AutotuningManager.PIDp.Vmin
               C000069C (4) AutotuningManager.PIDp.u
               C00006A0 (4) AutotuningManager.PIDv.uns
               C00006A4 (4) AutotuningManager.PIDv.uk
               C00006A8 (4) AutotuningManager.PIDv.ui_prec
               C00006AC (4) AutotuningManager.PIDv.ui
               C00006B0 (4) AutotuningManager.PIDv.ud_prec
               C00006B4 (4) AutotuningManager.PIDv.ud
               C00006B8 (4) AutotuningManager.PIDv.tr_prec
               C00006BC (4) AutotuningManager.PIDv.tr
               C00006C0 (4) AutotuningManager.PIDv.st
               C00006C4 (4) AutotuningManager.PIDv.e_prec
               C00006C8 (4) AutotuningManager.PIDv.e
               C00006CC (4) AutotuningManager.PIDv.fbInit
               C00006D0 (4) AutotuningManager.PIDv.y_ref
               C00006D4 (4) AutotuningManager.PIDv.y
               C00006D8 (4) AutotuningManager.PIDv.Kp
               C00006DC (4) AutotuningManager.PIDv.N
               C00006E0 (4) AutotuningManager.PIDv.Td
               C00006E4 (4) AutotuningManager.PIDv.Ti
               C00006E8 (4) AutotuningManager.PIDv.Tt
               C00006EC (4) AutotuningManager.PIDv.Vmax
               C00006F0 (4) AutotuningManager.PIDv.Vmin
               C00006F4 (4) AutotuningManager.PIDv.u
               C00006F8 (4) AutotuningManager.fb_RLS.vel_sign
               C00006FC (4) AutotuningManager.fb_RLS.vel_prec
               C0000700 (4) AutotuningManager.fb_RLS.innovation
               C0000704 (1) AutotuningManager.fb_RLS.i
--FREE--       C0000705 (3)
               C0000708 (4) AutotuningManager.fb_RLS.acc
               C000070C (4) AutotuningManager.fb_RLS.Time
               C0000710 (16) AutotuningManager.fb_RLS.Q_old
               C0000720 (16) AutotuningManager.fb_RLS.Q
               C0000730 (8) AutotuningManager.fb_RLS.PARAM
               C0000738 (4) AutotuningManager.fb_RLS.$$TMP2
               C000073C (4) AutotuningManager.fb_RLS.$$TMP3
               C0000740 (4) AutotuningManager.fb_RLS.$$TMP4
               C0000744 (4) AutotuningManager.fb_RLS.$$TMP5
               C0000748 (4) AutotuningManager.fb_RLS.$$TMP6
               C000074C (4) AutotuningManager.fb_RLS.$$TMP7
               C0000750 (4) AutotuningManager.fb_RLS.$$TMP8
               C0000754 (4) AutotuningManager.fb_RLS.$$TMP9
               C0000758 (4) AutotuningManager.fb_RLS.$$TMP10
               C000075C (4) AutotuningManager.fb_RLS.$$TMP11
               C0000760 (4) AutotuningManager.fb_RLS.$$TMP12
               C0000764 (4) AutotuningManager.fb_RLS.S
               C0000768 (4) AutotuningManager.fb_RLS.y
               C000076C (4) AutotuningManager.fb_RLS.vel
               C0000770 (4) AutotuningManager.fb_RLS.Ts
               C0000774 (4) AutotuningManager.fb_RLS.Time_max
               C0000778 (1) AutotuningManager.fb_RLS.ssMethodType
--FREE--       C0000779 (3)
               C000077C (4) AutotuningManager.fb_RLS.Jm
               C0000780 (4) AutotuningManager.fb_RLS.Bm
               C0000784 (4) AutotuningManager.fb_RLS.END
               C0000788 (1) AutotuningManager.fb_Tune_PID.ssMethodType
--FREE--       C0000789 (3)
               C000078C (4) AutotuningManager.fb_Tune_PID.kk
               C0000790 (4) AutotuningManager.fb_Tune_PID.beta
               C0000794 (4) AutotuningManager.fb_Tune_PID.K
               C0000798 (4) AutotuningManager.fb_Tune_PID.P
               C000079C (4) AutotuningManager.fb_Tune_PID.A
               C00007A0 (4) AutotuningManager.fb_Tune_PID.B
               C00007A4 (4) AutotuningManager.fb_Tune_PID.ONLY_kpv
               C00007A8 (4) AutotuningManager.fb_Tune_PID.$$TMP0
               C00007AC (4) AutotuningManager.fb_Tune_PID.$$TMP1
               C00007B0 (4) AutotuningManager.fb_Tune_PID.$$TMP2
               C00007B4 (4) AutotuningManager.fb_Tune_PID.$$TMP3
               C00007B8 (4) AutotuningManager.fb_Tune_PID.$$TMP4
               C00007BC (4) AutotuningManager.fb_Tune_PID.$$TMP5
               C00007C0 (4) AutotuningManager.fb_Tune_PID.$$TMP6
               C00007C4 (4) AutotuningManager.fb_Tune_PID.$$TMP7
               C00007C8 (4) AutotuningManager.fb_Tune_PID.$$TMP8
               C00007CC (4) AutotuningManager.fb_Tune_PID.$$TMP9
               C00007D0 (4) AutotuningManager.fb_Tune_PID.$$TMP10
               C00007D4 (4) AutotuningManager.fb_Tune_PID.$$TMP11
               C00007D8 (4) AutotuningManager.fb_Tune_PID.$$TMP14
               C00007DC (4) AutotuningManager.fb_Tune_PID.$$TMP15
               C00007E0 (4) AutotuningManager.fb_Tune_PID.$$TMP16
               C00007E4 (4) AutotuningManager.fb_Tune_PID.$$TMP17
               C00007E8 (4) AutotuningManager.fb_Tune_PID.$$TMP18
               C00007EC (4) AutotuningManager.fb_Tune_PID.$$TMP19
               C00007F0 (4) AutotuningManager.fb_Tune_PID.$$TMP20
               C00007F4 (4) AutotuningManager.fb_Tune_PID.$$TMP21
               C00007F8 (4) AutotuningManager.fb_Tune_PID.phi_m_v
               C00007FC (4) AutotuningManager.fb_Tune_PID.phi_m_p
               C0000800 (4) AutotuningManager.fb_Tune_PID.Wc_pos
               C0000804 (4) AutotuningManager.fb_Tune_PID.Wc_vel
               C0000808 (4) AutotuningManager.fb_Tune_PID.Jm
               C000080C (4) AutotuningManager.fb_Tune_PID.Bm
               C0000810 (1) AutotuningManager.fb_Tune_PID.TUNE
--FREE--       C0000811 (3)
               C0000814 (4) AutotuningManager.fb_Tune_PID.ti_v
               C0000818 (4) AutotuningManager.fb_Tune_PID.kp_v
               C000081C (4) AutotuningManager.fb_Tune_PID.ti_p
               C0000820 (4) AutotuningManager.fb_Tune_PID.kp_p
               C0000824 (4) AutotuningManager.fb_Tune_PID.td_p
               C0000828 (4) AutotuningManager.fb_Tune_PID.td_v
               C000082C (4) AutotuningManager.fb_VARIANCE.SUM_X
               C0000830 (4) AutotuningManager.fb_VARIANCE.SUM_X_sqr
               C0000834 (4) AutotuningManager.fb_VARIANCE.N
               C0000838 (4) AutotuningManager.fb_VARIANCE.SIGMA_SQRD
               C000083C (4) AutotuningManager.fb_VARIANCE.$$TMP0
               C0000840 (4) AutotuningManager.fb_VARIANCE.$$TMP1
               C0000844 (4) AutotuningManager.fb_VARIANCE.$$TMP2
               C0000848 (4) AutotuningManager.fb_VARIANCE.INPUT
               C000084C (1) AutotuningManager.fb_VARIANCE.ssMethodType
--FREE--       C000084D (3)
               C0000850 (4) AutotuningManager.fb_VARIANCE.SIGMA
               C0000854 (4) AutotuningManager.$$TMP2
               C0000858 (4) AutotuningManager.$$TMP3
               C000085C (4) AutotuningManager.$$TMP4
               C0000860 (4) AutotuningManager.$$TMP5
               C0000864 (4) AutotuningManager.$$TMP6
               C0000868 (4) AutotuningManager.$$TMP7
               C000086C (4) AutotuningManager.$$TMP8
               C0000870 (4) AutotuningManager.$$TMP22
               C0000874 (4) AutotuningManager.$$TMP23
               C0000878 (4) AutotuningManager.$$TMP30
               C000087C (4) AutotuningManager.$$TMP31
               C0000880 (4) AutotuningManager.$$TMP38
               C0000884 (4) AutotuningManager.$$TMP39
               C0000888 (4) AutotuningManager.fbInit
               C000088C (4) AutotuningManager.ENABLE
               C0000890 (4) AutotuningManager.Speed
               C0000894 (4) AutotuningManager.Position
               C0000898 (4) AutotuningManager.maxTrq
               C000089C (4) AutotuningManager.maxVel
               C00008A0 (4) AutotuningManager.maxPos
               C00008A4 (4) AutotuningManager.Ts
               C00008A8 (4) AutotuningManager.Time_identification
               C00008AC (4) AutotuningManager.phi_m_v
               C00008B0 (4) AutotuningManager.phi_m_p
               C00008B4 (4) AutotuningManager.PARAMETERS_UPDATED
               C00008B8 (4) AutotuningManager.Torque_ref
               C00008BC (4) AutotuningManager.minPos
               C00008C0 (4) AutotuningManager.minVel
               C00008C4 (4) AutotuningManager.MaxWc
               C00008C8 (4) AutotuningManager.MinWc
               C00008CC (4) AutotuningManager.low_vel_thr
               C00008D0 (4) AutotuningManager.END
               C00008D4 (4) AutotuningManager.Torque
               C00008D8 (4) AutotuningManager.staticFriction
               C00008DC (1) AutotuningManager.state
--FREE--       C00008DD (3)
               C00008E0 (4) AutotuningManager.noiseLevel
               C00008E4 (4) AutotuningManager.Kp_v
               C00008E8 (4) AutotuningManager.Kp_p
               C00008EC (4) AutotuningManager.Ti_v
               C00008F0 (4) AutotuningManager.Ti_p
               C00008F4 (4) AutotuningManager.Vel_SP
               C00008F8 (4) AutotuningManager.UPDATE_PARAMETERS
               C00008FC (4) AutotuningManager.Jm
               C0000900 (4) AutotuningManager.TUNE_LOW_VEL
               C0000904 (2) AutotuningManager.Kp_high_vel_perc
               C0000906 (2) AutotuningManager.Ti_high_vel_perc
               C0000908 (4) sysSpd
               C000090C (4) sysPos
               C0000910 (4) sysIq
               C0000914 (4) sysRev
               C0000918 (4) sysTrqNoFilt
               C000091C (4) Torque_bis
               C0000920 (4) sysTrqRefNoFilt
               C0000924 (4) StartCND
               C0000928 (2) State_internal
               C000092A (4) VEL_SP_
               C000092E (4) VEL_TESTING
               C0000932 (4) MaxTorque
               C0000936 (4) KNm2Cnt
               C000093A (4) FullScaleSpeed
               C000093E (4) TimeMsg
               C0000942 (4) state_machine$$Init_x
               C0000946 (4) INIT_END
               C000094A (4) CYCLE_STOP
               C000094E (4) ENABLE_CYCLIC_PRG
               C0000952 (4) readRealPar.ipa
               C0000956 (4) readRealPar.result
               C000095A (4) readRealPar.val
               C000095E (4) DriveRatCur
               C0000962 (4) readIntPar.ipa
               C0000966 (4) readIntPar.result
               C000096A (4) readIntPar.val
               C000096E (4) RatCur
               C0000972 (4) RatKTrq
               C0000976 (4) RatedTorque
               C000097A (4) res
               C000097E (4) MaxSpeed
               C0000982 (4) MaxPosition
               C0000986 (4) MotorInertia
               C000098A (2) state_machine/Init_state$$TEMP0
               C000098C (2) state_of_the_machine
               C000098E (4) state_machine$$Cycle_x
               C0000992 (4) ABORT_PROCEDURE
               C0000996 (4) SPEED_REF_IPA
               C000099A (4) state_machine/Cycle_state$$TEMP2
               C000099E (4) state_machine/Cycle_state$$TEMP1
               C00009A2 (4) SEND_MESSAGE
               C00009A6 (2) TempUI
               C00009A8 (4) AUTOTUNING_STOP
               C00009AC (4) state_machine$$CL_control_state_x
               C00009B0 (4) state_machine$$Jump9_x
               C00009B4 (4) CL_control_STOP
               C00009B8 (4) state_machine$$Stop_x
               C00009BC (4) state_machine$$Jump8_x
--FREE--       C00009C0 (4464)
               C0001B30 (4) pMaxTorque
               C0001B34 (4) pMaxSpeed
               C0001B38 (4) pMaxPos
               C0001B3C (4) pMotJ
               C0001B40 (4) pStartAuto
               C0001B44 (4) pMinWc
               C0001B48 (4) pMaxWc
               C0001B4C (4) pLow_Vel_Thr
               C0001B50 (4) pOscillationTollerance
--FREE--       C0001B54 (1244)
               C0002030 (4) v_Position
               C0002034 (4) v_Speed
               C0002038 (4) v_Torque
--FREE--       C000203C (8)
               C0002044 (2) vStateMachine
--FREE--       C0002046 (2)
               C0002048 (4) vEstInertia
               C000204C (4) vEstStatFrict
               C0002050 (4) vEstDynFrict
               C0002054 (4) vCalcKpSp
               C0002058 (4) vCalcTiSp
               C000205C (4) vEstBandwidth
--FREE--       C0002060 (9596)
               C00045DC (4) sysControlMode
--FREE--       C00045E0 (268428296)
               D00029E8 (4) sysPad10
               D00029EC (4) sysPad11
--FREE--       D00029F0 (316)
               D0002B2C (4) sysTrqFFwd
--FREE--       D0002B30 (392)
               D0002CB8 (4) sysSpeedPosPulsesPerRev
--FREE--       D0002CBC (2068)
               D00034D0 (4) sysTrqRef
--FREE--       D00034D4 (1868)
               D0003C20 (4) sysEnableStatus
               D0003C24 (4) sysStartStatus
--FREE--       D0003C28 (220)
               D0003D04 (4) sysSpdRef1
               D0003D08 (4) sysSpdRef2


